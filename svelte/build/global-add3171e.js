var rt=Object.defineProperty;var lt=(e,t,n)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var V=(e,t,n)=>(lt(e,typeof t!="symbol"?t+"":t,n),n);function S(){}const Me=e=>e;function at(e,t){for(const n in t)e[n]=t[n];return e}function Xe(e){return e()}function De(){return Object.create(null)}function R(e){e.forEach(Xe)}function Y(e){return typeof e=="function"}function Ht(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ce;function Gt(e,t){return e===t?!0:(ce||(ce=document.createElement("a")),ce.href=t,e===ce.href)}function oe(e,t){return e!=e?t==t:e!==t}function ot(e){return Object.keys(e).length===0}function ft(e,...t){if(e==null){for(const i of t)i(void 0);return S}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Jt(e){let t;return ft(e,n=>t=n)(),t}function Kt(e,t,n,i){if(e){const s=Ye(e,t,n,i);return e[0](s)}}function Ye(e,t,n,i){return e[1]&&i?at(n.ctx.slice(),e[1](i(t))):n.ctx}function Qt(e,t,n,i){if(e[2]&&i){const s=e[2](i(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const r=[],l=Math.max(t.dirty.length,s.length);for(let a=0;a<l;a+=1)r[a]=t.dirty[a]|s[a];return r}return t.dirty|s}return t.dirty}function Xt(e,t,n,i,s,r){if(s){const l=Ye(t,n,i,r);e.p(l,s)}}function Yt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function Ze(e){return e&&Y(e.destroy)?e.destroy:S}function Zt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const $e=typeof window<"u";let Ne=$e?()=>window.performance.now():()=>Date.now(),qe=$e?e=>requestAnimationFrame(e):S;const ee=new Set;function xe(e){ee.forEach(t=>{t.c(e)||(ee.delete(t),t.f())}),ee.size!==0&&qe(xe)}function Ae(e){let t;return ee.size===0&&qe(xe),{promise:new Promise(n=>{ee.add(t={c:e,f:n})}),abort(){ee.delete(t)}}}function C(e,t){e.appendChild(t)}function et(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ut(e){const t=L("style");return t.textContent="/* empty */",ct(et(e),t),t.sheet}function ct(e,t){return C(e.head||e,t),t.sheet}function z(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function $t(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function L(e){return document.createElement(e)}function dt(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ie(e){return document.createTextNode(e)}function D(){return ie(" ")}function ke(){return ie("")}function ne(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function xt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function en(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function y(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function mt(e){return Array.from(e.childNodes)}function ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function tn(e,t){e.value=t??""}function nn(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function sn(e,t,n){for(let i=0;i<e.options.length;i+=1){const s=e.options[i];if(s.__value===t){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function rn(e){const t=e.querySelector(":checked");return t&&t.__value}let de;function ht(){if(de===void 0){de=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{de=!0}}return de}function ln(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=L("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=ht();let r;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=ne(window,"message",l=>{l.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=ne(i.contentWindow,"resize",t),t()}),C(e,i),()=>{(s||r&&i.contentWindow)&&r(),j(i)}}function J(e,t,n){e.classList.toggle(t,!!n)}function _t(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}class an{constructor(t=!1){V(this,"is_svg",!1);V(this,"e");V(this,"n");V(this,"t");V(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=dt(n.nodeName):this.e=L(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)z(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(j)}}const _e=new Map;let ge=0;function gt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function bt(e,t){const n={stylesheet:ut(t),rules:{}};return _e.set(e,n),n}function be(e,t,n,i,s,r,l,a=0){const c=16.666/i;let u=`{
`;for(let g=0;g<=1;g+=c){const P=t+(n-t)*r(g);u+=g*100+`%{${l(P,1-P)}}
`}const _=u+`100% {${l(n,1-n)}}
}`,f=`__svelte_${gt(_)}_${a}`,o=et(e),{stylesheet:d,rules:m}=_e.get(o)||bt(o,e);m[f]||(m[f]=!0,d.insertRule(`@keyframes ${f} ${_}`,d.cssRules.length));const h=e.style.animation||"";return e.style.animation=`${h?`${h}, `:""}${f} ${i}ms linear ${s}ms 1 both`,ge+=1,f}function we(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=n.length-i.length;s&&(e.style.animation=i.join(", "),ge-=s,ge||wt())}function wt(){qe(()=>{ge||(_e.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)}),_e.clear())})}let le;function re(e){le=e}function Le(){if(!le)throw new Error("Function called outside component initialization");return le}function on(e){Le().$$.on_mount.push(e)}function fn(e){Le().$$.after_update.push(e)}function un(e){Le().$$.on_destroy.push(e)}const x=[],Oe=[];let te=[];const Ce=[],tt=Promise.resolve();let Ee=!1;function nt(){Ee||(Ee=!0,tt.then(it))}function cn(){return nt(),tt}function X(e){te.push(e)}function dn(e){Ce.push(e)}const ye=new Set;let $=0;function it(){if($!==0)return;const e=le;do{try{for(;$<x.length;){const t=x[$];$++,re(t),vt(t.$$)}}catch(t){throw x.length=0,$=0,t}for(re(null),x.length=0,$=0;Oe.length;)Oe.pop()();for(let t=0;t<te.length;t+=1){const n=te[t];ye.has(n)||(ye.add(n),n())}te.length=0}while(x.length);for(;Ce.length;)Ce.pop()();Ee=!1,ye.clear(),re(e)}function vt(e){if(e.fragment!==null){e.update(),R(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}function yt(e){const t=[],n=[];te.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),te=t}let se;function Ie(){return se||(se=Promise.resolve(),se.then(()=>{se=null})),se}function Q(e,t,n){e.dispatchEvent(_t(`${t?"intro":"outro"}${n}`))}const he=new Set;let W;function H(){W={r:0,c:[],p:W}}function G(){W.r||R(W.c),W=W.p}function p(e,t){e&&e.i&&(he.delete(e),e.i(t))}function N(e,t,n,i){if(e&&e.o){if(he.has(e))return;he.add(e),W.c.push(()=>{he.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Se={duration:0};function mn(e,t,n){const i={direction:"in"};let s=t(e,n,i),r=!1,l,a,c=0;function u(){l&&we(e,l)}function _(){const{delay:o=0,duration:d=300,easing:m=Me,tick:h=S,css:g}=s||Se;g&&(l=be(e,0,1,d,o,m,g,c++)),h(0,1);const P=Ne()+o,b=P+d;a&&a.abort(),r=!0,X(()=>Q(e,!0,"start")),a=Ae(k=>{if(r){if(k>=b)return h(1,0),Q(e,!0,"end"),u(),r=!1;if(k>=P){const E=m((k-P)/d);h(E,1-E)}}return r})}let f=!1;return{start(){f||(f=!0,we(e),Y(s)?(s=s(i),Ie().then(_)):_())},invalidate(){f=!1},end(){r&&(u(),r=!1)}}}function hn(e,t,n){const i={direction:"out"};let s=t(e,n,i),r=!0,l;const a=W;a.r+=1;let c;function u(){const{delay:_=0,duration:f=300,easing:o=Me,tick:d=S,css:m}=s||Se;m&&(l=be(e,1,0,f,_,o,m));const h=Ne()+_,g=h+f;X(()=>Q(e,!1,"start")),"inert"in e&&(c=e.inert,e.inert=!0),Ae(P=>{if(r){if(P>=g)return d(0,1),Q(e,!1,"end"),--a.r||R(a.c),!1;if(P>=h){const b=o((P-h)/f);d(1-b,b)}}return r})}return Y(s)?Ie().then(()=>{s=s(i),u()}):u(),{end(_){_&&"inert"in e&&(e.inert=c),_&&s.tick&&s.tick(1,0),r&&(l&&we(e,l),r=!1)}}}function _n(e,t,n,i){let r=t(e,n,{direction:"both"}),l=i?0:1,a=null,c=null,u=null,_;function f(){u&&we(e,u)}function o(m,h){const g=m.b-l;return h*=Math.abs(g),{a:l,b:m.b,d:g,duration:h,start:m.start,end:m.start+h,group:m.group}}function d(m){const{delay:h=0,duration:g=300,easing:P=Me,tick:b=S,css:k}=r||Se,E={start:Ne()+h,b:m};m||(E.group=W,W.r+=1),"inert"in e&&(m?_!==void 0&&(e.inert=_):(_=e.inert,e.inert=!0)),a||c?c=E:(k&&(f(),u=be(e,l,m,g,h,P,k)),m&&b(0,1),a=o(E,g),X(()=>Q(e,m,"start")),Ae(M=>{if(c&&M>c.start&&(a=o(c,g),c=null,Q(e,a.b,"start"),k&&(f(),u=be(e,l,a.b,a.duration,0,P,r.css))),a){if(M>=a.end)b(l=a.b,1-l),Q(e,a.b,"end"),c||(a.b?f():--a.group.r||R(a.group.c)),a=null;else if(M>=a.start){const T=M-a.start;l=a.a+a.d*P(T/a.duration),b(l,1-l)}}return!!(a||c)}))}return{run(m){Y(r)?Ie().then(()=>{r=r({direction:m?"in":"out"}),d(m)}):d(m)},end(){f(),a=c=null}}}function me(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function gn(e,t){e.d(1),t.delete(e.key)}function Pe(e,t){N(e,1,1,()=>{t.delete(e.key)})}function bn(e,t){e.f(),Pe(e,t)}function ze(e,t,n,i,s,r,l,a,c,u,_,f){let o=e.length,d=r.length,m=o;const h={};for(;m--;)h[e[m].key]=m;const g=[],P=new Map,b=new Map,k=[];for(m=d;m--;){const A=f(s,r,m),I=n(A);let O=l.get(I);O?i&&k.push(()=>O.p(A,t)):(O=u(I,A),O.c()),P.set(I,g[m]=O),I in h&&b.set(I,Math.abs(m-h[I]))}const E=new Set,M=new Set;function T(A){p(A,1),A.m(a,_),l.set(A.key,A),_=A.first,d--}for(;o&&d;){const A=g[d-1],I=e[o-1],O=A.key,K=I.key;A===I?(_=A.first,o--,d--):P.has(K)?!l.has(O)||E.has(O)?T(A):M.has(K)?o--:b.get(O)>b.get(K)?(M.add(O),T(A)):(E.add(K),o--):(c(I,l),o--)}for(;o--;){const A=e[o];P.has(A.key)||c(A,l)}for(;d;)T(g[d-1]);return R(k),g}function wn(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function B(e){e&&e.c()}function U(e,t,n){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),X(()=>{const r=e.$$.on_mount.map(Xe).filter(Y);e.$$.on_destroy?e.$$.on_destroy.push(...r):R(r),e.$$.on_mount=[]}),s.forEach(X)}function F(e,t){const n=e.$$;n.fragment!==null&&(yt(n.after_update),R(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(e,t){e.$$.dirty[0]===-1&&(x.push(e),nt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(e,t,n,i,s,r,l,a=[-1]){const c=le;re(e);const u=e.$$={fragment:null,ctx:[],props:r,update:S,not_equal:s,bound:De(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(c?c.$$.context:[])),callbacks:De(),dirty:a,skip_bound:!1,root:t.target||c.$$.root};l&&l(u.root);let _=!1;if(u.ctx=n?n(e,t.props||{},(f,o,...d)=>{const m=d.length?d[0]:o;return u.ctx&&s(u.ctx[f],u.ctx[f]=m)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](m),_&&pt(e,f)),o}):[],u.update(),_=!0,R(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const f=mt(t.target);u.fragment&&u.fragment.l(f),f.forEach(j)}else u.fragment&&u.fragment.c();t.intro&&p(e.$$.fragment),U(e,t.target,t.anchor),it()}re(c)}class ue{constructor(){V(this,"$$");V(this,"$$set")}$destroy(){F(this,1),this.$destroy=S}$on(t,n){if(!Y(n))return S;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kt);function Ct(e,t){function n(i){i.target instanceof Element&&!e.contains(i.target)&&t()}return document.addEventListener("click",n,{capture:!0,passive:!0}),document.addEventListener("keyup",n,{capture:!0,passive:!0}),{update(i){t=i},destroy(){document.removeEventListener("click",n,{capture:!0}),document.removeEventListener("keyup",n,{capture:!0})}}}const pe={};async function Et(e){return pe[e]==null&&(pe[e]=await new Promise(t=>{window.require([e],t)})),pe[e]}var Pt=(e=>(e[e.NotDeleted=0]="NotDeleted",e[e.Deleted=1]="Deleted",e[e.DeletedForever=2]="DeletedForever",e))(Pt||{}),Mt=(e=>(e.TO="to",e.CC="cc",e.BCC="bcc",e))(Mt||{});async function Nt(e){const t=await Et("core/ajax");return await Promise.all(t.call(Array.from(e).map(({methodname:i,...s})=>({methodname:`local_mail_${i}`,args:s}))))}function qt(){return st()+"preferences.php"}function ae(e){var n,i,s,r,l,a,c,u;let t=st()+"view.php?t="+e.tray;return e.courseid&&(t+="&c="+e.courseid),e.tray=="label"&&e.labelid&&(t+="&l="+e.labelid),e.messageid&&(t+="&m="+e.messageid),e.search&&e.offset&&(t+="&o="+e.offset),(n=e.search)!=null&&n.content&&(t+="&q="+e.search.content),(i=e.search)!=null&&i.sendername&&(t+="&qs="+e.search.sendername),(s=e.search)!=null&&s.recipientname&&(t+="&qr="+e.search.recipientname),(r=e.search)!=null&&r.unread&&(t+="&u=1"),(l=e.search)!=null&&l.withfilesonly&&(t+="&f=1"),(a=e.search)!=null&&a.maxtime&&(t+="&d="+e.search.maxtime),(c=e.search)!=null&&c.startid&&(t+="&s="+e.search.startid),(u=e.search)!=null&&u.reverse&&(t+="&r=1"),t}function vn(){const e=new URL(window.location.href),t={tray:e.searchParams.get("t")||"inbox",courseid:parseInt(e.searchParams.get("c")||"")||void 0,labelid:parseInt(e.searchParams.get("l")||"")||void 0,messageid:parseInt(e.searchParams.get("m")||"")||void 0,offset:parseInt(e.searchParams.get("o")||"")||void 0},n={content:e.searchParams.get("q")||void 0,sendername:e.searchParams.get("qs")||void 0,recipientname:e.searchParams.get("qr")||void 0,unread:e.searchParams.get("u")=="1"||void 0,withfilesonly:e.searchParams.get("f")=="1"||void 0,maxtime:parseInt(e.searchParams.get("d")||"")||void 0,startid:parseInt(e.searchParams.get("s")||"")||void 0,reverse:e.searchParams.get("r")=="1"||void 0};return Object.values(n).some(i=>i!=null)?{...t,search:n}:t}function yn(e,t){const n=new URL(ae(e));n.search!=window.location.search&&(t?window.history.replaceState(void 0,"",n.toString()):window.history.pushState(void 0,"",n.toString()))}function st(){return window.M.cfg.wwwroot+"/local/mail/"}function At(e){let t,n,i,s,r=e[0].compose+"",l,a,c,u;return{c(){t=L("button"),n=L("i"),i=D(),s=L("span"),l=ie(r),y(n,"class","icon fa fa-edit mr-0 mr-sm-1"),y(s,"class","d-none d-sm-inline"),y(t,"type","button"),y(t,"class","btn btn-primary text-truncate px-2 px-sm-3"),y(t,"aria-label",a=e[0].compose)},m(_,f){z(_,t,f),C(t,n),C(t,i),C(t,s),C(s,l),c||(u=ne(t,"click",e[1]),c=!0)},p(_,[f]){f&1&&r!==(r=_[0].compose+"")&&ve(l,r),f&1&&a!==(a=_[0].compose)&&y(t,"aria-label",a)},i:S,o:S,d(_){_&&j(t),c=!1,u()}}}function Lt(e,t,n){let{strings:i}=t,{courseid:s=void 0}=t,{courses:r}=t,{onClick:l}=t,{onError:a}=t;const c=async u=>{const _={methodname:"create_message",courseid:s||r[0].id};let f;try{f=await Nt([_])}catch(d){a?a(d):alert(d.message);return}const o={tray:"drafts",messageid:f.pop(),courseid:_.courseid};l?(u.preventDefault(),l(o)):window.location.href=ae(o)};return e.$$set=u=>{"strings"in u&&n(0,i=u.strings),"courseid"in u&&n(2,s=u.courseid),"courses"in u&&n(3,r=u.courses),"onClick"in u&&n(4,l=u.onClick),"onError"in u&&n(5,a=u.onError)},[i,c,s,r,l,a]}class It extends ue{constructor(t){super(),fe(this,t,Lt,At,oe,{strings:0,courseid:2,courses:3,onClick:4,onError:5})}}function St(e,t){function n(){e.offsetWidth<e.scrollWidth?e.setAttribute("title",t):e.removeAttribute("title")}return e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.addEventListener("mouseenter",n),{destroy(){e.removeEventListener("mouseenter",n,!0)}}}function Te(e){let t,n;return{c(){t=L("span"),n=ie(e[3]),y(t,"class","local-mail-menu-item-count badge")},m(i,s){z(i,t,s),C(t,n)},p(i,s){s&8&&ve(n,i[3])},d(i){i&&j(t)}}}function jt(e){let t,n,i,s,r,l,a,c,u,_,f,o,d,m=e[3]>0&&Te(e);return{c(){t=L("a"),n=L("i"),r=D(),l=L("span"),a=ie(e[1]),u=D(),m&&m.c(),y(n,"class",i="fa "+e[0]+" fa-fw"),y(n,"aria-hidden","true"),y(n,"style",s=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-bg, var(--local-mail-color-gray-bg));`:""),y(l,"class","flex-fill px-2"),y(t,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2"),y(t,"aria-current",e[5]),y(t,"aria-disabled",e[4]),y(t,"role","tab"),y(t,"href",_=ae(e[2])),y(t,"style",f=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-fg, var(--local-mail-color-gray-fg));`:""),J(t,"list-group-item-primary",e[5]),J(t,"disabled",e[4])},m(h,g){z(h,t,g),C(t,n),C(t,r),C(t,l),C(l,a),C(t,u),m&&m.m(t,null),o||(d=[Ze(c=St.call(null,l,e[1])),ne(t,"click",e[7])],o=!0)},p(h,[g]){g&1&&i!==(i="fa "+h[0]+" fa-fw")&&y(n,"class",i),g&96&&s!==(s=h[6]!=null&&!h[5]?`color: var(--local-mail-color-${h[6]}-bg, var(--local-mail-color-gray-bg));`:"")&&y(n,"style",s),g&2&&ve(a,h[1]),c&&Y(c.update)&&g&2&&c.update.call(null,h[1]),h[3]>0?m?m.p(h,g):(m=Te(h),m.c(),m.m(t,null)):m&&(m.d(1),m=null),g&32&&y(t,"aria-current",h[5]),g&16&&y(t,"aria-disabled",h[4]),g&4&&_!==(_=ae(h[2]))&&y(t,"href",_),g&96&&f!==(f=h[6]!=null&&!h[5]?`color: var(--local-mail-color-${h[6]}-fg, var(--local-mail-color-gray-fg));`:"")&&y(t,"style",f),g&32&&J(t,"list-group-item-primary",h[5]),g&16&&J(t,"disabled",h[4])},i:S,o:S,d(h){h&&j(t),m&&m.d(),o=!1,R(d)}}}function Dt(e,t,n){let{icon:i}=t,{text:s}=t,{params:r}=t,{count:l=0}=t,{disabled:a=!1}=t,{active:c=!1}=t,{color:u=void 0}=t,{onClick:_=void 0}=t;const f=o=>{_&&(o.preventDefault(),_(r))};return e.$$set=o=>{"icon"in o&&n(0,i=o.icon),"text"in o&&n(1,s=o.text),"params"in o&&n(2,r=o.params),"count"in o&&n(3,l=o.count),"disabled"in o&&n(4,a=o.disabled),"active"in o&&n(5,c=o.active),"color"in o&&n(6,u=o.color),"onClick"in o&&n(8,_=o.onClick)},[i,s,r,l,a,c,u,f,_]}class Z extends ue{constructor(t){super(),fe(this,t,Dt,jt,oe,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function Ue(e,t,n){const i=e.slice();return i[13]=t[n],i}function Fe(e,t,n){const i=e.slice();return i[16]=t[n],i}function We(e){var i;let t,n;return t=new Z({props:{icon:"fa-star",text:e[1].starredmail,params:{tray:"starred",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="starred",onClick:e[7]}}),{c(){B(t.$$.fragment)},m(s,r){U(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].starredmail),r&1536&&(l.params={tray:"starred",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="starred"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){F(t,s)}}}function Be(e){var i;let t,n;return t=new Z({props:{icon:"fa-paper-plane",text:e[1].sentmail,params:{tray:"sent",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="sent",onClick:e[7]}}),{c(){B(t.$$.fragment)},m(s,r){U(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].sentmail),r&1536&&(l.params={tray:"sent",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="sent"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){F(t,s)}}}function Re(e){var i;let t,n;return t=new Z({props:{icon:"fa-file",text:e[1].drafts,count:e[3],params:{tray:"drafts",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="drafts",onClick:e[7]}}),{c(){B(t.$$.fragment)},m(s,r){U(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].drafts),r&8&&(l.count=s[3]),r&1536&&(l.params={tray:"drafts",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="drafts"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){F(t,s)}}}function Ve(e){var i;let t,n;return t=new Z({props:{icon:"fa-trash",text:e[1].trash,params:{tray:"trash",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="trash",onClick:e[7]}}),{c(){B(t.$$.fragment)},m(s,r){U(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].trash),r&1536&&(l.params={tray:"trash",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="trash"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(p(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){F(t,s)}}}function He(e,t){var r,l;let n,i,s;return i=new Z({props:{icon:"fa-tag",text:t[16].name,count:t[16].unread,color:t[16].color,params:{tray:"label",labelid:t[16].id,courseid:t[10],search:t[9]},active:((r=t[6])==null?void 0:r.tray)=="label"&&((l=t[6])==null?void 0:l.labelid)==t[16].id,onClick:t[7]}}),{key:e,first:null,c(){n=ke(),B(i.$$.fragment),this.first=n},m(a,c){z(a,n,c),U(i,a,c),s=!0},p(a,c){var _,f;t=a;const u={};c&32&&(u.text=t[16].name),c&32&&(u.count=t[16].unread),c&32&&(u.color=t[16].color),c&1568&&(u.params={tray:"label",labelid:t[16].id,courseid:t[10],search:t[9]}),c&96&&(u.active=((_=t[6])==null?void 0:_.tray)=="label"&&((f=t[6])==null?void 0:f.labelid)==t[16].id),c&128&&(u.onClick=t[7]),i.$set(u)},i(a){s||(p(i.$$.fragment,a),s=!0)},o(a){N(i.$$.fragment,a),s=!1},d(a){a&&j(n),F(i,a)}}}function Ge(e){var i,s;let t,n;return t=new Z({props:{icon:"fa-university",text:e[0].coursetraysname=="fullname"?e[13].fullname:e[13].shortname,count:e[13].unread,params:{tray:"course",courseid:e[13].id,search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="course"&&((s=e[6])==null?void 0:s.courseid)==e[13].id,onClick:e[7]}}),{c(){B(t.$$.fragment)},m(r,l){U(t,r,l),n=!0},p(r,l){var c,u;const a={};l&17&&(a.text=r[0].coursetraysname=="fullname"?r[13].fullname:r[13].shortname),l&16&&(a.count=r[13].unread),l&528&&(a.params={tray:"course",courseid:r[13].id,search:r[9]}),l&80&&(a.active=((c=r[6])==null?void 0:c.tray)=="course"&&((u=r[6])==null?void 0:u.courseid)==r[13].id),l&128&&(a.onClick=r[7]),t.$set(a)},i(r){n||(p(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){F(t,r)}}}function Je(e,t){let n,i=t[11](t[13]),s,r,l=i&&Ge(t);return{key:e,first:null,c(){n=ke(),l&&l.c(),s=ke(),this.first=n},m(a,c){z(a,n,c),l&&l.m(a,c),z(a,s,c),r=!0},p(a,c){t=a,c&2064&&(i=t[11](t[13])),i?l?(l.p(t,c),c&2064&&p(l,1)):(l=Ge(t),l.c(),p(l,1),l.m(s.parentNode,s)):l&&(H(),N(l,1,1,()=>{l=null}),G())},i(a){r||(p(l),r=!0)},o(a){N(l),r=!1},d(a){a&&(j(n),j(s)),l&&l.d(a)}}}function Ot(e){var K;let t,n,i,s=e[12]("starred"),r,l=e[12]("sent"),a,c=e[12]("drafts"),u,_=e[12]("trash"),f,o=[],d=new Map,m,h=[],g=new Map,P;n=new Z({props:{icon:"fa-inbox",text:e[1].inbox,count:e[2],params:{tray:"inbox",courseid:e[10],search:e[9]},active:((K=e[6])==null?void 0:K.tray)=="inbox",onClick:e[7]}});let b=s&&We(e),k=l&&Be(e),E=c&&Re(e),M=_&&Ve(e),T=me(e[5]);const A=v=>v[16].id;for(let v=0;v<T.length;v+=1){let w=Fe(e,T,v),q=A(w);d.set(q,o[v]=He(q,w))}let I=me(e[4]);const O=v=>v[13].id;for(let v=0;v<I.length;v+=1){let w=Ue(e,I,v),q=O(w);g.set(q,h[v]=Je(q,w))}return{c(){t=L("div"),B(n.$$.fragment),i=D(),b&&b.c(),r=D(),k&&k.c(),a=D(),E&&E.c(),u=D(),M&&M.c(),f=D();for(let v=0;v<o.length;v+=1)o[v].c();m=D();for(let v=0;v<h.length;v+=1)h[v].c();y(t,"class","list-group"),J(t,"list-group-flush",e[8])},m(v,w){z(v,t,w),U(n,t,null),C(t,i),b&&b.m(t,null),C(t,r),k&&k.m(t,null),C(t,a),E&&E.m(t,null),C(t,u),M&&M.m(t,null),C(t,f);for(let q=0;q<o.length;q+=1)o[q]&&o[q].m(t,null);C(t,m);for(let q=0;q<h.length;q+=1)h[q]&&h[q].m(t,null);P=!0},p(v,[w]){var je;const q={};w&2&&(q.text=v[1].inbox),w&4&&(q.count=v[2]),w&1536&&(q.params={tray:"inbox",courseid:v[10],search:v[9]}),w&64&&(q.active=((je=v[6])==null?void 0:je.tray)=="inbox"),w&128&&(q.onClick=v[7]),n.$set(q),w&4096&&(s=v[12]("starred")),s?b?(b.p(v,w),w&4096&&p(b,1)):(b=We(v),b.c(),p(b,1),b.m(t,r)):b&&(H(),N(b,1,1,()=>{b=null}),G()),w&4096&&(l=v[12]("sent")),l?k?(k.p(v,w),w&4096&&p(k,1)):(k=Be(v),k.c(),p(k,1),k.m(t,a)):k&&(H(),N(k,1,1,()=>{k=null}),G()),w&4096&&(c=v[12]("drafts")),c?E?(E.p(v,w),w&4096&&p(E,1)):(E=Re(v),E.c(),p(E,1),E.m(t,u)):E&&(H(),N(E,1,1,()=>{E=null}),G()),w&4096&&(_=v[12]("trash")),_?M?(M.p(v,w),w&4096&&p(M,1)):(M=Ve(v),M.c(),p(M,1),M.m(t,f)):M&&(H(),N(M,1,1,()=>{M=null}),G()),w&1760&&(T=me(v[5]),H(),o=ze(o,w,A,1,v,T,d,t,Pe,He,m,Fe),G()),w&2769&&(I=me(v[4]),H(),h=ze(h,w,O,1,v,I,g,t,Pe,Je,null,Ue),G()),(!P||w&256)&&J(t,"list-group-flush",v[8])},i(v){if(!P){p(n.$$.fragment,v),p(b),p(k),p(E),p(M);for(let w=0;w<T.length;w+=1)p(o[w]);for(let w=0;w<I.length;w+=1)p(h[w]);P=!0}},o(v){N(n.$$.fragment,v),N(b),N(k),N(E),N(M);for(let w=0;w<o.length;w+=1)N(o[w]);for(let w=0;w<h.length;w+=1)N(h[w]);P=!1},d(v){v&&j(t),F(n),b&&b.d(),k&&k.d(),E&&E.d(),M&&M.d();for(let w=0;w<o.length;w+=1)o[w].d();for(let w=0;w<h.length;w+=1)h[w].d()}}}function zt(e,t,n){let i,s,r,l,{settings:a}=t,{strings:c}=t,{unread:u}=t,{drafts:_}=t,{courses:f}=t,{labels:o}=t,{params:d=void 0}=t,{onClick:m=void 0}=t,{flush:h=!1}=t;return e.$$set=g=>{"settings"in g&&n(0,a=g.settings),"strings"in g&&n(1,c=g.strings),"unread"in g&&n(2,u=g.unread),"drafts"in g&&n(3,_=g.drafts),"courses"in g&&n(4,f=g.courses),"labels"in g&&n(5,o=g.labels),"params"in g&&n(6,d=g.params),"onClick"in g&&n(7,m=g.onClick),"flush"in g&&n(8,h=g.flush)},e.$$.update=()=>{e.$$.dirty&65&&n(12,i=g=>a.globaltrays.includes(g)||(d==null?void 0:d.tray)==g),e.$$.dirty&65&&n(11,s=g=>a.coursetrays=="all"||a.coursetrays=="unread"&&g.unread>0||(d==null?void 0:d.tray)=="course"&&(d==null?void 0:d.courseid)==g.id),e.$$.dirty&64&&n(10,r=(d==null?void 0:d.tray)!="course"?d==null?void 0:d.courseid:void 0),e.$$.dirty&64&&n(9,l=d!=null&&d.search?{content:d.search.content,sendername:d.search.sendername,recipientname:d.search.recipientname,maxtime:d.search.maxtime,unread:d.search.unread,withfilesonly:d.search.withfilesonly}:void 0)},[a,c,u,_,f,o,d,m,h,l,r,s,i]}class Tt extends ue{constructor(t){super(),fe(this,t,zt,Ot,oe,{settings:0,strings:1,unread:2,drafts:3,courses:4,labels:5,params:6,onClick:7,flush:8})}}function Ut(e){let t,n,i;return{c(){t=L("a"),n=L("i"),y(n,"class","fa fa-cog"),y(n,"aria-hidden",!0),y(t,"class","btn btn-secondary text-truncate"),y(t,"role","button"),y(t,"href",qt()),y(t,"title",i=e[0].preferences)},m(s,r){z(s,t,r),C(t,n)},p(s,[r]){r&1&&i!==(i=s[0].preferences)&&y(t,"title",i)},i:S,o:S,d(s){s&&j(t)}}}function Ft(e,t,n){let{strings:i}=t;return e.$$set=s=>{"strings"in s&&n(0,i=s.strings)},[i]}class Wt extends ue{constructor(t){super(),fe(this,t,Ft,Ut,oe,{strings:0})}}function Ke(e){let t,n;return{c(){t=L("div"),n=ie(e[2]),y(t,"class","local-mail-navbar-count count-container svelte-1878hq5")},m(i,s){z(i,t,s),C(t,n)},p(i,s){s&4&&ve(n,i[2])},d(i){i&&j(t)}}}function Qe(e){let t,n,i,s,r,l,a,c,u,_;return i=new It({props:{strings:e[1],courses:e[4],onClick:e[7],onError:e[8]}}),r=new Wt({props:{strings:e[1]}}),u=new Tt({props:{settings:e[0],strings:e[1],unread:e[2],drafts:e[3],courses:e[4],labels:e[5],params:e[6],onClick:e[7]?e[13]:void 0,flush:!0}}),{c(){t=L("div"),n=L("div"),B(i.$$.fragment),s=D(),B(r.$$.fragment),l=D(),a=L("hr"),c=D(),B(u.$$.fragment),y(n,"class","d-flex justify-content-between pl-3 pr-2 py-2"),y(a,"class","m-0"),y(t,"class","local-mail-navbar-dropdown dropdown-menu dropdown-menu-right show p-0 overflow-auto svelte-1878hq5")},m(f,o){z(f,t,o),C(t,n),U(i,n,null),C(n,s),U(r,n,null),C(t,l),C(t,a),C(t,c),U(u,t,null),_=!0},p(f,o){const d={};o&2&&(d.strings=f[1]),o&16&&(d.courses=f[4]),o&128&&(d.onClick=f[7]),o&256&&(d.onError=f[8]),i.$set(d);const m={};o&2&&(m.strings=f[1]),r.$set(m);const h={};o&1&&(h.settings=f[0]),o&2&&(h.strings=f[1]),o&4&&(h.unread=f[2]),o&8&&(h.drafts=f[3]),o&16&&(h.courses=f[4]),o&32&&(h.labels=f[5]),o&64&&(h.params=f[6]),o&128&&(h.onClick=f[7]?f[13]:void 0),u.$set(h)},i(f){_||(p(i.$$.fragment,f),p(r.$$.fragment,f),p(u.$$.fragment,f),_=!0)},o(f){N(i.$$.fragment,f),N(r.$$.fragment,f),N(u.$$.fragment,f),_=!1},d(f){f&&j(t),F(i),F(r),F(u)}}}function Bt(e){let t,n,i,s,r,l,a,c,u,_;X(e[14]);let f=e[2]>0&&Ke(e),o=e[9]&&Qe(e);return{c(){t=L("div"),n=L("a"),i=L("i"),r=D(),f&&f.c(),a=D(),o&&o.c(),y(i,"class","fa fa-fw fa-envelope-o"),y(i,"aria-label",s=e[1].plugginname),y(n,"aria-expanded",e[9]),y(n,"aria-label",l=e[1].togglemailmenu),y(n,"class","btn h-100 position-relative d-flex align-items-center px-2 py-0"),y(n,"href",ae({tray:"inbox"})),y(t,"class","local-mail-navbar dropdown h-100 svelte-1878hq5"),J(t,"position-static",e[10]<768)},m(d,m){z(d,t,m),C(t,n),C(n,i),C(n,r),f&&f.m(n,null),C(t,a),o&&o.m(t,null),c=!0,u||(_=[ne(window,"resize",e[14]),ne(n,"click",e[12]),Ze(Ct.call(null,t,e[11]))],u=!0)},p(d,[m]){(!c||m&2&&s!==(s=d[1].plugginname))&&y(i,"aria-label",s),d[2]>0?f?f.p(d,m):(f=Ke(d),f.c(),f.m(n,null)):f&&(f.d(1),f=null),(!c||m&512)&&y(n,"aria-expanded",d[9]),(!c||m&2&&l!==(l=d[1].togglemailmenu))&&y(n,"aria-label",l),d[9]?o?(o.p(d,m),m&512&&p(o,1)):(o=Qe(d),o.c(),p(o,1),o.m(t,null)):o&&(H(),N(o,1,1,()=>{o=null}),G()),(!c||m&1024)&&J(t,"position-static",d[10]<768)},i(d){c||(p(o),c=!0)},o(d){N(o),c=!1},d(d){d&&j(t),f&&f.d(),o&&o.d(),u=!1,R(_)}}}function Rt(e,t,n){let{settings:i}=t,{strings:s}=t,{unread:r}=t,{drafts:l}=t,{courses:a}=t,{labels:c}=t,{params:u=void 0}=t,{onClick:_=void 0}=t,{onError:f=void 0}=t,o=!1,d;const m=()=>{n(9,o=!1)},h=b=>{i.globaltrays.length>0||c.length>0?(n(9,o=!o),b.preventDefault()):_&&(b.preventDefault(),_({tray:"inbox"}))},g=b=>{n(9,o=!1),_==null||_(b)};function P(){n(10,d=window.innerWidth)}return e.$$set=b=>{"settings"in b&&n(0,i=b.settings),"strings"in b&&n(1,s=b.strings),"unread"in b&&n(2,r=b.unread),"drafts"in b&&n(3,l=b.drafts),"courses"in b&&n(4,a=b.courses),"labels"in b&&n(5,c=b.labels),"params"in b&&n(6,u=b.params),"onClick"in b&&n(7,_=b.onClick),"onError"in b&&n(8,f=b.onError)},[i,s,r,l,a,c,u,_,f,o,d,m,h,g,P]}class pn extends ue{constructor(t){super(),fe(this,t,Rt,Bt,oe,{settings:0,strings:1,unread:2,drafts:3,courses:4,labels:5,params:6,onClick:7,onError:8})}}export{gn as $,Xt as A,Yt as B,Qt as C,Pt as D,p as E,X as F,_n as G,N as H,j as I,R as J,on as K,un as L,Oe as M,ke as N,H as O,G as P,B as Q,Mt as R,ue as S,U as T,F as U,ft as V,J as W,me as X,tn as Y,xt as Z,ze as _,Ne as a,nn as a0,ln as a1,en as a2,St as a3,Pe as a4,mn as a5,ae as a6,bn as a7,hn as a8,$t as a9,Gt as aa,cn as ab,an as ac,sn as ad,rn as ae,Et as af,wn as ag,dn as ah,fn as ai,It as aj,Tt as ak,pn as al,Nt as b,be as c,we as d,yn as e,vn as f,Jt as g,Zt as h,Me as i,fe as j,oe as k,Ae as l,Kt as m,S as n,D as o,L as p,y as q,z as r,Ht as s,ie as t,C as u,ne as v,Y as w,Ze as x,Ct as y,ve as z};
