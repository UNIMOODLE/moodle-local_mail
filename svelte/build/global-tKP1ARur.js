var vt=Object.defineProperty;var Ct=(t,e,n)=>e in t?vt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>(Ct(t,typeof e!="symbol"?e+"":e,n),n);function B(){}const qe=t=>t;function Pt(t,e){for(const n in e)t[n]=e[n];return t}function mt(t){return t()}function Ke(){return Object.create(null)}function W(t){t.forEach(mt)}function G(t){return typeof t=="function"}function un(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let we;function cn(t,e){return t===e?!0:(we||(we=document.createElement("a")),we.href=e,t===we.href)}function ae(t,e){return t!=t?e==e:t!==e}function St(t){return Object.keys(t).length===0}function dn(t,...e){if(t==null){for(const i of e)i(void 0);return B}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function mn(t,e,n,i){if(t){const s=ht(t,e,n,i);return t[0](s)}}function ht(t,e,n,i){return t[1]&&i?Pt(n.ctx.slice(),t[1](i(e))):n.ctx}function hn(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const r=[],l=Math.max(e.dirty.length,s.length);for(let a=0;a<l;a+=1)r[a]=e.dirty[a]|s[a];return r}return e.dirty|s}return e.dirty}function gn(t,e,n,i,s,r){if(s){const l=ht(e,n,i,r);t.p(l,s)}}function _n(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function _e(t){return t&&G(t.destroy)?t.destroy:B}function bn(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const gt=typeof window<"u";let je=gt?()=>window.performance.now():()=>Date.now(),Be=gt?t=>requestAnimationFrame(t):B;const se=new Set;function _t(t){se.forEach(e=>{e.c(t)||(se.delete(e),e.f())}),se.size!==0&&Be(_t)}function Re(t){let e;return se.size===0&&Be(_t),{promise:new Promise(n=>{se.add(e={c:t,f:n})}),abort(){se.delete(e)}}}function C(t,e){t.appendChild(e)}function bt(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Et(t){const e=N("style");return e.textContent="/* empty */",Mt(bt(t),e),e.sheet}function Mt(t,e){return C(t.head||t,e),e.sheet}function U(t,e,n){t.insertBefore(e,n||null)}function D(t){t.parentNode&&t.parentNode.removeChild(t)}function pn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function N(t){return document.createElement(t)}function Lt(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Y(t){return document.createTextNode(t)}function q(){return Y(" ")}function Ae(){return Y("")}function F(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function wn(t){return function(e){return e.preventDefault(),t.call(this,e)}}function yn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function g(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Nt(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ge(t,e){t.value=e??""}function he(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function kn(t,e,n){for(let i=0;i<t.options.length;i+=1){const s=t.options[i];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function vn(t){const e=t.querySelector(":checked");return e&&e.__value}let ye;function At(){if(ye===void 0){ye=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ye=!0}}return ye}function Cn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=N("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=At();let r;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=F(window,"message",l=>{l.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{r=F(i.contentWindow,"resize",e),e()}),C(t,i),()=>{(s||r&&i.contentWindow)&&r(),D(i)}}function M(t,e,n){t.classList.toggle(e,!!n)}function It(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class Tt{constructor(e=!1){$(this,"is_svg",!1);$(this,"e");$(this,"n");$(this,"t");$(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=Lt(n.nodeName):this.e=N(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)U(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(D)}}const ve=new Map;let Ce=0;function Dt(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ot(t,e){const n={stylesheet:Et(e),rules:{}};return ve.set(t,n),n}function Pe(t,e,n,i,s,r,l,a=0){const f=16.666/i;let o=`{
`;for(let w=0;w<=1;w+=f){const A=e+(n-e)*r(w);o+=w*100+`%{${l(A,1-A)}}
`}const u=o+`100% {${l(n,1-n)}}
}`,m=`__svelte_${Dt(u)}_${a}`,c=bt(t),{stylesheet:d,rules:h}=ve.get(c)||Ot(c,t);h[m]||(h[m]=!0,d.insertRule(`@keyframes ${m} ${u}`,d.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${m} ${i}ms linear ${s}ms 1 both`,Ce+=1,m}function Se(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?r=>r.indexOf(e)<0:r=>r.indexOf("__svelte")===-1),s=n.length-i.length;s&&(t.style.animation=i.join(", "),Ce-=s,Ce||Ut())}function Ut(){Be(()=>{Ce||(ve.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&D(e)}),ve.clear())})}let ge;function de(t){ge=t}function Fe(){if(!ge)throw new Error("Function called outside component initialization");return ge}function Pn(t){Fe().$$.on_mount.push(t)}function Sn(t){Fe().$$.after_update.push(t)}function En(t){Fe().$$.on_destroy.push(t)}const ne=[],Ie=[];let re=[];const Te=[],pt=Promise.resolve();let De=!1;function wt(){De||(De=!0,pt.then(yt))}function qt(){return wt(),pt}function le(t){re.push(t)}function Mn(t){Te.push(t)}const Le=new Set;let te=0;function yt(){if(te!==0)return;const t=ge;do{try{for(;te<ne.length;){const e=ne[te];te++,de(e),jt(e.$$)}}catch(e){throw ne.length=0,te=0,e}for(de(null),ne.length=0,te=0;Ie.length;)Ie.pop()();for(let e=0;e<re.length;e+=1){const n=re[e];Le.has(n)||(Le.add(n),n())}re.length=0}while(ne.length);for(;Te.length;)Te.pop()();De=!1,Le.clear(),de(t)}function jt(t){if(t.fragment!==null){t.update(),W(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(le)}}function Bt(t){const e=[],n=[];re.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),re=e}let ce;function ze(){return ce||(ce=Promise.resolve(),ce.then(()=>{ce=null})),ce}function x(t,e,n){t.dispatchEvent(It(`${e?"intro":"outro"}${n}`))}const ke=new Set;let J;function Q(){J={r:0,c:[],p:J}}function X(){J.r||W(J.c),J=J.p}function L(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function T(t,e,n,i){if(t&&t.o){if(ke.has(t))return;ke.add(t),J.c.push(()=>{ke.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const He={duration:0};function Ln(t,e,n){const i={direction:"in"};let s=e(t,n,i),r=!1,l,a,f=0;function o(){l&&Se(t,l)}function u(){const{delay:c=0,duration:d=300,easing:h=qe,tick:y=B,css:w}=s||He;w&&(l=Pe(t,0,1,d,c,h,w,f++)),y(0,1);const A=je()+c,k=A+d;a&&a.abort(),r=!0,le(()=>x(t,!0,"start")),a=Re(v=>{if(r){if(v>=k)return y(1,0),x(t,!0,"end"),o(),r=!1;if(v>=A){const S=h((v-A)/d);y(S,1-S)}}return r})}let m=!1;return{start(){m||(m=!0,Se(t),G(s)?(s=s(i),ze().then(u)):u())},invalidate(){m=!1},end(){r&&(o(),r=!1)}}}function Nn(t,e,n){const i={direction:"out"};let s=e(t,n,i),r=!0,l;const a=J;a.r+=1;let f;function o(){const{delay:u=0,duration:m=300,easing:c=qe,tick:d=B,css:h}=s||He;h&&(l=Pe(t,1,0,m,u,c,h));const y=je()+u,w=y+m;le(()=>x(t,!1,"start")),"inert"in t&&(f=t.inert,t.inert=!0),Re(A=>{if(r){if(A>=w)return d(0,1),x(t,!1,"end"),--a.r||W(a.c),!1;if(A>=y){const k=c((A-y)/m);d(1-k,k)}}return r})}return G(s)?ze().then(()=>{s=s(i),o()}):o(),{end(u){u&&"inert"in t&&(t.inert=f),u&&s.tick&&s.tick(1,0),r&&(l&&Se(t,l),r=!1)}}}function An(t,e,n,i){let r=e(t,n,{direction:"both"}),l=i?0:1,a=null,f=null,o=null,u;function m(){o&&Se(t,o)}function c(h,y){const w=h.b-l;return y*=Math.abs(w),{a:l,b:h.b,d:w,duration:y,start:h.start,end:h.start+y,group:h.group}}function d(h){const{delay:y=0,duration:w=300,easing:A=qe,tick:k=B,css:v}=r||He,S={start:je()+y,b:h};h||(S.group=J,J.r+=1),"inert"in t&&(h?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),a||f?f=S:(v&&(m(),o=Pe(t,l,h,w,y,A,v)),h&&k(0,1),a=c(S,w),le(()=>x(t,h,"start")),Re(b=>{if(f&&b>f.start&&(a=c(f,w),f=null,x(t,a.b,"start"),v&&(m(),o=Pe(t,l,a.b,a.duration,0,A,r.css))),a){if(b>=a.end)k(l=a.b,1-l),x(t,a.b,"end"),f||(a.b?m():--a.group.r||W(a.group.c)),a=null;else if(b>=a.start){const I=b-a.start;l=a.a+a.d*A(I/a.duration),k(l,1-l)}}return!!(a||f)}))}return{run(h){G(r)?ze().then(()=>{r=r({direction:h?"in":"out"}),d(h)}):d(h)},end(){m(),a=f=null}}}function ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Rt(t,e){t.d(1),e.delete(t.key)}function Oe(t,e){T(t,1,1,()=>{e.delete(t.key)})}function In(t,e){t.f(),Oe(t,e)}function Ue(t,e,n,i,s,r,l,a,f,o,u,m){let c=t.length,d=r.length,h=c;const y={};for(;h--;)y[t[h].key]=h;const w=[],A=new Map,k=new Map,v=[];for(h=d;h--;){const P=m(s,r,h),j=n(P);let R=l.get(j);R?i&&v.push(()=>R.p(P,e)):(R=o(j,P),R.c()),A.set(j,w[h]=R),j in y&&k.set(j,Math.abs(h-y[j]))}const S=new Set,b=new Set;function I(P){L(P,1),P.m(a,u),l.set(P.key,P),u=P.first,d--}for(;c&&d;){const P=w[d-1],j=t[c-1],R=P.key,z=j.key;P===j?(u=P.first,c--,d--):A.has(z)?!l.has(R)||S.has(R)?I(P):b.has(z)?c--:k.get(R)>k.get(z)?(b.add(R),I(P)):(S.add(z),c--):(f(j,l),c--)}for(;c--;){const P=t[c];A.has(P.key)||f(P,l)}for(;d;)I(w[d-1]);return W(v),w}function Tn(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function K(t){t&&t.c()}function H(t,e,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),le(()=>{const r=t.$$.on_mount.map(mt).filter(G);t.$$.on_destroy?t.$$.on_destroy.push(...r):W(r),t.$$.on_mount=[]}),s.forEach(le)}function V(t,e){const n=t.$$;n.fragment!==null&&(Bt(n.after_update),W(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Ft(t,e){t.$$.dirty[0]===-1&&(ne.push(t),wt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function oe(t,e,n,i,s,r,l=null,a=[-1]){const f=ge;de(t);const o=t.$$={fragment:null,ctx:[],props:r,update:B,not_equal:s,bound:Ke(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Ke(),dirty:a,skip_bound:!1,root:e.target||f.$$.root};l&&l(o.root);let u=!1;if(o.ctx=n?n(t,e.props||{},(m,c,...d)=>{const h=d.length?d[0]:c;return o.ctx&&s(o.ctx[m],o.ctx[m]=h)&&(!o.skip_bound&&o.bound[m]&&o.bound[m](h),u&&Ft(t,m)),c}):[],o.update(),u=!0,W(o.before_update),o.fragment=i?i(o.ctx):!1,e.target){if(e.hydrate){const m=Nt(e.target);o.fragment&&o.fragment.l(m),m.forEach(D)}else o.fragment&&o.fragment.c();e.intro&&L(t.$$.fragment),H(t,e.target,e.anchor),yt()}de(f)}class fe{constructor(){$(this,"$$");$(this,"$$set")}$destroy(){V(this,1),this.$destroy=B}$on(e,n){if(!G(n))return B;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!St(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zt);function kt(t,e){function n(i){i.target instanceof Element&&!t.contains(i.target)&&e()}return document.addEventListener("click",n,{capture:!0,passive:!0}),document.addEventListener("keyup",n,{capture:!0,passive:!0}),{update(i){e=i},destroy(){document.removeEventListener("click",n,{capture:!0}),document.removeEventListener("keyup",n,{capture:!0})}}}function Ve(){return window.M.cfg.wwwroot+"/local/mail/"}function Dn(t,e=[],n){const i=new URL(Ve()+"create.php");return i.searchParams.set("course",String(t)),e.length&&i.searchParams.set("recipients",e.join(",")),n&&i.searchParams.set("role",n),i.searchParams.set("sesskey",window.M.cfg.sesskey),i.toString()}function On(t){const e=new URL(Ve()+"download.php");return e.searchParams.set("m",String(t)),e.toString()}function Un(){const t=new URL(window.location.href),e={tray:t.searchParams.get("t")||void 0,courseid:parseInt(t.searchParams.get("c")||"")||void 0,labelid:parseInt(t.searchParams.get("l")||"")||void 0,messageid:parseInt(t.searchParams.get("m")||"")||void 0,offset:parseInt(t.searchParams.get("o")||"")||void 0,dialog:t.searchParams.get("d")||void 0},n={content:t.searchParams.get("s")||void 0,sendername:t.searchParams.get("sf")||void 0,recipientname:t.searchParams.get("st")||void 0,unread:t.searchParams.get("su")=="1"||void 0,withfilesonly:t.searchParams.get("sa")=="1"||void 0,maxtime:parseInt(t.searchParams.get("sd")||"")||void 0,startid:parseInt(t.searchParams.get("ss")||"")||void 0,reverse:t.searchParams.get("sr")=="1"||void 0};return Object.values(n).some(i=>i!=null)?{...e,search:n}:e}function qn(t,e){const n=new URL(Ee(t));n.search!=window.location.search&&(e?window.history.replaceState(void 0,"",n.toString()):window.history.pushState(void 0,"",n.toString()))}function Ee(t){var n,i,s,r,l,a,f,o;const e=new URL(Ve()+"view.php");return t.tray&&e.searchParams.set("t",t.tray),t.courseid&&e.searchParams.set("c",String(t.courseid)),t.tray=="label"&&t.labelid&&e.searchParams.set("l",String(t.labelid)),t.messageid&&e.searchParams.set("m",String(t.messageid)),t.offset&&e.searchParams.set("o",String(t.offset)),(n=t.search)!=null&&n.content&&e.searchParams.set("s",t.search.content),(i=t.search)!=null&&i.sendername&&e.searchParams.set("sf",t.search.sendername),(s=t.search)!=null&&s.recipientname&&e.searchParams.set("st",t.search.recipientname),(r=t.search)!=null&&r.unread&&e.searchParams.set("su","1"),(l=t.search)!=null&&l.withfilesonly&&e.searchParams.set("sa","1"),(a=t.search)!=null&&a.maxtime&&e.searchParams.set("sd",String(t.search.maxtime)),(f=t.search)!=null&&f.startid&&e.searchParams.set("ss",String(t.search.startid)),(o=t.search)!=null&&o.reverse&&e.searchParams.set("sr","1"),t.dialog&&e.searchParams.set("d",t.dialog),e.toString()}function Ht(t){let e,n,i,s,r=t[0].compose+"",l,a,f,o;return{c(){e=N("button"),n=N("i"),i=q(),s=N("span"),l=Y(r),g(n,"class","fa fa-edit mr-0 mr-sm-1"),M(s,"d-none",t[1]),g(e,"type","button"),g(e,"class","btn btn-primary text-truncate px-2 px-sm-3"),g(e,"aria-label",a=t[0].compose),M(e,"flex-shrink-0",t[1])},m(u,m){U(u,e,m),C(e,n),C(e,i),C(e,s),C(s,l),f||(o=F(e,"click",function(){G(t[2])&&t[2].apply(this,arguments)}),f=!0)},p(u,[m]){t=u,m&1&&r!==(r=t[0].compose+"")&&Z(l,r),m&2&&M(s,"d-none",t[1]),m&1&&a!==(a=t[0].compose)&&g(e,"aria-label",a),m&2&&M(e,"flex-shrink-0",t[1])},i:B,o:B,d(u){u&&D(e),f=!1,o()}}}function Vt(t,e,n){let{strings:i}=e,{iconOnly:s=!1}=e,{onClick:r}=e;return t.$$set=l=>{"strings"in l&&n(0,i=l.strings),"iconOnly"in l&&n(1,s=l.iconOnly),"onClick"in l&&n(2,r=l.onClick)},[i,s,r]}class Wt extends fe{constructor(e){super(),oe(this,e,Vt,Ht,ae,{strings:0,iconOnly:1,onClick:2})}}const jn=["","blue","indigo","purple","pink","red","orange","yellow","green","teal","cyan"];function Ye(t){const e=document.createElement("DIV");return e.innerHTML=t,e.innerText||""}function Bn(t){if(t==0)return"";const e=new Date(t*1e3);return[String(e.getFullYear()),String(e.getMonth()+1).padStart(2,"0"),String(e.getDate()).padStart(2,"0")].join("-")}function me(t,e){return t?e=="shortname"?Ye(t.shortname):Ye(t.fullname):""}function Rn(t){const e=[{bytes:1099511627776,name:"TB"},{bytes:1073741824,name:"GB"},{bytes:1048576,name:"MB"},{bytes:1024,name:"KB"}];for(const n of e)if(t>=n.bytes)return`${Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format(t/n.bytes)} ${n.name}`;return`${t} B`}function Fn(t){return t.trim().replaceAll(/\s+/gu," ")}function zn(t,e){if(t=t||"",typeof e=="string"||typeof e=="number")t=t.replace("{$a}",e.toString());else for(const n in e)t=t.replace(`{$a->${n}}`,e[n].toString());return t}function Hn(t){return t?Math.floor(new Date(parseInt(t.slice(0,4)),parseInt(t.slice(5,7))-1,parseInt(t.slice(8,10)),23,59,59).getTime()/1e3):0}function We(t,e){function n(){t.offsetWidth<t.scrollWidth?t.setAttribute("title",e):t.removeAttribute("title")}return t.style.overflow="hidden",t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.addEventListener("mouseenter",n),{update(i){e=i},destroy(){t.removeEventListener("mouseenter",n,!0)}}}function Je(t,e,n){const i=t.slice();return i[30]=e[n],i}function Kt(t){let e,n,i,s,r;return{c(){e=N("button"),n=Y(t[13]),g(e,"type","button"),g(e,"class","form-control px-5 text-left"),M(e,"alert-primary",t[4]&&(t[5]=="filter-left"||t[5]=="filter-right")),M(e,"btn-secondary",t[5]=="menu"||t[5]=="navbar")},m(l,a){U(l,e,a),C(e,n),s||(r=[_e(i=We.call(null,e,t[13])),F(e,"click",t[16])],s=!0)},p(l,a){a[0]&8192&&Z(n,l[13]),i&&G(i.update)&&a[0]&8192&&i.update.call(null,l[13]),a[0]&48&&M(e,"alert-primary",l[4]&&(l[5]=="filter-left"||l[5]=="filter-right")),a[0]&32&&M(e,"btn-secondary",l[5]=="menu"||l[5]=="navbar")},d(l){l&&D(e),s=!1,W(r)}}}function Gt(t){let e,n,i,s;return{c(){e=N("button"),n=Y(t[1]),g(e,"type","button"),g(e,"class","form-control px-5 text-left"),he(e,"border-color","rgba(0, 0, 0, 0.125)"),M(e,"btn-secondary",t[5]=="menu"||t[5]=="navbar")},m(r,l){U(r,e,l),C(e,n),i||(s=F(e,"click",t[14]),i=!0)},p(r,l){l[0]&2&&Z(n,r[1]),l[0]&32&&M(e,"btn-secondary",r[5]=="menu"||r[5]=="navbar")},d(r){r&&D(e),i=!1,s()}}}function Yt(t){let e,n,i,s,r;return{c(){e=N("input"),g(e,"type","text"),g(e,"class","form-control px-5 text-truncate"),g(e,"placeholder",n=t[7]?t[0].course:t[1]),g(e,"aria-label",i=t[7]?t[0].course:t[1])},m(l,a){U(l,e,a),Ge(e,t[6]),t[26](e),s||(r=[F(e,"input",t[25]),F(e,"focus",t[14]),F(e,"keyup",t[19])],s=!0)},p(l,a){a[0]&131&&n!==(n=l[7]?l[0].course:l[1])&&g(e,"placeholder",n),a[0]&131&&i!==(i=l[7]?l[0].course:l[1])&&g(e,"aria-label",i),a[0]&64&&e.value!==l[6]&&Ge(e,l[6])},d(l){l&&D(e),t[26](null),s=!1,W(r)}}}function Jt(t){let e,n,i,s,r;return{c(){e=N("div"),n=Y(t[13]),g(e,"class","form-control alert-secondary pl-5 pr-2 text-left")},m(l,a){U(l,e,a),C(e,n),s||(r=_e(i=We.call(null,e,t[13])),s=!0)},p(l,a){a[0]&8192&&Z(n,l[13]),i&&G(i.update)&&a[0]&8192&&i.update.call(null,l[13])},d(l){l&&D(e),s=!1,r()}}}function Qe(t){let e,n,i,s,r,l;return{c(){e=N("button"),n=N("i"),g(n,"class",i="fa fa-fw "+t[11]),g(n,"aria-hidden","true"),g(e,"type","button"),g(e,"aria-expanded",t[7]),g(e,"title",s=t[0].changecourse),g(e,"class","btn position-absolute h-100 d-flex align-items-center px-2"),he(e,"top","0"),he(e,"right","0")},m(a,f){U(a,e,f),C(e,n),r||(l=F(e,"click",t[16]),r=!0)},p(a,f){f[0]&2048&&i!==(i="fa fa-fw "+a[11])&&g(n,"class",i),f[0]&128&&g(e,"aria-expanded",a[7]),f[0]&1&&s!==(s=a[0].changecourse)&&g(e,"title",s)},d(a){a&&D(e),r=!1,l()}}}function Xe(t){let e,n,i=[],s=new Map,r=!t[2]&&Ze(t),l=ie(t[12]);const a=o=>o[30].id;for(let o=0;o<l.length;o+=1){let u=Je(t,l,o),m=a(u);s.set(m,i[o]=xe(m,u))}let f=null;return l.length||(f=$e(t)),{c(){e=N("div"),r&&r.c(),n=q();for(let o=0;o<i.length;o+=1)i[o].c();f&&f.c(),g(e,"class","dropdown-menu show"),M(e,"dropdown-menu-left",t[5]=="menu"||t[5]=="filter-left"),M(e,"dropdown-menu-right",t[5]=="filter-right"),M(e,"w-100",t[5]=="navbar")},m(o,u){U(o,e,u),r&&r.m(e,null),C(e,n);for(let m=0;m<i.length;m+=1)i[m]&&i[m].m(e,null);f&&f.m(e,null)},p(o,u){o[2]?r&&(r.d(1),r=null):r?r.p(o,u):(r=Ze(o),r.c(),r.m(e,n)),u[0]&267297&&(l=ie(o[12]),i=Ue(i,u,a,1,o,l,s,e,Rt,xe,null,Je),!l.length&&f?f.p(o,u):l.length?f&&(f.d(1),f=null):(f=$e(o),f.c(),f.m(e,null))),u[0]&32&&M(e,"dropdown-menu-left",o[5]=="menu"||o[5]=="filter-left"),u[0]&32&&M(e,"dropdown-menu-right",o[5]=="filter-right"),u[0]&32&&M(e,"w-100",o[5]=="navbar")},d(o){o&&D(e),r&&r.d();for(let u=0;u<i.length;u+=1)i[u].d();f&&f.d()}}}function Ze(t){let e,n=t[0].allcourses+"",i,s,r,l,a;return{c(){e=N("button"),i=Y(n),s=q(),r=N("div"),g(e,"type","button"),g(e,"class","dropdown-item text-truncate"),M(e,"px-3",t[5]=="navbar"),g(r,"class","dropdown-divider")},m(f,o){U(f,e,o),C(e,i),U(f,s,o),U(f,r,o),l||(a=F(e,"click",t[27]),l=!0)},p(f,o){o[0]&1&&n!==(n=f[0].allcourses+"")&&Z(i,n),o[0]&32&&M(e,"px-3",f[5]=="navbar")},d(f){f&&(D(e),D(s),D(r)),l=!1,a()}}}function $e(t){let e,n=t[0].nocoursematchestext+"",i,s;return{c(){e=N("div"),i=Y(n),s=q(),g(e,"class","px-4 text-danger")},m(r,l){U(r,e,l),C(e,i),C(e,s)},p(r,l){l[0]&1&&n!==(n=r[0].nocoursematchestext+"")&&Z(i,n)},d(r){r&&D(e)}}}function xe(t,e){let n,i,s=e[10](e[30])+"",r,l,a;function f(){return e[28](e[30])}return{key:t,first:null,c(){n=N("button"),i=new Tt(!1),r=q(),i.a=r,g(n,"type","button"),g(n,"class","dropdown-item text-truncate"),M(n,"px-3",e[5]=="navbar"),this.first=n},m(o,u){U(o,n,u),i.m(s,n),C(n,r),l||(a=F(n,"click",f),l=!0)},p(o,u){e=o,u[0]&5120&&s!==(s=e[10](e[30])+"")&&i.p(s),u[0]&32&&M(n,"px-3",e[5]=="navbar")},d(o){o&&D(n),l=!1,a()}}}function Qt(t){let e,n,i,s,r,l,a;function f(d,h){return d[3]?Jt:d[7]?Yt:d[8]?Kt:Gt}let o=f(t),u=o(t),m=!t[3]&&Qe(t),c=t[7]&&Xe(t);return{c(){e=N("div"),n=N("div"),n.innerHTML='<i class="fa fa-fw fa-graduation-cap" aria-hidden="true"></i>',i=q(),u.c(),s=q(),m&&m.c(),r=q(),c&&c.c(),g(n,"class","local-mail-course-select-icon position-absolute h-100 d-flex align-items-center"),he(n,"top","0"),he(n,"left","0"),g(e,"class","local-mail-course-select position-relative d-flex p-0"),M(e,"local-mail-course-select-menu",t[5]=="menu"||t[5]=="navbar"),M(e,"local-mail-course-select-navbar",t[5]=="navbar"),M(e,"list-group-item",t[5]=="menu"||t[5]=="navbar")},m(d,h){U(d,e,h),C(e,n),C(e,i),u.m(e,null),C(e,s),m&&m.m(e,null),C(e,r),c&&c.m(e,null),l||(a=_e(kt.call(null,e,t[15])),l=!0)},p(d,h){o===(o=f(d))&&u?u.p(d,h):(u.d(1),u=o(d),u&&(u.c(),u.m(e,s))),d[3]?m&&(m.d(1),m=null):m?m.p(d,h):(m=Qe(d),m.c(),m.m(e,r)),d[7]?c?c.p(d,h):(c=Xe(d),c.c(),c.m(e,null)):c&&(c.d(1),c=null),h[0]&32&&M(e,"local-mail-course-select-menu",d[5]=="menu"||d[5]=="navbar"),h[0]&32&&M(e,"local-mail-course-select-navbar",d[5]=="navbar"),h[0]&32&&M(e,"list-group-item",d[5]=="menu"||d[5]=="navbar")},i:B,o:B,d(d){d&&D(e),u.d(),m&&m.d(),c&&c.d(),l=!1,a()}}}function Xt(t,e,n){let i,s,r,l,a,{settings:f}=e,{strings:o}=e,{courses:u}=e,{label:m}=e,{selected:c}=e,{required:d=!1}=e,{readonly:h=!1}=e,{primary:y=!1}=e,{style:w}=e,{onChange:A}=e,k,v="",S=!1,b;const I=E=>E.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),P=async()=>{n(7,S=!0),n(6,v=""),await qt(),k.focus()},j=()=>{n(7,S=!1),n(6,v="")},R=async()=>{S?j():P()},z=async()=>{await A(),n(20,c=void 0),n(7,S=!1),n(6,v="")},ue=async E=>{await A(E.id),n(20,c=E.id),n(7,S=!1),n(6,v="")},be=E=>{E.key=="Escape"&&(n(7,S=!1),n(6,v=""),k.blur())};function _(){v=this.value,n(6,v)}function p(E){Ie[E?"unshift":"push"](()=>{k=E,n(9,k)})}const O=()=>z(),pe=E=>ue(E);return t.$$set=E=>{"settings"in E&&n(21,f=E.settings),"strings"in E&&n(0,o=E.strings),"courses"in E&&n(22,u=E.courses),"label"in E&&n(1,m=E.label),"selected"in E&&n(20,c=E.selected),"required"in E&&n(2,d=E.required),"readonly"in E&&n(3,h=E.readonly),"primary"in E&&n(4,y=E.primary),"style"in E&&n(5,w=E.style),"onChange"in E&&n(23,A=E.onChange)},t.$$.update=()=>{t.$$.dirty[0]&5242880&&n(8,b=u.find(E=>E.id==c)),t.$$.dirty[0]&2097408&&n(13,i=me(b,f.filterbycourse)),t.$$.dirty[0]&64&&n(24,s=new RegExp(I(v.trim()).replaceAll(/\s+/gu,"\\s+"),"giu")),t.$$.dirty[0]&23068672&&n(12,r=u.filter(E=>me(E,f.filterbycourse).match(s))),t.$$.dirty[0]&192&&n(11,l=S?v?"fa-times":"fa-caret-up":"fa-caret-down"),t.$$.dirty[0]&18874368&&n(10,a=E=>me(E,f.filterbycourse).replaceAll(s,Me=>Me.trim()?"<mark>"+Me+"</mark>":Me))},[o,m,d,h,y,w,v,S,b,k,a,l,r,i,P,j,R,z,ue,be,c,f,u,A,s,_,p,O,pe]}class Zt extends fe{constructor(e){super(),oe(this,e,Xt,Qt,ae,{settings:21,strings:0,courses:22,label:1,selected:20,required:2,readonly:3,primary:4,style:5,onChange:23},null,[-1,-1])}}function et(t){let e,n;return{c(){e=N("span"),n=Y(t[3]),g(e,"class","badge")},m(i,s){U(i,e,s),C(e,n)},p(i,s){s&8&&Z(n,i[3])},d(i){i&&D(e)}}}function $t(t){let e,n,i,s,r,l,a,f,o,u,m,c,d,h=t[3]>0&&et(t);return{c(){e=N("a"),n=N("i"),r=q(),l=N("span"),a=Y(t[1]),o=q(),h&&h.c(),g(n,"class",i="fa "+t[0]+" fa-fw"),g(n,"aria-hidden","true"),g(n,"style",s=t[6]&&!t[5]?`color: var(--local-mail-color-${t[6]}-bg)`:""),g(l,"class","flex-fill px-2"),g(e,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2"),g(e,"aria-current",t[5]),g(e,"aria-disabled",t[4]),g(e,"role","tab"),g(e,"href",u=Ee(t[2])),g(e,"style",m=t[6]&&!t[5]?`color: var(--local-mail-color-${t[6]}-fg)`:""),M(e,"list-group-item-primary",t[5]),M(e,"disabled",t[4])},m(y,w){U(y,e,w),C(e,n),C(e,r),C(e,l),C(l,a),C(e,o),h&&h.m(e,null),c||(d=[_e(f=We.call(null,l,t[1])),F(e,"click",t[7])],c=!0)},p(y,[w]){w&1&&i!==(i="fa "+y[0]+" fa-fw")&&g(n,"class",i),w&96&&s!==(s=y[6]&&!y[5]?`color: var(--local-mail-color-${y[6]}-bg)`:"")&&g(n,"style",s),w&2&&Z(a,y[1]),f&&G(f.update)&&w&2&&f.update.call(null,y[1]),y[3]>0?h?h.p(y,w):(h=et(y),h.c(),h.m(e,null)):h&&(h.d(1),h=null),w&32&&g(e,"aria-current",y[5]),w&16&&g(e,"aria-disabled",y[4]),w&4&&u!==(u=Ee(y[2]))&&g(e,"href",u),w&96&&m!==(m=y[6]&&!y[5]?`color: var(--local-mail-color-${y[6]}-fg)`:"")&&g(e,"style",m),w&32&&M(e,"list-group-item-primary",y[5]),w&16&&M(e,"disabled",y[4])},i:B,o:B,d(y){y&&D(e),h&&h.d(),c=!1,W(d)}}}function xt(t,e,n){let{icon:i}=e,{text:s}=e,{params:r}=e,{count:l=0}=e,{disabled:a=!1}=e,{active:f=!1}=e,{color:o=void 0}=e,{onClick:u=void 0}=e;const m=c=>{u&&(c.preventDefault(),u(r))};return t.$$set=c=>{"icon"in c&&n(0,i=c.icon),"text"in c&&n(1,s=c.text),"params"in c&&n(2,r=c.params),"count"in c&&n(3,l=c.count),"disabled"in c&&n(4,a=c.disabled),"active"in c&&n(5,f=c.active),"color"in c&&n(6,o=c.color),"onClick"in c&&n(8,u=c.onClick)},[i,s,r,l,a,f,o,m,u]}class ee extends fe{constructor(e){super(),oe(this,e,xt,$t,ae,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function tt(t,e,n){const i=t.slice();return i[18]=e[n],i}function nt(t,e,n){const i=t.slice();return i[21]=e[n],i}function it(t){let e,n;return e=new Zt({props:{settings:t[0],strings:t[1],courses:t[2],label:t[1].allcourses,selected:t[4].courseid,primary:!!t[4].courseid,style:t[5]?"navbar":"menu",onChange:t[7]}}),{c(){K(e.$$.fragment)},m(i,s){H(e,i,s),n=!0},p(i,s){const r={};s&1&&(r.settings=i[0]),s&2&&(r.strings=i[1]),s&4&&(r.courses=i[2]),s&2&&(r.label=i[1].allcourses),s&16&&(r.selected=i[4].courseid),s&16&&(r.primary=!!i[4].courseid),s&32&&(r.style=i[5]?"navbar":"menu"),s&128&&(r.onChange=i[7]),e.$set(r)},i(i){n||(L(e.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function st(t){let e,n;return e=new ee({props:{icon:"fa-star",text:t[1].starredplural,params:{tray:"starred",courseid:t[10],search:t[9]},active:t[4].tray=="starred",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){H(e,i,s),n=!0},p(i,s){const r={};s&2&&(r.text=i[1].starredplural),s&1536&&(r.params={tray:"starred",courseid:i[10],search:i[9]}),s&16&&(r.active=i[4].tray=="starred"),s&64&&(r.onClick=i[6]),e.$set(r)},i(i){n||(L(e.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function rt(t){let e,n;return e=new ee({props:{icon:"fa-paper-plane",text:t[1].sentplural,params:{tray:"sent",courseid:t[10],search:t[9]},active:t[4].tray=="sent",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){H(e,i,s),n=!0},p(i,s){const r={};s&2&&(r.text=i[1].sentplural),s&1536&&(r.params={tray:"sent",courseid:i[10],search:i[9]}),s&16&&(r.active=i[4].tray=="sent"),s&64&&(r.onClick=i[6]),e.$set(r)},i(i){n||(L(e.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function lt(t){var i;let e,n;return e=new ee({props:{icon:"fa-file",text:t[1].drafts,count:t[10]?(i=t[2].find(t[16]))==null?void 0:i.drafts:t[13],params:{tray:"drafts",courseid:t[10],search:t[9]},active:t[4].tray=="drafts",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(s,r){H(e,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].drafts),r&9220&&(l.count=s[10]?(a=s[2].find(s[16]))==null?void 0:a.drafts:s[13]),r&1536&&(l.params={tray:"drafts",courseid:s[10],search:s[9]}),r&16&&(l.active=s[4].tray=="drafts"),r&64&&(l.onClick=s[6]),e.$set(l)},i(s){n||(L(e.$$.fragment,s),n=!0)},o(s){T(e.$$.fragment,s),n=!1},d(s){V(e,s)}}}function at(t){let e,n;return e=new ee({props:{icon:"fa-trash",text:t[1].trash,params:{tray:"trash",courseid:t[10],search:t[9]},active:t[4].tray=="trash",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){H(e,i,s),n=!0},p(i,s){const r={};s&2&&(r.text=i[1].trash),s&1536&&(r.params={tray:"trash",courseid:i[10],search:i[9]}),s&16&&(r.active=i[4].tray=="trash"),s&64&&(r.onClick=i[6]),e.$set(r)},i(i){n||(L(e.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function ot(t,e){var r;let n,i,s;return i=new ee({props:{icon:"fa-tag",text:e[21].name,count:e[10]?(r=e[21].courses.find(e[17]))==null?void 0:r.unread:e[21].unread,color:e[21].color,params:{tray:"label",labelid:e[21].id,courseid:e[10],search:e[9]},active:e[4].tray=="label"&&e[4].labelid==e[21].id,onClick:e[6]}}),{key:t,first:null,c(){n=Ae(),K(i.$$.fragment),this.first=n},m(l,a){U(l,n,a),H(i,l,a),s=!0},p(l,a){var o;e=l;const f={};a&8&&(f.text=e[21].name),a&1032&&(f.count=e[10]?(o=e[21].courses.find(e[17]))==null?void 0:o.unread:e[21].unread),a&8&&(f.color=e[21].color),a&1544&&(f.params={tray:"label",labelid:e[21].id,courseid:e[10],search:e[9]}),a&24&&(f.active=e[4].tray=="label"&&e[4].labelid==e[21].id),a&64&&(f.onClick=e[6]),i.$set(f)},i(l){s||(L(i.$$.fragment,l),s=!0)},o(l){T(i.$$.fragment,l),s=!1},d(l){l&&D(n),V(i,l)}}}function ft(t){let e,n;return e=new ee({props:{icon:"fa-graduation-cap",text:me(t[18],t[0].coursetraysname),count:t[18].unread,params:t[8]?{tray:"inbox",courseid:t[18].id,search:t[9]}:{tray:"course",courseid:t[18].id,search:t[9]},active:(t[4].tray=="course"||!t[4].tray&&!t[8])&&t[4].courseid==t[18].id,onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){H(e,i,s),n=!0},p(i,s){const r={};s&5&&(r.text=me(i[18],i[0].coursetraysname)),s&4&&(r.count=i[18].unread),s&772&&(r.params=i[8]?{tray:"inbox",courseid:i[18].id,search:i[9]}:{tray:"course",courseid:i[18].id,search:i[9]}),s&276&&(r.active=(i[4].tray=="course"||!i[4].tray&&!i[8])&&i[4].courseid==i[18].id),s&64&&(r.onClick=i[6]),e.$set(r)},i(i){n||(L(e.$$.fragment,i),n=!0)},o(i){T(e.$$.fragment,i),n=!1},d(i){V(e,i)}}}function ut(t,e){let n,i=e[11](e[18])&&(!e[8]||e[18].id!=e[10]),s,r,l=i&&ft(e);return{key:t,first:null,c(){n=Ae(),l&&l.c(),s=Ae(),this.first=n},m(a,f){U(a,n,f),l&&l.m(a,f),U(a,s,f),r=!0},p(a,f){e=a,f&3332&&(i=e[11](e[18])&&(!e[8]||e[18].id!=e[10])),i?l?(l.p(e,f),f&3332&&L(l,1)):(l=ft(e),l.c(),L(l,1),l.m(s.parentNode,s)):l&&(Q(),T(l,1,1,()=>{l=null}),X())},i(a){r||(L(l),r=!0)},o(a){T(l),r=!1},d(a){a&&(D(n),D(s)),l&&l.d(a)}}}function en(t){var be;let e,n,i,s,r=t[12]("starred"),l,a=t[12]("sent"),f,o=t[12]("drafts"),u,m=t[12]("trash"),c,d=[],h=new Map,y,w=[],A=new Map,k,v=(t[8]||t[10])&&it(t);i=new ee({props:{icon:"fa-inbox",text:t[1].inbox,count:t[10]?(be=t[2].find(t[15]))==null?void 0:be.unread:t[14],params:{tray:"inbox",courseid:t[10],search:t[9]},active:t[4].tray=="inbox",onClick:t[6]}});let S=r&&st(t),b=a&&rt(t),I=o&&lt(t),P=m&&at(t),j=ie(t[3]);const R=_=>_[21].id;for(let _=0;_<j.length;_+=1){let p=nt(t,j,_),O=R(p);h.set(O,d[_]=ot(O,p))}let z=ie(t[2]);const ue=_=>_[18].id;for(let _=0;_<z.length;_+=1){let p=tt(t,z,_),O=ue(p);A.set(O,w[_]=ut(O,p))}return{c(){e=N("div"),v&&v.c(),n=q(),K(i.$$.fragment),s=q(),S&&S.c(),l=q(),b&&b.c(),f=q(),I&&I.c(),u=q(),P&&P.c(),c=q();for(let _=0;_<d.length;_+=1)d[_].c();y=q();for(let _=0;_<w.length;_+=1)w[_].c();g(e,"class","list-group"),M(e,"local-mail-menu-navbar",t[5]),M(e,"list-group-flush",t[5]),M(e,"border-top",t[5])},m(_,p){U(_,e,p),v&&v.m(e,null),C(e,n),H(i,e,null),C(e,s),S&&S.m(e,null),C(e,l),b&&b.m(e,null),C(e,f),I&&I.m(e,null),C(e,u),P&&P.m(e,null),C(e,c);for(let O=0;O<d.length;O+=1)d[O]&&d[O].m(e,null);C(e,y);for(let O=0;O<w.length;O+=1)w[O]&&w[O].m(e,null);k=!0},p(_,[p]){var pe;_[8]||_[10]?v?(v.p(_,p),p&1280&&L(v,1)):(v=it(_),v.c(),L(v,1),v.m(e,n)):v&&(Q(),T(v,1,1,()=>{v=null}),X());const O={};p&2&&(O.text=_[1].inbox),p&17412&&(O.count=_[10]?(pe=_[2].find(_[15]))==null?void 0:pe.unread:_[14]),p&1536&&(O.params={tray:"inbox",courseid:_[10],search:_[9]}),p&16&&(O.active=_[4].tray=="inbox"),p&64&&(O.onClick=_[6]),i.$set(O),p&4096&&(r=_[12]("starred")),r?S?(S.p(_,p),p&4096&&L(S,1)):(S=st(_),S.c(),L(S,1),S.m(e,l)):S&&(Q(),T(S,1,1,()=>{S=null}),X()),p&4096&&(a=_[12]("sent")),a?b?(b.p(_,p),p&4096&&L(b,1)):(b=rt(_),b.c(),L(b,1),b.m(e,f)):b&&(Q(),T(b,1,1,()=>{b=null}),X()),p&4096&&(o=_[12]("drafts")),o?I?(I.p(_,p),p&4096&&L(I,1)):(I=lt(_),I.c(),L(I,1),I.m(e,u)):I&&(Q(),T(I,1,1,()=>{I=null}),X()),p&4096&&(m=_[12]("trash")),m?P?(P.p(_,p),p&4096&&L(P,1)):(P=at(_),P.c(),L(P,1),P.m(e,c)):P&&(Q(),T(P,1,1,()=>{P=null}),X()),p&1624&&(j=ie(_[3]),Q(),d=Ue(d,p,R,1,_,j,h,e,Oe,ot,y,nt),X()),p&3925&&(z=ie(_[2]),Q(),w=Ue(w,p,ue,1,_,z,A,e,Oe,ut,null,tt),X()),(!k||p&32)&&M(e,"local-mail-menu-navbar",_[5]),(!k||p&32)&&M(e,"list-group-flush",_[5]),(!k||p&32)&&M(e,"border-top",_[5])},i(_){if(!k){L(v),L(i.$$.fragment,_),L(S),L(b),L(I),L(P);for(let p=0;p<j.length;p+=1)L(d[p]);for(let p=0;p<z.length;p+=1)L(w[p]);k=!0}},o(_){T(v),T(i.$$.fragment,_),T(S),T(b),T(I),T(P);for(let p=0;p<d.length;p+=1)T(d[p]);for(let p=0;p<w.length;p+=1)T(w[p]);k=!1},d(_){_&&D(e),v&&v.d(),V(i),S&&S.d(),b&&b.d(),I&&I.d(),P&&P.d();for(let p=0;p<d.length;p+=1)d[p].d();for(let p=0;p<w.length;p+=1)w[p].d()}}}function tn(t,e,n){let i,s,r,l,a,f,o,{settings:u}=e,{strings:m}=e,{courses:c}=e,{labels:d}=e,{params:h}=e,{navbar:y=!1}=e,{onClick:w=void 0}=e,{onCourseChange:A}=e;const k=b=>b.id==f,v=b=>b.id==f,S=b=>b.id==f;return t.$$set=b=>{"settings"in b&&n(0,u=b.settings),"strings"in b&&n(1,m=b.strings),"courses"in b&&n(2,c=b.courses),"labels"in b&&n(3,d=b.labels),"params"in b&&n(4,h=b.params),"navbar"in b&&n(5,y=b.navbar),"onClick"in b&&n(6,w=b.onClick),"onCourseChange"in b&&n(7,A=b.onCourseChange)},t.$$.update=()=>{t.$$.dirty&4&&n(14,i=c.reduce((b,I)=>b+I.unread,0)),t.$$.dirty&4&&n(13,s=c.reduce((b,I)=>b+I.drafts,0)),t.$$.dirty&17&&n(12,r=b=>u.globaltrays.includes(b)||h.tray==b),t.$$.dirty&17&&n(11,l=b=>u.coursetrays=="all"||u.coursetrays=="unread"&&(b.unread||0)>0||h.tray=="course"&&h.courseid==b.id),t.$$.dirty&1&&n(8,a=["shortname","fullname"].includes(u.filterbycourse)),t.$$.dirty&272&&n(10,f=a?h.courseid:void 0),t.$$.dirty&16&&n(9,o=h.search?{content:h.search.content,sendername:h.search.sendername,recipientname:h.search.recipientname,maxtime:h.search.maxtime,unread:h.search.unread,withfilesonly:h.search.withfilesonly}:void 0)},[u,m,c,d,h,y,w,A,a,o,f,l,r,s,i,k,v,S]}class nn extends fe{constructor(e){super(),oe(this,e,tn,en,ae,{settings:0,strings:1,courses:2,labels:3,params:4,navbar:5,onClick:6,onCourseChange:7})}}function sn(t){let e,n,i,s,r;return{c(){e=N("button"),n=N("i"),g(n,"class","fa fa-cog"),g(n,"aria-hidden",!0),g(e,"type","button"),g(e,"class","btn btn-secondary text-truncate"),g(e,"title",i=t[0].preferences)},m(l,a){U(l,e,a),C(e,n),s||(r=F(e,"click",function(){G(t[1])&&t[1].apply(this,arguments)}),s=!0)},p(l,[a]){t=l,a&1&&i!==(i=t[0].preferences)&&g(e,"title",i)},i:B,o:B,d(l){l&&D(e),s=!1,r()}}}function rn(t,e,n){let{strings:i}=e,{onClick:s}=e;return t.$$set=r=>{"strings"in r&&n(0,i=r.strings),"onClick"in r&&n(1,s=r.onClick)},[i,s]}class ln extends fe{constructor(e){super(),oe(this,e,rn,sn,ae,{strings:0,onClick:1})}}function ct(t){let e,n;return{c(){e=N("div"),n=Y(t[7]),g(e,"class","local-mail-navbar-count count-container")},m(i,s){U(i,e,s),C(e,n)},p(i,s){s&128&&Z(n,i[7])},d(i){i&&D(e)}}}function dt(t){let e,n,i,s,r,l,a,f;return i=new Wt({props:{strings:t[1],onClick:t[9]}}),r=new ln({props:{strings:t[1],onClick:t[12]}}),a=new nn({props:{settings:t[0],strings:t[1],courses:t[2],labels:t[3],params:t[4],navbar:!0,onClick:t[11],onCourseChange:t[5]}}),{c(){e=N("div"),n=N("div"),K(i.$$.fragment),s=q(),K(r.$$.fragment),l=q(),K(a.$$.fragment),g(n,"class","d-flex justify-content-between p-2"),g(e,"class","local-mail-navbar-popover popover-region-container")},m(o,u){U(o,e,u),C(e,n),H(i,n,null),C(n,s),H(r,n,null),C(e,l),H(a,e,null),f=!0},p(o,u){const m={};u&2&&(m.strings=o[1]),i.$set(m);const c={};u&2&&(c.strings=o[1]),r.$set(c);const d={};u&1&&(d.settings=o[0]),u&2&&(d.strings=o[1]),u&4&&(d.courses=o[2]),u&8&&(d.labels=o[3]),u&16&&(d.params=o[4]),u&32&&(d.onCourseChange=o[5]),a.$set(d)},i(o){f||(L(i.$$.fragment,o),L(r.$$.fragment,o),L(a.$$.fragment,o),f=!0)},o(o){T(i.$$.fragment,o),T(r.$$.fragment,o),T(a.$$.fragment,o),f=!1},d(o){o&&D(e),V(i),V(r),V(a)}}}function an(t){let e,n,i,s,r,l,a,f,o,u,m=t[7]>0&&ct(t),c=t[6]&&dt(t);return{c(){e=N("div"),n=N("a"),i=N("i"),r=q(),m&&m.c(),a=q(),c&&c.c(),g(i,"class","icon fa fa-fw fa-envelope-o m-0"),g(i,"aria-label",s=t[1].plugginname),g(n,"aria-expanded",t[6]),g(n,"class","nav-link btn h-100 position-relative d-flex align-items-center px-2 py-0 rounded-0"),g(n,"href",Ee({tray:"inbox"})),g(n,"title",l=t[1].pluginname),g(e,"class","local-mail local-mail-navbar pop-over-region h-100"),M(e,"popover-region-toggle",t[6])},m(d,h){U(d,e,h),C(e,n),C(n,i),C(n,r),m&&m.m(n,null),C(e,a),c&&c.m(e,null),f=!0,o||(u=[F(n,"click",t[10]),_e(kt.call(null,e,t[8]))],o=!0)},p(d,[h]){(!f||h&2&&s!==(s=d[1].plugginname))&&g(i,"aria-label",s),d[7]>0?m?m.p(d,h):(m=ct(d),m.c(),m.m(n,null)):m&&(m.d(1),m=null),(!f||h&64)&&g(n,"aria-expanded",d[6]),(!f||h&2&&l!==(l=d[1].pluginname))&&g(n,"title",l),d[6]?c?(c.p(d,h),h&64&&L(c,1)):(c=dt(d),c.c(),L(c,1),c.m(e,null)):c&&(Q(),T(c,1,1,()=>{c=null}),X()),(!f||h&64)&&M(e,"popover-region-toggle",d[6])},i(d){f||(L(c),f=!0)},o(d){T(c),f=!1},d(d){d&&D(e),m&&m.d(),c&&c.d(),o=!1,W(u)}}}function on(t,e,n){let i,{settings:s}=e,{strings:r}=e,{courses:l}=e,{labels:a}=e,{params:f}=e,{onClick:o}=e,{onComposeClick:u}=e,{onCourseChange:m}=e,c=!1;const d=()=>{n(6,c=!1)},h=()=>{d(),u(f.courseid||l[0].id)},y=k=>{s.globaltrays.length>0||a.length>0?(n(6,c=!c),k.preventDefault()):(k.preventDefault(),o({tray:"inbox"}))},w=k=>{d(),o(k)},A=()=>{d(),o({...f,dialog:"preferences"})};return t.$$set=k=>{"settings"in k&&n(0,s=k.settings),"strings"in k&&n(1,r=k.strings),"courses"in k&&n(2,l=k.courses),"labels"in k&&n(3,a=k.labels),"params"in k&&n(4,f=k.params),"onClick"in k&&n(13,o=k.onClick),"onComposeClick"in k&&n(14,u=k.onComposeClick),"onCourseChange"in k&&n(5,m=k.onCourseChange)},t.$$.update=()=>{t.$$.dirty&4&&n(7,i=l.reduce((k,v)=>k+v.unread,0))},[s,r,l,a,f,m,c,i,d,h,y,w,A,o,u]}class Vn extends fe{constructor(e){super(),oe(this,e,on,an,ae,{settings:0,strings:1,courses:2,labels:3,params:4,onClick:13,onComposeClick:14,onCourseChange:5})}}const Ne={};async function Wn(t){return Ne[t]==null&&(Ne[t]=await new Promise(e=>{window.require([t],e)})),Ne[t]}export{yn as $,gn as A,_n as B,hn as C,L as D,le as E,An as F,T as G,W as H,Pn as I,En as J,Ie as K,Q as L,X as M,K as N,H as O,V as P,M as Q,jn as R,fe as S,Fn as T,ie as U,Ge as V,wn as W,Ue as X,Rt as Y,he as Z,Cn as _,je as a,We as a0,Oe as a1,Ln as a2,Ee as a3,In as a4,Nn as a5,pn as a6,Rn as a7,cn as a8,On as a9,Wn as aa,kn as ab,vn as ac,Zt as ad,qt as ae,Bn as af,Hn as ag,Tn as ah,Mn as ai,Sn as aj,Wt as ak,ln as al,nn as am,Un as an,un as ao,qn as ap,Vn as aq,Dn as ar,oe as b,Pe as c,Se as d,ae as e,Ae as f,U as g,D as h,qe as i,N as j,g as k,Re as l,me as m,B as n,C as o,Z as p,bn as q,zn as r,dn as s,Y as t,mn as u,q as v,F as w,G as x,_e as y,kt as z};
//# sourceMappingURL=global-tKP1ARur.js.map
