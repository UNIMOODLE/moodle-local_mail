var kt=Object.defineProperty;var yt=(t,e,n)=>e in t?kt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var $=(t,e,n)=>(yt(t,typeof e!="symbol"?e+"":e,n),n);function j(){}const qe=t=>t;function vt(t,e){for(const n in e)t[n]=e[n];return t}function ct(t){return t()}function He(){return Object.create(null)}function H(t){t.forEach(ct)}function G(t){return typeof t=="function"}function on(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let pe;function fn(t,e){return t===e?!0:(pe||(pe=document.createElement("a")),pe.href=e,t===pe.href)}function ae(t,e){return t!=t?e==e:t!==e}function Ct(t){return Object.keys(t).length===0}function un(t,...e){if(t==null){for(const i of e)i(void 0);return j}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function cn(t,e,n,i){if(t){const s=dt(t,e,n,i);return t[0](s)}}function dt(t,e,n,i){return t[1]&&i?vt(n.ctx.slice(),t[1](i(e))):n.ctx}function dn(t,e,n,i){if(t[2]&&i){const s=t[2](i(n));if(e.dirty===void 0)return s;if(typeof s=="object"){const l=[],r=Math.max(e.dirty.length,s.length);for(let f=0;f<r;f+=1)l[f]=e.dirty[f]|s[f];return l}return e.dirty|s}return e.dirty}function mn(t,e,n,i,s,l){if(s){const r=dt(e,n,i,l);t.p(r,s)}}function hn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function _e(t){return t&&G(t.destroy)?t.destroy:j}function _n(t){const e=typeof t=="string"&&t.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return e?[parseFloat(e[1]),e[2]||"px"]:[t,"px"]}const mt=typeof window<"u";let De=mt?()=>window.performance.now():()=>Date.now(),Re=mt?t=>requestAnimationFrame(t):j;const se=new Set;function ht(t){se.forEach(e=>{e.c(t)||(se.delete(e),e.f())}),se.size!==0&&Re(ht)}function je(t){let e;return se.size===0&&Re(ht),{promise:new Promise(n=>{se.add(e={c:t,f:n})}),abort(){se.delete(e)}}}function C(t,e){t.appendChild(e)}function _t(t){if(!t)return document;const e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Pt(t){const e=N("style");return e.textContent="/* empty */",Et(_t(t),e),e.sheet}function Et(t,e){return C(t.head||t,e),e.sheet}function q(t,e,n){t.insertBefore(e,n||null)}function U(t){t.parentNode&&t.parentNode.removeChild(t)}function gn(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function N(t){return document.createElement(t)}function St(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function J(t){return document.createTextNode(t)}function D(){return J(" ")}function Ae(){return J("")}function B(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function bn(t){return function(e){return e.preventDefault(),t.call(this,e)}}function pn(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function _(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Mt(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ke(t,e){t.value=e??""}function me(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,i?"important":"")}function wn(t,e,n){for(let i=0;i<t.options.length;i+=1){const s=t.options[i];if(s.__value===e){s.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function kn(t){const e=t.querySelector(":checked");return e&&e.__value}let we;function Lt(){if(we===void 0){we=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{we=!0}}return we}function yn(t,e){getComputedStyle(t).position==="static"&&(t.style.position="relative");const i=N("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=Lt();let l;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=B(window,"message",r=>{r.source===i.contentWindow&&e()})):(i.src="about:blank",i.onload=()=>{l=B(i.contentWindow,"resize",e),e()}),C(t,i),()=>{(s||l&&i.contentWindow)&&l(),U(i)}}function S(t,e,n){t.classList.toggle(e,!!n)}function At(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}class Nt{constructor(e=!1){$(this,"is_svg",!1);$(this,"e");$(this,"n");$(this,"t");$(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,n,i=null){this.e||(this.is_svg?this.e=St(n.nodeName):this.e=N(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(e)),this.i(i)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let n=0;n<this.n.length;n+=1)q(this.t,this.n[n],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(U)}}const ye=new Map;let ve=0;function It(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}function Ot(t,e){const n={stylesheet:Pt(e),rules:{}};return ye.set(t,n),n}function Ce(t,e,n,i,s,l,r,f=0){const o=16.666/i;let a=`{
`;for(let w=0;w<=1;w+=o){const A=e+(n-e)*l(w);a+=w*100+`%{${r(A,1-A)}}
`}const u=a+`100% {${r(n,1-n)}}
}`,c=`__svelte_${It(u)}_${f}`,d=_t(t),{stylesheet:m,rules:h}=ye.get(d)||Ot(d,t);h[c]||(h[c]=!0,m.insertRule(`@keyframes ${c} ${u}`,m.cssRules.length));const y=t.style.animation||"";return t.style.animation=`${y?`${y}, `:""}${c} ${i}ms linear ${s}ms 1 both`,ve+=1,c}function Pe(t,e){const n=(t.style.animation||"").split(", "),i=n.filter(e?l=>l.indexOf(e)<0:l=>l.indexOf("__svelte")===-1),s=n.length-i.length;s&&(t.style.animation=i.join(", "),ve-=s,ve||Ut())}function Ut(){Re(()=>{ve||(ye.forEach(t=>{const{ownerNode:e}=t.stylesheet;e&&U(e)}),ye.clear())})}let he;function de(t){he=t}function ze(){if(!he)throw new Error("Function called outside component initialization");return he}function vn(t){ze().$$.on_mount.push(t)}function Cn(t){ze().$$.after_update.push(t)}function Pn(t){ze().$$.on_destroy.push(t)}const ne=[],Ne=[];let le=[];const Ie=[],gt=Promise.resolve();let Oe=!1;function bt(){Oe||(Oe=!0,gt.then(pt))}function Tt(){return bt(),gt}function re(t){le.push(t)}function En(t){Ie.push(t)}const Me=new Set;let te=0;function pt(){if(te!==0)return;const t=he;do{try{for(;te<ne.length;){const e=ne[te];te++,de(e),qt(e.$$)}}catch(e){throw ne.length=0,te=0,e}for(de(null),ne.length=0,te=0;Ne.length;)Ne.pop()();for(let e=0;e<le.length;e+=1){const n=le[e];Me.has(n)||(Me.add(n),n())}le.length=0}while(ne.length);for(;Ie.length;)Ie.pop()();Oe=!1,Me.clear(),de(t)}function qt(t){if(t.fragment!==null){t.update(),H(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(re)}}function Dt(t){const e=[],n=[];le.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),le=e}let ce;function Be(){return ce||(ce=Promise.resolve(),ce.then(()=>{ce=null})),ce}function x(t,e,n){t.dispatchEvent(At(`${e?"intro":"outro"}${n}`))}const ke=new Set;let Q;function X(){Q={r:0,c:[],p:Q}}function Y(){Q.r||H(Q.c),Q=Q.p}function M(t,e){t&&t.i&&(ke.delete(t),t.i(e))}function O(t,e,n,i){if(t&&t.o){if(ke.has(t))return;ke.add(t),Q.c.push(()=>{ke.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}const Fe={duration:0};function Sn(t,e,n){const i={direction:"in"};let s=e(t,n,i),l=!1,r,f,o=0;function a(){r&&Pe(t,r)}function u(){const{delay:d=0,duration:m=300,easing:h=qe,tick:y=j,css:w}=s||Fe;w&&(r=Ce(t,0,1,m,d,h,w,o++)),y(0,1);const A=De()+d,k=A+m;f&&f.abort(),l=!0,re(()=>x(t,!0,"start")),f=je(v=>{if(l){if(v>=k)return y(1,0),x(t,!0,"end"),a(),l=!1;if(v>=A){const L=h((v-A)/m);y(L,1-L)}}return l})}let c=!1;return{start(){c||(c=!0,Pe(t),G(s)?(s=s(i),Be().then(u)):u())},invalidate(){c=!1},end(){l&&(a(),l=!1)}}}function Mn(t,e,n){const i={direction:"out"};let s=e(t,n,i),l=!0,r;const f=Q;f.r+=1;let o;function a(){const{delay:u=0,duration:c=300,easing:d=qe,tick:m=j,css:h}=s||Fe;h&&(r=Ce(t,1,0,c,u,d,h));const y=De()+u,w=y+c;re(()=>x(t,!1,"start")),"inert"in t&&(o=t.inert,t.inert=!0),je(A=>{if(l){if(A>=w)return m(0,1),x(t,!1,"end"),--f.r||H(f.c),!1;if(A>=y){const k=d((A-y)/c);m(1-k,k)}}return l})}return G(s)?Be().then(()=>{s=s(i),a()}):a(),{end(u){u&&"inert"in t&&(t.inert=o),u&&s.tick&&s.tick(1,0),l&&(r&&Pe(t,r),l=!1)}}}function Ln(t,e,n,i){let l=e(t,n,{direction:"both"}),r=i?0:1,f=null,o=null,a=null,u;function c(){a&&Pe(t,a)}function d(h,y){const w=h.b-r;return y*=Math.abs(w),{a:r,b:h.b,d:w,duration:y,start:h.start,end:h.start+y,group:h.group}}function m(h){const{delay:y=0,duration:w=300,easing:A=qe,tick:k=j,css:v}=l||Fe,L={start:De()+y,b:h};h||(L.group=Q,Q.r+=1),"inert"in t&&(h?u!==void 0&&(t.inert=u):(u=t.inert,t.inert=!0)),f||o?o=L:(v&&(c(),a=Ce(t,r,h,w,y,A,v)),h&&k(0,1),f=d(L,w),re(()=>x(t,h,"start")),je(g=>{if(o&&g>o.start&&(f=d(o,w),o=null,x(t,f.b,"start"),v&&(c(),a=Ce(t,r,f.b,f.duration,0,A,l.css))),f){if(g>=f.end)k(r=f.b,1-r),x(t,f.b,"end"),o||(f.b?c():--f.group.r||H(f.group.c)),f=null;else if(g>=f.start){const I=g-f.start;r=f.a+f.d*A(I/f.duration),k(r,1-r)}}return!!(f||o)}))}return{run(h){G(l)?Be().then(()=>{l=l({direction:h?"in":"out"}),m(h)}):m(h)},end(){c(),f=o=null}}}function ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Rt(t,e){t.d(1),e.delete(t.key)}function Ue(t,e){O(t,1,1,()=>{e.delete(t.key)})}function An(t,e){t.f(),Ue(t,e)}function Te(t,e,n,i,s,l,r,f,o,a,u,c){let d=t.length,m=l.length,h=d;const y={};for(;h--;)y[t[h].key]=h;const w=[],A=new Map,k=new Map,v=[];for(h=m;h--;){const P=c(s,l,h),R=n(P);let z=r.get(R);z?i&&v.push(()=>z.p(P,e)):(z=a(R,P),z.c()),A.set(R,w[h]=z),R in y&&k.set(R,Math.abs(h-y[R]))}const L=new Set,g=new Set;function I(P){M(P,1),P.m(f,u),r.set(P.key,P),u=P.first,m--}for(;d&&m;){const P=w[m-1],R=t[d-1],z=P.key,F=R.key;P===R?(u=P.first,d--,m--):A.has(F)?!r.has(z)||L.has(z)?I(P):g.has(F)?d--:k.get(z)>k.get(F)?(g.add(z),I(P)):(L.add(F),d--):(o(R,r),d--)}for(;d--;){const P=t[d];A.has(P.key)||o(P,r)}for(;m;)I(w[m-1]);return H(v),w}function Nn(t,e,n){const i=t.$$.props[e];i!==void 0&&(t.$$.bound[i]=n,n(t.$$.ctx[i]))}function K(t){t&&t.c()}function V(t,e,n){const{fragment:i,after_update:s}=t.$$;i&&i.m(e,n),re(()=>{const l=t.$$.on_mount.map(ct).filter(G);t.$$.on_destroy?t.$$.on_destroy.push(...l):H(l),t.$$.on_mount=[]}),s.forEach(re)}function W(t,e){const n=t.$$;n.fragment!==null&&(Dt(n.after_update),H(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function jt(t,e){t.$$.dirty[0]===-1&&(ne.push(t),bt(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function oe(t,e,n,i,s,l,r=null,f=[-1]){const o=he;de(t);const a=t.$$={fragment:null,ctx:[],props:l,update:j,not_equal:s,bound:He(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:He(),dirty:f,skip_bound:!1,root:e.target||o.$$.root};r&&r(a.root);let u=!1;if(a.ctx=n?n(t,e.props||{},(c,d,...m)=>{const h=m.length?m[0]:d;return a.ctx&&s(a.ctx[c],a.ctx[c]=h)&&(!a.skip_bound&&a.bound[c]&&a.bound[c](h),u&&jt(t,c)),d}):[],a.update(),u=!0,H(a.before_update),a.fragment=i?i(a.ctx):!1,e.target){if(e.hydrate){const c=Mt(e.target);a.fragment&&a.fragment.l(c),c.forEach(U)}else a.fragment&&a.fragment.c();e.intro&&M(t.$$.fragment),V(t,e.target,e.anchor),pt()}de(o)}class fe{constructor(){$(this,"$$");$(this,"$$set")}$destroy(){W(this,1),this.$destroy=j}$on(e,n){if(!G(n))return j;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(e){this.$$set&&!Ct(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const zt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(zt);function wt(t,e){function n(i){i.target instanceof Element&&!t.contains(i.target)&&e()}return document.addEventListener("click",n,{capture:!0,passive:!0}),document.addEventListener("keyup",n,{capture:!0,passive:!0}),{update(i){e=i},destroy(){document.removeEventListener("click",n,{capture:!0}),document.removeEventListener("keyup",n,{capture:!0})}}}function Ve(){return window.M.cfg.wwwroot+"/local/mail/"}function In(t,e=[],n){const i=new URL(Ve()+"create.php");return i.searchParams.set("course",String(t)),e.length&&i.searchParams.set("recipients",e.join(",")),n&&i.searchParams.set("role",n),i.searchParams.set("sesskey",window.M.cfg.sesskey),i.toString()}function On(t){const e=new URL(Ve()+"download.php");return e.searchParams.set("m",String(t)),e.toString()}function Un(){const t=new URL(window.location.href),e={tray:t.searchParams.get("t")||void 0,courseid:parseInt(t.searchParams.get("c")||"")||void 0,labelid:parseInt(t.searchParams.get("l")||"")||void 0,messageid:parseInt(t.searchParams.get("m")||"")||void 0,offset:parseInt(t.searchParams.get("o")||"")||void 0,dialog:t.searchParams.get("d")||void 0},n={content:t.searchParams.get("s")||void 0,sendername:t.searchParams.get("sf")||void 0,recipientname:t.searchParams.get("st")||void 0,unread:t.searchParams.get("su")=="1"||void 0,withfilesonly:t.searchParams.get("sa")=="1"||void 0,maxtime:parseInt(t.searchParams.get("sd")||"")||void 0,startid:parseInt(t.searchParams.get("ss")||"")||void 0,reverse:t.searchParams.get("sr")=="1"||void 0};return Object.values(n).some(i=>i!=null)?{...e,search:n}:e}function Tn(t,e){const n=new URL(Ee(t));n.search!=window.location.search&&(e?window.history.replaceState(void 0,"",n.toString()):window.history.pushState(void 0,"",n.toString()))}function Ee(t){var n,i,s,l,r,f,o,a;const e=new URL(Ve()+"view.php");return t.tray&&e.searchParams.set("t",t.tray),t.courseid&&e.searchParams.set("c",String(t.courseid)),t.tray=="label"&&t.labelid&&e.searchParams.set("l",String(t.labelid)),t.messageid&&e.searchParams.set("m",String(t.messageid)),t.offset&&e.searchParams.set("o",String(t.offset)),(n=t.search)!=null&&n.content&&e.searchParams.set("s",t.search.content),(i=t.search)!=null&&i.sendername&&e.searchParams.set("sf",t.search.sendername),(s=t.search)!=null&&s.recipientname&&e.searchParams.set("st",t.search.recipientname),(l=t.search)!=null&&l.unread&&e.searchParams.set("su","1"),(r=t.search)!=null&&r.withfilesonly&&e.searchParams.set("sa","1"),(f=t.search)!=null&&f.maxtime&&e.searchParams.set("sd",String(t.search.maxtime)),(o=t.search)!=null&&o.startid&&e.searchParams.set("ss",String(t.search.startid)),(a=t.search)!=null&&a.reverse&&e.searchParams.set("sr","1"),t.dialog&&e.searchParams.set("d",t.dialog),e.toString()}function Bt(t){let e,n,i,s,l=t[0].compose+"",r,f,o,a;return{c(){e=N("button"),n=N("i"),i=D(),s=N("span"),r=J(l),_(n,"class","fa fa-edit mr-0 mr-sm-1"),S(s,"d-none",t[1]),_(e,"type","button"),_(e,"class","btn btn-primary text-truncate px-2 px-sm-3"),_(e,"aria-label",f=t[0].compose),S(e,"flex-shrink-0",t[1])},m(u,c){q(u,e,c),C(e,n),C(e,i),C(e,s),C(s,r),o||(a=B(e,"click",function(){G(t[2])&&t[2].apply(this,arguments)}),o=!0)},p(u,[c]){t=u,c&1&&l!==(l=t[0].compose+"")&&Z(r,l),c&2&&S(s,"d-none",t[1]),c&1&&f!==(f=t[0].compose)&&_(e,"aria-label",f),c&2&&S(e,"flex-shrink-0",t[1])},i:j,o:j,d(u){u&&U(e),o=!1,a()}}}function Ft(t,e,n){let{strings:i}=e,{iconOnly:s=!1}=e,{onClick:l}=e;return t.$$set=r=>{"strings"in r&&n(0,i=r.strings),"iconOnly"in r&&n(1,s=r.iconOnly),"onClick"in r&&n(2,l=r.onClick)},[i,s,l]}class Vt extends fe{constructor(e){super(),oe(this,e,Ft,Bt,ae,{strings:0,iconOnly:1,onClick:2})}}function We(t,e){function n(){t.offsetWidth<t.scrollWidth?t.setAttribute("title",e):t.removeAttribute("title")}return t.style.overflow="hidden",t.style.textOverflow="ellipsis",t.style.whiteSpace="nowrap",t.addEventListener("mouseenter",n),{update(i){e=i},destroy(){t.removeEventListener("mouseenter",n,!0)}}}function Ge(t,e,n){const i=t.slice();return i[30]=e[n],i}function Wt(t){var f;let e,n=(((f=t[10])==null?void 0:f[t[8]])||"")+"",i,s,l,r;return{c(){e=N("button"),i=J(n),_(e,"type","button"),_(e,"class","form-control px-5 text-left"),S(e,"alert-primary",t[4]&&(t[5]=="filter-left"||t[5]=="filter-right")),S(e,"btn-secondary",t[5]=="menu"||t[5]=="navbar")},m(o,a){var u;q(o,e,a),C(e,i),l||(r=[_e(s=We.call(null,e,((u=t[10])==null?void 0:u[t[8]])||"")),B(e,"click",t[16])],l=!0)},p(o,a){var u,c;a[0]&1280&&n!==(n=(((u=o[10])==null?void 0:u[o[8]])||"")+"")&&Z(i,n),s&&G(s.update)&&a[0]&1280&&s.update.call(null,((c=o[10])==null?void 0:c[o[8]])||""),a[0]&48&&S(e,"alert-primary",o[4]&&(o[5]=="filter-left"||o[5]=="filter-right")),a[0]&32&&S(e,"btn-secondary",o[5]=="menu"||o[5]=="navbar")},d(o){o&&U(e),l=!1,H(r)}}}function Ht(t){let e,n,i,s;return{c(){e=N("button"),n=J(t[1]),_(e,"type","button"),_(e,"class","form-control px-5 text-left"),me(e,"border-color","rgba(0, 0, 0, 0.125)"),S(e,"btn-secondary",t[5]=="menu"||t[5]=="navbar")},m(l,r){q(l,e,r),C(e,n),i||(s=B(e,"click",t[14]),i=!0)},p(l,r){r[0]&2&&Z(n,l[1]),r[0]&32&&S(e,"btn-secondary",l[5]=="menu"||l[5]=="navbar")},d(l){l&&U(e),i=!1,s()}}}function Kt(t){let e,n,i,s,l;return{c(){e=N("input"),_(e,"type","text"),_(e,"class","form-control px-5 text-truncate"),_(e,"placeholder",n=t[7]?t[0].course:t[1]),_(e,"aria-label",i=t[7]?t[0].course:t[1])},m(r,f){q(r,e,f),Ke(e,t[6]),t[26](e),s||(l=[B(e,"input",t[25]),B(e,"focus",t[14]),B(e,"keyup",t[19])],s=!0)},p(r,f){f[0]&131&&n!==(n=r[7]?r[0].course:r[1])&&_(e,"placeholder",n),f[0]&131&&i!==(i=r[7]?r[0].course:r[1])&&_(e,"aria-label",i),f[0]&64&&e.value!==r[6]&&Ke(e,r[6])},d(r){r&&U(e),t[26](null),s=!1,H(l)}}}function Gt(t){var f;let e,n=((f=t[10])==null?void 0:f[t[8]])+"",i,s,l,r;return{c(){e=N("div"),i=J(n),_(e,"class","form-control alert-secondary px-2 text-left")},m(o,a){var u;q(o,e,a),C(e,i),l||(r=_e(s=We.call(null,e,((u=t[10])==null?void 0:u[t[8]])||"")),l=!0)},p(o,a){var u,c;a[0]&1280&&n!==(n=((u=o[10])==null?void 0:u[o[8]])+"")&&Z(i,n),s&&G(s.update)&&a[0]&1280&&s.update.call(null,((c=o[10])==null?void 0:c[o[8]])||"")},d(o){o&&U(e),l=!1,r()}}}function Je(t){let e,n,i,s,l,r;return{c(){e=N("button"),n=N("i"),_(n,"class",i="fa fa-fw "+t[12]),_(n,"aria-hidden","true"),_(e,"type","button"),_(e,"aria-expanded",t[7]),_(e,"title",s=t[0].changecourse),_(e,"class","btn position-absolute h-100 d-flex align-items-center px-2"),me(e,"top","0"),me(e,"right","0")},m(f,o){q(f,e,o),C(e,n),l||(r=B(e,"click",t[16]),l=!0)},p(f,o){o[0]&4096&&i!==(i="fa fa-fw "+f[12])&&_(n,"class",i),o[0]&128&&_(e,"aria-expanded",f[7]),o[0]&1&&s!==(s=f[0].changecourse)&&_(e,"title",s)},d(f){f&&U(e),l=!1,r()}}}function Qe(t){let e,n,i=[],s=new Map,l=!t[2]&&Xe(t),r=ie(t[13]);const f=a=>a[30].id;for(let a=0;a<r.length;a+=1){let u=Ge(t,r,a),c=f(u);s.set(c,i[a]=Ze(c,u))}let o=null;return r.length||(o=Ye(t)),{c(){e=N("div"),l&&l.c(),n=D();for(let a=0;a<i.length;a+=1)i[a].c();o&&o.c(),_(e,"class","dropdown-menu show"),S(e,"dropdown-menu-left",t[5]=="menu"||t[5]=="filter-left"),S(e,"dropdown-menu-right",t[5]=="filter-right"),S(e,"w-100",t[5]=="navbar")},m(a,u){q(a,e,u),l&&l.m(e,null),C(e,n);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);o&&o.m(e,null)},p(a,u){a[2]?l&&(l.d(1),l=null):l?l.p(a,u):(l=Xe(a),l.c(),l.m(e,n)),u[0]&272417&&(r=ie(a[13]),i=Te(i,u,f,1,a,r,s,e,Rt,Ze,null,Ge),!r.length&&o?o.p(a,u):r.length?o&&(o.d(1),o=null):(o=Ye(a),o.c(),o.m(e,null))),u[0]&32&&S(e,"dropdown-menu-left",a[5]=="menu"||a[5]=="filter-left"),u[0]&32&&S(e,"dropdown-menu-right",a[5]=="filter-right"),u[0]&32&&S(e,"w-100",a[5]=="navbar")},d(a){a&&U(e),l&&l.d();for(let u=0;u<i.length;u+=1)i[u].d();o&&o.d()}}}function Xe(t){let e,n=t[0].allcourses+"",i,s,l,r,f;return{c(){e=N("button"),i=J(n),s=D(),l=N("div"),_(e,"type","button"),_(e,"class","dropdown-item text-truncate"),S(e,"px-3",t[5]=="navbar"),_(l,"class","dropdown-divider")},m(o,a){q(o,e,a),C(e,i),q(o,s,a),q(o,l,a),r||(f=B(e,"click",t[27]),r=!0)},p(o,a){a[0]&1&&n!==(n=o[0].allcourses+"")&&Z(i,n),a[0]&32&&S(e,"px-3",o[5]=="navbar")},d(o){o&&(U(e),U(s),U(l)),r=!1,f()}}}function Ye(t){let e,n=t[0].nocoursematchestext+"",i,s;return{c(){e=N("div"),i=J(n),s=D(),_(e,"class","px-4 text-danger")},m(l,r){q(l,e,r),C(e,i),C(e,s)},p(l,r){r[0]&1&&n!==(n=l[0].nocoursematchestext+"")&&Z(i,n)},d(l){l&&U(e)}}}function Ze(t,e){let n,i,s=e[11](e[30])+"",l,r,f;function o(){return e[28](e[30])}return{key:t,first:null,c(){n=N("button"),i=new Nt(!1),l=D(),i.a=l,_(n,"type","button"),_(n,"class","dropdown-item text-truncate"),S(n,"px-3",e[5]=="navbar"),this.first=n},m(a,u){q(a,n,u),i.m(s,n),C(n,l),r||(f=B(n,"click",o),r=!0)},p(a,u){e=a,u[0]&10240&&s!==(s=e[11](e[30])+"")&&i.p(s),u[0]&32&&S(n,"px-3",e[5]=="navbar")},d(a){a&&U(n),r=!1,f()}}}function Jt(t){let e,n,i,s,l,r,f;function o(m,h){return m[3]?Gt:m[7]?Kt:m[10]?Wt:Ht}let a=o(t),u=a(t),c=!t[3]&&Je(t),d=t[7]&&Qe(t);return{c(){e=N("div"),n=N("div"),n.innerHTML='<i class="fa fa-fw fa-graduation-cap" aria-hidden="true"></i>',i=D(),u.c(),s=D(),c&&c.c(),l=D(),d&&d.c(),_(n,"class","local-mail-course-select-icon position-absolute h-100 d-flex align-items-center"),me(n,"top","0"),me(n,"left","0"),_(e,"class","local-mail-course-select position-relative d-flex p-0"),S(e,"local-mail-course-select-menu",t[5]=="menu"||t[5]=="navbar"),S(e,"local-mail-course-select-navbar",t[5]=="navbar"),S(e,"list-group-item",t[5]=="menu"||t[5]=="navbar")},m(m,h){q(m,e,h),C(e,n),C(e,i),u.m(e,null),C(e,s),c&&c.m(e,null),C(e,l),d&&d.m(e,null),r||(f=_e(wt.call(null,e,t[15])),r=!0)},p(m,h){a===(a=o(m))&&u?u.p(m,h):(u.d(1),u=a(m),u&&(u.c(),u.m(e,s))),m[3]?c&&(c.d(1),c=null):c?c.p(m,h):(c=Je(m),c.c(),c.m(e,l)),m[7]?d?d.p(m,h):(d=Qe(m),d.c(),d.m(e,null)):d&&(d.d(1),d=null),h[0]&32&&S(e,"local-mail-course-select-menu",m[5]=="menu"||m[5]=="navbar"),h[0]&32&&S(e,"local-mail-course-select-navbar",m[5]=="navbar"),h[0]&32&&S(e,"list-group-item",m[5]=="menu"||m[5]=="navbar")},i:j,o:j,d(m){m&&U(e),u.d(),c&&c.d(),d&&d.d(),r=!1,f()}}}function Qt(t,e,n){let i,s,l,r,{settings:f}=e,{strings:o}=e,{courses:a}=e,{label:u}=e,{selected:c}=e,{required:d=!1}=e,{readonly:m=!1}=e,{primary:h=!1}=e,{style:y}=e,{onChange:w}=e,A,k="",v=!1,L,g;const I=E=>E.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),P=async()=>{n(7,v=!0),n(6,k=""),await Tt(),A.focus()},R=()=>{n(7,v=!1),n(6,k="")},z=async()=>{v?R():P()},F=async()=>{await w(),n(20,c=void 0),n(7,v=!1),n(6,k="")},ue=async E=>{await w(E.id),n(20,c=E.id),n(7,v=!1),n(6,k="")},ge=E=>{E.key=="Escape"&&(n(7,v=!1),n(6,k=""),A.blur())};function b(){k=this.value,n(6,k)}function p(E){Ne[E?"unshift":"push"](()=>{A=E,n(9,A)})}const T=()=>F(),be=E=>ue(E);return t.$$set=E=>{"settings"in E&&n(21,f=E.settings),"strings"in E&&n(0,o=E.strings),"courses"in E&&n(22,a=E.courses),"label"in E&&n(1,u=E.label),"selected"in E&&n(20,c=E.selected),"required"in E&&n(2,d=E.required),"readonly"in E&&n(3,m=E.readonly),"primary"in E&&n(4,h=E.primary),"style"in E&&n(5,y=E.style),"onChange"in E&&n(23,w=E.onChange)},t.$$.update=()=>{t.$$.dirty[0]&2097152&&n(8,g=f.filterbycourse=="shortname"?"shortname":"fullname"),t.$$.dirty[0]&5242880&&n(10,L=a.find(E=>E.id==c)),t.$$.dirty[0]&64&&n(24,i=new RegExp(I(k.trim()).replaceAll(/\s+/gu,"\\s+"),"giu")),t.$$.dirty[0]&20971776&&n(13,s=a.filter(E=>E[g].match(i))),t.$$.dirty[0]&192&&n(12,l=v?k?"fa-times":"fa-caret-up":"fa-caret-down"),t.$$.dirty[0]&16777472&&n(11,r=E=>E[g].replaceAll(i,Se=>Se.trim()?"<mark>"+Se+"</mark>":Se))},[o,u,d,m,h,y,k,v,g,A,L,r,l,s,P,R,z,F,ue,ge,c,f,a,w,i,b,p,T,be]}class Xt extends fe{constructor(e){super(),oe(this,e,Qt,Jt,ae,{settings:21,strings:0,courses:22,label:1,selected:20,required:2,readonly:3,primary:4,style:5,onChange:23},null,[-1,-1])}}function $e(t){let e,n;return{c(){e=N("span"),n=J(t[3]),_(e,"class","badge")},m(i,s){q(i,e,s),C(e,n)},p(i,s){s&8&&Z(n,i[3])},d(i){i&&U(e)}}}function Yt(t){let e,n,i,s,l,r,f,o,a,u,c,d,m,h=t[3]>0&&$e(t);return{c(){e=N("a"),n=N("i"),l=D(),r=N("span"),f=J(t[1]),a=D(),h&&h.c(),_(n,"class",i="fa "+t[0]+" fa-fw"),_(n,"aria-hidden","true"),_(n,"style",s=t[6]&&!t[5]?`color: var(--local-mail-color-${t[6]}-bg)`:""),_(r,"class","flex-fill px-2"),_(e,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2"),_(e,"aria-current",t[5]),_(e,"aria-disabled",t[4]),_(e,"role","tab"),_(e,"href",u=Ee(t[2])),_(e,"style",c=t[6]&&!t[5]?`color: var(--local-mail-color-${t[6]}-fg)`:""),S(e,"list-group-item-primary",t[5]),S(e,"disabled",t[4])},m(y,w){q(y,e,w),C(e,n),C(e,l),C(e,r),C(r,f),C(e,a),h&&h.m(e,null),d||(m=[_e(o=We.call(null,r,t[1])),B(e,"click",t[7])],d=!0)},p(y,[w]){w&1&&i!==(i="fa "+y[0]+" fa-fw")&&_(n,"class",i),w&96&&s!==(s=y[6]&&!y[5]?`color: var(--local-mail-color-${y[6]}-bg)`:"")&&_(n,"style",s),w&2&&Z(f,y[1]),o&&G(o.update)&&w&2&&o.update.call(null,y[1]),y[3]>0?h?h.p(y,w):(h=$e(y),h.c(),h.m(e,null)):h&&(h.d(1),h=null),w&32&&_(e,"aria-current",y[5]),w&16&&_(e,"aria-disabled",y[4]),w&4&&u!==(u=Ee(y[2]))&&_(e,"href",u),w&96&&c!==(c=y[6]&&!y[5]?`color: var(--local-mail-color-${y[6]}-fg)`:"")&&_(e,"style",c),w&32&&S(e,"list-group-item-primary",y[5]),w&16&&S(e,"disabled",y[4])},i:j,o:j,d(y){y&&U(e),h&&h.d(),d=!1,H(m)}}}function Zt(t,e,n){let{icon:i}=e,{text:s}=e,{params:l}=e,{count:r=0}=e,{disabled:f=!1}=e,{active:o=!1}=e,{color:a=void 0}=e,{onClick:u=void 0}=e;const c=d=>{u&&(d.preventDefault(),u(l))};return t.$$set=d=>{"icon"in d&&n(0,i=d.icon),"text"in d&&n(1,s=d.text),"params"in d&&n(2,l=d.params),"count"in d&&n(3,r=d.count),"disabled"in d&&n(4,f=d.disabled),"active"in d&&n(5,o=d.active),"color"in d&&n(6,a=d.color),"onClick"in d&&n(8,u=d.onClick)},[i,s,l,r,f,o,a,c,u]}class ee extends fe{constructor(e){super(),oe(this,e,Zt,Yt,ae,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function xe(t,e,n){const i=t.slice();return i[18]=e[n],i}function et(t,e,n){const i=t.slice();return i[21]=e[n],i}function tt(t){let e,n;return e=new Xt({props:{settings:t[0],strings:t[1],courses:t[2],label:t[1].allcourses,selected:t[4].courseid,primary:!!t[4].courseid,style:t[5]?"navbar":"menu",onChange:t[7]}}),{c(){K(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){const l={};s&1&&(l.settings=i[0]),s&2&&(l.strings=i[1]),s&4&&(l.courses=i[2]),s&2&&(l.label=i[1].allcourses),s&16&&(l.selected=i[4].courseid),s&16&&(l.primary=!!i[4].courseid),s&32&&(l.style=i[5]?"navbar":"menu"),s&128&&(l.onChange=i[7]),e.$set(l)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function nt(t){let e,n;return e=new ee({props:{icon:"fa-star",text:t[1].starredplural,params:{tray:"starred",courseid:t[10],search:t[9]},active:t[4].tray=="starred",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){const l={};s&2&&(l.text=i[1].starredplural),s&1536&&(l.params={tray:"starred",courseid:i[10],search:i[9]}),s&16&&(l.active=i[4].tray=="starred"),s&64&&(l.onClick=i[6]),e.$set(l)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function it(t){let e,n;return e=new ee({props:{icon:"fa-paper-plane",text:t[1].sentplural,params:{tray:"sent",courseid:t[10],search:t[9]},active:t[4].tray=="sent",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){const l={};s&2&&(l.text=i[1].sentplural),s&1536&&(l.params={tray:"sent",courseid:i[10],search:i[9]}),s&16&&(l.active=i[4].tray=="sent"),s&64&&(l.onClick=i[6]),e.$set(l)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function st(t){var i;let e,n;return e=new ee({props:{icon:"fa-file",text:t[1].drafts,count:t[10]?(i=t[2].find(t[16]))==null?void 0:i.drafts:t[13],params:{tray:"drafts",courseid:t[10],search:t[9]},active:t[4].tray=="drafts",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(s,l){V(e,s,l),n=!0},p(s,l){var f;const r={};l&2&&(r.text=s[1].drafts),l&9220&&(r.count=s[10]?(f=s[2].find(s[16]))==null?void 0:f.drafts:s[13]),l&1536&&(r.params={tray:"drafts",courseid:s[10],search:s[9]}),l&16&&(r.active=s[4].tray=="drafts"),l&64&&(r.onClick=s[6]),e.$set(r)},i(s){n||(M(e.$$.fragment,s),n=!0)},o(s){O(e.$$.fragment,s),n=!1},d(s){W(e,s)}}}function lt(t){let e,n;return e=new ee({props:{icon:"fa-trash",text:t[1].trash,params:{tray:"trash",courseid:t[10],search:t[9]},active:t[4].tray=="trash",onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){const l={};s&2&&(l.text=i[1].trash),s&1536&&(l.params={tray:"trash",courseid:i[10],search:i[9]}),s&16&&(l.active=i[4].tray=="trash"),s&64&&(l.onClick=i[6]),e.$set(l)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function rt(t,e){var l;let n,i,s;return i=new ee({props:{icon:"fa-tag",text:e[21].name,count:e[10]?(l=e[21].courses.find(e[17]))==null?void 0:l.unread:e[21].unread,color:e[21].color,params:{tray:"label",labelid:e[21].id,courseid:e[10],search:e[9]},active:e[4].tray=="label"&&e[4].labelid==e[21].id,onClick:e[6]}}),{key:t,first:null,c(){n=Ae(),K(i.$$.fragment),this.first=n},m(r,f){q(r,n,f),V(i,r,f),s=!0},p(r,f){var a;e=r;const o={};f&8&&(o.text=e[21].name),f&1032&&(o.count=e[10]?(a=e[21].courses.find(e[17]))==null?void 0:a.unread:e[21].unread),f&8&&(o.color=e[21].color),f&1544&&(o.params={tray:"label",labelid:e[21].id,courseid:e[10],search:e[9]}),f&24&&(o.active=e[4].tray=="label"&&e[4].labelid==e[21].id),f&64&&(o.onClick=e[6]),i.$set(o)},i(r){s||(M(i.$$.fragment,r),s=!0)},o(r){O(i.$$.fragment,r),s=!1},d(r){r&&U(n),W(i,r)}}}function at(t){let e,n;return e=new ee({props:{icon:"fa-graduation-cap",text:t[0].coursetraysname=="fullname"?t[18].fullname:t[18].shortname,count:t[18].unread,params:t[8]?{tray:"inbox",courseid:t[18].id,search:t[9]}:{tray:"course",courseid:t[18].id,search:t[9]},active:(t[4].tray=="course"||!t[4].tray&&!t[8])&&t[4].courseid==t[18].id,onClick:t[6]}}),{c(){K(e.$$.fragment)},m(i,s){V(e,i,s),n=!0},p(i,s){const l={};s&5&&(l.text=i[0].coursetraysname=="fullname"?i[18].fullname:i[18].shortname),s&4&&(l.count=i[18].unread),s&772&&(l.params=i[8]?{tray:"inbox",courseid:i[18].id,search:i[9]}:{tray:"course",courseid:i[18].id,search:i[9]}),s&276&&(l.active=(i[4].tray=="course"||!i[4].tray&&!i[8])&&i[4].courseid==i[18].id),s&64&&(l.onClick=i[6]),e.$set(l)},i(i){n||(M(e.$$.fragment,i),n=!0)},o(i){O(e.$$.fragment,i),n=!1},d(i){W(e,i)}}}function ot(t,e){let n,i=e[11](e[18])&&(!e[8]||e[18].id!=e[10]),s,l,r=i&&at(e);return{key:t,first:null,c(){n=Ae(),r&&r.c(),s=Ae(),this.first=n},m(f,o){q(f,n,o),r&&r.m(f,o),q(f,s,o),l=!0},p(f,o){e=f,o&3332&&(i=e[11](e[18])&&(!e[8]||e[18].id!=e[10])),i?r?(r.p(e,o),o&3332&&M(r,1)):(r=at(e),r.c(),M(r,1),r.m(s.parentNode,s)):r&&(X(),O(r,1,1,()=>{r=null}),Y())},i(f){l||(M(r),l=!0)},o(f){O(r),l=!1},d(f){f&&(U(n),U(s)),r&&r.d(f)}}}function $t(t){var ge;let e,n,i,s,l=t[12]("starred"),r,f=t[12]("sent"),o,a=t[12]("drafts"),u,c=t[12]("trash"),d,m=[],h=new Map,y,w=[],A=new Map,k,v=(t[8]||t[10])&&tt(t);i=new ee({props:{icon:"fa-inbox",text:t[1].inbox,count:t[10]?(ge=t[2].find(t[15]))==null?void 0:ge.unread:t[14],params:{tray:"inbox",courseid:t[10],search:t[9]},active:t[4].tray=="inbox",onClick:t[6]}});let L=l&&nt(t),g=f&&it(t),I=a&&st(t),P=c&&lt(t),R=ie(t[3]);const z=b=>b[21].id;for(let b=0;b<R.length;b+=1){let p=et(t,R,b),T=z(p);h.set(T,m[b]=rt(T,p))}let F=ie(t[2]);const ue=b=>b[18].id;for(let b=0;b<F.length;b+=1){let p=xe(t,F,b),T=ue(p);A.set(T,w[b]=ot(T,p))}return{c(){e=N("div"),v&&v.c(),n=D(),K(i.$$.fragment),s=D(),L&&L.c(),r=D(),g&&g.c(),o=D(),I&&I.c(),u=D(),P&&P.c(),d=D();for(let b=0;b<m.length;b+=1)m[b].c();y=D();for(let b=0;b<w.length;b+=1)w[b].c();_(e,"class","list-group"),S(e,"local-mail-menu-navbar",t[5]),S(e,"list-group-flush",t[5]),S(e,"border-top",t[5])},m(b,p){q(b,e,p),v&&v.m(e,null),C(e,n),V(i,e,null),C(e,s),L&&L.m(e,null),C(e,r),g&&g.m(e,null),C(e,o),I&&I.m(e,null),C(e,u),P&&P.m(e,null),C(e,d);for(let T=0;T<m.length;T+=1)m[T]&&m[T].m(e,null);C(e,y);for(let T=0;T<w.length;T+=1)w[T]&&w[T].m(e,null);k=!0},p(b,[p]){var be;b[8]||b[10]?v?(v.p(b,p),p&1280&&M(v,1)):(v=tt(b),v.c(),M(v,1),v.m(e,n)):v&&(X(),O(v,1,1,()=>{v=null}),Y());const T={};p&2&&(T.text=b[1].inbox),p&17412&&(T.count=b[10]?(be=b[2].find(b[15]))==null?void 0:be.unread:b[14]),p&1536&&(T.params={tray:"inbox",courseid:b[10],search:b[9]}),p&16&&(T.active=b[4].tray=="inbox"),p&64&&(T.onClick=b[6]),i.$set(T),p&4096&&(l=b[12]("starred")),l?L?(L.p(b,p),p&4096&&M(L,1)):(L=nt(b),L.c(),M(L,1),L.m(e,r)):L&&(X(),O(L,1,1,()=>{L=null}),Y()),p&4096&&(f=b[12]("sent")),f?g?(g.p(b,p),p&4096&&M(g,1)):(g=it(b),g.c(),M(g,1),g.m(e,o)):g&&(X(),O(g,1,1,()=>{g=null}),Y()),p&4096&&(a=b[12]("drafts")),a?I?(I.p(b,p),p&4096&&M(I,1)):(I=st(b),I.c(),M(I,1),I.m(e,u)):I&&(X(),O(I,1,1,()=>{I=null}),Y()),p&4096&&(c=b[12]("trash")),c?P?(P.p(b,p),p&4096&&M(P,1)):(P=lt(b),P.c(),M(P,1),P.m(e,d)):P&&(X(),O(P,1,1,()=>{P=null}),Y()),p&1624&&(R=ie(b[3]),X(),m=Te(m,p,z,1,b,R,h,e,Ue,rt,y,et),Y()),p&3925&&(F=ie(b[2]),X(),w=Te(w,p,ue,1,b,F,A,e,Ue,ot,null,xe),Y()),(!k||p&32)&&S(e,"local-mail-menu-navbar",b[5]),(!k||p&32)&&S(e,"list-group-flush",b[5]),(!k||p&32)&&S(e,"border-top",b[5])},i(b){if(!k){M(v),M(i.$$.fragment,b),M(L),M(g),M(I),M(P);for(let p=0;p<R.length;p+=1)M(m[p]);for(let p=0;p<F.length;p+=1)M(w[p]);k=!0}},o(b){O(v),O(i.$$.fragment,b),O(L),O(g),O(I),O(P);for(let p=0;p<m.length;p+=1)O(m[p]);for(let p=0;p<w.length;p+=1)O(w[p]);k=!1},d(b){b&&U(e),v&&v.d(),W(i),L&&L.d(),g&&g.d(),I&&I.d(),P&&P.d();for(let p=0;p<m.length;p+=1)m[p].d();for(let p=0;p<w.length;p+=1)w[p].d()}}}function xt(t,e,n){let i,s,l,r,f,o,a,{settings:u}=e,{strings:c}=e,{courses:d}=e,{labels:m}=e,{params:h}=e,{navbar:y=!1}=e,{onClick:w=void 0}=e,{onCourseChange:A}=e;const k=g=>g.id==o,v=g=>g.id==o,L=g=>g.id==o;return t.$$set=g=>{"settings"in g&&n(0,u=g.settings),"strings"in g&&n(1,c=g.strings),"courses"in g&&n(2,d=g.courses),"labels"in g&&n(3,m=g.labels),"params"in g&&n(4,h=g.params),"navbar"in g&&n(5,y=g.navbar),"onClick"in g&&n(6,w=g.onClick),"onCourseChange"in g&&n(7,A=g.onCourseChange)},t.$$.update=()=>{t.$$.dirty&4&&n(14,i=d.reduce((g,I)=>g+I.unread,0)),t.$$.dirty&4&&n(13,s=d.reduce((g,I)=>g+I.drafts,0)),t.$$.dirty&17&&n(12,l=g=>u.globaltrays.includes(g)||h.tray==g),t.$$.dirty&17&&n(11,r=g=>u.coursetrays=="all"||u.coursetrays=="unread"&&(g.unread||0)>0||h.tray=="course"&&h.courseid==g.id),t.$$.dirty&1&&n(8,f=["shortname","fullname"].includes(u.filterbycourse)),t.$$.dirty&272&&n(10,o=f?h.courseid:void 0),t.$$.dirty&16&&n(9,a=h.search?{content:h.search.content,sendername:h.search.sendername,recipientname:h.search.recipientname,maxtime:h.search.maxtime,unread:h.search.unread,withfilesonly:h.search.withfilesonly}:void 0)},[u,c,d,m,h,y,w,A,f,a,o,r,l,s,i,k,v,L]}class en extends fe{constructor(e){super(),oe(this,e,xt,$t,ae,{settings:0,strings:1,courses:2,labels:3,params:4,navbar:5,onClick:6,onCourseChange:7})}}function tn(t){let e,n,i,s,l;return{c(){e=N("button"),n=N("i"),_(n,"class","fa fa-cog"),_(n,"aria-hidden",!0),_(e,"type","button"),_(e,"class","btn btn-secondary text-truncate"),_(e,"title",i=t[0].preferences)},m(r,f){q(r,e,f),C(e,n),s||(l=B(e,"click",function(){G(t[1])&&t[1].apply(this,arguments)}),s=!0)},p(r,[f]){t=r,f&1&&i!==(i=t[0].preferences)&&_(e,"title",i)},i:j,o:j,d(r){r&&U(e),s=!1,l()}}}function nn(t,e,n){let{strings:i}=e,{onClick:s}=e;return t.$$set=l=>{"strings"in l&&n(0,i=l.strings),"onClick"in l&&n(1,s=l.onClick)},[i,s]}class sn extends fe{constructor(e){super(),oe(this,e,nn,tn,ae,{strings:0,onClick:1})}}function ft(t){let e,n;return{c(){e=N("div"),n=J(t[7]),_(e,"class","local-mail-navbar-count count-container")},m(i,s){q(i,e,s),C(e,n)},p(i,s){s&128&&Z(n,i[7])},d(i){i&&U(e)}}}function ut(t){let e,n,i,s,l,r,f,o;return i=new Vt({props:{strings:t[1],onClick:t[9]}}),l=new sn({props:{strings:t[1],onClick:t[12]}}),f=new en({props:{settings:t[0],strings:t[1],courses:t[2],labels:t[3],params:t[4],navbar:!0,onClick:t[11],onCourseChange:t[5]}}),{c(){e=N("div"),n=N("div"),K(i.$$.fragment),s=D(),K(l.$$.fragment),r=D(),K(f.$$.fragment),_(n,"class","d-flex justify-content-between p-2"),_(e,"class","local-mail-navbar-popover popover-region-container")},m(a,u){q(a,e,u),C(e,n),V(i,n,null),C(n,s),V(l,n,null),C(e,r),V(f,e,null),o=!0},p(a,u){const c={};u&2&&(c.strings=a[1]),i.$set(c);const d={};u&2&&(d.strings=a[1]),l.$set(d);const m={};u&1&&(m.settings=a[0]),u&2&&(m.strings=a[1]),u&4&&(m.courses=a[2]),u&8&&(m.labels=a[3]),u&16&&(m.params=a[4]),u&32&&(m.onCourseChange=a[5]),f.$set(m)},i(a){o||(M(i.$$.fragment,a),M(l.$$.fragment,a),M(f.$$.fragment,a),o=!0)},o(a){O(i.$$.fragment,a),O(l.$$.fragment,a),O(f.$$.fragment,a),o=!1},d(a){a&&U(e),W(i),W(l),W(f)}}}function ln(t){let e,n,i,s,l,r,f,o,a,u,c=t[7]>0&&ft(t),d=t[6]&&ut(t);return{c(){e=N("div"),n=N("a"),i=N("i"),l=D(),c&&c.c(),f=D(),d&&d.c(),_(i,"class","icon fa fa-fw fa-envelope-o m-0"),_(i,"aria-label",s=t[1].plugginname),_(n,"aria-expanded",t[6]),_(n,"class","nav-link btn h-100 position-relative d-flex align-items-center px-2 py-0 rounded-0"),_(n,"href",Ee({tray:"inbox"})),_(n,"title",r=t[1].pluginname),_(e,"class","local-mail local-mail-navbar pop-over-region h-100"),S(e,"popover-region-toggle",t[6])},m(m,h){q(m,e,h),C(e,n),C(n,i),C(n,l),c&&c.m(n,null),C(e,f),d&&d.m(e,null),o=!0,a||(u=[B(n,"click",t[10]),_e(wt.call(null,e,t[8]))],a=!0)},p(m,[h]){(!o||h&2&&s!==(s=m[1].plugginname))&&_(i,"aria-label",s),m[7]>0?c?c.p(m,h):(c=ft(m),c.c(),c.m(n,null)):c&&(c.d(1),c=null),(!o||h&64)&&_(n,"aria-expanded",m[6]),(!o||h&2&&r!==(r=m[1].pluginname))&&_(n,"title",r),m[6]?d?(d.p(m,h),h&64&&M(d,1)):(d=ut(m),d.c(),M(d,1),d.m(e,null)):d&&(X(),O(d,1,1,()=>{d=null}),Y()),(!o||h&64)&&S(e,"popover-region-toggle",m[6])},i(m){o||(M(d),o=!0)},o(m){O(d),o=!1},d(m){m&&U(e),c&&c.d(),d&&d.d(),a=!1,H(u)}}}function rn(t,e,n){let i,{settings:s}=e,{strings:l}=e,{courses:r}=e,{labels:f}=e,{params:o}=e,{onClick:a}=e,{onComposeClick:u}=e,{onCourseChange:c}=e,d=!1;const m=()=>{n(6,d=!1)},h=()=>{m(),u(o.courseid||r[0].id)},y=k=>{s.globaltrays.length>0||f.length>0?(n(6,d=!d),k.preventDefault()):(k.preventDefault(),a({tray:"inbox"}))},w=k=>{m(),a(k)},A=()=>{m(),a({...o,dialog:"preferences"})};return t.$$set=k=>{"settings"in k&&n(0,s=k.settings),"strings"in k&&n(1,l=k.strings),"courses"in k&&n(2,r=k.courses),"labels"in k&&n(3,f=k.labels),"params"in k&&n(4,o=k.params),"onClick"in k&&n(13,a=k.onClick),"onComposeClick"in k&&n(14,u=k.onComposeClick),"onCourseChange"in k&&n(5,c=k.onCourseChange)},t.$$.update=()=>{t.$$.dirty&4&&n(7,i=r.reduce((k,v)=>k+v.unread,0))},[s,l,r,f,o,c,d,i,m,h,y,w,A,a,u]}class qn extends fe{constructor(e){super(),oe(this,e,rn,ln,ae,{settings:0,strings:1,courses:2,labels:3,params:4,onClick:13,onComposeClick:14,onCourseChange:5})}}const Le={};async function Dn(t){return Le[t]==null&&(Le[t]=await new Promise(e=>{window.require([t],e)})),Le[t]}export{Ee as $,Ln as A,O as B,U as C,H as D,vn as E,Pn as F,Ne as G,Ae as H,X as I,Y as J,K,V as L,W as M,un as N,S as O,ie as P,Ke as Q,bn as R,fe as S,Te as T,Rt as U,me as V,yn as W,pn as X,We as Y,Ue as Z,Sn as _,De as a,An as a0,Mn as a1,gn as a2,fn as a3,On as a4,Dn as a5,wn as a6,kn as a7,Xt as a8,Tt as a9,Nn as aa,En as ab,Cn as ac,Vt as ad,sn as ae,en as af,Un as ag,on as ah,Tn as ai,qn as aj,In as ak,oe as b,Ce as c,Pe as d,ae as e,cn as f,D as g,N as h,qe as i,_ as j,q as k,je as l,C as m,j as n,B as o,G as p,_e as q,wt as r,_n as s,J as t,Z as u,mn as v,hn as w,dn as x,M as y,re as z};
//# sourceMappingURL=global-aac3ab58.js.map
