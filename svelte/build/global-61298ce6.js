var rt=Object.defineProperty;var at=(e,t,n)=>t in e?rt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var G=(e,t,n)=>(at(e,typeof t!="symbol"?t+"":t,n),n);function I(){}const Se=e=>e;function lt(e,t){for(const n in t)e[n]=t[n];return e}function Xe(e){return e()}function je(){return Object.create(null)}function B(e){e.forEach(Xe)}function H(e){return typeof e=="function"}function Rt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ue;function Dt(e,t){return e===t?!0:(ue||(ue=document.createElement("a")),ue.href=t,e===ue.href)}function le(e,t){return e!=e?t==t:e!==t}function ot(e){return Object.keys(e).length===0}function Wt(e,...t){if(e==null){for(const i of t)i(void 0);return I}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Ft(e,t,n,i){if(e){const s=Ye(e,t,n,i);return e[0](s)}}function Ye(e,t,n,i){return e[1]&&i?lt(n.ctx.slice(),e[1](i(t))):n.ctx}function Vt(e,t,n,i){if(e[2]&&i){const s=e[2](i(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const r=[],a=Math.max(t.dirty.length,s.length);for(let l=0;l<a;l+=1)r[l]=t.dirty[l]|s[l];return r}return t.dirty|s}return t.dirty}function Bt(e,t,n,i,s,r){if(s){const a=Ye(t,n,i,r);e.p(a,s)}}function Ht(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function Ze(e){return e&&H(e.destroy)?e.destroy:I}function Gt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const $e=typeof window<"u";let Me=$e?()=>window.performance.now():()=>Date.now(),Le=$e?e=>requestAnimationFrame(e):I;const te=new Set;function xe(e){te.forEach(t=>{t.c(e)||(te.delete(t),t.f())}),te.size!==0&&Le(xe)}function Ne(e){let t;return te.size===0&&Le(xe),{promise:new Promise(n=>{te.add(t={c:e,f:n})}),abort(){te.delete(t)}}}function P(e,t){e.appendChild(t)}function et(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ft(e){const t=A("style");return t.textContent="/* empty */",ut(et(e),t),t.sheet}function ut(e,t){return P(e.head||e,t),t.sheet}function T(e,t,n){e.insertBefore(t,n||null)}function U(e){e.parentNode&&e.parentNode.removeChild(e)}function Jt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function A(e){return document.createElement(e)}function ct(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ie(e){return document.createTextNode(e)}function j(){return ie(" ")}function ve(){return ie("")}function Y(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function Kt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Qt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function dt(e){return Array.from(e.childNodes)}function ye(e,t){t=""+t,e.data!==t&&(e.data=t)}function Xt(e,t){e.value=t??""}function Yt(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function Zt(e,t,n){for(let i=0;i<e.options.length;i+=1){const s=e.options[i];if(s.__value===t){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function $t(e){const t=e.querySelector(":checked");return t&&t.__value}let ce;function ht(){if(ce===void 0){ce=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ce=!0}}return ce}function xt(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=A("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=ht();let r;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=Y(window,"message",a=>{a.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=Y(i.contentWindow,"resize",t),t()}),P(e,i),()=>{(s||r&&i.contentWindow)&&r(),U(i)}}function W(e,t,n){e.classList.toggle(t,!!n)}function mt(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}class en{constructor(t=!1){G(this,"is_svg",!1);G(this,"e");G(this,"n");G(this,"t");G(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=ct(n.nodeName):this.e=A(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)T(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(U)}}const me=new Map;let ge=0;function gt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function _t(e,t){const n={stylesheet:ft(t),rules:{}};return me.set(e,n),n}function _e(e,t,n,i,s,r,a,l=0){const u=16.666/i;let c=`{
`;for(let g=0;g<=1;g+=u){const E=t+(n-t)*r(g);c+=g*100+`%{${a(E,1-E)}}
`}const _=c+`100% {${a(n,1-n)}}
}`,f=`__svelte_${gt(_)}_${l}`,o=et(e),{stylesheet:d,rules:h}=me.get(o)||_t(o,e);h[f]||(h[f]=!0,d.insertRule(`@keyframes ${f} ${_}`,d.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${f} ${i}ms linear ${s}ms 1 both`,ge+=1,f}function be(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=n.length-i.length;s&&(e.style.animation=i.join(", "),ge-=s,ge||bt())}function bt(){Le(()=>{ge||(me.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&U(t)}),me.clear())})}let ae;function re(e){ae=e}function Ae(){if(!ae)throw new Error("Function called outside component initialization");return ae}function tn(e){Ae().$$.on_mount.push(e)}function nn(e){Ae().$$.after_update.push(e)}function sn(e){Ae().$$.on_destroy.push(e)}const ee=[],qe=[];let ne=[];const Ce=[],tt=Promise.resolve();let Pe=!1;function nt(){Pe||(Pe=!0,tt.then(it))}function rn(){return nt(),tt}function Z(e){ne.push(e)}function an(e){Ce.push(e)}const pe=new Set;let x=0;function it(){if(x!==0)return;const e=ae;do{try{for(;x<ee.length;){const t=ee[x];x++,re(t),wt(t.$$)}}catch(t){throw ee.length=0,x=0,t}for(re(null),ee.length=0,x=0;qe.length;)qe.pop()();for(let t=0;t<ne.length;t+=1){const n=ne[t];pe.has(n)||(pe.add(n),n())}ne.length=0}while(ee.length);for(;Ce.length;)Ce.pop()();Pe=!1,pe.clear(),re(e)}function wt(e){if(e.fragment!==null){e.update(),B(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(Z)}}function yt(e){const t=[],n=[];ne.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),ne=t}let se;function Oe(){return se||(se=Promise.resolve(),se.then(()=>{se=null})),se}function X(e,t,n){e.dispatchEvent(mt(`${t?"intro":"outro"}${n}`))}const he=new Set;let F;function J(){F={r:0,c:[],p:F}}function K(){F.r||B(F.c),F=F.p}function v(e,t){e&&e.i&&(he.delete(e),e.i(t))}function M(e,t,n,i){if(e&&e.o){if(he.has(e))return;he.add(e),F.c.push(()=>{he.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Ie={duration:0};function ln(e,t,n){const i={direction:"in"};let s=t(e,n,i),r=!1,a,l,u=0;function c(){a&&be(e,a)}function _(){const{delay:o=0,duration:d=300,easing:h=Se,tick:m=I,css:g}=s||Ie;g&&(a=_e(e,0,1,d,o,h,g,u++)),m(0,1);const E=Me()+o,k=E+d;l&&l.abort(),r=!0,Z(()=>X(e,!0,"start")),l=Ne(C=>{if(r){if(C>=k)return m(1,0),X(e,!0,"end"),c(),r=!1;if(C>=E){const y=h((C-E)/d);m(y,1-y)}}return r})}let f=!1;return{start(){f||(f=!0,be(e),H(s)?(s=s(i),Oe().then(_)):_())},invalidate(){f=!1},end(){r&&(c(),r=!1)}}}function on(e,t,n){const i={direction:"out"};let s=t(e,n,i),r=!0,a;const l=F;l.r+=1;let u;function c(){const{delay:_=0,duration:f=300,easing:o=Se,tick:d=I,css:h}=s||Ie;h&&(a=_e(e,1,0,f,_,o,h));const m=Me()+_,g=m+f;Z(()=>X(e,!1,"start")),"inert"in e&&(u=e.inert,e.inert=!0),Ne(E=>{if(r){if(E>=g)return d(0,1),X(e,!1,"end"),--l.r||B(l.c),!1;if(E>=m){const k=o((E-m)/f);d(1-k,k)}}return r})}return H(s)?Oe().then(()=>{s=s(i),c()}):c(),{end(_){_&&"inert"in e&&(e.inert=u),_&&s.tick&&s.tick(1,0),r&&(a&&be(e,a),r=!1)}}}function fn(e,t,n,i){let r=t(e,n,{direction:"both"}),a=i?0:1,l=null,u=null,c=null,_;function f(){c&&be(e,c)}function o(h,m){const g=h.b-a;return m*=Math.abs(g),{a,b:h.b,d:g,duration:m,start:h.start,end:h.start+m,group:h.group}}function d(h){const{delay:m=0,duration:g=300,easing:E=Se,tick:k=I,css:C}=r||Ie,y={start:Me()+m,b:h};h||(y.group=F,F.r+=1),"inert"in e&&(h?_!==void 0&&(e.inert=_):(_=e.inert,e.inert=!0)),l||u?u=y:(C&&(f(),c=_e(e,a,h,g,m,E,C)),h&&k(0,1),l=o(y,g),Z(()=>X(e,h,"start")),Ne(S=>{if(u&&S>u.start&&(l=o(u,g),u=null,X(e,l.b,"start"),C&&(f(),c=_e(e,a,l.b,l.duration,0,E,r.css))),l){if(S>=l.end)k(a=l.b,1-a),X(e,l.b,"end"),u||(l.b?f():--l.group.r||B(l.group.c)),l=null;else if(S>=l.start){const z=S-l.start;a=l.a+l.d*E(z/l.duration),k(a,1-a)}}return!!(l||u)}))}return{run(h){H(r)?Oe().then(()=>{r=r({direction:h?"in":"out"}),d(h)}):d(h)},end(){f(),l=u=null}}}function de(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function un(e,t){e.d(1),t.delete(e.key)}function Ee(e,t){M(e,1,1,()=>{t.delete(e.key)})}function cn(e,t){e.f(),Ee(e,t)}function Te(e,t,n,i,s,r,a,l,u,c,_,f){let o=e.length,d=r.length,h=o;const m={};for(;h--;)m[e[h].key]=h;const g=[],E=new Map,k=new Map,C=[];for(h=d;h--;){const N=f(s,r,h),O=n(N);let q=a.get(O);q?i&&C.push(()=>q.p(N,t)):(q=c(O,N),q.c()),E.set(O,g[h]=q),O in m&&k.set(O,Math.abs(h-m[O]))}const y=new Set,S=new Set;function z(N){v(N,1),N.m(l,_),a.set(N.key,N),_=N.first,d--}for(;o&&d;){const N=g[d-1],O=e[o-1],q=N.key,Q=O.key;N===O?(_=N.first,o--,d--):E.has(Q)?!a.has(q)||y.has(q)?z(N):S.has(Q)?o--:k.get(q)>k.get(Q)?(S.add(q),z(N)):(y.add(Q),o--):(u(O,a),o--)}for(;o--;){const N=e[o];E.has(N.key)||u(N,a)}for(;d;)z(g[d-1]);return B(C),g}function dn(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function V(e){e&&e.c()}function R(e,t,n){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),Z(()=>{const r=e.$$.on_mount.map(Xe).filter(H);e.$$.on_destroy?e.$$.on_destroy.push(...r):B(r),e.$$.on_mount=[]}),s.forEach(Z)}function D(e,t){const n=e.$$;n.fragment!==null&&(yt(n.after_update),B(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function pt(e,t){e.$$.dirty[0]===-1&&(ee.push(e),nt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function oe(e,t,n,i,s,r,a,l=[-1]){const u=ae;re(e);const c=e.$$={fragment:null,ctx:[],props:r,update:I,not_equal:s,bound:je(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:je(),dirty:l,skip_bound:!1,root:t.target||u.$$.root};a&&a(c.root);let _=!1;if(c.ctx=n?n(e,t.props||{},(f,o,...d)=>{const h=d.length?d[0]:o;return c.ctx&&s(c.ctx[f],c.ctx[f]=h)&&(!c.skip_bound&&c.bound[f]&&c.bound[f](h),_&&pt(e,f)),o}):[],c.update(),_=!0,B(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const f=dt(t.target);c.fragment&&c.fragment.l(f),f.forEach(U)}else c.fragment&&c.fragment.c();t.intro&&v(e.$$.fragment),R(e,t.target,t.anchor),it()}re(u)}class fe{constructor(){G(this,"$$");G(this,"$$set")}$destroy(){D(this,1),this.$destroy=I}$on(t,n){if(!H(n))return I;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!ot(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const kt="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(kt);function vt(e,t){function n(i){i.target instanceof Element&&!e.contains(i.target)&&t()}return document.addEventListener("click",n,{capture:!0,passive:!0}),document.addEventListener("keyup",n,{capture:!0,passive:!0}),{update(i){t=i},destroy(){document.removeEventListener("click",n,{capture:!0}),document.removeEventListener("keyup",n,{capture:!0})}}}function st(){return window.M.cfg.wwwroot+"/local/mail/"}function hn(e,t=[],n){const i=new URL(st()+"create.php");return i.searchParams.set("course",String(e)),t.length&&i.searchParams.set("recipients",t.join(",")),n&&i.searchParams.set("role",n),i.searchParams.set("sesskey",window.M.cfg.sesskey),i.toString()}function mn(){const e=new URL(window.location.href),t={tray:e.searchParams.get("t")||void 0,courseid:parseInt(e.searchParams.get("c")||"")||void 0,labelid:parseInt(e.searchParams.get("l")||"")||void 0,messageid:parseInt(e.searchParams.get("m")||"")||void 0,offset:parseInt(e.searchParams.get("o")||"")||void 0,dialog:e.searchParams.get("d")||void 0},n={content:e.searchParams.get("s")||void 0,sendername:e.searchParams.get("sf")||void 0,recipientname:e.searchParams.get("st")||void 0,unread:e.searchParams.get("su")=="1"||void 0,withfilesonly:e.searchParams.get("sa")=="1"||void 0,maxtime:parseInt(e.searchParams.get("sd")||"")||void 0,startid:parseInt(e.searchParams.get("ss")||"")||void 0,reverse:e.searchParams.get("sr")=="1"||void 0};return Object.values(n).some(i=>i!=null)?{...t,search:n}:t}function gn(e,t){const n=new URL(we(e));n.search!=window.location.search&&(t?window.history.replaceState(void 0,"",n.toString()):window.history.pushState(void 0,"",n.toString()))}function we(e){var n,i,s,r,a,l,u,c;const t=new URL(st()+"view.php");return e.tray&&t.searchParams.set("t",e.tray),e.courseid&&t.searchParams.set("c",String(e.courseid)),e.tray=="label"&&e.labelid&&t.searchParams.set("l",String(e.labelid)),e.messageid&&t.searchParams.set("m",String(e.messageid)),e.search&&e.offset&&t.searchParams.set("o",String(e.offset)),(n=e.search)!=null&&n.content&&t.searchParams.set("s",e.search.content),(i=e.search)!=null&&i.sendername&&t.searchParams.set("sf",e.search.sendername),(s=e.search)!=null&&s.recipientname&&t.searchParams.set("st",e.search.recipientname),(r=e.search)!=null&&r.unread&&t.searchParams.set("su","1"),(a=e.search)!=null&&a.withfilesonly&&t.searchParams.set("sa","1"),(l=e.search)!=null&&l.maxtime&&t.searchParams.set("sd",String(e.search.maxtime)),(u=e.search)!=null&&u.startid&&t.searchParams.set("ss",String(e.search.startid)),(c=e.search)!=null&&c.reverse&&t.searchParams.set("sr","1"),e.dialog&&t.searchParams.set("d",e.dialog),t.toString()}function Ct(e){let t,n,i,s,r=e[0].compose+"",a,l,u,c;return{c(){t=A("button"),n=A("i"),i=j(),s=A("span"),a=ie(r),p(n,"class","fa fa-edit mr-0 mr-sm-1"),W(s,"d-none",e[1]),p(t,"type","button"),p(t,"class","btn btn-primary text-truncate px-2 px-sm-3"),p(t,"aria-label",l=e[0].compose)},m(_,f){T(_,t,f),P(t,n),P(t,i),P(t,s),P(s,a),u||(c=Y(t,"click",function(){H(e[2])&&e[2].apply(this,arguments)}),u=!0)},p(_,[f]){e=_,f&1&&r!==(r=e[0].compose+"")&&ye(a,r),f&2&&W(s,"d-none",e[1]),f&1&&l!==(l=e[0].compose)&&p(t,"aria-label",l)},i:I,o:I,d(_){_&&U(t),u=!1,c()}}}function Pt(e,t,n){let{strings:i}=t,{iconOnly:s=!1}=t,{onClick:r}=t;return e.$$set=a=>{"strings"in a&&n(0,i=a.strings),"iconOnly"in a&&n(1,s=a.iconOnly),"onClick"in a&&n(2,r=a.onClick)},[i,s,r]}class Et extends fe{constructor(t){super(),oe(this,t,Pt,Ct,le,{strings:0,iconOnly:1,onClick:2})}}function St(e,t){function n(){e.offsetWidth<e.scrollWidth?e.setAttribute("title",t):e.removeAttribute("title")}return e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.addEventListener("mouseenter",n),{destroy(){e.removeEventListener("mouseenter",n,!0)}}}function ze(e){let t,n;return{c(){t=A("span"),n=ie(e[3]),p(t,"class","local-mail-menu-item-count badge")},m(i,s){T(i,t,s),P(t,n)},p(i,s){s&8&&ye(n,i[3])},d(i){i&&U(t)}}}function Mt(e){let t,n,i,s,r,a,l,u,c,_,f,o,d,h=e[3]>0&&ze(e);return{c(){t=A("a"),n=A("i"),r=j(),a=A("span"),l=ie(e[1]),c=j(),h&&h.c(),p(n,"class",i="fa "+e[0]+" fa-fw"),p(n,"aria-hidden","true"),p(n,"style",s=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-bg, var(--local-mail-color-gray-bg));`:""),p(a,"class","flex-fill px-2"),p(t,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2"),p(t,"aria-current",e[5]),p(t,"aria-disabled",e[4]),p(t,"role","tab"),p(t,"href",_=we(e[2])),p(t,"style",f=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-fg, var(--local-mail-color-gray-fg));`:""),W(t,"list-group-item-primary",e[5]),W(t,"disabled",e[4])},m(m,g){T(m,t,g),P(t,n),P(t,r),P(t,a),P(a,l),P(t,c),h&&h.m(t,null),o||(d=[Ze(u=St.call(null,a,e[1])),Y(t,"click",e[7])],o=!0)},p(m,[g]){g&1&&i!==(i="fa "+m[0]+" fa-fw")&&p(n,"class",i),g&96&&s!==(s=m[6]!=null&&!m[5]?`color: var(--local-mail-color-${m[6]}-bg, var(--local-mail-color-gray-bg));`:"")&&p(n,"style",s),g&2&&ye(l,m[1]),u&&H(u.update)&&g&2&&u.update.call(null,m[1]),m[3]>0?h?h.p(m,g):(h=ze(m),h.c(),h.m(t,null)):h&&(h.d(1),h=null),g&32&&p(t,"aria-current",m[5]),g&16&&p(t,"aria-disabled",m[4]),g&4&&_!==(_=we(m[2]))&&p(t,"href",_),g&96&&f!==(f=m[6]!=null&&!m[5]?`color: var(--local-mail-color-${m[6]}-fg, var(--local-mail-color-gray-fg));`:"")&&p(t,"style",f),g&32&&W(t,"list-group-item-primary",m[5]),g&16&&W(t,"disabled",m[4])},i:I,o:I,d(m){m&&U(t),h&&h.d(),o=!1,B(d)}}}function Lt(e,t,n){let{icon:i}=t,{text:s}=t,{params:r}=t,{count:a=0}=t,{disabled:l=!1}=t,{active:u=!1}=t,{color:c=void 0}=t,{onClick:_=void 0}=t;const f=o=>{_&&(o.preventDefault(),_(r))};return e.$$set=o=>{"icon"in o&&n(0,i=o.icon),"text"in o&&n(1,s=o.text),"params"in o&&n(2,r=o.params),"count"in o&&n(3,a=o.count),"disabled"in o&&n(4,l=o.disabled),"active"in o&&n(5,u=o.active),"color"in o&&n(6,c=o.color),"onClick"in o&&n(8,_=o.onClick)},[i,s,r,a,l,u,c,f,_]}class $ extends fe{constructor(t){super(),oe(this,t,Lt,Mt,le,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function Re(e,t,n){const i=e.slice();return i[13]=t[n],i}function De(e,t,n){const i=e.slice();return i[16]=t[n],i}function We(e){var i;let t,n;return t=new $({props:{icon:"fa-star",text:e[1].starredmail,params:{tray:"starred",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="starred",onClick:e[7]}}),{c(){V(t.$$.fragment)},m(s,r){R(t,s,r),n=!0},p(s,r){var l;const a={};r&2&&(a.text=s[1].starredmail),r&1536&&(a.params={tray:"starred",courseid:s[10],search:s[9]}),r&64&&(a.active=((l=s[6])==null?void 0:l.tray)=="starred"),r&128&&(a.onClick=s[7]),t.$set(a)},i(s){n||(v(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){D(t,s)}}}function Fe(e){var i;let t,n;return t=new $({props:{icon:"fa-paper-plane",text:e[1].sentmail,params:{tray:"sent",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="sent",onClick:e[7]}}),{c(){V(t.$$.fragment)},m(s,r){R(t,s,r),n=!0},p(s,r){var l;const a={};r&2&&(a.text=s[1].sentmail),r&1536&&(a.params={tray:"sent",courseid:s[10],search:s[9]}),r&64&&(a.active=((l=s[6])==null?void 0:l.tray)=="sent"),r&128&&(a.onClick=s[7]),t.$set(a)},i(s){n||(v(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){D(t,s)}}}function Ve(e){var i;let t,n;return t=new $({props:{icon:"fa-file",text:e[1].drafts,count:e[3],params:{tray:"drafts",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="drafts",onClick:e[7]}}),{c(){V(t.$$.fragment)},m(s,r){R(t,s,r),n=!0},p(s,r){var l;const a={};r&2&&(a.text=s[1].drafts),r&8&&(a.count=s[3]),r&1536&&(a.params={tray:"drafts",courseid:s[10],search:s[9]}),r&64&&(a.active=((l=s[6])==null?void 0:l.tray)=="drafts"),r&128&&(a.onClick=s[7]),t.$set(a)},i(s){n||(v(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){D(t,s)}}}function Be(e){var i;let t,n;return t=new $({props:{icon:"fa-trash",text:e[1].trash,params:{tray:"trash",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="trash",onClick:e[7]}}),{c(){V(t.$$.fragment)},m(s,r){R(t,s,r),n=!0},p(s,r){var l;const a={};r&2&&(a.text=s[1].trash),r&1536&&(a.params={tray:"trash",courseid:s[10],search:s[9]}),r&64&&(a.active=((l=s[6])==null?void 0:l.tray)=="trash"),r&128&&(a.onClick=s[7]),t.$set(a)},i(s){n||(v(t.$$.fragment,s),n=!0)},o(s){M(t.$$.fragment,s),n=!1},d(s){D(t,s)}}}function He(e,t){var r,a;let n,i,s;return i=new $({props:{icon:"fa-tag",text:t[16].name,count:t[16].unread,color:t[16].color,params:{tray:"label",labelid:t[16].id,courseid:t[10],search:t[9]},active:((r=t[6])==null?void 0:r.tray)=="label"&&((a=t[6])==null?void 0:a.labelid)==t[16].id,onClick:t[7]}}),{key:e,first:null,c(){n=ve(),V(i.$$.fragment),this.first=n},m(l,u){T(l,n,u),R(i,l,u),s=!0},p(l,u){var _,f;t=l;const c={};u&32&&(c.text=t[16].name),u&32&&(c.count=t[16].unread),u&32&&(c.color=t[16].color),u&1568&&(c.params={tray:"label",labelid:t[16].id,courseid:t[10],search:t[9]}),u&96&&(c.active=((_=t[6])==null?void 0:_.tray)=="label"&&((f=t[6])==null?void 0:f.labelid)==t[16].id),u&128&&(c.onClick=t[7]),i.$set(c)},i(l){s||(v(i.$$.fragment,l),s=!0)},o(l){M(i.$$.fragment,l),s=!1},d(l){l&&U(n),D(i,l)}}}function Ge(e){var i,s;let t,n;return t=new $({props:{icon:"fa-university",text:e[0].coursetraysname=="fullname"?e[13].fullname:e[13].shortname,count:e[13].unread,params:{tray:"course",courseid:e[13].id,search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="course"&&((s=e[6])==null?void 0:s.courseid)==e[13].id,onClick:e[7]}}),{c(){V(t.$$.fragment)},m(r,a){R(t,r,a),n=!0},p(r,a){var u,c;const l={};a&17&&(l.text=r[0].coursetraysname=="fullname"?r[13].fullname:r[13].shortname),a&16&&(l.count=r[13].unread),a&528&&(l.params={tray:"course",courseid:r[13].id,search:r[9]}),a&80&&(l.active=((u=r[6])==null?void 0:u.tray)=="course"&&((c=r[6])==null?void 0:c.courseid)==r[13].id),a&128&&(l.onClick=r[7]),t.$set(l)},i(r){n||(v(t.$$.fragment,r),n=!0)},o(r){M(t.$$.fragment,r),n=!1},d(r){D(t,r)}}}function Je(e,t){let n,i=t[11](t[13]),s,r,a=i&&Ge(t);return{key:e,first:null,c(){n=ve(),a&&a.c(),s=ve(),this.first=n},m(l,u){T(l,n,u),a&&a.m(l,u),T(l,s,u),r=!0},p(l,u){t=l,u&2064&&(i=t[11](t[13])),i?a?(a.p(t,u),u&2064&&v(a,1)):(a=Ge(t),a.c(),v(a,1),a.m(s.parentNode,s)):a&&(J(),M(a,1,1,()=>{a=null}),K())},i(l){r||(v(a),r=!0)},o(l){M(a),r=!1},d(l){l&&(U(n),U(s)),a&&a.d(l)}}}function Nt(e){var Q;let t,n,i,s=e[12]("starred"),r,a=e[12]("sent"),l,u=e[12]("drafts"),c,_=e[12]("trash"),f,o=[],d=new Map,h,m=[],g=new Map,E;n=new $({props:{icon:"fa-inbox",text:e[1].inbox,count:e[2],params:{tray:"inbox",courseid:e[10],search:e[9]},active:((Q=e[6])==null?void 0:Q.tray)=="inbox",onClick:e[7]}});let k=s&&We(e),C=a&&Fe(e),y=u&&Ve(e),S=_&&Be(e),z=de(e[5]);const N=w=>w[16].id;for(let w=0;w<z.length;w+=1){let b=De(e,z,w),L=N(b);d.set(L,o[w]=He(L,b))}let O=de(e[4]);const q=w=>w[13].id;for(let w=0;w<O.length;w+=1){let b=Re(e,O,w),L=q(b);g.set(L,m[w]=Je(L,b))}return{c(){t=A("div"),V(n.$$.fragment),i=j(),k&&k.c(),r=j(),C&&C.c(),l=j(),y&&y.c(),c=j(),S&&S.c(),f=j();for(let w=0;w<o.length;w+=1)o[w].c();h=j();for(let w=0;w<m.length;w+=1)m[w].c();p(t,"class","list-group"),W(t,"list-group-flush",e[8])},m(w,b){T(w,t,b),R(n,t,null),P(t,i),k&&k.m(t,null),P(t,r),C&&C.m(t,null),P(t,l),y&&y.m(t,null),P(t,c),S&&S.m(t,null),P(t,f);for(let L=0;L<o.length;L+=1)o[L]&&o[L].m(t,null);P(t,h);for(let L=0;L<m.length;L+=1)m[L]&&m[L].m(t,null);E=!0},p(w,[b]){var Ue;const L={};b&2&&(L.text=w[1].inbox),b&4&&(L.count=w[2]),b&1536&&(L.params={tray:"inbox",courseid:w[10],search:w[9]}),b&64&&(L.active=((Ue=w[6])==null?void 0:Ue.tray)=="inbox"),b&128&&(L.onClick=w[7]),n.$set(L),b&4096&&(s=w[12]("starred")),s?k?(k.p(w,b),b&4096&&v(k,1)):(k=We(w),k.c(),v(k,1),k.m(t,r)):k&&(J(),M(k,1,1,()=>{k=null}),K()),b&4096&&(a=w[12]("sent")),a?C?(C.p(w,b),b&4096&&v(C,1)):(C=Fe(w),C.c(),v(C,1),C.m(t,l)):C&&(J(),M(C,1,1,()=>{C=null}),K()),b&4096&&(u=w[12]("drafts")),u?y?(y.p(w,b),b&4096&&v(y,1)):(y=Ve(w),y.c(),v(y,1),y.m(t,c)):y&&(J(),M(y,1,1,()=>{y=null}),K()),b&4096&&(_=w[12]("trash")),_?S?(S.p(w,b),b&4096&&v(S,1)):(S=Be(w),S.c(),v(S,1),S.m(t,f)):S&&(J(),M(S,1,1,()=>{S=null}),K()),b&1760&&(z=de(w[5]),J(),o=Te(o,b,N,1,w,z,d,t,Ee,He,h,De),K()),b&2769&&(O=de(w[4]),J(),m=Te(m,b,q,1,w,O,g,t,Ee,Je,null,Re),K()),(!E||b&256)&&W(t,"list-group-flush",w[8])},i(w){if(!E){v(n.$$.fragment,w),v(k),v(C),v(y),v(S);for(let b=0;b<z.length;b+=1)v(o[b]);for(let b=0;b<O.length;b+=1)v(m[b]);E=!0}},o(w){M(n.$$.fragment,w),M(k),M(C),M(y),M(S);for(let b=0;b<o.length;b+=1)M(o[b]);for(let b=0;b<m.length;b+=1)M(m[b]);E=!1},d(w){w&&U(t),D(n),k&&k.d(),C&&C.d(),y&&y.d(),S&&S.d();for(let b=0;b<o.length;b+=1)o[b].d();for(let b=0;b<m.length;b+=1)m[b].d()}}}function At(e,t,n){let i,s,r,a,{settings:l}=t,{strings:u}=t,{unread:c}=t,{drafts:_}=t,{courses:f}=t,{labels:o}=t,{params:d=void 0}=t,{onClick:h=void 0}=t,{flush:m=!1}=t;return e.$$set=g=>{"settings"in g&&n(0,l=g.settings),"strings"in g&&n(1,u=g.strings),"unread"in g&&n(2,c=g.unread),"drafts"in g&&n(3,_=g.drafts),"courses"in g&&n(4,f=g.courses),"labels"in g&&n(5,o=g.labels),"params"in g&&n(6,d=g.params),"onClick"in g&&n(7,h=g.onClick),"flush"in g&&n(8,m=g.flush)},e.$$.update=()=>{e.$$.dirty&65&&n(12,i=g=>l.globaltrays.includes(g)||(d==null?void 0:d.tray)==g),e.$$.dirty&65&&n(11,s=g=>l.coursetrays=="all"||l.coursetrays=="unread"&&(g.unread||0)>0||(d==null?void 0:d.tray)=="course"&&(d==null?void 0:d.courseid)==g.id),e.$$.dirty&64&&n(10,r=(d==null?void 0:d.tray)!="course"?d==null?void 0:d.courseid:void 0),e.$$.dirty&64&&n(9,a=d!=null&&d.search?{content:d.search.content,sendername:d.search.sendername,recipientname:d.search.recipientname,maxtime:d.search.maxtime,unread:d.search.unread,withfilesonly:d.search.withfilesonly}:void 0)},[l,u,c,_,f,o,d,h,m,a,r,s,i]}class Ot extends fe{constructor(t){super(),oe(this,t,At,Nt,le,{settings:0,strings:1,unread:2,drafts:3,courses:4,labels:5,params:6,onClick:7,flush:8})}}function It(e){let t,n,i,s,r;return{c(){t=A("button"),n=A("i"),p(n,"class","fa fa-cog"),p(n,"aria-hidden",!0),p(t,"type","button"),p(t,"class","btn btn-secondary text-truncate"),p(t,"title",i=e[0].preferences)},m(a,l){T(a,t,l),P(t,n),s||(r=Y(t,"click",function(){H(e[1])&&e[1].apply(this,arguments)}),s=!0)},p(a,[l]){e=a,l&1&&i!==(i=e[0].preferences)&&p(t,"title",i)},i:I,o:I,d(a){a&&U(t),s=!1,r()}}}function Ut(e,t,n){let{strings:i}=t,{onClick:s}=t;return e.$$set=r=>{"strings"in r&&n(0,i=r.strings),"onClick"in r&&n(1,s=r.onClick)},[i,s]}class jt extends fe{constructor(t){super(),oe(this,t,Ut,It,le,{strings:0,onClick:1})}}function Ke(e){let t,n;return{c(){t=A("div"),n=ie(e[2]),p(t,"class","local-mail-navbar-count count-container svelte-1878hq5")},m(i,s){T(i,t,s),P(t,n)},p(i,s){s&4&&ye(n,i[2])},d(i){i&&U(t)}}}function Qe(e){let t,n,i,s,r,a,l,u,c,_;return i=new Et({props:{strings:e[1],onClick:e[10]}}),r=new jt({props:{strings:e[1],onClick:e[13]}}),c=new Ot({props:{settings:e[0],strings:e[1],unread:e[2],drafts:e[3],courses:e[4],labels:e[5],params:e[6],onClick:e[12],flush:!0}}),{c(){t=A("div"),n=A("div"),V(i.$$.fragment),s=j(),V(r.$$.fragment),a=j(),l=A("hr"),u=j(),V(c.$$.fragment),p(n,"class","d-flex justify-content-between pl-3 pr-2 py-2"),p(l,"class","m-0"),p(t,"class","local-mail-navbar-dropdown dropdown-menu dropdown-menu-right show p-0 overflow-auto svelte-1878hq5")},m(f,o){T(f,t,o),P(t,n),R(i,n,null),P(n,s),R(r,n,null),P(t,a),P(t,l),P(t,u),R(c,t,null),_=!0},p(f,o){const d={};o&2&&(d.strings=f[1]),i.$set(d);const h={};o&2&&(h.strings=f[1]),r.$set(h);const m={};o&1&&(m.settings=f[0]),o&2&&(m.strings=f[1]),o&4&&(m.unread=f[2]),o&8&&(m.drafts=f[3]),o&16&&(m.courses=f[4]),o&32&&(m.labels=f[5]),o&64&&(m.params=f[6]),c.$set(m)},i(f){_||(v(i.$$.fragment,f),v(r.$$.fragment,f),v(c.$$.fragment,f),_=!0)},o(f){M(i.$$.fragment,f),M(r.$$.fragment,f),M(c.$$.fragment,f),_=!1},d(f){f&&U(t),D(i),D(r),D(c)}}}function qt(e){let t,n,i,s,r,a,l,u,c,_;Z(e[16]);let f=e[2]>0&&Ke(e),o=e[7]&&Qe(e);return{c(){t=A("div"),n=A("a"),i=A("i"),r=j(),f&&f.c(),l=j(),o&&o.c(),p(i,"class","fa fa-fw fa-envelope-o"),p(i,"aria-label",s=e[1].plugginname),p(n,"aria-expanded",e[7]),p(n,"aria-label",a=e[1].togglemailmenu),p(n,"class","btn h-100 position-relative d-flex align-items-center px-2 py-0"),p(n,"href",we({tray:"inbox"})),p(t,"class","local-mail-navbar dropdown h-100 svelte-1878hq5"),W(t,"position-static",e[8]<768)},m(d,h){T(d,t,h),P(t,n),P(n,i),P(n,r),f&&f.m(n,null),P(t,l),o&&o.m(t,null),u=!0,c||(_=[Y(window,"resize",e[16]),Y(n,"click",e[11]),Ze(vt.call(null,t,e[9]))],c=!0)},p(d,[h]){(!u||h&2&&s!==(s=d[1].plugginname))&&p(i,"aria-label",s),d[2]>0?f?f.p(d,h):(f=Ke(d),f.c(),f.m(n,null)):f&&(f.d(1),f=null),(!u||h&128)&&p(n,"aria-expanded",d[7]),(!u||h&2&&a!==(a=d[1].togglemailmenu))&&p(n,"aria-label",a),d[7]?o?(o.p(d,h),h&128&&v(o,1)):(o=Qe(d),o.c(),v(o,1),o.m(t,null)):o&&(J(),M(o,1,1,()=>{o=null}),K()),(!u||h&256)&&W(t,"position-static",d[8]<768)},i(d){u||(v(o),u=!0)},o(d){M(o),u=!1},d(d){d&&U(t),f&&f.d(),o&&o.d(),c=!1,B(_)}}}function Tt(e,t,n){let{settings:i}=t,{strings:s}=t,{unread:r}=t,{drafts:a}=t,{courses:l}=t,{labels:u}=t,{params:c=void 0}=t,{onClick:_}=t,{onComposeClick:f}=t,o=!1,d;const h=()=>{n(7,o=!1)},m=()=>{n(7,o=!1),f((c==null?void 0:c.courseid)||l[0].id)},g=y=>{i.globaltrays.length>0||u.length>0?(n(7,o=!o),y.preventDefault()):(y.preventDefault(),_({tray:"inbox"}))},E=y=>{n(7,o=!1),_(y)},k=()=>{n(7,o=!1),_({...c||{tray:"inbox"},dialog:"preferences"})};function C(){n(8,d=window.innerWidth)}return e.$$set=y=>{"settings"in y&&n(0,i=y.settings),"strings"in y&&n(1,s=y.strings),"unread"in y&&n(2,r=y.unread),"drafts"in y&&n(3,a=y.drafts),"courses"in y&&n(4,l=y.courses),"labels"in y&&n(5,u=y.labels),"params"in y&&n(6,c=y.params),"onClick"in y&&n(14,_=y.onClick),"onComposeClick"in y&&n(15,f=y.onComposeClick)},[i,s,r,a,l,u,c,o,d,h,m,g,E,k,_,f,C]}class _n extends fe{constructor(t){super(),oe(this,t,Tt,qt,le,{settings:0,strings:1,unread:2,drafts:3,courses:4,labels:5,params:6,onClick:14,onComposeClick:15})}}const ke={};async function bn(e){return ke[e]==null&&(ke[e]=await new Promise(t=>{window.require([e],t)})),ke[e]}export{we as $,fn as A,M as B,U as C,B as D,tn as E,sn as F,qe as G,ve as H,J as I,K as J,V as K,R as L,D as M,Wt as N,W as O,de as P,Xt as Q,Kt as R,fe as S,Te as T,un as U,Yt as V,xt as W,Qt as X,St as Y,Ee as Z,ln as _,Me as a,cn as a0,on as a1,Jt as a2,Dt as a3,rn as a4,en as a5,bn as a6,Zt as a7,$t as a8,dn as a9,an as aa,nn as ab,Et as ac,jt as ad,Ot as ae,mn as af,Rt as ag,gn as ah,_n as ai,hn as aj,oe as b,_e as c,be as d,le as e,Ft as f,j as g,A as h,Se as i,p as j,T as k,Ne as l,P as m,I as n,Y as o,H as p,Ze as q,vt as r,Gt as s,ie as t,ye as u,Bt as v,Ht as w,Vt as x,v as y,Z as z};
//# sourceMappingURL=global-61298ce6.js.map
