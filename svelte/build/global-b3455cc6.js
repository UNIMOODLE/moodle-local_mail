var lt=Object.defineProperty;var at=(e,t,n)=>t in e?lt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var B=(e,t,n)=>(at(e,typeof t!="symbol"?t+"":t,n),n);function z(){}const Ne=e=>e;function ot(e,t){for(const n in t)e[n]=t[n];return e}function Ze(e){return e()}function Te(){return Object.create(null)}function V(e){e.forEach(Ze)}function Y(e){return typeof e=="function"}function Ft(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ce;function Vt(e,t){return ce||(ce=document.createElement("a")),ce.href=t,e===ce.href}function oe(e,t){return e!=e?t==t:e!==t}function ft(e){return Object.keys(e).length===0}function ut(e,...t){if(e==null){for(const i of t)i(void 0);return z}const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Bt(e){let t;return ut(e,n=>t=n)(),t}function Ht(e,t,n,i){if(e){const s=$e(e,t,n,i);return e[0](s)}}function $e(e,t,n,i){return e[1]&&i?ot(n.ctx.slice(),e[1](i(t))):n.ctx}function Gt(e,t,n,i){if(e[2]&&i){const s=e[2](i(n));if(t.dirty===void 0)return s;if(typeof s=="object"){const r=[],l=Math.max(t.dirty.length,s.length);for(let a=0;a<l;a+=1)r[a]=t.dirty[a]|s[a];return r}return t.dirty|s}return t.dirty}function Jt(e,t,n,i,s,r){if(s){const l=$e(t,n,i,r);e.p(l,s)}}function Kt(e){if(e.ctx.length>32){const t=[],n=e.ctx.length/32;for(let i=0;i<n;i++)t[i]=-1;return t}return-1}function xe(e){return e&&Y(e.destroy)?e.destroy:z}function Qt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const et=typeof window<"u";let Ae=et?()=>window.performance.now():()=>Date.now(),Le=et?e=>requestAnimationFrame(e):z;const te=new Set;function tt(e){te.forEach(t=>{t.c(e)||(te.delete(t),t.f())}),te.size!==0&&Le(tt)}function Se(e){let t;return te.size===0&&Le(tt),{promise:new Promise(n=>{te.add(t={c:e,f:n})}),abort(){te.delete(t)}}}function P(e,t){e.appendChild(t)}function nt(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function ct(e){const t=S("style");return t.textContent="/* empty */",dt(nt(e),t),t.sheet}function dt(e,t){return P(e.head||e,t),t.sheet}function j(e,t,n){e.insertBefore(t,n||null)}function I(e){e.parentNode&&e.parentNode.removeChild(e)}function Xt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function S(e){return document.createElement(e)}function ht(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function ie(e){return document.createTextNode(e)}function q(){return ie(" ")}function Ce(){return ie("")}function le(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function Yt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Zt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function v(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function mt(e){return Array.from(e.childNodes)}function ve(e,t){t=""+t,e.data!==t&&(e.data=t)}function $t(e,t){e.value=t??""}function xt(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}function en(e,t,n){for(let i=0;i<e.options.length;i+=1){const s=e.options[i];if(s.__value===t){s.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function tn(e){const t=e.querySelector(":checked");return t&&t.__value}let de;function _t(){if(de===void 0){de=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{de=!0}}return de}function nn(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=S("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const s=_t();let r;return s?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=le(window,"message",l=>{l.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=le(i.contentWindow,"resize",t),t()}),P(e,i),()=>{(s||r&&i.contentWindow)&&r(),I(i)}}function J(e,t,n){e.classList.toggle(t,!!n)}function gt(e,t,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(e,{detail:t,bubbles:n,cancelable:i})}class sn{constructor(t=!1){B(this,"is_svg",!1);B(this,"e");B(this,"n");B(this,"t");B(this,"a");this.is_svg=t,this.e=this.n=null}c(t){this.h(t)}m(t,n,i=null){this.e||(this.is_svg?this.e=ht(n.nodeName):this.e=S(n.nodeType===11?"TEMPLATE":n.nodeName),this.t=n.tagName!=="TEMPLATE"?n:n.content,this.c(t)),this.i(i)}h(t){this.e.innerHTML=t,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(t){for(let n=0;n<this.n.length;n+=1)j(this.t,this.n[n],t)}p(t){this.d(),this.h(t),this.i(this.a)}d(){this.n.forEach(I)}}const _e=new Map;let ge=0;function bt(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function pt(e,t){const n={stylesheet:ct(t),rules:{}};return _e.set(e,n),n}function be(e,t,n,i,s,r,l,a=0){const u=16.666/i;let d=`{
`;for(let _=0;_<=1;_+=u){const w=t+(n-t)*r(_);d+=_*100+`%{${l(w,1-w)}}
`}const g=d+`100% {${l(n,1-n)}}
}`,f=`__svelte_${bt(g)}_${a}`,o=nt(e),{stylesheet:c,rules:h}=_e.get(o)||pt(o,e);h[f]||(h[f]=!0,c.insertRule(`@keyframes ${f} ${g}`,c.cssRules.length));const m=e.style.animation||"";return e.style.animation=`${m?`${m}, `:""}${f} ${i}ms linear ${s}ms 1 both`,ge+=1,f}function pe(e,t){const n=(e.style.animation||"").split(", "),i=n.filter(t?r=>r.indexOf(t)<0:r=>r.indexOf("__svelte")===-1),s=n.length-i.length;s&&(e.style.animation=i.join(", "),ge-=s,ge||wt())}function wt(){Le(()=>{ge||(_e.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&I(t)}),_e.clear())})}let ae;function re(e){ae=e}function Ue(){if(!ae)throw new Error("Function called outside component initialization");return ae}function rn(e){Ue().$$.on_mount.push(e)}function ln(e){Ue().$$.after_update.push(e)}function an(e){Ue().$$.on_destroy.push(e)}const ee=[],je=[];let ne=[];const Ee=[],it=Promise.resolve();let Pe=!1;function st(){Pe||(Pe=!0,it.then(rt))}function on(){return st(),it}function X(e){ne.push(e)}function fn(e){Ee.push(e)}const ke=new Set;let x=0;function rt(){if(x!==0)return;const e=ae;do{try{for(;x<ee.length;){const t=ee[x];x++,re(t),vt(t.$$)}}catch(t){throw ee.length=0,x=0,t}for(re(null),ee.length=0,x=0;je.length;)je.pop()();for(let t=0;t<ne.length;t+=1){const n=ne[t];ke.has(n)||(ke.add(n),n())}ne.length=0}while(ee.length);for(;Ee.length;)Ee.pop()();Pe=!1,ke.clear(),re(e)}function vt(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(X)}}function yt(e){const t=[],n=[];ne.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),ne=t}let se;function ze(){return se||(se=Promise.resolve(),se.then(()=>{se=null})),se}function Q(e,t,n){e.dispatchEvent(gt(`${t?"intro":"outro"}${n}`))}const me=new Set;let W;function H(){W={r:0,c:[],p:W}}function G(){W.r||V(W.c),W=W.p}function y(e,t){e&&e.i&&(me.delete(e),e.i(t))}function N(e,t,n,i){if(e&&e.o){if(me.has(e))return;me.add(e),W.c.push(()=>{me.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const Ie={duration:0};function un(e,t,n){const i={direction:"in"};let s=t(e,n,i),r=!1,l,a,u=0;function d(){l&&pe(e,l)}function g(){const{delay:o=0,duration:c=300,easing:h=Ne,tick:m=z,css:_}=s||Ie;_&&(l=be(e,0,1,c,o,h,_,u++)),m(0,1);const w=Ae()+o,k=w+c;a&&a.abort(),r=!0,X(()=>Q(e,!0,"start")),a=Se(C=>{if(r){if(C>=k)return m(1,0),Q(e,!0,"end"),d(),r=!1;if(C>=w){const E=h((C-w)/c);m(E,1-E)}}return r})}let f=!1;return{start(){f||(f=!0,pe(e),Y(s)?(s=s(i),ze().then(g)):g())},invalidate(){f=!1},end(){r&&(d(),r=!1)}}}function cn(e,t,n){const i={direction:"out"};let s=t(e,n,i),r=!0,l;const a=W;a.r+=1;let u;function d(){const{delay:g=0,duration:f=300,easing:o=Ne,tick:c=z,css:h}=s||Ie;h&&(l=be(e,1,0,f,g,o,h));const m=Ae()+g,_=m+f;X(()=>Q(e,!1,"start")),"inert"in e&&(u=e.inert,e.inert=!0),Se(w=>{if(r){if(w>=_)return c(0,1),Q(e,!1,"end"),--a.r||V(a.c),!1;if(w>=m){const k=o((w-m)/f);c(1-k,k)}}return r})}return Y(s)?ze().then(()=>{s=s(i),d()}):d(),{end(g){g&&"inert"in e&&(e.inert=u),g&&s.tick&&s.tick(1,0),r&&(l&&pe(e,l),r=!1)}}}function dn(e,t,n,i){let r=t(e,n,{direction:"both"}),l=i?0:1,a=null,u=null,d=null,g;function f(){d&&pe(e,d)}function o(h,m){const _=h.b-l;return m*=Math.abs(_),{a:l,b:h.b,d:_,duration:m,start:h.start,end:h.start+m,group:h.group}}function c(h){const{delay:m=0,duration:_=300,easing:w=Ne,tick:k=z,css:C}=r||Ie,E={start:Ae()+m,b:h};h||(E.group=W,W.r+=1),"inert"in e&&(h?g!==void 0&&(e.inert=g):(g=e.inert,e.inert=!0)),a||u?u=E:(C&&(f(),d=be(e,l,h,_,m,w,C)),h&&k(0,1),a=o(E,_),X(()=>Q(e,h,"start")),Se(M=>{if(u&&M>u.start&&(a=o(u,_),u=null,Q(e,a.b,"start"),C&&(f(),d=be(e,l,a.b,a.duration,0,w,r.css))),a){if(M>=a.end)k(l=a.b,1-l),Q(e,a.b,"end"),u||(a.b?f():--a.group.r||V(a.group.c)),a=null;else if(M>=a.start){const O=M-a.start;l=a.a+a.d*w(O/a.duration),k(l,1-l)}}return!!(a||u)}))}return{run(h){Y(r)?ze().then(()=>{r=r({direction:h?"in":"out"}),c(h)}):c(h)},end(){f(),a=u=null}}}function he(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function hn(e,t){e.d(1),t.delete(e.key)}function Me(e,t){N(e,1,1,()=>{t.delete(e.key)})}function mn(e,t){e.f(),Me(e,t)}function Oe(e,t,n,i,s,r,l,a,u,d,g,f){let o=e.length,c=r.length,h=o;const m={};for(;h--;)m[e[h].key]=h;const _=[],w=new Map,k=new Map,C=[];for(h=c;h--;){const L=f(s,r,h),U=n(L);let T=l.get(U);T?i&&C.push(()=>T.p(L,t)):(T=d(U,L),T.c()),w.set(U,_[h]=T),U in m&&k.set(U,Math.abs(h-m[U]))}const E=new Set,M=new Set;function O(L){y(L,1),L.m(a,g),l.set(L.key,L),g=L.first,c--}for(;o&&c;){const L=_[c-1],U=e[o-1],T=L.key,K=U.key;L===U?(g=L.first,o--,c--):w.has(K)?!l.has(T)||E.has(T)?O(L):M.has(K)?o--:k.get(T)>k.get(K)?(M.add(T),O(L)):(E.add(K),o--):(u(U,l),o--)}for(;o--;){const L=e[o];w.has(L.key)||u(L,l)}for(;c;)O(_[c-1]);return V(C),_}function _n(e,t,n){const i=e.$$.props[t];i!==void 0&&(e.$$.bound[i]=n,n(e.$$.ctx[i]))}function F(e){e&&e.c()}function D(e,t,n){const{fragment:i,after_update:s}=e.$$;i&&i.m(t,n),X(()=>{const r=e.$$.on_mount.map(Ze).filter(Y);e.$$.on_destroy?e.$$.on_destroy.push(...r):V(r),e.$$.on_mount=[]}),s.forEach(X)}function R(e,t){const n=e.$$;n.fragment!==null&&(yt(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function kt(e,t){e.$$.dirty[0]===-1&&(ee.push(e),st(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function fe(e,t,n,i,s,r,l,a=[-1]){const u=ae;re(e);const d=e.$$={fragment:null,ctx:[],props:r,update:z,not_equal:s,bound:Te(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Te(),dirty:a,skip_bound:!1,root:t.target||u.$$.root};l&&l(d.root);let g=!1;if(d.ctx=n?n(e,t.props||{},(f,o,...c)=>{const h=c.length?c[0]:o;return d.ctx&&s(d.ctx[f],d.ctx[f]=h)&&(!d.skip_bound&&d.bound[f]&&d.bound[f](h),g&&kt(e,f)),o}):[],d.update(),g=!0,V(d.before_update),d.fragment=i?i(d.ctx):!1,t.target){if(t.hydrate){const f=mt(t.target);d.fragment&&d.fragment.l(f),f.forEach(I)}else d.fragment&&d.fragment.c();t.intro&&y(e.$$.fragment),D(e,t.target,t.anchor),rt()}re(u)}class ue{constructor(){B(this,"$$");B(this,"$$set")}$destroy(){R(this,1),this.$destroy=z}$on(t,n){if(!Y(n))return z;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const s=i.indexOf(n);s!==-1&&i.splice(s,1)}}$set(t){this.$$set&&!ft(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const Ct="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Ct);function Et(e,t){function n(i){i.target instanceof Element&&!e.contains(i.target)&&t()}return document.addEventListener("click",n,{capture:!0,passive:!0}),document.addEventListener("keyup",n,{capture:!0,passive:!0}),{update(i){t=i},destroy(){document.removeEventListener("click",n,{capture:!0}),document.removeEventListener("keyup",n,{capture:!0})}}}function gn(e){return Z()+"compose.php?m="+e}function De(e){let t=Z()+"create.php?sesskey="+ye();return e&&(t+="&c="+e),t}function bn(e){return Z()+"view.php?forward=1&sesskey="+ye()+"&m="+e}function Pt(){return Z()+"preferences.php"}function pn(e){return Z()+"view.php?reply=1&sesskey="+ye()+"&m="+e}function wn(e){return Z()+"view.php?replyall=1&sesskey="+ye()+"&m="+e}function we(e){var n,i,s,r,l,a,u,d;let t=Z()+"view.php?t="+e.tray;return e.courseid&&(t+="&c="+e.courseid),e.tray=="label"&&e.labelid&&(t+="&l="+e.labelid),e.messageid&&(t+="&m="+e.messageid),e.offset&&(t+="&o="+e.offset),(n=e.search)!=null&&n.content&&(t+="&q="+e.search.content),(i=e.search)!=null&&i.sendername&&(t+="&qs="+e.search.sendername),(s=e.search)!=null&&s.recipientname&&(t+="&qr="+e.search.recipientname),(r=e.search)!=null&&r.unread&&(t+="&u=1"),(l=e.search)!=null&&l.withfilesonly&&(t+="&f=1"),(a=e.search)!=null&&a.maxtime&&(t+="&d="+e.search.maxtime),(u=e.search)!=null&&u.startid&&(t+="&s="+e.search.startid),(d=e.search)!=null&&d.reverse&&(t+="&r=1"),t}function vn(){const e=new URL(window.location.href),t={tray:e.searchParams.get("t")||"inbox",courseid:parseInt(e.searchParams.get("c")||"")||void 0,labelid:parseInt(e.searchParams.get("l")||"")||void 0,messageid:parseInt(e.searchParams.get("m")||"")||void 0,offset:parseInt(e.searchParams.get("o")||"")||void 0},n={content:e.searchParams.get("q")||void 0,sendername:e.searchParams.get("qs")||void 0,recipientname:e.searchParams.get("qr")||void 0,unread:e.searchParams.get("u")=="1"||void 0,withfilesonly:e.searchParams.get("f")=="1"||void 0,maxtime:parseInt(e.searchParams.get("d")||"")||void 0,startid:parseInt(e.searchParams.get("s")||"")||void 0,reverse:e.searchParams.get("r")=="1"||void 0};return Object.values(n).some(i=>i!=null)?{...t,search:n}:t}function yn(e,t){const n=new URL(we(e));n.search!=window.location.search&&(t?window.history.replaceState(void 0,"",n.toString()):window.history.pushState(void 0,"",n.toString()))}function Z(){return window.M.cfg.wwwroot+"/local/mail/"}function ye(){return window.M.cfg.sesskey}function Mt(e){let t,n,i,s=e[0].compose+"",r,l;return{c(){t=S("a"),n=S("i"),i=q(),r=ie(s),v(n,"class","icon fa fa-fw fa-edit mr-1"),v(t,"class","btn btn-primary text-truncate px-3"),v(t,"role","button"),v(t,"href",l=De(e[1]))},m(a,u){j(a,t,u),P(t,n),P(t,i),P(t,r)},p(a,[u]){u&1&&s!==(s=a[0].compose+"")&&ve(r,s),u&2&&l!==(l=De(a[1]))&&v(t,"href",l)},i:z,o:z,d(a){a&&I(t)}}}function Nt(e,t,n){let{strings:i}=t,{courseid:s=void 0}=t;return e.$$set=r=>{"strings"in r&&n(0,i=r.strings),"courseid"in r&&n(1,s=r.courseid)},[i,s]}class At extends ue{constructor(t){super(),fe(this,t,Nt,Mt,oe,{strings:0,courseid:1})}}function Lt(e,t){function n(){e.offsetWidth<e.scrollWidth?e.setAttribute("title",t):e.removeAttribute("title")}return e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.addEventListener("mouseenter",n),{destroy(){e.removeEventListener("mouseenter",n,!0)}}}function Re(e){let t,n;return{c(){t=S("span"),n=ie(e[3]),v(t,"class","local-mail-menu-item-count badge")},m(i,s){j(i,t,s),P(t,n)},p(i,s){s&8&&ve(n,i[3])},d(i){i&&I(t)}}}function St(e){let t,n,i,s,r,l,a,u,d,g,f,o,c,h=e[3]>0&&Re(e);return{c(){t=S("a"),n=S("i"),r=q(),l=S("span"),a=ie(e[1]),d=q(),h&&h.c(),v(n,"class",i="fa "+e[0]+" fa-fw"),v(n,"aria-hidden","true"),v(n,"style",s=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-bg, var(--local-mail-color-gray-bg));`:""),v(l,"class","flex-fill px-2"),v(t,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2"),v(t,"aria-current",e[5]),v(t,"aria-disabled",e[4]),v(t,"role","tab"),v(t,"href",g=we(e[2])),v(t,"style",f=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-fg, var(--local-mail-color-gray-fg));`:""),J(t,"list-group-item-primary",e[5]),J(t,"disabled",e[4])},m(m,_){j(m,t,_),P(t,n),P(t,r),P(t,l),P(l,a),P(t,d),h&&h.m(t,null),o||(c=[xe(u=Lt.call(null,l,e[1])),le(t,"click",e[7])],o=!0)},p(m,[_]){_&1&&i!==(i="fa "+m[0]+" fa-fw")&&v(n,"class",i),_&96&&s!==(s=m[6]!=null&&!m[5]?`color: var(--local-mail-color-${m[6]}-bg, var(--local-mail-color-gray-bg));`:"")&&v(n,"style",s),_&2&&ve(a,m[1]),u&&Y(u.update)&&_&2&&u.update.call(null,m[1]),m[3]>0?h?h.p(m,_):(h=Re(m),h.c(),h.m(t,null)):h&&(h.d(1),h=null),_&32&&v(t,"aria-current",m[5]),_&16&&v(t,"aria-disabled",m[4]),_&4&&g!==(g=we(m[2]))&&v(t,"href",g),_&96&&f!==(f=m[6]!=null&&!m[5]?`color: var(--local-mail-color-${m[6]}-fg, var(--local-mail-color-gray-fg));`:"")&&v(t,"style",f),_&32&&J(t,"list-group-item-primary",m[5]),_&16&&J(t,"disabled",m[4])},i:z,o:z,d(m){m&&I(t),h&&h.d(),o=!1,V(c)}}}function Ut(e,t,n){let{icon:i}=t,{text:s}=t,{params:r}=t,{count:l=0}=t,{disabled:a=!1}=t,{active:u=!1}=t,{color:d=void 0}=t,{onClick:g=void 0}=t;const f=o=>{g&&(o.preventDefault(),g(r))};return e.$$set=o=>{"icon"in o&&n(0,i=o.icon),"text"in o&&n(1,s=o.text),"params"in o&&n(2,r=o.params),"count"in o&&n(3,l=o.count),"disabled"in o&&n(4,a=o.disabled),"active"in o&&n(5,u=o.active),"color"in o&&n(6,d=o.color),"onClick"in o&&n(8,g=o.onClick)},[i,s,r,l,a,u,d,f,g]}class $ extends ue{constructor(t){super(),fe(this,t,Ut,St,oe,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function We(e,t,n){const i=e.slice();return i[13]=t[n],i}function Fe(e,t,n){const i=e.slice();return i[16]=t[n],i}function Ve(e){var i;let t,n;return t=new $({props:{icon:"fa-star",text:e[1].starredmail,params:{tray:"starred",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="starred",onClick:e[7]}}),{c(){F(t.$$.fragment)},m(s,r){D(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].starredmail),r&1536&&(l.params={tray:"starred",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="starred"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(y(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){R(t,s)}}}function Be(e){var i;let t,n;return t=new $({props:{icon:"fa-paper-plane",text:e[1].sentmail,params:{tray:"sent",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="sent",onClick:e[7]}}),{c(){F(t.$$.fragment)},m(s,r){D(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].sentmail),r&1536&&(l.params={tray:"sent",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="sent"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(y(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){R(t,s)}}}function He(e){var i;let t,n;return t=new $({props:{icon:"fa-file",text:e[1].drafts,count:e[3],params:{tray:"drafts",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="drafts",onClick:e[7]}}),{c(){F(t.$$.fragment)},m(s,r){D(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].drafts),r&8&&(l.count=s[3]),r&1536&&(l.params={tray:"drafts",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="drafts"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(y(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){R(t,s)}}}function Ge(e){var i;let t,n;return t=new $({props:{icon:"fa-trash",text:e[1].trash,params:{tray:"trash",courseid:e[10],search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="trash",onClick:e[7]}}),{c(){F(t.$$.fragment)},m(s,r){D(t,s,r),n=!0},p(s,r){var a;const l={};r&2&&(l.text=s[1].trash),r&1536&&(l.params={tray:"trash",courseid:s[10],search:s[9]}),r&64&&(l.active=((a=s[6])==null?void 0:a.tray)=="trash"),r&128&&(l.onClick=s[7]),t.$set(l)},i(s){n||(y(t.$$.fragment,s),n=!0)},o(s){N(t.$$.fragment,s),n=!1},d(s){R(t,s)}}}function Je(e,t){var r,l;let n,i,s;return i=new $({props:{icon:"fa-tag",text:t[16].name,count:t[16].unread,color:t[16].color,params:{tray:"label",labelid:t[16].id,courseid:t[10],search:t[9]},active:((r=t[6])==null?void 0:r.tray)=="label"&&((l=t[6])==null?void 0:l.labelid)==t[16].id,onClick:t[7]}}),{key:e,first:null,c(){n=Ce(),F(i.$$.fragment),this.first=n},m(a,u){j(a,n,u),D(i,a,u),s=!0},p(a,u){var g,f;t=a;const d={};u&32&&(d.text=t[16].name),u&32&&(d.count=t[16].unread),u&32&&(d.color=t[16].color),u&1568&&(d.params={tray:"label",labelid:t[16].id,courseid:t[10],search:t[9]}),u&96&&(d.active=((g=t[6])==null?void 0:g.tray)=="label"&&((f=t[6])==null?void 0:f.labelid)==t[16].id),u&128&&(d.onClick=t[7]),i.$set(d)},i(a){s||(y(i.$$.fragment,a),s=!0)},o(a){N(i.$$.fragment,a),s=!1},d(a){a&&I(n),R(i,a)}}}function Ke(e){var i,s;let t,n;return t=new $({props:{icon:"fa-university",text:e[0].coursetraysname=="fullname"?e[13].fullname:e[13].shortname,count:e[13].unread,params:{tray:"course",courseid:e[13].id,search:e[9]},active:((i=e[6])==null?void 0:i.tray)=="course"&&((s=e[6])==null?void 0:s.courseid)==e[13].id,onClick:e[7]}}),{c(){F(t.$$.fragment)},m(r,l){D(t,r,l),n=!0},p(r,l){var u,d;const a={};l&17&&(a.text=r[0].coursetraysname=="fullname"?r[13].fullname:r[13].shortname),l&16&&(a.count=r[13].unread),l&528&&(a.params={tray:"course",courseid:r[13].id,search:r[9]}),l&80&&(a.active=((u=r[6])==null?void 0:u.tray)=="course"&&((d=r[6])==null?void 0:d.courseid)==r[13].id),l&128&&(a.onClick=r[7]),t.$set(a)},i(r){n||(y(t.$$.fragment,r),n=!0)},o(r){N(t.$$.fragment,r),n=!1},d(r){R(t,r)}}}function Qe(e,t){let n,i=t[11](t[13]),s,r,l=i&&Ke(t);return{key:e,first:null,c(){n=Ce(),l&&l.c(),s=Ce(),this.first=n},m(a,u){j(a,n,u),l&&l.m(a,u),j(a,s,u),r=!0},p(a,u){t=a,u&2064&&(i=t[11](t[13])),i?l?(l.p(t,u),u&2064&&y(l,1)):(l=Ke(t),l.c(),y(l,1),l.m(s.parentNode,s)):l&&(H(),N(l,1,1,()=>{l=null}),G())},i(a){r||(y(l),r=!0)},o(a){N(l),r=!1},d(a){a&&(I(n),I(s)),l&&l.d(a)}}}function zt(e){var K;let t,n,i,s=e[12]("starred"),r,l=e[12]("sent"),a,u=e[12]("drafts"),d,g=e[12]("trash"),f,o=[],c=new Map,h,m=[],_=new Map,w;n=new $({props:{icon:"fa-inbox",text:e[1].inbox,count:e[2],params:{tray:"inbox",courseid:e[10],search:e[9]},active:((K=e[6])==null?void 0:K.tray)=="inbox",onClick:e[7]}});let k=s&&Ve(e),C=l&&Be(e),E=u&&He(e),M=g&&Ge(e),O=he(e[5]);const L=p=>p[16].id;for(let p=0;p<O.length;p+=1){let b=Fe(e,O,p),A=L(b);c.set(A,o[p]=Je(A,b))}let U=he(e[4]);const T=p=>p[13].id;for(let p=0;p<U.length;p+=1){let b=We(e,U,p),A=T(b);_.set(A,m[p]=Qe(A,b))}return{c(){t=S("div"),F(n.$$.fragment),i=q(),k&&k.c(),r=q(),C&&C.c(),a=q(),E&&E.c(),d=q(),M&&M.c(),f=q();for(let p=0;p<o.length;p+=1)o[p].c();h=q();for(let p=0;p<m.length;p+=1)m[p].c();v(t,"class","list-group"),J(t,"list-group-flush",e[8])},m(p,b){j(p,t,b),D(n,t,null),P(t,i),k&&k.m(t,null),P(t,r),C&&C.m(t,null),P(t,a),E&&E.m(t,null),P(t,d),M&&M.m(t,null),P(t,f);for(let A=0;A<o.length;A+=1)o[A]&&o[A].m(t,null);P(t,h);for(let A=0;A<m.length;A+=1)m[A]&&m[A].m(t,null);w=!0},p(p,[b]){var qe;const A={};b&2&&(A.text=p[1].inbox),b&4&&(A.count=p[2]),b&1536&&(A.params={tray:"inbox",courseid:p[10],search:p[9]}),b&64&&(A.active=((qe=p[6])==null?void 0:qe.tray)=="inbox"),b&128&&(A.onClick=p[7]),n.$set(A),b&4096&&(s=p[12]("starred")),s?k?(k.p(p,b),b&4096&&y(k,1)):(k=Ve(p),k.c(),y(k,1),k.m(t,r)):k&&(H(),N(k,1,1,()=>{k=null}),G()),b&4096&&(l=p[12]("sent")),l?C?(C.p(p,b),b&4096&&y(C,1)):(C=Be(p),C.c(),y(C,1),C.m(t,a)):C&&(H(),N(C,1,1,()=>{C=null}),G()),b&4096&&(u=p[12]("drafts")),u?E?(E.p(p,b),b&4096&&y(E,1)):(E=He(p),E.c(),y(E,1),E.m(t,d)):E&&(H(),N(E,1,1,()=>{E=null}),G()),b&4096&&(g=p[12]("trash")),g?M?(M.p(p,b),b&4096&&y(M,1)):(M=Ge(p),M.c(),y(M,1),M.m(t,f)):M&&(H(),N(M,1,1,()=>{M=null}),G()),b&1760&&(O=he(p[5]),H(),o=Oe(o,b,L,1,p,O,c,t,Me,Je,h,Fe),G()),b&2769&&(U=he(p[4]),H(),m=Oe(m,b,T,1,p,U,_,t,Me,Qe,null,We),G()),(!w||b&256)&&J(t,"list-group-flush",p[8])},i(p){if(!w){y(n.$$.fragment,p),y(k),y(C),y(E),y(M);for(let b=0;b<O.length;b+=1)y(o[b]);for(let b=0;b<U.length;b+=1)y(m[b]);w=!0}},o(p){N(n.$$.fragment,p),N(k),N(C),N(E),N(M);for(let b=0;b<o.length;b+=1)N(o[b]);for(let b=0;b<m.length;b+=1)N(m[b]);w=!1},d(p){p&&I(t),R(n),k&&k.d(),C&&C.d(),E&&E.d(),M&&M.d();for(let b=0;b<o.length;b+=1)o[b].d();for(let b=0;b<m.length;b+=1)m[b].d()}}}function It(e,t,n){let i,s,r,l,{settings:a}=t,{strings:u}=t,{unread:d}=t,{drafts:g}=t,{courses:f}=t,{labels:o}=t,{params:c=void 0}=t,{onClick:h=void 0}=t,{flush:m=!1}=t;return e.$$set=_=>{"settings"in _&&n(0,a=_.settings),"strings"in _&&n(1,u=_.strings),"unread"in _&&n(2,d=_.unread),"drafts"in _&&n(3,g=_.drafts),"courses"in _&&n(4,f=_.courses),"labels"in _&&n(5,o=_.labels),"params"in _&&n(6,c=_.params),"onClick"in _&&n(7,h=_.onClick),"flush"in _&&n(8,m=_.flush)},e.$$.update=()=>{e.$$.dirty&65&&n(12,i=_=>a.globaltrays.includes(_)||(c==null?void 0:c.tray)==_),e.$$.dirty&65&&n(11,s=_=>a.coursetrays=="all"||a.coursetrays=="unread"&&_.unread>0||(c==null?void 0:c.tray)=="course"&&(c==null?void 0:c.courseid)==_.id),e.$$.dirty&64&&n(10,r=(c==null?void 0:c.tray)!="course"?c==null?void 0:c.courseid:void 0),e.$$.dirty&64&&n(9,l=c!=null&&c.search?{content:c.search.content,sendername:c.search.sendername,recipientname:c.search.recipientname,maxtime:c.search.maxtime,unread:c.search.unread,withfilesonly:c.search.withfilesonly}:void 0)},[a,u,d,g,f,o,c,h,m,l,r,s,i]}class qt extends ue{constructor(t){super(),fe(this,t,It,zt,oe,{settings:0,strings:1,unread:2,drafts:3,courses:4,labels:5,params:6,onClick:7,flush:8})}}function Tt(e){let t,n,i;return{c(){t=S("a"),n=S("i"),v(n,"class","fa fa-cog"),v(n,"aria-hidden",!0),v(t,"class","btn btn-secondary text-truncate"),v(t,"role","button"),v(t,"href",Pt()),v(t,"title",i=e[0].preferences)},m(s,r){j(s,t,r),P(t,n)},p(s,[r]){r&1&&i!==(i=s[0].preferences)&&v(t,"title",i)},i:z,o:z,d(s){s&&I(t)}}}function jt(e,t,n){let{strings:i}=t;return e.$$set=s=>{"strings"in s&&n(0,i=s.strings)},[i]}class Ot extends ue{constructor(t){super(),fe(this,t,jt,Tt,oe,{strings:0})}}function Xe(e){let t,n;return{c(){t=S("div"),n=ie(e[2]),v(t,"class","local-mail-navbar-count count-container svelte-k2oznn")},m(i,s){j(i,t,s),P(t,n)},p(i,s){s&4&&ve(n,i[2])},d(i){i&&I(t)}}}function Ye(e){let t,n,i,s,r,l,a,u,d,g;return i=new At({props:{strings:e[1]}}),r=new Ot({props:{strings:e[1]}}),d=new qt({props:{settings:e[0],strings:e[1],unread:e[2],drafts:e[3],courses:e[4],labels:e[5],params:e[6],onClick:e[7]?e[12]:void 0,flush:!0}}),{c(){t=S("div"),n=S("div"),F(i.$$.fragment),s=q(),F(r.$$.fragment),l=q(),a=S("hr"),u=q(),F(d.$$.fragment),v(n,"class","d-flex justify-content-between pl-3 pr-2 py-2"),v(a,"class","m-0"),v(t,"class","local-mail-navbar-dropdown dropdown-menu dropdown-menu-right show p-0 overflow-auto svelte-k2oznn")},m(f,o){j(f,t,o),P(t,n),D(i,n,null),P(n,s),D(r,n,null),P(t,l),P(t,a),P(t,u),D(d,t,null),g=!0},p(f,o){const c={};o&2&&(c.strings=f[1]),i.$set(c);const h={};o&2&&(h.strings=f[1]),r.$set(h);const m={};o&1&&(m.settings=f[0]),o&2&&(m.strings=f[1]),o&4&&(m.unread=f[2]),o&8&&(m.drafts=f[3]),o&16&&(m.courses=f[4]),o&32&&(m.labels=f[5]),o&64&&(m.params=f[6]),o&128&&(m.onClick=f[7]?f[12]:void 0),d.$set(m)},i(f){g||(y(i.$$.fragment,f),y(r.$$.fragment,f),y(d.$$.fragment,f),g=!0)},o(f){N(i.$$.fragment,f),N(r.$$.fragment,f),N(d.$$.fragment,f),g=!1},d(f){f&&I(t),R(i),R(r),R(d)}}}function Dt(e){let t,n,i,s,r,l,a,u,d,g;X(e[13]);let f=e[2]>0&&Xe(e),o=e[8]&&Ye(e);return{c(){t=S("div"),n=S("a"),i=S("i"),r=q(),f&&f.c(),a=q(),o&&o.c(),v(i,"class","fa fa-fw fa-envelope-o"),v(i,"aria-label",s=e[1].plugginname),v(n,"aria-expanded",e[8]),v(n,"aria-label",l=e[1].togglemailmenu),v(n,"class","btn h-100 position-relative d-flex align-items-center px-2 py-0"),v(n,"href",we({tray:"inbox"})),v(t,"class","local-mail-navbar dropdown h-100 svelte-k2oznn"),J(t,"position-static",e[9]<768)},m(c,h){j(c,t,h),P(t,n),P(n,i),P(n,r),f&&f.m(n,null),P(t,a),o&&o.m(t,null),u=!0,d||(g=[le(window,"resize",e[13]),le(n,"click",e[11]),xe(Et.call(null,t,e[10]))],d=!0)},p(c,[h]){(!u||h&2&&s!==(s=c[1].plugginname))&&v(i,"aria-label",s),c[2]>0?f?f.p(c,h):(f=Xe(c),f.c(),f.m(n,null)):f&&(f.d(1),f=null),(!u||h&256)&&v(n,"aria-expanded",c[8]),(!u||h&2&&l!==(l=c[1].togglemailmenu))&&v(n,"aria-label",l),c[8]?o?(o.p(c,h),h&256&&y(o,1)):(o=Ye(c),o.c(),y(o,1),o.m(t,null)):o&&(H(),N(o,1,1,()=>{o=null}),G()),(!u||h&512)&&J(t,"position-static",c[9]<768)},i(c){u||(y(o),u=!0)},o(c){N(o),u=!1},d(c){c&&I(t),f&&f.d(),o&&o.d(),d=!1,V(g)}}}function Rt(e,t,n){let{settings:i}=t,{strings:s}=t,{unread:r}=t,{drafts:l}=t,{courses:a}=t,{labels:u}=t,{params:d=void 0}=t,{onClick:g=void 0}=t,f=!1,o;const c=()=>{n(8,f=!1)},h=w=>{i.globaltrays.length>0||u.length>0?(n(8,f=!f),w.preventDefault()):g&&(w.preventDefault(),g({tray:"inbox"}))},m=w=>{n(8,f=!1),g==null||g(w)};function _(){n(9,o=window.innerWidth)}return e.$$set=w=>{"settings"in w&&n(0,i=w.settings),"strings"in w&&n(1,s=w.strings),"unread"in w&&n(2,r=w.unread),"drafts"in w&&n(3,l=w.drafts),"courses"in w&&n(4,a=w.courses),"labels"in w&&n(5,u=w.labels),"params"in w&&n(6,d=w.params),"onClick"in w&&n(7,g=w.onClick)},[i,s,r,l,a,u,d,g,f,o,c,h,m,_]}class kn extends ue{constructor(t){super(),fe(this,t,Rt,Dt,oe,{settings:0,strings:1,unread:2,drafts:3,courses:4,labels:5,params:6,onClick:7})}}export{Zt as $,Kt as A,Gt as B,y as C,X as D,dn as E,N as F,I as G,V as H,rn as I,an as J,je as K,Ce as L,H as M,G as N,F as O,D as P,R as Q,ut as R,ue as S,J as T,he as U,$t as V,Yt as W,Oe as X,hn as Y,xt as Z,nn as _,Ae as a,Lt as a0,Me as a1,un as a2,we as a3,mn as a4,gn as a5,cn as a6,pn as a7,wn as a8,bn as a9,Xt as aa,Vt as ab,en as ac,tn as ad,_n as ae,fn as af,on as ag,sn as ah,ln as ai,At as aj,qt as ak,kn as al,yn as b,be as c,pe as d,vn as e,Qt as f,Bt as g,fe as h,Ne as i,oe as j,Ht as k,Se as l,q as m,z as n,S as o,v as p,j as q,P as r,Ft as s,ie as t,le as u,Y as v,xe as w,Et as x,ve as y,Jt as z};
