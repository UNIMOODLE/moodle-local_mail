{"version":3,"file":"view-2a19f9f0.js","sources":["../node_modules/svelte/src/runtime/internal/globals.js","../node_modules/svelte/src/runtime/internal/animations.js","../src/lib/state.ts","../node_modules/svelte/src/runtime/easing/index.js","../node_modules/svelte/src/runtime/transition/index.js","../src/components/ModalDialog.svelte","../src/components/ErrorModal.svelte","../src/components/DeleteButton.svelte","../src/components/DeleteForeverButton.svelte","../src/lib/utils.ts","../src/components/LabelModal.svelte","../src/components/LabelsButton.svelte","../src/components/MoreActionsButton.svelte","../src/components/PagingButtons.svelte","../src/components/RestoreButton.svelte","../src/components/BottomToolBar.svelte","../node_modules/svelte/src/runtime/animate/index.js","../src/components/ListMessageCheckbox.svelte","../src/components/ListMessageStar.svelte","../src/components/ListMessageUsers.svelte","../src/components/ListMessageSubject.svelte","../src/components/CourseBadge.svelte","../src/components/LabelBadge.svelte","../src/components/ListMessageLabels.svelte","../src/components/ListMessageAttachments.svelte","../src/components/ListMessageTime.svelte","../src/components/ListAlert.svelte","../src/components/List.svelte","../src/components/MessageActions.svelte","../src/components/MessageAttachments.svelte","../src/components/MessageButtons.svelte","../src/components/MessageLabels.svelte","../src/components/UserPicture.svelte","../src/components/MessageReference.svelte","../src/components/MessageUsers.svelte","../src/components/Message.svelte","../src/components/DraftFormRecipients.svelte","../src/components/DraftFormTimeAndLabels.svelte","../src/lib/services.ts","../src/components/DraftFormUserSearch.svelte","../src/components/SendButton.svelte","../src/components/DraftForm.svelte","../src/components/PerPageSelect.svelte","../src/components/PreferencesDialog.svelte","../src/components/SearchOptions.svelte","../src/components/IncrementalSearch.svelte","../src/components/SearchBox.svelte","../src/components/Toasts.svelte","../src/components/BackButton.svelte","../src/components/SelectAllButton.svelte","../src/components/TopToolBar.svelte","../src/components/View.svelte","../node_modules/svelte/src/runtime/store/index.js","../src/lib/store.ts","../src/view.ts"],"sourcesContent":["/** @type {typeof globalThis} */\nexport const globals =\n\ttypeof window !== 'undefined'\n\t\t? window\n\t\t: typeof globalThis !== 'undefined'\n\t\t? globalThis\n\t\t: // @ts-ignore Node typings have this\n\t\t  global;\n","import { identity as linear, noop } from './utils.js';\nimport { now } from './environment.js';\nimport { loop } from './loop.js';\nimport { create_rule, delete_rule } from './style_manager.js';\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {import('./private.js').PositionRect} from\n * @param {import('./private.js').AnimationFn} fn\n */\nexport function create_animation(node, from, fn, params) {\n\tif (!from) return noop;\n\tconst to = node.getBoundingClientRect();\n\tif (\n\t\tfrom.left === to.left &&\n\t\tfrom.right === to.right &&\n\t\tfrom.top === to.top &&\n\t\tfrom.bottom === to.bottom\n\t)\n\t\treturn noop;\n\tconst {\n\t\tdelay = 0,\n\t\tduration = 300,\n\t\teasing = linear,\n\t\t// @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n\t\tstart: start_time = now() + delay,\n\t\t// @ts-ignore todo:\n\t\tend = start_time + duration,\n\t\ttick = noop,\n\t\tcss\n\t} = fn(node, { from, to }, params);\n\tlet running = true;\n\tlet started = false;\n\tlet name;\n\t/** @returns {void} */\n\tfunction start() {\n\t\tif (css) {\n\t\t\tname = create_rule(node, 0, 1, duration, delay, easing, css);\n\t\t}\n\t\tif (!delay) {\n\t\t\tstarted = true;\n\t\t}\n\t}\n\t/** @returns {void} */\n\tfunction stop() {\n\t\tif (css) delete_rule(node, name);\n\t\trunning = false;\n\t}\n\tloop((now) => {\n\t\tif (!started && now >= start_time) {\n\t\t\tstarted = true;\n\t\t}\n\t\tif (started && now >= end) {\n\t\t\ttick(1, 0);\n\t\t\tstop();\n\t\t}\n\t\tif (!running) {\n\t\t\treturn false;\n\t\t}\n\t\tif (started) {\n\t\t\tconst p = now - start_time;\n\t\t\tconst t = 0 + 1 * easing(p / duration);\n\t\t\ttick(t, 1 - t);\n\t\t}\n\t\treturn true;\n\t});\n\tstart();\n\ttick(0, 1);\n\treturn stop;\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @returns {void}\n */\nexport function fix_position(node) {\n\tconst style = getComputedStyle(node);\n\tif (style.position !== 'absolute' && style.position !== 'fixed') {\n\t\tconst { width, height } = style;\n\t\tconst a = node.getBoundingClientRect();\n\t\tnode.style.position = 'absolute';\n\t\tnode.style.width = width;\n\t\tnode.style.height = height;\n\t\tadd_transform(node, a);\n\t}\n}\n\n/**\n * @param {Element & ElementCSSInlineStyle} node\n * @param {import('./private.js').PositionRect} a\n * @returns {void}\n */\nexport function add_transform(node, a) {\n\tconst b = node.getBoundingClientRect();\n\tif (a.left !== b.left || a.top !== b.top) {\n\t\tconst style = getComputedStyle(node);\n\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\t\tnode.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n\t}\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n *\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\n\nexport interface Attachment {\n    readonly filepath: string;\n    readonly filename: string;\n    readonly mimetype: string;\n    readonly filesize: number;\n    readonly fileurl: string;\n    readonly iconurl: string;\n}\n\nexport interface Course {\n    readonly id: number;\n    readonly shortname: string;\n    readonly fullname: string;\n    readonly visible: boolean;\n    readonly groupmode: GroupMode;\n    readonly unread: number;\n    readonly drafts: number;\n}\n\nexport enum DeletedStatus {\n    NotDeleted = 0,\n    Deleted = 1,\n    DeletedForever = 2,\n}\n\nexport type Dialog =\n    | 'preferences'\n    | 'createlabel'\n    | 'editlabel'\n    | 'deletelabel'\n    | 'restore'\n    | 'deleteforever'\n    | 'emptytrash';\n\nexport interface Group {\n    readonly id: number;\n    readonly name: string;\n}\n\nexport enum GroupMode {\n    No = 0,\n    Separate = 1,\n    Visible = 2,\n}\n\nexport interface InitialData {\n    readonly userid: number;\n    readonly settings: Settings;\n    readonly preferences: Preferences;\n    readonly strings: Strings;\n    readonly mobile: boolean;\n}\n\nexport interface Label {\n    readonly id: number;\n    readonly name: string;\n    readonly color: string;\n    readonly unread: number;\n    readonly courses: ReadonlyArray<LabelCourse>;\n}\n\nexport interface LabelCourse {\n    readonly id: number;\n    readonly unread: number;\n}\n\nexport interface Message extends MessageSummary {\n    readonly content: string;\n    readonly format: number;\n    readonly attachments: ReadonlyArray<Attachment>;\n    readonly references: ReadonlyArray<Reference>;\n}\n\nexport interface MessageData {\n    readonly courseid: number;\n    readonly to: number[];\n    readonly cc: number[];\n    readonly bcc: number[];\n    readonly subject: string;\n    readonly content: string;\n    readonly format: number;\n    readonly draftitemid: number;\n}\n\nexport interface MessageForm {\n    readonly editorhtml: string;\n    readonly filemanagerhtml: string;\n    readonly javascript: string;\n}\n\nexport interface MessageProcessor {\n    name: string;\n    displayname: string;\n    enabled: boolean;\n    locked: boolean;\n}\n\nexport interface MessageProcessorPreference {\n    name: string;\n    enabled: boolean;\n}\n\nexport interface MessageSummary {\n    readonly id: number;\n    readonly subject: string;\n    readonly numattachments: number;\n    readonly draft: boolean;\n    readonly time: number;\n    readonly shorttime: string;\n    readonly fulltime: string;\n    readonly unread: boolean;\n    readonly starred: boolean;\n    readonly deleted: boolean;\n    readonly course: Course;\n    readonly sender: User;\n    readonly recipients: ReadonlyArray<Recipient>;\n    readonly labels: ReadonlyArray<Label>;\n}\n\nexport interface Preferences {\n    readonly perpage: number;\n    readonly markasread: boolean;\n    readonly notifications: ReadonlyArray<string>;\n}\n\nexport interface Recipient extends User {\n    readonly type: RecipientType;\n    readonly isvalid?: boolean;\n}\n\nexport enum RecipientType {\n    TO = 'to',\n    CC = 'cc',\n    BCC = 'bcc',\n}\n\nexport interface Reference {\n    readonly id: number;\n    readonly subject: string;\n    readonly content: string;\n    readonly format: number;\n    readonly time: number;\n    readonly shorttime: string;\n    readonly fulltime: string;\n    readonly sender: User;\n    readonly attachments: ReadonlyArray<Attachment>;\n}\n\nexport interface Role {\n    readonly id: number;\n    readonly name: string;\n}\n\nexport interface SearchParams {\n    readonly content?: string;\n    readonly sendername?: string;\n    readonly recipientname?: string;\n    readonly unread?: boolean;\n    readonly withfilesonly?: boolean;\n    readonly maxtime?: number;\n    readonly startid?: number;\n    readonly reverse?: boolean;\n}\n\nexport type SelectAllType = 'all' | 'none' | 'read' | 'unread' | 'starred' | 'unstarred';\n\nexport interface ServiceError {\n    readonly message: string;\n    readonly debuginfo?: string;\n    readonly stacktrace?: string;\n}\n\nexport interface Settings {\n    maxrecipients: number;\n    usersearchlimit: number;\n    globaltrays: ReadonlyArray<string>;\n    coursetrays: 'none' | 'unread' | 'all';\n    coursetraysname: 'shortname' | 'fullname';\n    coursebadges: 'hidden' | 'shortname' | 'fullname';\n    coursebadgeslength: number;\n    filterbycourse: 'hidden' | 'shortname' | 'fullname';\n    incrementalsearch: boolean;\n    incrementalsearchlimit: number;\n    messageprocessors: ReadonlyArray<MessageProcessor>;\n}\n\nexport interface State {\n    /* General information fetched only once. */\n    readonly userid: number;\n    readonly settings: Settings;\n    readonly preferences: Preferences;\n    readonly strings: Strings;\n    readonly incrementalSearchStopId?: number;\n    readonly mobile: boolean;\n\n    /* URL parameters of the current and previous view. */\n    readonly params: ViewParams;\n    readonly prevParams?: ViewParams;\n\n    /* Data fetched using web services for the current view.  */\n    readonly unread: number;\n    readonly drafts: number;\n    readonly courses: ReadonlyArray<Course>;\n    readonly labels: ReadonlyArray<Label>;\n    readonly totalCount: number;\n    readonly listMessages: ReadonlyArray<MessageSummary>;\n    readonly message?: Message;\n    readonly messageOffset?: number;\n    readonly nextMessageId?: number;\n    readonly prevMessageId?: number;\n\n    /* Data used for editing drafts. */\n    readonly draftForm?: MessageForm;\n    readonly draftData?: MessageData;\n    readonly draftSaved?: boolean;\n\n    /* Transient interface state. */\n    readonly loading: boolean;\n    readonly error?: ServiceError;\n    readonly selectedMessages: ReadonlyMap<number, MessageSummary>;\n    readonly toasts: ReadonlyArray<Toast>;\n    readonly viewportSize: number;\n    readonly navigationId: number;\n}\n\nexport type Strings = Record<string, string>;\n\nexport interface Toast {\n    readonly text: string;\n    readonly undo?: () => void;\n}\n\nexport type Tray = 'inbox' | 'sent' | 'drafts' | 'starred' | 'course' | 'label' | 'trash';\n\nexport interface User {\n    readonly id: number;\n    readonly firstname: string;\n    readonly lastname: string;\n    readonly fullname: string;\n    readonly pictureurl: string;\n    readonly profileurl: string;\n    readonly sortorder: string;\n}\n\nexport interface ViewParams {\n    readonly tray?: Tray;\n    readonly courseid?: number;\n    readonly labelid?: number;\n    readonly messageid?: number;\n    readonly offset?: number;\n    readonly search?: SearchParams;\n    readonly dialog?: Dialog;\n}\n\nexport enum ViewportSize {\n    SM = 576,\n    MD = 768,\n    LG = 992,\n    XL = 1200,\n}\n","/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nexport { identity as linear } from '../internal/index.js';\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backInOut(t) {\n\tconst s = 1.70158 * 1.525;\n\tif ((t *= 2) < 1) return 0.5 * (t * t * ((s + 1) * t - s));\n\treturn 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backIn(t) {\n\tconst s = 1.70158;\n\treturn t * t * ((s + 1) * t - s);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function backOut(t) {\n\tconst s = 1.70158;\n\treturn --t * t * ((s + 1) * t + s) + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceOut(t) {\n\tconst a = 4.0 / 11.0;\n\tconst b = 8.0 / 11.0;\n\tconst c = 9.0 / 10.0;\n\tconst ca = 4356.0 / 361.0;\n\tconst cb = 35442.0 / 1805.0;\n\tconst cc = 16061.0 / 1805.0;\n\tconst t2 = t * t;\n\treturn t < a\n\t\t? 7.5625 * t2\n\t\t: t < b\n\t\t? 9.075 * t2 - 9.9 * t + 3.4\n\t\t: t < c\n\t\t? ca * t2 - cb * t + cc\n\t\t: 10.8 * t * t - 20.52 * t + 10.72;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceInOut(t) {\n\treturn t < 0.5 ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0)) : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function bounceIn(t) {\n\treturn 1.0 - bounceOut(1.0 - t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circInOut(t) {\n\tif ((t *= 2) < 1) return -0.5 * (Math.sqrt(1 - t * t) - 1);\n\treturn 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circIn(t) {\n\treturn 1.0 - Math.sqrt(1.0 - t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function circOut(t) {\n\treturn Math.sqrt(1 - --t * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicInOut(t) {\n\treturn t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicIn(t) {\n\treturn t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function cubicOut(t) {\n\tconst f = t - 1.0;\n\treturn f * f * f + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticInOut(t) {\n\treturn t < 0.5\n\t\t? 0.5 * Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) * Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n\t\t: 0.5 *\n\t\t\t\tMath.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n\t\t\t\tMath.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n\t\t\t\t1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticIn(t) {\n\treturn Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function elasticOut(t) {\n\treturn Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoInOut(t) {\n\treturn t === 0.0 || t === 1.0\n\t\t? t\n\t\t: t < 0.5\n\t\t? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n\t\t: -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoIn(t) {\n\treturn t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function expoOut(t) {\n\treturn t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadInOut(t) {\n\tt /= 0.5;\n\tif (t < 1) return 0.5 * t * t;\n\tt--;\n\treturn -0.5 * (t * (t - 2) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadIn(t) {\n\treturn t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quadOut(t) {\n\treturn -t * (t - 2.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartInOut(t) {\n\treturn t < 0.5 ? +8.0 * Math.pow(t, 4.0) : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartIn(t) {\n\treturn Math.pow(t, 4.0);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quartOut(t) {\n\treturn Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintInOut(t) {\n\tif ((t *= 2) < 1) return 0.5 * t * t * t * t * t;\n\treturn 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintIn(t) {\n\treturn t * t * t * t * t;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function quintOut(t) {\n\treturn --t * t * t * t * t + 1;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineInOut(t) {\n\treturn -0.5 * (Math.cos(Math.PI * t) - 1);\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineIn(t) {\n\tconst v = Math.cos(t * Math.PI * 0.5);\n\tif (Math.abs(v) < 1e-14) return 1;\n\telse return 1 - v;\n}\n\n/**\n * https://svelte.dev/docs/svelte-easing\n * @param {number} t\n * @returns {number}\n */\nexport function sineOut(t) {\n\treturn Math.sin((t * Math.PI) / 2);\n}\n","import { cubicOut, cubicInOut, linear } from '../easing/index.js';\nimport { assign, split_css_unit, is_function } from '../internal/index.js';\n\n/**\n * Animates a `blur` filter alongside an element's opacity.\n *\n * https://svelte.dev/docs/svelte-transition#blur\n * @param {Element} node\n * @param {import('./public').BlurParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function blur(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst f = style.filter === 'none' ? '' : style.filter;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [value, unit] = split_css_unit(amount);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `opacity: ${target_opacity - od * u}; filter: ${f} blur(${u * value}${unit});`\n\t};\n}\n\n/**\n * Animates the opacity of an element from 0 to the current opacity for `in` transitions and from the current opacity to 0 for `out` transitions.\n *\n * https://svelte.dev/docs/svelte-transition#fade\n * @param {Element} node\n * @param {import('./public').FadeParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n\tconst o = +getComputedStyle(node).opacity;\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) => `opacity: ${t * o}`\n\t};\n}\n\n/**\n * Animates the x and y positions and the opacity of an element. `in` transitions animate from the provided values, passed as parameters to the element's default values. `out` transitions animate from the element's default values to the provided values.\n *\n * https://svelte.dev/docs/svelte-transition#fly\n * @param {Element} node\n * @param {import('./public').FlyParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function fly(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst od = target_opacity * (1 - opacity);\n\tconst [xValue, xUnit] = split_css_unit(x);\n\tconst [yValue, yUnit] = split_css_unit(y);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * xValue}${xUnit}, ${(1 - t) * yValue}${yUnit});\n\t\t\topacity: ${target_opacity - od * u}`\n\t};\n}\n\n/**\n * Slides an element in and out.\n *\n * https://svelte.dev/docs/svelte-transition#slide\n * @param {Element} node\n * @param {import('./public').SlideParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function slide(node, { delay = 0, duration = 400, easing = cubicOut, axis = 'y' } = {}) {\n\tconst style = getComputedStyle(node);\n\tconst opacity = +style.opacity;\n\tconst primary_property = axis === 'y' ? 'height' : 'width';\n\tconst primary_property_value = parseFloat(style[primary_property]);\n\tconst secondary_properties = axis === 'y' ? ['top', 'bottom'] : ['left', 'right'];\n\tconst capitalized_secondary_properties = secondary_properties.map(\n\t\t(e) => `${e[0].toUpperCase()}${e.slice(1)}`\n\t);\n\tconst padding_start_value = parseFloat(style[`padding${capitalized_secondary_properties[0]}`]);\n\tconst padding_end_value = parseFloat(style[`padding${capitalized_secondary_properties[1]}`]);\n\tconst margin_start_value = parseFloat(style[`margin${capitalized_secondary_properties[0]}`]);\n\tconst margin_end_value = parseFloat(style[`margin${capitalized_secondary_properties[1]}`]);\n\tconst border_width_start_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[0]}Width`]\n\t);\n\tconst border_width_end_value = parseFloat(\n\t\tstyle[`border${capitalized_secondary_properties[1]}Width`]\n\t);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (t) =>\n\t\t\t'overflow: hidden;' +\n\t\t\t`opacity: ${Math.min(t * 20, 1) * opacity};` +\n\t\t\t`${primary_property}: ${t * primary_property_value}px;` +\n\t\t\t`padding-${secondary_properties[0]}: ${t * padding_start_value}px;` +\n\t\t\t`padding-${secondary_properties[1]}: ${t * padding_end_value}px;` +\n\t\t\t`margin-${secondary_properties[0]}: ${t * margin_start_value}px;` +\n\t\t\t`margin-${secondary_properties[1]}: ${t * margin_end_value}px;` +\n\t\t\t`border-${secondary_properties[0]}-width: ${t * border_width_start_value}px;` +\n\t\t\t`border-${secondary_properties[1]}-width: ${t * border_width_end_value}px;`\n\t};\n}\n\n/**\n * Animates the opacity and scale of an element. `in` transitions animate from an element's current (default) values to the provided values, passed as parameters. `out` transitions animate from the provided values to an element's default values.\n *\n * https://svelte.dev/docs/svelte-transition#scale\n * @param {Element} node\n * @param {import('./public').ScaleParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function scale(\n\tnode,\n\t{ delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}\n) {\n\tconst style = getComputedStyle(node);\n\tconst target_opacity = +style.opacity;\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst sd = 1 - start;\n\tconst od = target_opacity * (1 - opacity);\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - sd * u});\n\t\t\topacity: ${target_opacity - od * u}\n\t\t`\n\t};\n}\n\n/**\n * Animates the stroke of an SVG element, like a snake in a tube. `in` transitions begin with the path invisible and draw the path to the screen over time. `out` transitions start in a visible state and gradually erase the path. `draw` only works with elements that have a `getTotalLength` method, like `<path>` and `<polyline>`.\n *\n * https://svelte.dev/docs/svelte-transition#draw\n * @param {SVGElement & { getTotalLength(): number }} node\n * @param {import('./public').DrawParams} [params]\n * @returns {import('./public').TransitionConfig}\n */\nexport function draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n\tlet len = node.getTotalLength();\n\tconst style = getComputedStyle(node);\n\tif (style.strokeLinecap !== 'butt') {\n\t\tlen += parseInt(style.strokeWidth);\n\t}\n\tif (duration === undefined) {\n\t\tif (speed === undefined) {\n\t\t\tduration = 800;\n\t\t} else {\n\t\t\tduration = len / speed;\n\t\t}\n\t} else if (typeof duration === 'function') {\n\t\tduration = duration(len);\n\t}\n\treturn {\n\t\tdelay,\n\t\tduration,\n\t\teasing,\n\t\tcss: (_, u) => `\n\t\t\tstroke-dasharray: ${len};\n\t\t\tstroke-dashoffset: ${u * len};\n\t\t`\n\t};\n}\n\n/**\n * The `crossfade` function creates a pair of [transitions](/docs#template-syntax-element-directives-transition-fn) called `send` and `receive`. When an element is 'sent', it looks for a corresponding element being 'received', and generates a transition that transforms the element to its counterpart's position and fades it out. When an element is 'received', the reverse happens. If there is no counterpart, the `fallback` transition is used.\n *\n * https://svelte.dev/docs/svelte-transition#crossfade\n * @param {import('./public').CrossfadeParams & {\n * \tfallback?: (node: Element, params: import('./public').CrossfadeParams, intro: boolean) => import('./public').TransitionConfig;\n * }} params\n * @returns {[(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig, (node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig]}\n */\nexport function crossfade({ fallback, ...defaults }) {\n\t/** @type {Map<any, Element>} */\n\tconst to_receive = new Map();\n\t/** @type {Map<any, Element>} */\n\tconst to_send = new Map();\n\t/**\n\t * @param {Element} from_node\n\t * @param {Element} node\n\t * @param {import('./public').CrossfadeParams} params\n\t * @returns {import('./public').TransitionConfig}\n\t */\n\tfunction crossfade(from_node, node, params) {\n\t\tconst {\n\t\t\tdelay = 0,\n\t\t\tduration = (d) => Math.sqrt(d) * 30,\n\t\t\teasing = cubicOut\n\t\t} = assign(assign({}, defaults), params);\n\t\tconst from = from_node.getBoundingClientRect();\n\t\tconst to = node.getBoundingClientRect();\n\t\tconst dx = from.left - to.left;\n\t\tconst dy = from.top - to.top;\n\t\tconst dw = from.width / to.width;\n\t\tconst dh = from.height / to.height;\n\t\tconst d = Math.sqrt(dx * dx + dy * dy);\n\t\tconst style = getComputedStyle(node);\n\t\tconst transform = style.transform === 'none' ? '' : style.transform;\n\t\tconst opacity = +style.opacity;\n\t\treturn {\n\t\t\tdelay,\n\t\t\tduration: is_function(duration) ? duration(d) : duration,\n\t\t\teasing,\n\t\t\tcss: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${\n\t\t\t\tt + (1 - t) * dh\n\t\t\t});\n\t\t\t`\n\t\t};\n\t}\n\n\t/**\n\t * @param {Map<any, Element>} items\n\t * @param {Map<any, Element>} counterparts\n\t * @param {boolean} intro\n\t * @returns {(node: any, params: import('./public').CrossfadeParams & { key: any; }) => () => import('./public').TransitionConfig}\n\t */\n\tfunction transition(items, counterparts, intro) {\n\t\treturn (node, params) => {\n\t\t\titems.set(params.key, node);\n\t\t\treturn () => {\n\t\t\t\tif (counterparts.has(params.key)) {\n\t\t\t\t\tconst other_node = counterparts.get(params.key);\n\t\t\t\t\tcounterparts.delete(params.key);\n\t\t\t\t\treturn crossfade(other_node, node, params);\n\t\t\t\t}\n\t\t\t\t// if the node is disappearing altogether\n\t\t\t\t// (i.e. wasn't claimed by the other list)\n\t\t\t\t// then we need to supply an outro\n\t\t\t\titems.delete(params.key);\n\t\t\t\treturn fallback && fallback(node, params, intro);\n\t\t\t};\n\t\t};\n\t}\n\treturn [transition(to_send, to_receive, false), transition(to_receive, to_send, true)];\n}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { onDestroy, onMount } from 'svelte';\n    import { fade, fly } from 'svelte/transition';\n    import { blur } from '../actions/blur';\n\n    export let title: string;\n    export let cancelText = '';\n    export let confirmText = '';\n    export let onCancel: () => void;\n    export let onConfirm: (() => void) | undefined = undefined;\n    export let confirmClass = 'btn-primary';\n    export let confirmDisabled = false;\n\n    let node: HTMLElement;\n\n    onMount(() => {\n        document.body.classList.add('modal-open');\n        node.focus();\n    });\n\n    onDestroy(() => {\n        document.body.classList.remove('modal-open');\n    });\n\n    const handleKey = (event: KeyboardEvent) => {\n        if (event.key == 'Escape') {\n            onCancel();\n        }\n    };\n</script>\n\n<svelte:body on:keyup={handleKey} />\n\n<div\n    class=\"modal show\"\n    tabindex=\"-1\"\n    role=\"dialog\"\n    aria-label={title}\n    aria-modal=\"true\"\n    bind:this={node}\n    transition:fly|global={{ y: -100 }}\n    use:blur={onCancel}\n>\n    <div class=\"modal-dialog\">\n        <div class=\"modal-content\">\n            <div class=\"modal-header\">\n                <h5 class=\"modal-title\">\n                    {title}\n                </h5>\n                <button type=\"button\" class=\"close\" aria-label={cancelText} on:click={onCancel}>\n                    <span aria-hidden=\"true\">&times;</span>\n                </button>\n            </div>\n            <div class=\"modal-body\">\n                <slot />\n            </div>\n            {#if cancelText || (confirmText && onConfirm)}\n                <div class=\"modal-footer\">\n                    {#if cancelText}\n                        <button type=\"button\" class=\"btn btn-secondary\" on:click={onCancel}>\n                            {cancelText}\n                        </button>\n                    {/if}\n                    {#if confirmText && onConfirm}\n                        <button\n                            type=\"button\"\n                            class=\"btn {confirmClass}\"\n                            disabled={confirmDisabled}\n                            on:click={onConfirm}\n                        >\n                            {confirmText}\n                        </button>\n                    {/if}\n                </div>\n            {/if}\n        </div>\n    </div>\n</div>\n\n<div class=\"modal-backdrop show\" transition:fade|global />\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Store } from '../lib/store';\n    import ModalDialog from './ModalDialog.svelte';\n\n    export let store: Store;\n</script>\n\n{#if $store.error}\n    <ModalDialog title={$store.strings.error} onCancel={() => store.setError()}>\n        <p>{$store.error?.message}</p>\n        {#if $store.error?.debuginfo}\n            <p>{$store.error?.debuginfo}</p>\n        {/if}\n        {#if $store.error?.stacktrace}\n            <pre>{$store.error?.stacktrace}</pre>\n        {/if}\n    </ModalDialog>\n{/if}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { DeletedStatus } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let transparent = false;\n</script>\n\n<button\n    type=\"button\"\n    class=\"local-mail-action-delete btn\"\n    class:btn-secondary={!transparent}\n    class:disabled={!$store.selectedMessages.size}\n    disabled={!$store.selectedMessages.size}\n    title={$store.strings.movetotrash}\n    on:click={() =>\n        store.setDeleted(Array.from($store.selectedMessages.keys()), DeletedStatus.Deleted, true)}\n>\n    <i class=\"fa fa-fw fa-trash\" />\n</button>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { DeletedStatus } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import ModalDialog from './ModalDialog.svelte';\n\n    export let store: Store;\n    export let transparent = false;\n\n    const confirm = () => {\n        store.hideDialog();\n        store.setDeleted(\n            Array.from($store.selectedMessages.keys()),\n            DeletedStatus.DeletedForever,\n            true,\n        );\n    };\n</script>\n\n<button\n    type=\"button\"\n    class=\"local-mail-action-delete-forever btn\"\n    class:btn-secondary={!transparent}\n    class:disabled={!$store.selectedMessages.size}\n    disabled={!$store.selectedMessages.size}\n    title={$store.strings.deleteforever}\n    on:click={() => store.showDialog('deleteforever')}\n>\n    <i class=\"fa fa-fw fa-trash\" />\n</button>\n\n{#if $store.params.dialog == 'deleteforever'}\n    <ModalDialog\n        title={$store.strings.deleteforever}\n        cancelText={$store.strings.cancel}\n        confirmText={$store.strings.deleteforever}\n        confirmClass=\"btn-danger\"\n        onCancel={() => store.hideDialog()}\n        onConfirm={confirm}\n    >\n        {$store.strings[\n            $store.selectedMessages.size == 1\n                ? 'deleteforevermessageconfirm'\n                : 'deleteforeverselectedconfirm'\n        ]}\n    </ModalDialog>\n{/if}\n","/*\n * SPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n *\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\n\n/**\n * List of supported colors for labels.\n */\nexport const colors: ReadonlyArray<string> = [\n    '',\n    'blue',\n    'indigo',\n    'purple',\n    'pink',\n    'red',\n    'orange',\n    'yellow',\n    'green',\n    'teal',\n    'cyan',\n];\n\n/**\n * Converts a timestamp to a date string.\n *\n * @param time UNIX Timestamp.\n * @returns Date in YYYY-MM-DD format.\n */\nexport function dateFromTimestamp(time: number): string {\n    if (time == 0) {\n        return '';\n    }\n    const date = new Date(time * 1000);\n    return [\n        String(date.getFullYear()),\n        String(date.getMonth() + 1).padStart(2, '0'),\n        String(date.getDate()).padStart(2, '0'),\n    ].join('-');\n}\n\n/**\n * Format size to include units.\n *\n * @param size Number of bytes.\n * @return Formatted size.\n */\nexport function formatSize(size: number): string {\n    const units = [\n        { bytes: 2 ** 40, name: 'TB' },\n        { bytes: 2 ** 30, name: 'GB' },\n        { bytes: 2 ** 20, name: 'MB' },\n        { bytes: 2 ** 10, name: 'KB' },\n    ];\n\n    for (const unit of units) {\n        if (size >= unit.bytes) {\n            const formatter = Intl.NumberFormat(undefined, { maximumFractionDigits: 1 });\n            return `${formatter.format(size / unit.bytes)} ${unit.name}`;\n        }\n    }\n\n    return `${size} B`;\n}\n\n/**\n * Removes leading and trailing spaces and replaces repeates space characters with a single space.\n *\n * @param name The name of the label.\n * @returns The normalized name.\n */\nexport function normalizeLabelName(name: string): string {\n    return name.trim().replaceAll(/\\s+/gu, ' ');\n}\n\n/**\n * Replaces {$a} parameters of a language string.\n *\n * @param string Language string.\n * @param param A string, a number or an object to replace parameters with.\n * @returns String with parameters replaced.\n */\nexport function replaceStringParams(\n    string: string,\n    params: string | number | Record<string, string | number>,\n): string {\n    string = string || '';\n    if (typeof params == 'string' || typeof params == 'number') {\n        string = string.replace('{$a}', params.toString());\n    } else {\n        for (const key in params) {\n            string = string.replace(`{$a->${key}}`, params[key].toString());\n        }\n    }\n    return string;\n}\n\n/**\n * Converts a date string to a timestamp.\n *\n * @param date Date in YYYY-MM-DD format.\n * @returns UNIX Timestamp.\n */\nexport function timestampFromDate(date: string): number {\n    if (!date) {\n        return 0;\n    }\n    return Math.floor(\n        new Date(\n            parseInt(date.slice(0, 4)),\n            parseInt(date.slice(5, 7)) - 1,\n            parseInt(date.slice(8, 10)),\n            23,\n            59,\n            59,\n        ).getTime() / 1000,\n    );\n}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { onMount } from 'svelte';\n    import type { Label } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import { colors, normalizeLabelName } from '../lib/utils';\n    import ModalDialog from './ModalDialog.svelte';\n\n    export let store: Store;\n    export let label: Label | undefined = undefined;\n    export let onCancel: () => void;\n    export let onSubmit: (name: string, color: string) => void;\n\n    let nameEl: HTMLElement;\n\n    $: id = `local-mail-label-modal-${label?.id || 'new'}`;\n    $: name = label?.name || '';\n    $: selectedColor = label?.color || colors[0];\n    $: emptyName = normalizeLabelName(name) == '';\n    $: repeatedName = $store.labels.some(\n        (l) => l.id != label?.id && l.name == normalizeLabelName(name),\n    );\n    $: validName = !emptyName && !repeatedName;\n\n    const submit = async () => {\n        onSubmit(name, selectedColor);\n    };\n\n    onMount(() => nameEl.focus());\n</script>\n\n<ModalDialog\n    title={$store.strings[label ? 'editlabel' : 'newlabel']}\n    cancelText={$store.strings.cancel}\n    {onCancel}\n    confirmText={$store.strings[label ? 'save' : 'create']}\n    confirmDisabled={!validName}\n    onConfirm={submit}\n>\n    <form on:submit|preventDefault={submit}>\n        <div class=\"form-group mb-0\">\n            <label for=\"local-mail-label-modal-name\">{$store.strings.name}</label>\n            <input\n                type=\"text\"\n                required\n                class=\"form-control is-invalid\"\n                class:is-valid={validName}\n                class:is-invalid={!validName}\n                id=\"{id}-name\"\n                bind:this={nameEl}\n                bind:value={name}\n            />\n            <div class=\"invalid-feedback\">\n                {#if repeatedName}\n                    {$store.strings.errorrepeatedlabelname}\n                {:else}\n                    &nbsp;\n                {/if}\n            </div>\n            <div class=\"valid-feedback\">&nbsp;</div>\n        </div>\n        <div class=\"form-group\">\n            <label for=\"{id}-color\">\n                {$store.strings.color}\n            </label>\n            <div role=\"radiogroup\" class=\"local-mail-label-modal-color\" id=\"{id}-color\">\n                {#each colors as color (color)}\n                    <button\n                        role=\"radio\"\n                        aria-checked={color == selectedColor}\n                        tabindex=\"0\"\n                        title={$store.strings[`color${color}`]}\n                        class=\"local-mail-label-modal-color-option btn\"\n                        style={`color: var(--local-mail-color-${color}-fg, var(--local-mail-color-gray-fg));` +\n                            `background-color: var(--local-mail-color-${color}-bg, var(--local-mail-color-gray-bg))`}\n                        on:click|preventDefault={() => {\n                            selectedColor = color;\n                        }}\n                    >\n                        {#if color == selectedColor}\n                            <i class=\"fa fa-check local-mail-label-modal-color-option-check\" />\n                        {:else}\n                            <span aria-hidden=\"true\">a</span>\n                        {/if}\n                    </button>\n                {/each}\n            </div>\n        </div>\n    </form>\n</ModalDialog>\n\n<style global>\n    .local-mail-label-modal-color {\n        display: flex;\n        flex-wrap: wrap;\n    }\n    .local-mail-label-modal-color-option {\n        width: 2rem;\n        height: 2rem;\n        margin-right: 0.5rem;\n        margin-bottom: 0.5rem;\n        display: flex;\n        justify-content: center;\n        align-items: center;\n        color: var(--local-mail-color-gray-fg);\n        background-color: var(--local-mail-color-gray-bg);\n    }\n\n    .local-mail-label-modal-color-option:last-child {\n        margin-right: 0;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { blur } from '../actions/blur';\n    import type { Store } from '../lib/store';\n    import LabelModal from './LabelModal.svelte';\n\n    export let store: Store;\n    export let transparent = false;\n    export let dropup = false;\n\n    let expanded = false;\n\n    let selectedLabels: ReadonlyMap<number, 'false' | 'mixed' | 'true'> = new Map();\n\n    $: selectedLabels = new Map(\n        $store.labels.map((label) => {\n            const messages = Array.from($store.selectedMessages.values()).filter((message) =>\n                message.labels.some((messageLabel) => messageLabel.id == label.id),\n            );\n            return [\n                label.id,\n                messages.length == 0\n                    ? 'false'\n                    : messages.length < $store.selectedMessages.size\n                    ? 'mixed'\n                    : 'true',\n            ];\n        }),\n    );\n\n    $: applyEnabled = Array.from(selectedLabels.entries()).some(([labelid, selected]) =>\n        Array.from($store.selectedMessages.values()).some(\n            (message) =>\n                (selected == 'true' && message.labels.every((label) => label.id != labelid)) ||\n                (selected == 'false' && message.labels.some((label) => label.id == labelid)),\n        ),\n    );\n\n    $: labelIconClass = (labelid: number) => {\n        if (selectedLabels.get(labelid) == 'false') {\n            return 'fa-square-o';\n        } else if (selectedLabels.get(labelid) == 'mixed') {\n            return 'fa-minus-square-o';\n        } else {\n            return 'fa-check-square-o';\n        }\n    };\n\n    const closeMenu = () => {\n        expanded = false;\n    };\n\n    const toggleMenu = () => {\n        expanded = !expanded;\n    };\n\n    const toggleLabel = (labelid: number) => {\n        selectedLabels = new Map(\n            Array.from(selectedLabels.entries()).map(([id, selected]) => [\n                id,\n                id == labelid ? (selected == 'true' ? 'false' : 'true') : selected,\n            ]),\n        );\n    };\n\n    const applyLabels = () => {\n        expanded = false;\n        store.setLabels(\n            Array.from(selectedLabels.keys()).filter((id) => selectedLabels.get(id) == 'true'),\n            Array.from(selectedLabels.keys()).filter((id) => selectedLabels.get(id) == 'false'),\n        );\n    };\n\n    const newLabel = () => {\n        closeMenu();\n        store.showDialog('createlabel');\n    };\n\n    const createLabel = async (name: string, color: string) => {\n        store.hideDialog();\n        const id = await store.createLabel(name, color);\n        if (id) {\n            store.setLabels([id], []);\n        }\n    };\n</script>\n\n<div class=\"btn-group\" class:dropup role=\"group\" use:blur={closeMenu}>\n    <button\n        type=\"button\"\n        class=\"local-mail-action-label-button btn dropdown-toggle\"\n        class:btn-secondary={!transparent}\n        class:disabled={!$store.selectedMessages.size}\n        disabled={!$store.selectedMessages.size}\n        aria-expanded={expanded}\n        title={$store.strings.labels}\n        on:click={toggleMenu}\n    >\n        <i class=\"fa fa-fw fa-tag\" />\n    </button>\n    {#if expanded}\n        <div class=\"dropdown-menu show\">\n            {#each $store.labels as label (label.id)}\n                <button\n                    type=\"button\"\n                    class=\"dropdown-item local-mail-action-label-button-item\"\n                    on:click={() => toggleLabel(label.id)}\n                >\n                    <i class=\"fa fa-fw {labelIconClass(label.id)}\" />\n                    {label.name}\n                </button>\n            {/each}\n            {#if $store.labels.length > 0}\n                <div class=\"dropdown-divider\" />\n            {/if}\n            {#if applyEnabled}\n                <button\n                    type=\"button\"\n                    class=\"dropdown-item local-mail-action-label-button-item\"\n                    on:click={applyLabels}\n                >\n                    {$store.strings.apply}\n                </button>\n            {:else}\n                <button\n                    type=\"button\"\n                    class=\"dropdown-item local-mail-action-label-button-item\"\n                    on:click={newLabel}\n                >\n                    {$store.strings.newlabel}\n                </button>\n            {/if}\n        </div>\n    {/if}\n    {#if $store.params.dialog == 'createlabel'}\n        <LabelModal {store} onCancel={() => store.hideDialog()} onSubmit={createLabel} />\n    {/if}\n</div>\n\n<style global>\n    .local-mail-action-label-button::after {\n        display: none !important;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { blur } from '../actions/blur';\n    import type { Store } from '../lib/store';\n    import { replaceStringParams } from '../lib/utils';\n    import ModalDialog from './ModalDialog.svelte';\n    import LabelModal from './LabelModal.svelte';\n\n    export let store: Store;\n    export let transparent = false;\n    export let dropup = false;\n\n    let expanded = false;\n\n    $: label =\n        $store.params.tray == 'label' && $store.message == null\n            ? $store.labels.find((label) => label.id == $store.params.labelid)\n            : null;\n\n    $: messages = Array.from($store.selectedMessages.values());\n    $: someRead = messages.some((message) => !message.draft && !message.unread);\n    $: someUnread = messages.some((message) => !message.draft && message.unread);\n    $: someStarred = messages.some((message) => message.starred);\n    $: someUnstarred = messages.some((message) => !message.starred);\n    $: disabled =\n        $store.params.tray == 'trash'\n            ? !$store.totalCount\n            : !label && !someRead && !someUnread && !someStarred && !someUnstarred;\n\n    const closeMenu = () => {\n        expanded = false;\n    };\n\n    const toggleMenu = () => {\n        expanded = !expanded;\n    };\n\n    const setUnread = (unread: boolean) => {\n        closeMenu();\n        store.setUnread(\n            messages.filter((message) => !message.draft).map((message) => message.id),\n            unread,\n        );\n    };\n\n    const setStarred = (starred: boolean) => {\n        closeMenu();\n        store.setStarred(\n            messages.map((message) => message.id),\n            starred,\n        );\n    };\n\n    const openEditLabelModal = () => {\n        closeMenu();\n        store.showDialog('editlabel');\n    };\n\n    const confirmEditLabel = (name: string, color: string) => {\n        store.hideDialog();\n        if (label) {\n            store.updateLabel(label.id, name, color);\n        }\n    };\n\n    const openDeleteLabelModal = () => {\n        closeMenu();\n        store.showDialog('deletelabel');\n    };\n\n    const deletelabelconfirm = () => {\n        store.hideDialog();\n        store.deleteLabel($store.params.labelid || 0);\n    };\n\n    const openEmptyTrashModal = () => {\n        closeMenu();\n        store.showDialog('emptytrash');\n    };\n\n    const confirmEmptyTrash = () => {\n        store.hideDialog();\n        store.emptyTrash($store.params.courseid);\n    };\n</script>\n\n<div class=\"btn-group\" class:dropup use:blur={closeMenu}>\n    <button\n        type=\"button\"\n        class=\"local-mail-action-more-button btn dropdown-toggle\"\n        class:btn-secondary={!transparent}\n        class:disabled\n        {disabled}\n        aria-expanded={expanded}\n        title={$store.strings.more}\n        on:click={toggleMenu}\n    >\n        <i class=\"fa fa-fw fa-ellipsis-v\" />\n    </button>\n    {#if expanded}\n        <div class=\"dropdown-menu show\">\n            {#if $store.params.tray == 'trash'}\n                <button type=\"button\" class=\"dropdown-item\" on:click={openEmptyTrashModal}>\n                    {$store.strings.emptytrash}\n                </button>\n            {:else}\n                {#if someUnread}\n                    <button type=\"button\" class=\"dropdown-item\" on:click={() => setUnread(false)}>\n                        {$store.strings.markasread}\n                    </button>\n                {/if}\n                {#if someRead}\n                    <button type=\"button\" class=\"dropdown-item\" on:click={() => setUnread(true)}>\n                        {$store.strings.markasunread}\n                    </button>\n                {/if}\n                {#if someUnstarred}\n                    <button type=\"button\" class=\"dropdown-item\" on:click={() => setStarred(true)}>\n                        {$store.strings.markasstarred}\n                    </button>\n                {/if}\n                {#if someStarred}\n                    <button type=\"button\" class=\"dropdown-item\" on:click={() => setStarred(false)}>\n                        {$store.strings.markasunstarred}\n                    </button>\n                {/if}\n                {#if label}\n                    {#if someUnread || someRead || someUnstarred || someStarred}\n                        <div class=\"dropdown-divider\" />\n                    {/if}\n                    <button type=\"button\" class=\"dropdown-item\" on:click={openEditLabelModal}>\n                        {$store.strings.editlabel}\n                    </button>\n                    <button type=\"button\" class=\"dropdown-item\" on:click={openDeleteLabelModal}>\n                        {$store.strings.deletelabel}\n                    </button>\n                {/if}\n            {/if}\n        </div>\n    {/if}\n</div>\n\n{#if $store.params.tray == 'trash'}\n    {#if $store.params.dialog == 'emptytrash'}\n        <ModalDialog\n            title={$store.strings.emptytrash}\n            cancelText={$store.strings.cancel}\n            confirmText={$store.strings.emptytrash}\n            confirmClass=\"btn-danger\"\n            onCancel={() => store.hideDialog()}\n            onConfirm={confirmEmptyTrash}\n        >\n            {$store.strings.emptytrashconfirm}\n        </ModalDialog>\n    {/if}\n{:else if label}\n    {#if $store.params.dialog == 'editlabel'}\n        <LabelModal\n            {store}\n            {label}\n            onCancel={() => store.hideDialog()}\n            onSubmit={confirmEditLabel}\n        />\n    {:else if $store.params.dialog == 'deletelabel'}\n        <ModalDialog\n            title={$store.strings.deletelabel}\n            cancelText={$store.strings.cancel}\n            confirmText={$store.strings.deletelabel}\n            confirmClass=\"btn-danger\"\n            onCancel={() => store.hideDialog()}\n            onConfirm={deletelabelconfirm}\n        >\n            {replaceStringParams($store.strings.deletelabelconfirm, label.name)}\n        </ModalDialog>\n    {/if}\n{/if}\n\n<style global>\n    .local-mail-action-more-button::after {\n        display: none !important;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Store } from '../lib/store';\n    import { replaceStringParams } from '../lib/utils';\n\n    export let store: Store;\n    export let transparent = false;\n    export let compact = false;\n\n    $: hasNext =\n        $store.nextMessageId ||\n        (!$store.params.search &&\n            ($store.params.offset || 0) + $store.preferences.perpage < $store.totalCount);\n\n    $: hasPrev = $store.prevMessageId || (!$store.params.search && ($store.params.offset || 0));\n\n    $: nextParams = hasNext\n        ? $store.message\n            ? {\n                  ...$store.params,\n                  messageid: $store.nextMessageId,\n                  offset: ($store.params.offset || 0) + 1,\n              }\n            : {\n                  ...$store.params,\n                  messageid: undefined,\n                  offset: ($store.params.offset || 0) + $store.preferences.perpage,\n                  search: $store.params.search\n                      ? {\n                            ...$store.params.search,\n                            startid: $store.listMessages[$store.listMessages.length - 1]?.id,\n                            reverse: false,\n                        }\n                      : undefined,\n              }\n        : undefined;\n\n    $: prevParams = hasPrev\n        ? $store.message\n            ? {\n                  ...$store.params,\n                  messageid: $store.prevMessageId,\n                  offset: Math.max(0, ($store.params.offset || 0) - 1),\n              }\n            : {\n                  ...$store.params,\n                  messageid: undefined,\n                  offset: Math.max(0, ($store.params.offset || 0) - $store.preferences.perpage),\n                  search: $store.params.search\n                      ? {\n                            ...$store.params.search,\n                            startid: $store.listMessages[0].id,\n                            reverse: true,\n                        }\n                      : undefined,\n              }\n        : undefined;\n\n    $: pagingText = $store.message\n        ? $store.params.search\n            ? ($store.params.offset || 0) + 1\n            : replaceStringParams($store.strings.pagingsingle, {\n                  index: ($store.messageOffset || 0) + 1,\n                  total: $store.totalCount,\n              })\n        : $store.listMessages.length == 0\n        ? ''\n        : $store.params.search\n        ? replaceStringParams($store.strings.pagingrange, {\n              first: ($store.params.offset || 0) + 1,\n              last: ($store.params.offset || 0) + $store.listMessages.length,\n          })\n        : replaceStringParams($store.strings.pagingrangetotal, {\n              first: ($store.params.offset || 0) + 1,\n              last: ($store.params.offset || 0) + $store.listMessages.length,\n              total: $store.totalCount,\n          });\n</script>\n\n<div class=\"local-mail-paging-buttons d-flex\" class:ml-auto={!compact}>\n    {#if !compact}\n        <div class=\"align-self-center text-nowrap\">\n            {pagingText}\n        </div>\n    {/if}\n\n    <div class=\"btn-group d-flex\" class:btn-group={!compact} role=\"group\">\n        <button\n            type=\"button\"\n            class=\"btn btn-secondary\"\n            class:btn-secondary={!transparent}\n            disabled={!prevParams}\n            title={$store.strings[$store.message ? 'previousmessage' : 'previouspage']}\n            on:click|preventDefault={() => store.navigate(prevParams)}\n        >\n            <i class=\"fa fa-w fa-chevron-left\" aria-label={$store.strings.previouspage} />\n        </button>\n        {#if compact}\n            <div class=\"text-truncate align-self-center mx-2\">\n                {pagingText}\n            </div>\n        {/if}\n        <button\n            type=\"button\"\n            class=\"btn\"\n            class:btn-secondary={!transparent}\n            disabled={!nextParams}\n            title={$store.strings[$store.message ? 'nextmessage' : 'nextpage']}\n            on:click|preventDefault={() => store.navigate(nextParams)}\n        >\n            <i class=\"fa fa-w fa-chevron-right\" aria-label={$store.strings.nextpage} />\n        </button>\n    </div>\n</div>\n\n<style global>\n    .local-mail-paging-buttons {\n        min-width: 0;\n        column-gap: 1rem;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { DeletedStatus } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import ModalDialog from './ModalDialog.svelte';\n\n    export let store: Store;\n    export let transparent = false;\n\n    const confirm = () => {\n        store.hideDialog();\n        store.setDeleted(\n            Array.from($store.selectedMessages.keys()),\n            DeletedStatus.NotDeleted,\n            true,\n        );\n    };\n</script>\n\n<button\n    type=\"button\"\n    class=\"local-mail-action-delete btn\"\n    class:btn-secondary={!transparent}\n    class:disabled={!$store.selectedMessages.size}\n    disabled={!$store.selectedMessages.size}\n    title={$store.strings.restore}\n    on:click={() => store.showDialog('restore')}\n>\n    <i class=\"fa fa-fw fa-undo\" /></button\n>\n\n{#if $store.params.dialog == 'restore'}\n    <ModalDialog\n        title={$store.strings.restore}\n        cancelText={$store.strings.cancel}\n        confirmText={$store.strings.restore}\n        onCancel={() => store.hideDialog()}\n        onConfirm={confirm}\n    >\n        {$store.strings.restoremessageconfirm}\n    </ModalDialog>\n{/if}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { onMount } from 'svelte';\n    import type { Store } from '../lib/store';\n    import DeleteButton from './DeleteButton.svelte';\n    import DeleteForeverButton from './DeleteForeverButton.svelte';\n    import LabelsButton from './LabelsButton.svelte';\n    import MoreActionsButton from './MoreActionsButton.svelte';\n    import PagingButtons from './PagingButtons.svelte';\n    import RestoreButton from './RestoreButton.svelte';\n\n    export let store: Store;\n\n    let height: number;\n    let placeholderNode: HTMLElement;\n    let fixed = false;\n\n    onMount(() => {\n        const observer = new IntersectionObserver(\n            (entries) => {\n                for (const entry of entries) {\n                    fixed =\n                        entry.intersectionRatio < 1 &&\n                        entry.boundingClientRect.top >= entry.boundingClientRect.height;\n                }\n            },\n            { threshold: 1 },\n        );\n        observer.observe(placeholderNode);\n\n        return () => observer.disconnect();\n    });\n</script>\n\n<div class=\"row position-relative\" bind:this={placeholderNode} style=\"height: {height}px;\">\n    <div\n        role=\"toolbar\"\n        class=\"local-mail-toolbar d-flex w-100 py-3 border-top\"\n        class:position-fixed={fixed}\n        class:position-absolute={!fixed}\n        class:fixed-bottom={fixed}\n        class:border-bottom={!fixed}\n        class:bg-white={!fixed}\n        class:bg-light={fixed}\n        bind:offsetHeight={height}\n    >\n        <div class=\" w-100 d-flex justify-content-around\" role=\"group\">\n            {#if $store.params.tray == 'trash'}\n                <RestoreButton {store} transparent={true} />\n                <DeleteForeverButton {store} transparent={true} />\n            {:else}\n                <LabelsButton {store} transparent={true} dropup={true} />\n                <DeleteButton {store} transparent={true} />\n            {/if}\n            <MoreActionsButton {store} transparent={true} dropup={true} />\n            <PagingButtons {store} transparent={true} compact={true} />\n        </div>\n    </div>\n</div>\n\n<style>\n    .local-mail-toolbar.position-fixed {\n        z-index: 1020;\n    }\n</style>\n","import { cubicOut } from '../easing/index.js';\nimport { is_function } from '../internal/index.js';\n\n/**\n * The flip function calculates the start and end position of an element and animates between them, translating the x and y values.\n * `flip` stands for [First, Last, Invert, Play](https://aerotwist.com/blog/flip-your-animations/).\n *\n * https://svelte.dev/docs/svelte-animate#flip\n * @param {Element} node\n * @param {{ from: DOMRect; to: DOMRect }} fromTo\n * @param {import('./public.js').FlipParams} params\n * @returns {import('./public.js').AnimationConfig}\n */\nexport function flip(node, { from, to }, params = {}) {\n\tconst style = getComputedStyle(node);\n\tconst transform = style.transform === 'none' ? '' : style.transform;\n\tconst [ox, oy] = style.transformOrigin.split(' ').map(parseFloat);\n\tconst dx = from.left + (from.width * ox) / to.width - (to.left + ox);\n\tconst dy = from.top + (from.height * oy) / to.height - (to.top + oy);\n\tconst { delay = 0, duration = (d) => Math.sqrt(d) * 120, easing = cubicOut } = params;\n\treturn {\n\t\tdelay,\n\t\tduration: is_function(duration) ? duration(Math.sqrt(dx * dx + dy * dy)) : duration,\n\t\teasing,\n\t\tcss: (t, u) => {\n\t\t\tconst x = u * dx;\n\t\t\tconst y = u * dy;\n\t\t\tconst sx = t + (u * from.width) / to.width;\n\t\t\tconst sy = t + (u * from.height) / to.height;\n\t\t\treturn `transform: ${transform} translate(${x}px, ${y}px) scale(${sx}, ${sy});`;\n\t\t}\n\t};\n}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: MessageSummary;\n\n    $: checkClass = $store.selectedMessages.has(message.id) ? 'fa-check-square-o' : 'fa-square-o';\n</script>\n\n<button\n    type=\"button\"\n    class=\"btn px-2\"\n    role=\"checkbox\"\n    aria-checked={Boolean($store.selectedMessages.has(message.id))}\n    title={$store.strings.select}\n    on:click|preventDefault|stopPropagation={() => store.toggleSelected(message.id)}\n>\n    <i class=\"fa align-middle {checkClass}\" />\n</button>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: MessageSummary;\n\n    $: starClass = message.starred ? 'fa-star text-warning' : 'fa-star-o';\n</script>\n\n<button\n    type=\"button\"\n    class=\"btn px-2\"\n    role=\"checkbox\"\n    aria-checked={message.starred}\n    disabled={message.deleted}\n    title={message.deleted\n        ? $store.strings[message.starred ? 'starred' : 'unstarred']\n        : $store.strings[message.starred ? 'markasunstarred' : 'markasstarred']}\n    on:click|preventDefault|stopPropagation={() => store.setStarred([message.id], !message.starred)}\n>\n    <i class=\"fa {starClass}\" />\n</button>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { truncate } from '../actions/truncate';\n    import type { MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: MessageSummary;\n\n    $: users =\n        $store.params.tray == 'sent' || $store.params.tray == 'drafts'\n            ? message.recipients.length > 0\n                ? message.recipients.map((user) => user.fullname)\n                : [$store.strings.norecipient]\n            : [message.sender.fullname];\n</script>\n\n<div use:truncate={users.join('\\n')}>\n    {users.join(', ')}\n</div>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { truncate } from '../actions/truncate';\n    import type { MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: MessageSummary;\n</script>\n\n<div use:truncate={message.subject || $store.strings.nosubject}>\n    {#if message.draft}\n        <span class=\"mr-2 text-danger\">\n            {$store.strings.draft}\n        </span>\n    {/if}\n    {message.subject || $store.strings.nosubject}\n</div>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { truncate } from '../actions/truncate';\n    import type { Course, Settings } from '../lib/state';\n\n    export let course: Course;\n    export let settings: Settings;\n\n    $: text = settings.coursebadges == 'shortname' ? course.shortname : course.fullname;\n    $: length = settings.coursebadgeslength || 20;\n</script>\n\n{#if ['shortname', 'fullname'].includes(settings.coursebadges)}\n    <span\n        class=\"local-mail-course-badge badge px-2 mr-2 mb-2\"\n        use:truncate={text}\n        style=\"min-width: 3rem; max-width: calc({length}ch + 1.5rem)\"\n    >\n        {text}\n    </span>\n{/if}\n\n<style global>\n    .local-mail-course-badge {\n        font-size: inherit;\n        font-weight: inherit;\n        color: var(--local-mail-color-gray-fg);\n        background-color: var(--local-mail-color-gray-bg);\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Label } from '../lib/state';\n    import { colors } from '../lib/utils';\n\n    export let label: Label;\n\n    $: color = colors.includes(label.color) ? label.color : 'gray';\n</script>\n\n<span\n    class=\"local-mail-label-badge badge flex-shrink-0 px-2 mr-2 mb-2\"\n    style={`color: var(--local-mail-color-${color}-fg, var(--local-mail-color-gray-fg));` +\n        `background-color: var(--local-mail-color-${color}-bg, var(--local-mail-color-gray-bg))`}\n>\n    {label.name}\n</span>\n\n<style global>\n    .local-mail-label-badge {\n        font-size: inherit;\n        font-weight: inherit;\n        color: var(--local-mail-color-gray-fg);\n        background-color: var(--local-mail-color-gray-bg);\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import CourseBadge from './CourseBadge.svelte';\n    import LabelBadge from './LabelBadge.svelte';\n    import { ViewportSize, type MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: MessageSummary;\n</script>\n\n{#if $store.viewportSize < ViewportSize.MD}\n    {#if $store.params.courseid != message.course.id}\n        <CourseBadge course={message.course} settings={$store.settings} />\n    {/if}\n{/if}\n{#each message.labels as label (label.id)}\n    {#if $store.params.tray != 'label' || $store.params.labelid != label.id}\n        <LabelBadge {label} />\n    {/if}\n{/each}\n{#if $store.viewportSize >= ViewportSize.MD}\n    {#if $store.params.courseid != message.course.id}\n        <CourseBadge course={message.course} settings={$store.settings} />\n    {/if}\n{/if}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { ViewportSize, type MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: MessageSummary;\n</script>\n\n{#if message.numattachments > 0 || $store.viewportSize >= ViewportSize.MD}\n    <span\n        class=\"-shrink-0 mr-2\"\n        aria-hidden={message.numattachments == 0}\n        title={message.numattachments > 0 ? $store.strings.hasattachments : undefined}\n    >\n        <i class=\"fa fa-fw {message.numattachments > 0 ? 'fa-paperclip' : ''}\" aria-hidden={true} />\n    </span>\n{/if}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { ViewportSize, type MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let message: MessageSummary;\n    export let store: Store;\n</script>\n\n<span\n    class=\"local-mail-list-message-time d-shrink-0 text-nowrap text-right\"\n    class:local-mail-list-message-time-md={$store.viewportSize >= ViewportSize.MD}\n    title={message.fulltime}\n>\n    {message.shorttime}\n</span>\n\n<style global>\n    .local-mail-list-message-time-md {\n        min-width: 5rem;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { fade } from 'svelte/transition';\n    import type { Store } from '../lib/store';\n    import { viewUrl } from '../lib/url';\n\n    export let store: Store;\n\n    $: recentParams = {\n        tray: $store.params.tray,\n        courseid: $store.params.courseid,\n        labelid: $store.params.labelid,\n    };\n</script>\n\n{#if !$store.listMessages.length}\n    <div in:fade={{ delay: 400 }} class=\"alert alert-info\">\n        <div>\n            {$store.strings.nomessagesfound}\n        </div>\n        {#if $store.totalCount > 0}\n            <a\n                class=\"btn btn-info text-white mt-3\"\n                href={viewUrl(recentParams)}\n                on:click|preventDefault={() => store.navigate(recentParams)}\n            >\n                {$store.strings.showrecentmessages}\n            </a>\n        {/if}\n    </div>\n{/if}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { flip } from 'svelte/animate';\n    import { fade } from 'svelte/transition';\n    import { ViewportSize, type MessageSummary } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import { viewUrl } from '../lib/url';\n    import ListMessageCheckbox from './ListMessageCheckbox.svelte';\n    import ListMessageStar from './ListMessageStar.svelte';\n    import ListMessageUsers from './ListMessageUsers.svelte';\n    import ListMessageSubject from './ListMessageSubject.svelte';\n    import ListMessageLabels from './ListMessageLabels.svelte';\n    import ListMessageAttachments from './ListMessageAttachments.svelte';\n    import ListMessageTime from './ListMessageTime.svelte';\n    import ListEmptyAlert from './ListAlert.svelte';\n\n    export let store: Store;\n\n    const messageParams = (message: MessageSummary, i: number) => {\n        return {\n            ...$store.params,\n            messageid: message.id,\n            offset: ($store.params.offset || 0) + i,\n        };\n    };\n</script>\n\n{#key $store.navigationId}\n    <div class=\"list-group\">\n        {#each $store.listMessages as message, i (message.id)}\n            <a\n                animate:flip={{ delay: 400, duration: 400 }}\n                in:fade={{ delay: 400 }}\n                out:fade={{ duration: 400 }}\n                class=\"local-mail-list-message list-group-item list-group-item-action p-0\"\n                href={viewUrl(messageParams(message, i))}\n                class:list-group-item-primary={$store.selectedMessages.has(message.id)}\n                class:list-group-item-secondary={!message.unread &&\n                    !$store.selectedMessages.has(message.id)}\n                class:font-weight-bold={message.unread}\n                on:click|preventDefault={() => store.navigate(messageParams(message, i))}\n            >\n                {#if $store.viewportSize >= ViewportSize.MD}\n                    <div class=\"d-flex align-items-center pl-1 pr-3\">\n                        <ListMessageCheckbox {store} {message} />\n                        <ListMessageStar {store} {message} />\n                        <div\n                            class=\"d-flex w-100 flex-grow-1 align-items-center\"\n                            style=\"min-width: 0\"\n                        >\n                            <div class=\"flex-grow-1 mx-2\" style=\"width: 25%; min-width: 0\">\n                                <ListMessageUsers {store} {message} />\n                            </div>\n                            <div\n                                class=\"flex-grow-1 d-flex my-2 mx-2\"\n                                style=\"width: 75%; min-width: 0\"\n                            >\n                                <ListMessageSubject {store} {message} />\n                                <div\n                                    class=\"d-flex text-truncate flex-shrink-0 justify-content-end mb-n2 ml-auto\"\n                                    style=\"max-width: 80%\"\n                                >\n                                    <ListMessageLabels {store} {message} />\n                                </div>\n                            </div>\n                        </div>\n                        <ListMessageAttachments {store} {message} />\n                        <ListMessageTime {store} {message} />\n                    </div>\n                {:else}\n                    <div class=\"d-flex align-items-start pt-1 pb-2 pl-1 pr-2\">\n                        <ListMessageCheckbox {store} {message} />\n                        <div class=\"w-100 ml-1\" style=\"min-width: 0\">\n                            <div class=\"d-flex mt-2\">\n                                <ListMessageUsers {store} {message} />\n                                <ListMessageAttachments {store} {message} />\n                                <div class=\"ml-auto mr-2\">\n                                    <ListMessageTime {store} {message} />\n                                </div>\n                            </div>\n                            <div class=\"d-flex\">\n                                <div class=\"d-flex w-100 my-2 mr-2\" style=\"min-width: 0\">\n                                    <ListMessageSubject {store} {message} />\n                                </div>\n                                <ListMessageStar {store} {message} />\n                            </div>\n                            <div class=\"d-flex flex-wrap ml-n2 mr-2\">\n                                <ListMessageLabels {store} {message} />\n                            </div>\n                        </div>\n                    </div>\n                {/if}\n            </a>\n        {/each}\n        <ListEmptyAlert {store} />\n    </div>\n{/key}\n\n<style global>\n    .local-mail-list-message {\n        color: var(--dark) !important;\n    }\n\n    .local-mail-list-message:focus,\n    .local-mail-list-message .btn:focus {\n        z-index: 3;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { blur } from '../actions/blur';\n    import { ViewportSize, type Message } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: Message;\n    export let canReplyAll: boolean;\n\n    let expanded = false;\n\n    $: starClass = message.starred ? 'fa-star text-warning' : 'fa-star-o';\n\n    const toggleMenu = () => {\n        expanded = !expanded;\n    };\n\n    const closeMenu = () => {\n        expanded = false;\n    };\n</script>\n\n<button\n    type=\"button\"\n    class=\"btn py-2 border-0\"\n    role=\"checkbox\"\n    aria-checked={message.starred}\n    disabled={message.deleted}\n    title={message.starred ? $store.strings.markasunstarred : $store.strings.markasstarred}\n    on:click={() => store.setStarred([message.id], !message.starred)}\n>\n    <i class=\"fa {starClass}\" />\n</button>\n\n{#if $store.viewportSize < ViewportSize.SM}\n    <div class=\"dropdown\" use:blur={closeMenu}>\n        <button\n            type=\"button\"\n            class=\"btn\"\n            aria-expanded={expanded}\n            title={$store.strings.more}\n            on:click={toggleMenu}\n        >\n            <i class=\"fa fa-fw fa-ellipsis-v align-middle\" />\n        </button>\n        {#if expanded}\n            <div class=\"dropdown-menu dropdown-menu-right show\">\n                <button\n                    type=\"button\"\n                    class=\"dropdown-item\"\n                    on:click={() => store.reply(message, false)}\n                >\n                    <i class=\"fa fa-fw fa-reply\" aria-hidden=\"true\" />\n                    {$store.strings.reply}\n                </button>\n                <button\n                    type=\"button\"\n                    disabled={!canReplyAll}\n                    class=\"dropdown-item\"\n                    class:disabled={!canReplyAll}\n                    on:click={() => store.reply(message, true)}\n                >\n                    <i class=\"fa fa-fw fa-reply-all\" aria-hidden=\"true\" />\n                    {$store.strings.replyall}\n                </button>\n                <button type=\"button\" class=\"dropdown-item\" on:click={() => store.forward(message)}>\n                    <i class=\"fa fa-fw fa-share\" aria-hidden=\"true\" />\n                    {$store.strings.forward}\n                </button>\n            </div>\n        {/if}\n    </div>\n{/if}\n\n{#if $store.viewportSize >= ViewportSize.SM}\n    <button\n        type=\"button\"\n        title={$store.strings.reply}\n        class=\"btn py-2 border-0\"\n        on:click={() => store.reply(message, false)}\n    >\n        <i class=\"fa fa-fw fa-reply\" aria-hidden=\"true\" />\n    </button>\n    <button\n        type=\"button\"\n        disabled={!canReplyAll}\n        class:disabled={!canReplyAll}\n        title={$store.strings.replyall}\n        class=\"btn py-2 border-0\"\n        on:click={() => store.reply(message, true)}\n    >\n        <i class=\"fa fa-fw fa-reply-all\" aria-hidden=\"true\" />\n    </button>\n    <button\n        type=\"button\"\n        title={$store.strings.forward}\n        class=\"btn py-2 border-0\"\n        on:click={() => store.forward(message)}\n    >\n        <i class=\"fa fa-fw fa-share\" aria-hidden=\"true\" />\n    </button>\n{/if}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { truncate } from '../actions/truncate';\n    import type { Attachment, Reference, Strings } from '../lib/state';\n    import { downloadAllUrl } from '../lib/url';\n    import { formatSize } from '../lib/utils';\n\n    export let strings: Strings;\n    export let message: Reference;\n\n    const fileName = (file: Attachment): string =>\n        (file.filepath + file.filename).replace(/^\\//, '');\n</script>\n\n<div class=\"local-mail-message-attachments d-sm-flex flex-wrap mr-n3 mt-3 mb-sm-n3\">\n    {#each message.attachments as file}\n        <a\n            href={file.fileurl}\n            class=\"local-mail-message-attachments-file btn btn-light d-flex align-items-center px-2 py-1 mr-3 mb-3\"\n        >\n            <img\n                aria-hidden=\"true\"\n                alt={file.filename}\n                src={file.iconurl}\n                width=\"24\"\n                height=\"24\"\n                class=\"flex-shrink-0\"\n            />\n            <i\n                class=\"fa fa-download d-flex justify-content-center align-items-center flex-shrink-0\"\n                aria-hidden=\"true\"\n                style=\"width: 24px; height: 24px\"\n            />\n            <div class=\"ml-2 mr-1\" style=\"min-width: 0\">\n                <div use:truncate={fileName(file)}>{fileName(file)}</div>\n                <div class=\"text-left text-muted\">{formatSize(file.filesize)}</div>\n            </div>\n        </a>\n    {/each}\n    {#if message.attachments.length > 1}\n        <a\n            href={downloadAllUrl(message.id)}\n            class=\"btn btn-light d-flex align-items-center p-2 mr-3 mb-3\"\n        >\n            <i\n                class=\"fa fa-download d-flex justify-content-center align-items-center flex-shrink-0\"\n                aria-hidden=\"true\"\n                style=\"width: 24px; height: 24px\"\n            />\n            <div class=\"text-truncate ml-2\">{strings.downloadall}</div>\n        </a>\n    {/if}\n</div>\n\n<style global>\n    .local-mail-message-attachments a {\n        min-width: 0;\n        min-height: 3rem;\n        line-height: 1.25;\n    }\n\n    .local-mail-message-attachments-file:not(:hover) .fa-download {\n        display: none !important;\n    }\n    .local-mail-message-attachments-file:hover img {\n        display: none !important;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Message } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n    export let message: Message;\n    export let canReplyAll: boolean;\n</script>\n\n<button\n    type=\"button\"\n    class=\"btn btn-primary mr-3 mb-3\"\n    on:click={() => store.reply(message, false)}\n>\n    <i class=\"fa fa-fw fa-reply mr-2\" />\n    {$store.strings.reply}\n</button>\n<button\n    type=\"button\"\n    disabled={!canReplyAll}\n    class:disabled={!canReplyAll}\n    class=\"btn mr-3 mb-3\"\n    class:btn-primary={canReplyAll}\n    class:btn-secondary={!canReplyAll}\n    on:click={() => store.reply(message, true)}\n>\n    <i class=\"fa fa-fw fa-reply-all mr-2\" />\n    {$store.strings.replyall}\n</button>\n<button type=\"button\" class=\"btn btn-primary mr-3 mb-3\" on:click={() => store.forward(message)}>\n    <i class=\"fa fa-fw fa-share mr-2\" />\n    {$store.strings.forward}\n</button>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Message } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import CourseBadge from './CourseBadge.svelte';\n    import LabelBadge from './LabelBadge.svelte';\n\n    export let store: Store;\n    export let message: Message;\n</script>\n\n{#if message.course.id != $store.params.courseid}\n    <CourseBadge course={message.course} settings={$store.settings} />\n{/if}\n{#each message.labels as label (label.id)}\n    <LabelBadge {label} />\n{/each}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { User } from '../lib/state';\n\n    export let user: User | undefined = undefined;\n    export let icon: string | undefined = undefined;\n</script>\n\n{#if user?.pictureurl}\n    <img\n        src={user.pictureurl}\n        width=\"35\"\n        height=\"35\"\n        alt=\"\"\n        aria-hidden=\"true\"\n        class=\"rounded-circle\"\n    />\n{:else}\n    <span class=\"local-mail-user-picture-fallback m-0\">\n        {#if user}\n            {user.firstname.slice(0, 1)}{user.lastname.slice(0, 1)}\n        {:else if icon}\n            <i class=\"fa {icon}\" />\n        {/if}\n    </span>\n{/if}\n\n<style global>\n    .local-mail-user-picture-fallback {\n        width: 35px;\n        height: 35px;\n        background-color: rgba(0, 0, 0, 0.1);\n        vertical-align: middle;\n        display: inline-flex;\n        align-items: center;\n        justify-content: center;\n        border-radius: 50%;\n        color: var(--dark);\n        font-weight: 400;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Reference, Strings } from '../lib/state';\n    import MessageAttachments from './MessageAttachments.svelte';\n    import UserPicture from './UserPicture.svelte';\n\n    export let strings: Strings;\n    export let reference: Reference;\n</script>\n\n<div class=\"card mb-4\">\n    <div class=\"card-body p-3 px-xl-4\">\n        <h5 class=\"h5 card-title mb-3\">\n            {reference.subject}\n        </h5>\n        <div class=\"d-sm-flex mb-n1\">\n            <div class=\"d-flex mb-3 mb-sm-0\">\n                <div class=\"mr-3\">\n                    <UserPicture user={reference.sender} />\n                </div>\n                <div class=\"mt-1\">\n                    <a href={reference.sender.profileurl}>\n                        {reference.sender.fullname}\n                    </a>\n                </div>\n            </div>\n            <div class=\"mt-1 ml-auto\">\n                {reference.fulltime}\n            </div>\n        </div>\n        <hr />\n        <div class=\"local-mail-message-reference-content\">\n            <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n            {@html reference.content}\n        </div>\n        {#if reference.attachments.length > 0}\n            <hr />\n            <MessageAttachments {strings} message={reference} />\n        {/if}\n    </div>\n</div>\n\n<style global>\n    .local-mail-message-reference-content {\n        max-width: 60rem;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { RecipientType, type Message } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import UserPicture from './UserPicture.svelte';\n\n    export let store: Store;\n    export let message: Message;\n\n    $: recipients = (type: string) => {\n        return message.recipients.filter((user) => user.type == type);\n    };\n</script>\n\n<div class=\"local-mail-message-users d-flex mb-n2\">\n    <div class=\"mr-3\">\n        <UserPicture user={message.sender} />\n    </div>\n    <div class=\"d-flex flex-column\">\n        <div class=\"mt-1 mb-2\">\n            <a href={message.sender.profileurl}>\n                {message.sender.fullname}\n            </a>\n        </div>\n        {#each Object.values(RecipientType) as type}\n            {#if recipients(type).length > 0}\n                <div class=\"mb-2\">\n                    <span> {$store.strings[type]}: </span>\n                    {#each recipients(type) as user, i (user.id)}\n                        {#if i > 0}, {/if}\n                        <a href={user.profileurl}>{user.fullname}</a>\n                    {/each}\n                </div>\n            {/if}\n        {/each}\n    </div>\n</div>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Message } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import NessageActions from './MessageActions.svelte';\n    import MessageAttachments from './MessageAttachments.svelte';\n    import MessageButtons from './MessageButtons.svelte';\n    import MessageLabels from './MessageLabels.svelte';\n    import MessageReference from './MessageReference.svelte';\n    import MessageUsers from './MessageUsers.svelte';\n\n    export let store: Store;\n    export let message: Message;\n\n    $: canReplyAll =\n        message.sender.id == $store.userid\n            ? message.recipients.filter((u) => u.type == 'cc').length > 0\n            : message.recipients.filter(\n                  (u) => ['to', 'cc'].includes(u.type) && u.id != $store.userid,\n              ).length > 0;\n</script>\n\n<div class=\"card\">\n    <div class=\"card-body p-3 px-xl-4\">\n        <h3 class=\"h4 card-title mb-3 mb-md-2\">\n            {message.subject}\n        </h3>\n        <div class=\"d-md-flex align-items-start mb-2\">\n            <div class=\"d-flex flex-wrap mx-n2 mt-2\" style=\"min-width: 0\">\n                <MessageLabels {store} {message} />\n            </div>\n            <div class=\"d-flex justify-content-between flex-shrink-0 ml-auto\">\n                <div class=\"my-2 text-truncate\">\n                    {message.fulltime}\n                </div>\n                <div class=\"d-flex flex-shrink-0 ml-3 mr-n2\">\n                    <NessageActions {store} {message} {canReplyAll} />\n                </div>\n            </div>\n        </div>\n        <MessageUsers {store} {message} />\n        <hr />\n        <div class=\"local-mail-message-content\">\n            <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n            {@html message.content}\n        </div>\n        {#if message.attachments.length > 0}\n            <hr />\n            <MessageAttachments strings={$store.strings} {message} />\n        {/if}\n        <hr />\n        <div class=\"mt-3 d-flex mr-n3 mb-n3 flex-column flex-sm-row justify-content-end\">\n            <MessageButtons {store} {message} {canReplyAll} />\n        </div>\n    </div>\n</div>\n\n{#if message.references.length > 0}\n    <div class=\"alert alert-secondary mt-4 mb-4 text-center\">\n        {$store.strings.references}\n    </div>\n    {#each message.references as reference (reference.id)}\n        <MessageReference strings={$store.strings} {reference} />\n    {/each}\n{/if}\n\n<style global>\n    .local-mail-message-content {\n        max-width: 60rem;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { fade } from 'svelte/transition';\n\n    import { truncate } from '../actions/truncate';\n    import { RecipientType, type Recipient, type User } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import UserPicture from './UserPicture.svelte';\n\n    export let store: Store;\n    export let recipients: ReadonlyMap<number, Recipient>;\n    export let onDelete: (user: User) => unknown;\n</script>\n\n{#each Object.values(RecipientType) as type}\n    {@const users = Array.from(recipients.values()).filter((user) => user.type == type)}\n    {#if users.length}\n        <div transition:fade class=\" d-flex mb-2\">\n            <div class=\"local-mail-message-form-recipients-type flex-shrink-0 py-2 mr-2\">\n                {$store.strings[type]}:\n            </div>\n            <div class=\"d-flex flex-wrap\" style=\"min-width: 0\">\n                {#each users as user (user.id)}\n                    <div\n                        transition:fade\n                        use:truncate={user.fullname}\n                        class=\"local-mail-message-form-recipients-user d-flex flex-shrink align-items-center mr-2 mb-2\"\n                        class:alert-danger={!user.isvalid}\n                    >\n                        <div class=\"d-flex m-1 mr-2\">\n                            {#if user.isvalid}\n                                <UserPicture {user} />\n                            {:else}\n                                <div\n                                    class=\"m-0 d-flex justify-content-center align-items-center\"\n                                    style=\"width: 35px; height: 35px\"\n                                    title={$store.strings.cannotsendmailtouser}\n                                >\n                                    <i class=\"fa fa-exclamation-circle\" />\n                                </div>\n                            {/if}\n                        </div>\n                        <div class=\"py-2\" use:truncate={user.fullname}>\n                            {user.fullname}\n                        </div>\n                        <button\n                            type=\"button\"\n                            class=\"btn align-self-middle p-2 align-bottom\"\n                            title={$store.strings.delete}\n                            on:click={() => onDelete(user)}\n                        >\n                            <i class=\"fa fa-fw fa-times\" />\n                        </button>\n                    </div>\n                {/each}\n            </div>\n        </div>\n    {/if}\n{/each}\n\n<style global>\n    .local-mail-message-form-recipients-type {\n        width: 3rem;\n    }\n    .local-mail-message-form-recipients-user {\n        border-radius: 0.5rem;\n        max-width: 20rem;\n    }\n    .local-mail-message-form-recipients-user:not(.alert-danger) {\n        background-color: #eee;\n    }\n    .local-mail-message-form-recipients-user .btn {\n        position: relative;\n        z-index: 100;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Message } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import LabelBadge from './LabelBadge.svelte';\n\n    export let store: Store;\n    export let message: Message;\n</script>\n\n<div class=\"d-sm-flex justify-content-between mb-2 mr-n3\">\n    <div class=\"d-flex flex-grow-1\">\n        <div class=\"align-self-center alert-info px-2 text-truncate\" title={message.fulltime}>\n            {#if $store.draftSaved}\n                <i class=\"fa fa-check mr-1\" aria-hidden=\"true\" /> {$store.strings.draftsaved}\n            {:else}\n                <i class=\"fa fa-clock-o mr-1\" aria-hidden=\"true\" /> {message.shorttime}\n            {/if}\n        </div>\n        <button\n            type=\"button\"\n            class=\"btn border-0 py-2 ml-auto mr-3 mr-sm-2\"\n            role=\"checkbox\"\n            aria-checked={message.starred}\n            disabled={message.deleted}\n            title={message.starred ? $store.strings.markasunstarred : $store.strings.markasstarred}\n            on:click={() => store.setStarred([message.id], !message.starred)}\n        >\n            <i class=\"fa {message.starred ? 'fa-star text-warning' : 'fa-star-o'}\" />\n        </button>\n    </div>\n\n    {#if message.labels}\n        <div class=\"d-flex flex-wrap mt-2 mr-2\" style=\"min-width: 0\">\n            {#each message.labels as label (label.id)}\n                <LabelBadge {label} />\n            {/each}\n        </div>\n    {/if}\n</div>\n","/*\n * SPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n *\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\n\nimport { require, type CoreAjax } from './amd';\nimport {\n    DeletedStatus,\n    type Course,\n    type Group,\n    type Label,\n    type Message,\n    type MessageData,\n    type MessageForm,\n    type MessageSummary,\n    type Preferences,\n    type Role,\n    type User,\n} from './state';\n\nexport type ServiceRequest =\n    | SetPreferencesRequest\n    | GetCoursesRequest\n    | GetLabelsRequest\n    | CountMessagesRequest\n    | SearchMessagesRequest\n    | GetMessageRequest\n    | ViewMessageRequest\n    | SetUnreadRequest\n    | SetStarredRequest\n    | SetDeletedRequest\n    | EmptyTrashRequest\n    | CreateLabelRequest\n    | UpdateLabelRequest\n    | DeleteLabelRequest\n    | SetLabelsRequest\n    | GetRolesRequest\n    | GetGroupsRequest\n    | SearchUsersRequest\n    | GetMessageFormRequest\n    | CreateMessageRequest\n    | ReplyMessageRequest\n    | ForwardMessageRequest\n    | UpdateMessageRequest\n    | SendMessageRequest;\n\nexport interface SetPreferencesRequest {\n    readonly methodname: 'set_preferences';\n    readonly preferences: Partial<Preferences>;\n}\n\nexport type SetPreferencesResponse = void;\n\nexport interface GetCoursesRequest {\n    readonly methodname: 'get_courses';\n}\n\nexport type GetCoursesResponse = ReadonlyArray<Course>;\n\nexport interface GetLabelsRequest {\n    readonly methodname: 'get_labels';\n}\n\nexport type GetLabelsResponse = ReadonlyArray<Label>;\n\nexport interface MessageQuery {\n    readonly courseid?: number;\n    readonly labelid?: number;\n    readonly draft?: boolean;\n    readonly roles?: ReadonlyArray<string>;\n    readonly unread?: boolean;\n    readonly starred?: boolean;\n    readonly deleted?: boolean;\n    readonly content?: string;\n    readonly sendername?: string;\n    readonly recipientname?: string;\n    readonly withfilesonly?: boolean;\n    readonly maxtime?: number;\n    readonly startid?: number;\n    readonly stopid?: number;\n    readonly reverse?: boolean;\n}\n\nexport interface CountMessagesRequest {\n    readonly methodname: 'count_messages';\n    readonly query: MessageQuery;\n}\n\nexport type CountMessagesResponse = number;\n\nexport interface SearchMessagesRequest {\n    readonly methodname: 'search_messages';\n    readonly query: MessageQuery;\n    readonly offset?: number;\n    readonly limit?: number;\n}\n\nexport type SearchMessagesResponse = ReadonlyArray<MessageSummary>;\n\nexport interface GetMessageRequest {\n    readonly methodname: 'get_message';\n    readonly messageid: number;\n}\n\nexport type GetMessageResponse = Message;\n\nexport interface ViewMessageRequest {\n    readonly methodname: 'view_message';\n    readonly messageid: number;\n}\n\nexport type ViewMessageResponse = null;\n\nexport interface SetUnreadRequest {\n    readonly methodname: 'set_unread';\n    readonly messageid: number;\n    readonly unread: boolean;\n}\n\nexport type SetUnreadResponse = void;\n\nexport interface SetStarredRequest {\n    readonly methodname: 'set_starred';\n    readonly messageid: number;\n    readonly starred: boolean;\n}\n\nexport type SetStarredResponse = void;\n\nexport interface SetDeletedRequest {\n    readonly methodname: 'set_deleted';\n    readonly messageid: number;\n    readonly deleted: DeletedStatus;\n}\n\nexport type SetDeletedResponse = void;\n\nexport interface EmptyTrashRequest {\n    readonly methodname: 'empty_trash';\n    readonly courseid?: number;\n}\n\nexport type EmptyTrashResponse = void;\n\nexport interface CreateLabelRequest {\n    readonly methodname: 'create_label';\n    readonly name: string;\n    readonly color: string;\n}\n\nexport type CreateLabelResponse = void;\n\nexport interface UpdateLabelRequest {\n    readonly methodname: 'update_label';\n    readonly labelid: number;\n    readonly name: string;\n    readonly color: string;\n}\n\nexport type UpdateLabelResponse = void;\n\nexport interface DeleteLabelRequest {\n    readonly methodname: 'delete_label';\n    readonly labelid: number;\n}\n\nexport type DeleteLabelResponse = void;\n\nexport interface SetLabelsRequest {\n    readonly methodname: 'set_labels';\n    readonly messageid: number;\n    readonly labelids: ReadonlyArray<number>;\n}\n\nexport type SetLabelsResponse = void;\n\nexport interface GetRolesRequest {\n    readonly methodname: 'get_roles';\n    readonly courseid: number;\n}\n\nexport type GetRolesResponse = ReadonlyArray<Role>;\n\nexport interface GetGroupsRequest {\n    readonly methodname: 'get_groups';\n    readonly courseid: number;\n}\n\nexport type GetGroupsResponse = ReadonlyArray<Group>;\n\nexport interface UserQuery {\n    readonly courseid: number;\n    readonly roleid?: number;\n    readonly groupid?: number;\n    readonly fullname?: string;\n    readonly include?: number[];\n}\n\nexport interface SearchUsersRequest {\n    readonly methodname: 'search_users';\n    readonly query: UserQuery;\n    readonly offset?: number;\n    readonly limit?: number;\n}\n\nexport type SearchUsersResponse = ReadonlyArray<User>;\n\nexport interface GetMessageFormRequest {\n    readonly methodname: 'get_message_form';\n    readonly messageid: number;\n}\n\nexport type GetMessageFormeResponse = MessageForm;\n\nexport interface CreateMessageRequest {\n    readonly methodname: 'create_message';\n    readonly courseid: number;\n}\n\nexport type CreateMessageResponse = number;\n\nexport interface ReplyMessageRequest {\n    readonly methodname: 'reply_message';\n    readonly messageid: number;\n    readonly all: boolean;\n}\n\nexport type ReplyMessageResponse = number;\n\nexport interface ForwardMessageRequest {\n    readonly methodname: 'forward_message';\n    readonly messageid: number;\n}\n\nexport type ForwardMessageResponse = number;\n\nexport interface UpdateMessageRequest {\n    readonly methodname: 'update_message';\n    readonly messageid: number;\n    readonly data: MessageData;\n}\n\nexport type UpdateMessageResponse = void;\n\nexport interface SendMessageRequest {\n    readonly methodname: 'send_message';\n    readonly messageid: number;\n}\n\nexport type SendMessageResponse = void;\n\n/**\n * Calls one or more web service methods in a single HTTP request.\n *\n * @param requests List of request with method name and arguments.\n * @returns A promise to the web service responses.\n */\nexport async function callServices(requests: ServiceRequest[]): Promise<unknown[]> {\n    const ajax = (await require('core/ajax')) as CoreAjax;\n    const ajaxRequests = Array.from(requests).map(({ methodname, ...args }) => ({\n        methodname: `local_mail_${methodname}`,\n        args,\n    }));\n    try {\n        return await Promise.all(ajax.call(ajaxRequests));\n    } catch (error) {\n        throw typeof error == 'string' ? { message: error } : error;\n    }\n}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { blur } from '../actions/blur';\n    import { truncate } from '../actions/truncate';\n    import { callServices, type ServiceRequest } from '../lib/services';\n    import {\n        GroupMode,\n        RecipientType,\n        type Course,\n        type Group,\n        type Recipient,\n        type Role,\n        type ServiceError,\n        type User,\n    } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import UserPicture from './UserPicture.svelte';\n\n    export let store: Store;\n    export let course: Course;\n    export let recipients: ReadonlyMap<number, Recipient>;\n    export let onChange: (users: ReadonlyArray<User>, type: RecipientType | null) => unknown;\n\n    const DELAY = 500;\n\n    let expanded = false;\n    let text = '';\n    let inputNode: HTMLElement;\n    let loading = false;\n    let timeoutId: number | undefined;\n    let roles: ReadonlyArray<Role> = [];\n    let groups: ReadonlyArray<Group> = [];\n    let users: ReadonlyArray<User> = [];\n    let tooManyUsers = false;\n    let roleid = 0;\n    let groupid = 0;\n\n    const handleToggleClick = async () => {\n        if (expanded) {\n            text = '';\n            expanded = false;\n            window.clearTimeout(timeoutId);\n        } else {\n            search(false);\n            inputNode.focus();\n        }\n    };\n\n    const search = async (throttle: boolean) => {\n        const limit = $store.settings.usersearchlimit;\n\n        loading = true;\n        window.clearTimeout(timeoutId);\n\n        timeoutId = window.setTimeout(\n            async () => {\n                const requests: ServiceRequest[] = [\n                    {\n                        methodname: 'get_roles',\n                        courseid: course.id,\n                    },\n                    {\n                        methodname: 'get_groups',\n                        courseid: course.id,\n                    },\n                    {\n                        methodname: 'search_users',\n                        query: {\n                            courseid: course.id,\n                            fullname: text,\n                            roleid,\n                            groupid,\n                        },\n                        limit: limit + 1,\n                    },\n                ];\n                let responses: unknown[];\n                try {\n                    responses = await callServices(requests);\n                } catch (error) {\n                    store.setError(error as ServiceError);\n                    loading = false;\n                    expanded = false;\n                    tooManyUsers = false;\n                    users = [];\n                    return;\n                }\n                users = responses.pop() as ReadonlyArray<User>;\n                tooManyUsers = users.length > limit;\n                users = users.slice(0, limit);\n                groups = responses.pop() as ReadonlyArray<Group>;\n                groupid = groups.find((group) => group.id == groupid)\n                    ? groupid\n                    : course.groupmode == GroupMode.Separate\n                    ? groups[0]?.id || 0\n                    : 0;\n                roles = responses.pop() as ReadonlyArray<Role>;\n                roleid = roles.find((role) => role.id == roleid) ? roleid : 0;\n                loading = false;\n                expanded = true;\n            },\n            throttle ? DELAY : 0,\n        );\n    };\n\n    const handleBlur = () => {\n        text = '';\n        expanded = false;\n    };\n\n    const handleFocus = () => {\n        if (!expanded) {\n            search(false);\n        }\n    };\n</script>\n\n<div\n    class=\"local-mail-message-form-search-users-input form-group position-relative\"\n    use:blur={handleBlur}\n>\n    <div\n        class=\"position-absolute h-100 d-flex justify-content-center align-items-center px-2\"\n        style=\"top: 0; left: 0;\"\n    >\n        <i class=\"fa fa-fw {loading ? 'fa-spinner fa-pulse' : 'fa-user'}\" aria-hidden=\"true\" />\n    </div>\n\n    <input\n        type=\"text\"\n        class=\"form-control px-5\"\n        class:is-invalid={!recipients.size}\n        placeholder={$store.strings.addrecipients}\n        aria-label={$store.strings.addrecipients}\n        autocomplete=\"off\"\n        bind:value={text}\n        bind:this={inputNode}\n        on:input={() => search(true)}\n        on:focus={handleFocus}\n    />\n\n    <div class=\"position-absolute h-100 d-flex align-items-center\" style=\"top: 0; right: 0\">\n        <button\n            type=\"button\"\n            aria-expanded={expanded}\n            class=\"btn px-2\"\n            title={$store.strings.addrecipients}\n            on:click|preventDefault={handleToggleClick}\n        >\n            <i\n                class=\"fa fa-fw {text ? 'fa-times' : expanded ? 'fa-caret-up' : 'fa-caret-down'}\"\n                aria-hidden=\"true\"\n            />\n        </button>\n    </div>\n\n    {#if expanded}\n        <div\n            class=\"local-mail-message-form-search-users-dropdown dropdown-menu dropdown-menu-left list-group show p-0 w-100\"\n            style=\"min-width: 18rem\"\n        >\n            <div class=\"list-group-item d-sm-flex px-2 py-2\">\n                <div class=\"flex-grow-1 mx-2\">\n                    <select\n                        class=\"form-control text-truncate\"\n                        bind:value={roleid}\n                        on:change={() => search(false)}\n                    >\n                        <option value={0}>{$store.strings.allroles}</option>\n                        {#each roles as role (role.id)}\n                            <option value={role.id}>\n                                {role.name}\n                            </option>\n                        {/each}\n                    </select>\n                </div>\n                {#if groups.length > 0}\n                    <div class=\"flex-grow-1 mx-2 mt-2 mt-sm-0\">\n                        <select\n                            class=\"form-control text-truncate\"\n                            style=\"min-width: 0\"\n                            bind:value={groupid}\n                            on:change={() => search(false)}\n                        >\n                            {#if course.groupmode != GroupMode.Separate}\n                                <option value={0}>{$store.strings.allgroups}</option>\n                            {/if}\n                            {#each groups as group (group.id)}\n                                <option value={group.id} class=\"text-truncate\">\n                                    {group.name}\n                                </option>\n                            {/each}\n                        </select>\n                    </div>\n                {/if}\n            </div>\n            {#if !users.length}\n                <div class=\"list-group-item text-danger\">\n                    {$store.strings.nousersfound}\n                </div>\n            {:else if tooManyUsers}\n                <div class=\"list-group-item text-danger\">\n                    {$store.strings.toomanyusersfound}\n                </div>\n            {:else}\n                <div class=\"list-group-item d-flex align-items-sm-center p-0\">\n                    <div class=\"mx-3 my-2\">\n                        <UserPicture icon=\"fa-users\" />\n                    </div>\n                    <div class=\"d-sm-flex align-items-center flex-grow-1\">\n                        <div class=\"py-2 mr-3\" use:truncate={$store.strings.allusers}>\n                            {$store.strings.allusers}\n                        </div>\n                        <div class=\"d-flex ml-auto mr-2\">\n                            {#each Object.values(RecipientType) as type}\n                                {@const all = users.every(\n                                    (user) => recipients.get(user.id)?.type == type,\n                                )}\n                                <button\n                                    type=\"button\"\n                                    class=\"btn text-nowrap mr-2 mb-2 mt-sm-2\"\n                                    class:btn-primary={all}\n                                    class:btn-secondary={!all}\n                                    aria-pressed={all}\n                                    on:click={() => onChange(users, all ? null : type)}\n                                >\n                                    {$store.strings[type]}\n                                </button>\n                            {/each}\n                        </div>\n                    </div>\n                </div>\n                {#each users as user (user.id)}\n                    {@const recipientType = recipients.get(user.id)?.type}\n                    <div class=\"list-group-item d-flex align-items-sm-center p-0\">\n                        <div class=\"mx-3 my-2\">\n                            <UserPicture {user} />\n                        </div>\n                        <div class=\"d-sm-flex align-items-center flex-grow-1\">\n                            <div use:truncate={user.fullname} class=\"py-2 mr-3\">\n                                {user.fullname}\n                            </div>\n                            <div class=\"d-flex ml-auto mr-2\">\n                                {#each Object.values(RecipientType) as type}\n                                    <button\n                                        type=\"button\"\n                                        class=\"btn text-nowrap mr-2 mb-2 mt-sm-2\"\n                                        class:btn-primary={recipientType == type}\n                                        class:btn-secondary={recipientType != type}\n                                        aria-pressed={recipientType == type}\n                                        on:click={() =>\n                                            onChange([user], recipientType == type ? null : type)}\n                                    >\n                                        {$store.strings[type]}\n                                    </button>\n                                {/each}\n                            </div>\n                        </div>\n                    </div>\n                {/each}\n            {/if}\n        </div>\n    {/if}\n</div>\n\n<style global>\n    .local-mail-message-form-search-users-input {\n        width: 100%;\n        max-width: 100%;\n    }\n\n    .local-mail-message-form-search-users-input input.is-invalid {\n        background-image: none;\n    }\n\n    .local-mail-message-form-search-users-dropdown {\n        max-height: 50vh;\n        max-width: 50rem;\n        overflow-y: scroll;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n</script>\n\n<button\n    type=\"button\"\n    class=\"local-mail-action-send btn btn-primary flex-shrink-0 text-nowrap px-3 text-truncate ml-auto\"\n    title={$store.strings.send}\n    on:click={() => store.sendMessage()}\n>\n    <i class=\"fa fa-send mr-2\" />\n    {$store.strings.send}\n</button>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { onMount, tick } from 'svelte';\n    import { require, type CoreFragment, type EditorTinyLoader, type TinyMCE } from '../lib/amd';\n    import {\n        ViewportSize,\n        type Message,\n        type MessageData,\n        type MessageForm,\n        type RecipientType,\n        type User,\n    } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import { replaceStringParams } from '../lib/utils';\n    import CourseSelect from './CourseSelect.svelte';\n    import DraftFormRecipients from './DraftFormRecipients.svelte';\n    import DraftFormTimeAndLabels from './DraftFormTimeAndLabels.svelte';\n    import DraftFormUserSearch from './DraftFormUserSearch.svelte';\n    import MessageReference from './MessageReference.svelte';\n    import SendButton from './SendButton.svelte';\n\n    export let store: Store;\n    export let message: Message;\n    export let form: MessageForm;\n\n    let jsNode: Element | undefined;\n    let formNode: HTMLFormElement | undefined;\n\n    $: course = message.course;\n    $: subject = message.subject;\n    $: recipients = new Map(message.recipients.map((user) => [user.id, user]));\n\n    $: updateJavascript(form.javascript);\n\n    onMount(() => {\n        formNode?.addEventListener('core_form/uploadChanged', () => save(false));\n        const disableTinyEventHandlers = enableTinyEventHandlers();\n\n        return () => {\n            jsNode?.remove();\n            disableTinyEventHandlers();\n        };\n    });\n\n    const enableTinyEventHandlers = () => {\n        let tiny: TinyMCE.TinyMCE | undefined;\n        let tinyEditor: TinyMCE.Editor | undefined;\n\n        const handleChange = () => {\n            tinyEditor?.save();\n            save(false);\n        };\n\n        const handleEditor = (event: { editor: TinyMCE.Editor }) => {\n            if (event.editor.id == `local-mail-compose-editor-${message.id}`) {\n                tinyEditor?.off('input', handleChange);\n                tinyEditor?.off('ExecCommand', handleChange);\n                tinyEditor = event.editor;\n                event.editor.on('input', handleChange);\n                event.editor.on('ExecCommand', handleChange);\n            }\n        };\n\n        require('editor_tiny/loader').then(async (loader) => {\n            tiny = await (loader as EditorTinyLoader).getTinyMCE();\n            tiny.EditorManager.get().forEach((editor) => handleEditor({ editor }));\n            tiny.EditorManager.on('SetupEditor', handleEditor);\n        });\n\n        return () => {\n            tiny?.EditorManager.off('SetupEditor', handleEditor);\n            tinyEditor?.off('input', handleChange);\n            tinyEditor?.off('ExecCommand', handleChange);\n        };\n    };\n\n    const updateJavascript = async (javascript: string) => {\n        const fragment = (await require('core/fragment')) as CoreFragment;\n        jsNode?.remove();\n        await tick();\n        jsNode = document.createElement('script');\n        jsNode.setAttribute('type', 'text/javascript');\n        jsNode.innerHTML = fragment.processCollectedJavascript(javascript);\n        document.head.append(jsNode);\n    };\n\n    const handleCourseChange = (id?: number) => {\n        course = $store.courses.find((course) => course.id == id) || $store.courses[0];\n        save(true);\n    };\n\n    const handleRecipientChange = (users: ReadonlyArray<User>, type: RecipientType | null) => {\n        const newRecipients = new Map(recipients);\n        for (const user of users) {\n            if (type) {\n                newRecipients.set(user.id, { ...user, type, isvalid: true });\n            } else {\n                newRecipients.delete(user.id);\n            }\n        }\n        const recipientsList = Array.from(newRecipients.values());\n        recipientsList.sort((a, b) => a.sortorder.localeCompare(b.sortorder));\n        recipients = new Map(recipientsList.map((recipient) => [recipient.id, recipient]));\n\n        save(false);\n    };\n\n    const handleRecipientDelete = (user: User) => {\n        handleRecipientChange([user], null);\n    };\n\n    const save = async (force: boolean) => {\n        if (!formNode) {\n            return;\n        }\n\n        const formData = new FormData(formNode);\n\n        const data: MessageData = {\n            courseid: course.id,\n            to: Array.from(recipients.values())\n                .filter((user) => user.type == 'to')\n                .map((user) => user.id),\n            cc: Array.from(recipients.values())\n                .filter((user) => user.type == 'cc')\n                .map((user) => user.id),\n            bcc: Array.from(recipients.values())\n                .filter((user) => user.type == 'bcc')\n                .map((user) => user.id),\n            subject,\n            content: formData.get('content[text]')?.toString() || '',\n            format: parseInt(formData.get('content[format]')?.toString() || '') || 1,\n            draftitemid: parseInt(formData.get('content[itemid]')?.toString() || '') || 0,\n        };\n\n        await store.updateDraft(data, force);\n    };\n</script>\n\n<hr class=\"d-lg-none mt-0 mb-3 mb-sm-2\" />\n<form\n    bind:this={formNode}\n    on:submit|preventDefault={() => save(true)}\n    class=\"pt-lg-2 pb-3 px-lg-4\"\n    class:card={$store.viewportSize >= ViewportSize.LG}\n>\n    <DraftFormTimeAndLabels {store} {message} />\n    <div class=\"row\">\n        <div class=\"form-group col-12 col-xl-5\">\n            <CourseSelect\n                settings={$store.settings}\n                strings={$store.strings}\n                courses={$store.courses}\n                label={$store.strings.course}\n                selected={course.id}\n                required={true}\n                readonly={message.references.length > 0}\n                style=\"filter-left\"\n                onChange={handleCourseChange}\n            />\n        </div>\n        <div class=\"col-12 col-xl-7\">\n            <DraftFormUserSearch {store} {course} {recipients} onChange={handleRecipientChange} />\n        </div>\n    </div>\n    <DraftFormRecipients {store} {recipients} onDelete={handleRecipientDelete} />\n\n    <div class=\"form-group\">\n        <input\n            type=\"text\"\n            id=\"local-mail-message-form-subject\"\n            class=\"form-control\"\n            class:is-invalid={!subject.trim()}\n            placeholder={$store.strings.subject}\n            aria-label={$store.strings.subject}\n            autocomplete=\"off\"\n            maxlength=\"100\"\n            bind:value={subject}\n            on:input={() => save(false)}\n        />\n    </div>\n\n    <div class=\"form-group\" on:change={() => save(false)}>\n        <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n        {@html form.editorhtml}\n    </div>\n    <div class=\"form-group\">\n        <!-- eslint-disable-next-line svelte/no-at-html-tags -->\n        {@html form.filemanagerhtml}\n    </div>\n\n    {#if Array.from(recipients.values()).some((user) => !user.isvalid)}\n        <div class=\"alert alert-danger\">\n            <i class=\"fa fa-exclamation-circle mr-2\" />\n            {$store.strings.errorinvalidrecipients}\n        </div>\n    {/if}\n    {#if recipients.size == 0}\n        <div class=\"alert alert-danger\">\n            <i class=\"fa fa-exclamation-circle mr-2\" />\n            {$store.strings.erroremptyrecipients}\n        </div>\n    {:else if recipients.size > $store.settings.maxrecipients}\n        <div class=\"alert alert-danger\">\n            <i class=\"fa fa-exclamation-circle mr-2\" />\n            {replaceStringParams(\n                $store.strings.errortoomanyrecipients,\n                $store.settings.maxrecipients,\n            )}\n        </div>\n    {/if}\n    {#if !subject.trim()}\n        <div class=\"alert alert-danger\">\n            <i class=\"fa fa-exclamation-circle mr-2\" />\n            {$store.strings.erroremptysubject}\n        </div>\n    {/if}\n    <div class=\"d-flex justify-content-end align-items-center\">\n        <SendButton {store} />\n    </div>\n</form>\n\n{#if message.references.length > 0}\n    <div class=\"alert alert-secondary mt-4 mb-4 text-center\">\n        {$store.strings.references}\n    </div>\n    {#each message.references as reference (reference.id)}\n        <MessageReference strings={$store.strings} {reference} />\n    {/each}\n{/if}\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Store } from '../lib/store';\n    export let store: Store;\n\n    const defaultValues: ReadonlyArray<number> = [5, 10, 20, 50, 100];\n\n    $: values = defaultValues.includes($store.preferences.perpage)\n        ? defaultValues\n        : defaultValues.concat([$store.preferences.perpage]).sort((a, b) => a - b);\n\n    let selected: number = $store.preferences.perpage;\n</script>\n\n<div class=\"form-inline justify-content-end mt-3\">\n    <div class=\"form-group\">\n        <label for=\"local-mail-perpage-select\">{$store.strings.messagesperpage}:</label>\n        <select\n            id=\"local-mail-perpage-select\"\n            class=\"custom-select\"\n            bind:value={selected}\n            on:change={() => store.savePreferences({ perpage: selected })}\n        >\n            {#each values as value}\n                <option {value}>{value}</option>\n            {/each}\n        </select>\n    </div>\n</div>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Store } from '../lib/store';\n    import ModalDialog from './ModalDialog.svelte';\n\n    export let store: Store;\n    export let onCancel: () => void;\n\n    let markasread = $store.preferences.markasread;\n    let notifications = $store.settings.messageprocessors\n        .map((processor) => processor.name)\n        .filter((name) => $store.preferences.notifications.includes(name));\n\n    const handleConfirm = () => {\n        onCancel();\n        store.savePreferences({ markasread, notifications });\n    };\n\n    const toggleMarkAsRead = () => {\n        markasread = !markasread;\n    };\n\n    const toggleMessageProcessor = (name: string) => {\n        notifications = notifications.includes(name)\n            ? notifications.filter((n) => n != name)\n            : [...notifications, name];\n    };\n</script>\n\n<ModalDialog\n    title={$store.strings.preferences}\n    confirmText={$store.strings.save}\n    cancelText={$store.strings.cancel}\n    onConfirm={handleConfirm}\n    {onCancel}\n>\n    <h6 class=\"mb-3\">{$store.strings.notifications}</h6>\n\n    {#each $store.settings.messageprocessors as processor}\n        <div class=\"custom-control custom-switch my-2\">\n            <input\n                id=\"local-mail-preferences-messageprocessor-{processor.name}\"\n                class=\"custom-control-input\"\n                type=\"checkbox\"\n                checked={processor.locked\n                    ? processor.enabled\n                    : notifications.includes(processor.name)}\n                disabled={processor.locked}\n                on:click={() => toggleMessageProcessor(processor.name)}\n            />\n            <label\n                for=\"local-mail-preferences-messageprocessor-{processor.name}\"\n                class=\"custom-control-label pl-1\"\n            >\n                {processor.displayname}\n                {#if processor.locked}\n                    <span class=\"ml-1\">({$store.strings.locked})</span>\n                {/if}\n            </label>\n        </div>\n    {/each}\n    <div class=\"custom-control custom-switch my-2 mt-3\">\n        <input\n            id=\"local-mail-preferences-markasread\"\n            class=\"custom-control-input\"\n            type=\"checkbox\"\n            checked={markasread && notifications.length > 0}\n            disabled={notifications.length == 0}\n            on:click={toggleMarkAsRead}\n        />\n        <label for=\"local-mail-preferences-markasread\" class=\"custom-control-label pl-1\">\n            {$store.strings.markmessagesasread}\n        </label>\n    </div>\n</ModalDialog>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Store } from '../lib/store';\n    import { dateFromTimestamp, timestampFromDate } from '../lib/utils';\n\n    export let store: Store;\n    export let sendername = '';\n    export let recipientname = '';\n    export let unread = false;\n    export let withfilesonly = false;\n    export let maxtime = 0;\n    export let submit: () => void;\n    export let submitEnabled: boolean;\n\n    export function focus() {\n        senderNode.focus();\n    }\n\n    let senderNode: HTMLElement;\n    let today = dateFromTimestamp(Math.floor(new Date().getTime() / 1000));\n\n    $: maxdate = dateFromTimestamp(maxtime);\n\n    const updateMaxTime = (event: Event) => {\n        maxtime = timestampFromDate((event.target as HTMLInputElement).value);\n    };\n</script>\n\n<div class=\"dropdown-menu dropdown-menu-left show p-3 w-100\" style=\"min-width: 18rem\">\n    <div class=\"form-group row\">\n        <label for=\"local-mail-search-input-sendername\" class=\"col-3 col-form-label\">\n            {$store.strings.from}\n        </label>\n        <div class=\"col-9\">\n            <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"local-mail-search-input-sendername\"\n                bind:value={sendername}\n                bind:this={senderNode}\n            />\n        </div>\n    </div>\n    <div class=\"form-group row\">\n        <label for=\"local-mail-search-input-recipientname\" class=\"col-3 col-form-label\">\n            {$store.strings.to}\n        </label>\n        <div class=\"col-9\">\n            <input\n                type=\"text\"\n                class=\"form-control\"\n                id=\"local-mail-search-input-recipientname\"\n                bind:value={recipientname}\n            />\n        </div>\n    </div>\n    <div class=\"form-group row\">\n        <label for=\"local-mail-search-input-maxdate\" class=\"col-3 col-form-label\">\n            {$store.strings.date}\n        </label>\n        <div class=\"col-9\">\n            <input\n                type=\"date\"\n                class=\"form-control\"\n                id=\"local-mail-search-input-maxdate\"\n                max={today}\n                value={maxdate}\n                on:input={updateMaxTime}\n            />\n        </div>\n    </div>\n\n    <div class=\"d-flex flex-wrap align-items-center\" style=\"column-gap: 2rem; row-gap: 1rem\">\n        <div class=\"form-check\">\n            <input\n                class=\"form-check-input\"\n                type=\"checkbox\"\n                id=\"local-mail-search-input-unread\"\n                bind:checked={unread}\n            />\n            <label class=\"form-check-label\" for=\"local-mail-search-input-unread\">\n                {$store.strings.unreadonly}\n            </label>\n        </div>\n        <div class=\"form-check\">\n            <input\n                class=\"form-check-input\"\n                type=\"checkbox\"\n                id=\"local-mail-search-input-withfilesonly\"\n                bind:checked={withfilesonly}\n            />\n            <label class=\"form-check-label\" for=\"local-mail-search-input-withfilesonly\">\n                {$store.strings.hasattachments}\n            </label>\n        </div>\n        <input\n            type=\"submit\"\n            disabled={!submitEnabled}\n            class=\"btn btn-primary px-3 ml-auto\"\n            on:click|preventDefault={submit}\n            value={$store.strings.search}\n        />\n    </div>\n</div>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { onDestroy } from 'svelte';\n    import {\n        RecipientType,\n        type MessageSummary,\n        type ViewParams,\n        type ServiceError,\n    } from '../lib/state';\n    import { callServices, type MessageQuery, type SearchMessagesRequest } from '../lib/services';\n    import type { Store } from '../lib/store';\n    import { viewUrl } from '../lib/url';\n    import ListMessageSubject from './ListMessageSubject.svelte';\n    import ListMessageUsers from './ListMessageUsers.svelte';\n\n    export let store: Store;\n    export let enabled: boolean;\n    export let content: string;\n    export let loading = false;\n    export let onClick: (params: ViewParams) => void;\n\n    $: if (enabled) {\n        search(content);\n    } else {\n        messages = undefined;\n        loading = false;\n        window.clearTimeout(timeoutId);\n    }\n\n    const LIMIT = 10;\n    const DELAY = 500;\n\n    let timeoutId: number | undefined;\n    let messages: ReadonlyArray<MessageSummary> | undefined;\n    let moreResults = false;\n\n    const search = async (content: string) => {\n        loading = true;\n        window.clearTimeout(timeoutId);\n\n        timeoutId = window.setTimeout(async () => {\n            const params = $store.params;\n            const query: MessageQuery = {\n                courseid: params.courseid,\n                labelid: params.tray == 'label' ? params.labelid : undefined,\n                draft: params.tray == 'drafts' ? true : params.tray == 'sent' ? false : undefined,\n                roles:\n                    params.tray == 'inbox'\n                        ? Object.values(RecipientType)\n                        : params.tray == 'sent'\n                        ? ['from']\n                        : undefined,\n                starred: params.tray == 'starred' ? true : undefined,\n                deleted: params.tray == 'trash',\n                content: content.trim(),\n                stopid: $store.incrementalSearchStopId,\n            };\n            const request: SearchMessagesRequest = {\n                methodname: 'search_messages',\n                query,\n                limit: LIMIT + 1,\n            };\n            let responses: unknown[];\n            try {\n                responses = await callServices([request]);\n            } catch (error) {\n                store.setError(error as ServiceError);\n                loading = false;\n                messages = undefined;\n                return;\n            }\n            loading = false;\n            messages = responses[0] as ReadonlyArray<MessageSummary>;\n            moreResults = messages.length > LIMIT || Boolean($store.incrementalSearchStopId);\n            messages = messages.slice(0, LIMIT);\n        }, DELAY);\n    };\n\n    const clickHandler = (message: MessageSummary, i: number) => {\n        return (event: MouseEvent) => {\n            if (!message.draft) {\n                event.preventDefault();\n                onClick(messageParams(message, i));\n            }\n        };\n    };\n\n    onDestroy(() => {\n        window.clearTimeout(timeoutId);\n    });\n\n    $: messageParams = (message: MessageSummary, i: number) => {\n        return {\n            ...$store.params,\n            messageid: message.id,\n            offset: i,\n            search: { content: content.trim() },\n        };\n    };\n\n    $: allParams = {\n        ...$store.params,\n        messageid: undefined,\n        offset: 0,\n        search: { content: content.trim() },\n    };\n</script>\n\n{#if enabled && messages != null}\n    <div\n        class=\"dropdown-menu dropdown-menu-left overflow-hidden show p-0 w-100\"\n        style=\"min-width: 18rem\"\n    >\n        {#each messages as message, i}\n            {#if i > 0}\n                <div class=\"dropdown-divider my-0\" />\n            {/if}\n            <a\n                class=\"dropdown-item local-mail-incremental-search-item\"\n                class:font-weight-bold={message.unread}\n                href={viewUrl(messageParams(message, i))}\n                on:click={clickHandler(message, i)}\n            >\n                <ListMessageSubject {store} {message} />\n                <div class=\"local-mail-incremental-search-muted d-flex\">\n                    <ListMessageUsers {store} {message} />\n                    <div title={message.fulltime} class=\"ml-auto\">\n                        {message.shorttime}\n                    </div>\n                </div>\n            </a>\n        {/each}\n        {#if moreResults}\n            <div class=\"dropdown-divider my-0\" />\n            <a\n                class=\"dropdown-item py-2\"\n                href={viewUrl(allParams)}\n                on:click|preventDefault={() => onClick(allParams)}\n            >\n                {$store.strings.searchallmessages}\n            </a>\n        {:else if !messages.length}\n            <div class=\"px-4 py-2 text-danger\">\n                {$store.strings.nomessagesfound}\n            </div>\n        {/if}\n    </div>\n{/if}\n\n<style global>\n    .local-mail-incremental-search-muted {\n        opacity: 0.6;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { tick } from 'svelte';\n    import { blur } from '../actions/blur';\n    import type { SearchParams, ViewParams } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import SearchOptions from './SearchOptions.svelte';\n    import IncrementalSearch from './IncrementalSearch.svelte';\n\n    export let store: Store;\n\n    let entering = !$store.params.search;\n    let advancedExpanded = false;\n    let inputNode: HTMLElement;\n    let advancedNode: SearchOptions;\n    let content = '';\n    let sendername = '';\n    let recipientname = '';\n    let unread = false;\n    let withfilesonly = false;\n    let maxtime = 0;\n    let loading = false;\n\n    const updateFields = (search?: SearchParams) => {\n        content = search?.content || '';\n        sendername = search?.sendername || '';\n        recipientname = search?.recipientname || '';\n        unread = search?.unread || false;\n        withfilesonly = search?.withfilesonly || false;\n        maxtime = search?.maxtime || 0;\n    };\n\n    $: search = $store.params.search;\n\n    $: updateFields(search);\n\n    $: advancedEnabled = Boolean(\n        search?.sendername ||\n            search?.recipientname ||\n            search?.unread ||\n            search?.withfilesonly ||\n            search?.maxtime,\n    );\n\n    $: searchEnabled = Boolean(search?.content) || advancedEnabled;\n\n    $: submitEnabled = Boolean(\n        content.trim() ||\n            sendername.trim() ||\n            recipientname.trim() ||\n            unread ||\n            withfilesonly ||\n            maxtime,\n    );\n\n    $: searchFields = [\n        { label: '', value: content },\n        { label: $store.strings.from, value: sendername },\n        { label: $store.strings.to, value: recipientname },\n        {\n            label: $store.strings.date,\n            value: maxtime > 0 ? new Date(maxtime * 1000).toLocaleDateString() : '',\n        },\n        { label: $store.strings.unreadonly, value: unread },\n        { label: $store.strings.hasattachments, value: withfilesonly },\n    ].filter(({ value }) => Boolean(value));\n\n    const startEntering = async () => {\n        entering = true;\n        if (advancedEnabled) {\n            advancedExpanded = true;\n        }\n        await tick();\n        inputNode.focus();\n    };\n\n    const stopEntering = async () => {\n        entering = !searchEnabled;\n        advancedExpanded = false;\n        updateFields(search);\n    };\n\n    const toggleDropdown = async () => {\n        if (advancedExpanded) {\n            advancedExpanded = false;\n            await tick();\n            inputNode.focus();\n        } else {\n            advancedExpanded = true;\n            startEntering();\n            await tick();\n            advancedNode.focus();\n        }\n    };\n\n    const cancel = async () => {\n        entering = true;\n        advancedExpanded = false;\n        updateFields();\n        await store.navigate({\n            ...$store.params,\n            offset: undefined,\n            search: undefined,\n        });\n        await tick();\n        inputNode.focus();\n    };\n\n    const submit = async () => {\n        await store.navigate({\n            ...$store.params,\n            messageid: undefined,\n            offset: undefined,\n            search: advancedExpanded\n                ? {\n                      content: content.trim(),\n                      sendername: sendername.trim(),\n                      recipientname: recipientname.trim(),\n                      unread,\n                      withfilesonly,\n                      maxtime,\n                  }\n                : {\n                      content: content.trim(),\n                  },\n        });\n        advancedExpanded = false;\n        entering = false;\n    };\n\n    const handleKeypress = (event: KeyboardEvent) => {\n        if (event.key == 'Enter') {\n            event.preventDefault();\n            if (submitEnabled) {\n                submit();\n            } else {\n                cancel();\n            }\n        }\n    };\n\n    const handleIncrementalSearchClick = async (params: ViewParams) => {\n        await store.navigate(params);\n        advancedExpanded = false;\n        entering = false;\n    };\n</script>\n\n<form class=\"local-mail-search-box position-relative\" use:blur={stopEntering}>\n    <div\n        class=\"local-mail-search-box-icon position-absolute h-100 d-flex justify-content-center align-items-center px-0\"\n        style=\"top: 0; left: 0\"\n    >\n        <i class=\"fa fa-fw {loading ? 'fa-spinner fa-pulse' : 'fa-search'}\" aria-hidden=\"true\" />\n    </div>\n\n    {#if entering}\n        <input\n            type=\"text\"\n            class=\"local-mail-search-box-input form-control\"\n            class:local-mail-search-box-input-enabled={searchEnabled || submitEnabled}\n            placeholder={$store.strings.search}\n            aria-label={$store.strings.search}\n            autocomplete=\"off\"\n            bind:value={content}\n            bind:this={inputNode}\n            on:keypress={handleKeypress}\n        />\n    {:else}\n        <button\n            type=\"button\"\n            class=\"local-mail-search-box-input-enabled alert-primary form-control text-left text-truncate\"\n            on:click={startEntering}\n        >\n            {#each searchFields as { label, value }, i}\n                {#if i > 0}<span class=\"dimmed_text\">,&ensp;</span>{/if}\n                {#if value === true}\n                    <span class=\"dimmed_text\">{label}</span>\n                {:else}\n                    {#if label}<span class=\"dimmed_text\">{label}: </span>{/if}\n                    {value}\n                {/if}\n            {/each}\n        </button>\n    {/if}\n    <div class=\"position-absolute h-100 d-flex align-items-center\" style=\"top: 0; right: 0\">\n        {#if searchEnabled || submitEnabled}\n            <button\n                type=\"button\"\n                class=\"local-mail-search-box-icon btn px-0\"\n                title={$store.strings.clearsearch}\n                on:click|preventDefault={cancel}\n            >\n                <i class=\"fa fa-fw fa-times\" aria-hidden=\"true\" />\n            </button>\n        {/if}\n        <button\n            type=\"button\"\n            aria-expanded={advancedExpanded}\n            class=\"local-mail-search-box-icon btn px-0\"\n            title={$store.strings.searchoptions}\n            on:click|preventDefault={toggleDropdown}\n        >\n            <i\n                class=\"fa fa-fw {advancedExpanded ? 'fa-caret-up' : 'fa-sliders'}\"\n                aria-hidden=\"true\"\n            />\n        </button>\n    </div>\n    {#if advancedExpanded}\n        <SearchOptions\n            bind:this={advancedNode}\n            {store}\n            bind:sendername\n            bind:recipientname\n            bind:unread\n            bind:withfilesonly\n            bind:maxtime\n            {submit}\n            {submitEnabled}\n        />\n    {/if}\n    {#if $store.settings.incrementalsearch}\n        <IncrementalSearch\n            {store}\n            enabled={entering && !advancedExpanded && !!content.trim()}\n            {content}\n            bind:loading\n            onClick={handleIncrementalSearchClick}\n        />\n    {/if}\n</form>\n\n<style global>\n    .local-mail-search-box {\n        width: 100%;\n        max-width: 100%;\n    }\n    .local-mail-search-box-input {\n        padding-left: 2.5rem;\n        padding-right: 2.5rem;\n    }\n    .local-mail-search-box-input-enabled {\n        padding-left: 2.5rem;\n        padding-right: 5rem;\n    }\n    .local-mail-search-box-icon {\n        width: 2.5rem;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { flip } from 'svelte/animate';\n    import { fly } from 'svelte/transition';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n</script>\n\n<div\n    aria-live=\"polite\"\n    aria-atomic=\"true\"\n    class=\"local-mail-toasts position-fixed d-flex flex-column-reverse p-3\"\n>\n    {#each $store.toasts as toast (toast)}\n        <div\n            animate:flip\n            in:fly|global={{ y: 50, delay: 200 }}\n            out:fly|global={{ y: 50, duration: 400 }}\n            class=\"toast mt-2 mb-0\"\n            role=\"alert\"\n            aria-live=\"assertive\"\n            aria-atomic=\"true\"\n            data-autohide=\"false\"\n        >\n            <div class=\"toast-body d-flex align-items-center p-2\">\n                <div class=\"px-1 mr-auto\">{toast.text}</div>\n                {#if toast.undo}\n                    <button\n                        type=\"button\"\n                        class=\"local-mail-toast-undo btn font-weight-bold px-2 py-0 ml-3\"\n                        on:click={() => store.undo(toast)}\n                    >\n                        {$store.strings.undo}\n                    </button>\n                {/if}\n\n                <button\n                    type=\"button\"\n                    class=\"btn px-2 py-0 ml-2 text-white-50\"\n                    title={$store.strings.close}\n                    on:click={() => store.hideToast(toast)}\n                >\n                    <i class=\"fa fa-times\" />\n                </button>\n            </div>\n        </div>\n    {/each}\n</div>\n\n<style global>\n    .local-mail-toasts {\n        left: 0;\n        bottom: 0;\n        z-index: 1100;\n        pointer-events: none;\n    }\n\n    .local-mail-toasts .toast {\n        opacity: 1;\n        pointer-events: auto;\n        flex-basis: 0;\n        max-width: 400px;\n    }\n\n    .local-mail-toast-undo {\n        color: var(--activitycontent);\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n</script>\n\n<button\n    type=\"button\"\n    class=\"local-mail-back-button btn btn-secondary\"\n    title={$store.strings.messagelist}\n    on:click={() => store.navigateToList()}\n>\n    <i class=\"fa fa fa-fw fa-arrow-left\" />\n</button>\n\n<style global>\n    .local-mail-back-button {\n        margin-right: 13px;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { blur } from '../actions/blur';\n    import type { SelectAllType } from '../lib/state';\n    import type { Store } from '../lib/store';\n\n    export let store: Store;\n\n    let expanded = false;\n\n    const closeMenu = () => {\n        expanded = false;\n    };\n\n    const toggleMenu = () => {\n        expanded = !expanded;\n    };\n\n    const selectAll = (type: SelectAllType) => {\n        closeMenu();\n        store.selectAll(type);\n    };\n\n    $: iconClass =\n        $store.selectedMessages.size == 0\n            ? 'fa-square-o'\n            : $store.selectedMessages.size < $store.listMessages.length\n            ? 'fa-minus-square-o'\n            : 'fa-check-square-o';\n</script>\n\n<div class=\"btn-group\" role=\"group\" use:blur={closeMenu}>\n    <button\n        class=\"btn btn-secondary dropdown-toggle\"\n        aria-expanded={expanded}\n        title={$store.strings.select}\n        on:click={toggleMenu}\n    >\n        <i class=\"fa fa-fw {iconClass}\" />\n    </button>\n    {#if expanded}\n        <div class=\"dropdown-menu show\">\n            <button type=\"button\" class=\"dropdown-item\" on:click={() => selectAll('all')}>\n                {$store.strings.all}\n            </button>\n            <button type=\"button\" class=\"dropdown-item\" on:click={() => selectAll('none')}>\n                {$store.strings.none}\n            </button>\n            <button type=\"button\" class=\"dropdown-item\" on:click={() => selectAll('read')}>\n                {$store.strings.read}\n            </button>\n            <button type=\"button\" class=\"dropdown-item\" on:click={() => selectAll('unread')}>\n                {$store.strings.unread}\n            </button>\n            <button type=\"button\" class=\"dropdown-item\" on:click={() => selectAll('starred')}>\n                {$store.strings.starred}\n            </button>\n            <button type=\"button\" class=\"dropdown-item\" on:click={() => selectAll('unstarred')}>\n                {$store.strings.unstarred}\n            </button>\n        </div>\n    {/if}\n</div>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { ViewportSize } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import BackButton from './BackButton.svelte';\n    import CourseSelect from './CourseSelect.svelte';\n    import DeleteButton from './DeleteButton.svelte';\n    import DeleteForeverButton from './DeleteForeverButton.svelte';\n    import LabelsButton from './LabelsButton.svelte';\n    import MoreActionsButton from './MoreActionsButton.svelte';\n    import PagingButtons from './PagingButtons.svelte';\n    import RestoreButton from './RestoreButton.svelte';\n    import SelectAllButton from './SelectAllButton.svelte';\n    import SendButton from './SendButton.svelte';\n\n    export let store: Store;\n</script>\n\n<div role=\"toolbar\" class=\"local-mail-toolbar d-flex w-100\">\n    {#if $store.message}\n        <BackButton {store} />\n    {:else}\n        <SelectAllButton {store} />\n    {/if}\n\n    {#if $store.viewportSize >= ViewportSize.MD}\n        <div class=\"btn-group\" role=\"group\">\n            {#if $store.params.tray == 'trash'}\n                <RestoreButton {store} />\n                <DeleteForeverButton {store} />\n            {:else}\n                <LabelsButton {store} />\n                <DeleteButton {store} />\n            {/if}\n            <MoreActionsButton {store} />\n        </div>\n    {/if}\n    {#if !$store.message?.draft && ['shortname', 'fullname'].includes($store.settings.filterbycourse) && $store.viewportSize < ViewportSize.LG}\n        <div\n            class=\"d-flex flex-grow-1 ml-auto mr-0 ml-md-0 mr-md-auto\"\n            style=\"max-width: 20rem; min-width: 0\"\n        >\n            <CourseSelect\n                settings={$store.settings}\n                strings={$store.strings}\n                courses={$store.courses}\n                label={$store.strings.allcourses}\n                selected={$store.params.courseid}\n                readonly={$store.params.tray == 'course'}\n                onChange={(id) => store.selectCourse(id)}\n                primary={true}\n                style={$store.viewportSize >= ViewportSize.MD ? 'filter-left' : 'filter-right'}\n            />\n        </div>\n    {/if}\n\n    {#if $store.viewportSize >= ViewportSize.MD}\n        <PagingButtons {store} />\n    {:else if $store.message?.draft}\n        <SendButton {store} />\n    {/if}\n</div>\n\n<style global>\n    .local-mail-toolbar {\n        column-gap: 1rem;\n    }\n</style>\n","<!--\nSPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n\nSPDX-License-Identifier: GPL-3.0-or-later\n-->\n<svelte:options immutable={true} />\n\n<script lang=\"ts\">\n    import { onMount, afterUpdate } from 'svelte';\n    import { ViewportSize } from '../lib/state';\n    import type { Store } from '../lib/store';\n    import { getViewParamsFromUrl } from '../lib/url';\n    import ComposeButton from './ComposeButton.svelte';\n    import ErrorModal from './ErrorModal.svelte';\n    import BottomToolBar from './BottomToolBar.svelte';\n    import List from './List.svelte';\n    import Menu from './Menu.svelte';\n    import Message from './Message.svelte';\n    import DraftForm from './DraftForm.svelte';\n    import PerPageSelect from './PerPageSelect.svelte';\n    import PreferencesButton from './PreferencesButton.svelte';\n    import PreferencesDialog from './PreferencesDialog.svelte';\n    import SearchBox from './SearchBox.svelte';\n    import Toasts from './Toasts.svelte';\n    import TopToolBar from './TopToolBar.svelte';\n\n    export let store: Store;\n\n    let viewNode: HTMLElement;\n    let prevNavigationId = 0;\n\n    $: tray = $store.params.tray;\n\n    $: heading =\n        tray == 'inbox'\n            ? $store.strings.inbox\n            : tray == 'starred'\n            ? $store.strings.starredplural\n            : tray == 'sent'\n            ? $store.strings.sentplural\n            : tray == 'drafts'\n            ? $store.strings.drafts\n            : tray == 'trash'\n            ? $store.strings.trash\n            : tray == 'label'\n            ? $store.labels.find((l) => l.id == $store.params.labelid)?.name || ''\n            : tray == 'course'\n            ? $store.courses.find((c) => c.id == $store.params.courseid)?.fullname || ''\n            : '';\n\n    $: title = $store.message ? $store.message.subject.trim() || $store.strings.nosubject : heading;\n\n    $: mobileTitle =\n        $store.viewportSize < ViewportSize.LG ? heading || $store.strings.pluginname : '';\n\n    $: window.parent?.postMessage(\n        {\n            addon: 'local_mail',\n            setTitle: mobileTitle,\n            captureBack: tray != null,\n        },\n        '*',\n    );\n\n    onMount(() => {\n        store.setViewportSize(window.innerWidth);\n    });\n\n    afterUpdate(() => {\n        if (prevNavigationId != $store.navigationId) {\n            prevNavigationId = $store.navigationId;\n            let parent = viewNode.parentElement;\n            while (parent) {\n                if (parent.scrollTop > 0) {\n                    parent.scrollTo({ top: 0 });\n                }\n                parent = parent.parentElement;\n            }\n        }\n    });\n\n    const handleBeforeUnload = (event: Event) => {\n        if ($store.draftData) {\n            event.preventDefault();\n            store.updateDraft($store.draftData, true);\n            return '';\n        }\n    };\n\n    const handleMessage = (event: MessageEvent) => {\n        if ($store.mobile && event.data.addon == 'local_mail' && event.data.backClicked) {\n            store.navigateToMenu();\n        }\n    };\n\n    const handleClick = (event: Event) => {\n        if ($store.mobile && !event.defaultPrevented && event.target instanceof HTMLElement) {\n            const link = event.target.closest('a');\n            if (link) {\n                window.parent?.postMessage({ addon: 'local_mail', openUrl: link.href }, '*');\n            }\n            if (!event.defaultPrevented) {\n                event.preventDefault();\n            }\n        }\n    };\n</script>\n\n<svelte:window\n    on:resize={() => store.setViewportSize(window.innerWidth)}\n    on:popstate={() => store.navigate(getViewParamsFromUrl())}\n    on:beforeunload={handleBeforeUnload}\n    on:message={handleMessage}\n/>\n\n<svelte:document on:click={$store.mobile ? handleClick : undefined} />\n\n<svelte:head>\n    <title>{title} - {$store.strings.pluginname}</title>\n</svelte:head>\n\n<div\n    class=\"local-mail local-mail-view container-fluid pt-2\"\n    class:p-4={!$store.mobile}\n    class:local-mail-loading={$store.loading}\n    bind:this={viewNode}\n>\n    <!-- Heading / search / compose button -->\n    <div class=\"row align-items-center\">\n        {#if $store.mobile && $store.viewportSize < ViewportSize.LG}\n            <div class=\"local-mail-view-side-column\" />\n        {:else}\n            <h1 class=\"h2 local-mail-view-side-column text-truncate mb-4\">\n                {$store.strings.pluginname}\n                {#if heading && $store.viewportSize < ViewportSize.LG}\n                    <i class=\"fa fa-angle-right mx-1\" aria-hidden=\"true\" />\n                    {heading}\n                {/if}\n            </h1>\n        {/if}\n\n        <div\n            class=\"local-mail-view-main-column d-flex mb-3\"\n            class:mb-4={$store.viewportSize >= ViewportSize.LG}\n        >\n            {#if tray}\n                <div class=\"local-mail-view-search\">\n                    <SearchBox {store} />\n                </div>\n            {/if}\n            {#if $store.viewportSize < ViewportSize.LG}\n                <ComposeButton\n                    strings={$store.strings}\n                    iconOnly={tray && $store.viewportSize < ViewportSize.SM}\n                    onClick={() => store.createMessage()}\n                />\n                {#if !tray}\n                    <div class=\"ml-auto\">\n                        <PreferencesButton\n                            strings={$store.strings}\n                            onClick={() => store.showDialog('preferences')}\n                        />\n                    </div>\n                {/if}\n            {/if}\n        </div>\n    </div>\n\n    <!-- Toolbar -->\n    {#if tray || $store.viewportSize >= ViewportSize.LG}\n        <div class=\"row mb-3\">\n            {#if $store.viewportSize >= ViewportSize.LG}\n                <div class=\"local-mail-view-side-column\">\n                    <ComposeButton strings={$store.strings} onClick={() => store.createMessage()} />\n                </div>\n            {/if}\n            {#if tray}\n                <div class=\"local-mail-view-main-column d-flex\">\n                    <TopToolBar {store} />\n                </div>\n            {/if}\n        </div>\n    {/if}\n\n    <!-- List / Messaege -->\n    <div class=\"row mb-3\">\n        {#if !tray || $store.viewportSize >= ViewportSize.LG}\n            <div class=\"local-mail-view-side-column\">\n                <Menu\n                    settings={$store.settings}\n                    strings={$store.strings}\n                    courses={$store.courses}\n                    labels={$store.labels}\n                    params={$store.params}\n                    onClick={store.navigate}\n                    onCourseChange={store.selectCourse}\n                />\n            </div>\n        {/if}\n        {#if tray}\n            <div class=\"local-mail-view-main-column\">\n                {#if $store.message?.draft && $store.draftForm}\n                    <DraftForm {store} message={$store.message} form={$store.draftForm} />\n                {:else if $store.message}\n                    <Message {store} message={$store.message} />\n                {:else}\n                    <List {store} />\n\n                    <PerPageSelect {store} />\n                {/if}\n            </div>\n        {/if}\n    </div>\n\n    {#if tray && $store.viewportSize < ViewportSize.MD}\n        <BottomToolBar {store} />\n    {/if}\n\n    {#if $store.params.dialog == 'preferences'}\n        <PreferencesDialog {store} onCancel={() => store.hideDialog()} />\n    {/if}\n\n    <Toasts {store} />\n    <ErrorModal {store} />\n</div>\n\n<style global>\n    .local-mail-view {\n        max-width: 100rem;\n    }\n\n    .local-mail-view-main-column {\n        padding-right: 15px;\n        padding-left: 15px;\n        flex-basis: 100%;\n        flex-grow: 1;\n        min-width: 0;\n        column-gap: 1rem;\n    }\n\n    .local-mail-view-side-column {\n        padding-right: 15px;\n        padding-left: 15px;\n        flex-basis: 100%;\n        flex-grow: 1;\n        min-width: 0;\n    }\n\n    .local-mail-view-search {\n        flex-grow: 1;\n        margin-right: auto;\n    }\n\n    .local-mail-loading * {\n        cursor: wait;\n    }\n\n    @media (min-width: 992px) {\n        .local-mail-view-main-column {\n            flex-basis: 75%;\n            flex-shrink: 1;\n        }\n        .local-mail-view-side-column {\n            flex-basis: 25%;\n            flex-shrink: 1;\n            max-width: 18rem;\n        }\n        .local-mail-view-search {\n            max-width: 30rem;\n        }\n    }\n</style>\n","import {\n\trun_all,\n\tsubscribe,\n\tnoop,\n\tsafe_not_equal,\n\tis_function,\n\tget_store_value\n} from '../internal/index.js';\n\nconst subscriber_queue = [];\n\n/**\n * Creates a `Readable` store that allows reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#readable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readable(value, start) {\n\treturn {\n\t\tsubscribe: writable(value, start).subscribe\n\t};\n}\n\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n *\n * https://svelte.dev/docs/svelte-store#writable\n * @template T\n * @param {T} [value] initial value\n * @param {import('./public.js').StartStopNotifier<T>} [start]\n * @returns {import('./public.js').Writable<T>}\n */\nexport function writable(value, start = noop) {\n\t/** @type {import('./public.js').Unsubscriber} */\n\tlet stop;\n\t/** @type {Set<import('./private.js').SubscribeInvalidateTuple<T>>} */\n\tconst subscribers = new Set();\n\t/** @param {T} new_value\n\t * @returns {void}\n\t */\n\tfunction set(new_value) {\n\t\tif (safe_not_equal(value, new_value)) {\n\t\t\tvalue = new_value;\n\t\t\tif (stop) {\n\t\t\t\t// store is ready\n\t\t\t\tconst run_queue = !subscriber_queue.length;\n\t\t\t\tfor (const subscriber of subscribers) {\n\t\t\t\t\tsubscriber[1]();\n\t\t\t\t\tsubscriber_queue.push(subscriber, value);\n\t\t\t\t}\n\t\t\t\tif (run_queue) {\n\t\t\t\t\tfor (let i = 0; i < subscriber_queue.length; i += 2) {\n\t\t\t\t\t\tsubscriber_queue[i][0](subscriber_queue[i + 1]);\n\t\t\t\t\t}\n\t\t\t\t\tsubscriber_queue.length = 0;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * @param {import('./public.js').Updater<T>} fn\n\t * @returns {void}\n\t */\n\tfunction update(fn) {\n\t\tset(fn(value));\n\t}\n\n\t/**\n\t * @param {import('./public.js').Subscriber<T>} run\n\t * @param {import('./private.js').Invalidator<T>} [invalidate]\n\t * @returns {import('./public.js').Unsubscriber}\n\t */\n\tfunction subscribe(run, invalidate = noop) {\n\t\t/** @type {import('./private.js').SubscribeInvalidateTuple<T>} */\n\t\tconst subscriber = [run, invalidate];\n\t\tsubscribers.add(subscriber);\n\t\tif (subscribers.size === 1) {\n\t\t\tstop = start(set, update) || noop;\n\t\t}\n\t\trun(value);\n\t\treturn () => {\n\t\t\tsubscribers.delete(subscriber);\n\t\t\tif (subscribers.size === 0 && stop) {\n\t\t\t\tstop();\n\t\t\t\tstop = null;\n\t\t\t}\n\t\t};\n\t}\n\treturn { set, update, subscribe };\n}\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>, set: (value: T) => void, update: (fn: import('./public.js').Updater<T>) => void) => import('./public.js').Unsubscriber | void} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * Derived value store by synchronizing one or more readable stores and\n * applying an aggregation function over its input values.\n *\n * https://svelte.dev/docs/svelte-store#derived\n * @template {import('./private.js').Stores} S\n * @template T\n * @overload\n * @param {S} stores - input stores\n * @param {(values: import('./private.js').StoresValues<S>) => T} fn - function callback that aggregates the values\n * @param {T} [initial_value] - initial value\n * @returns {import('./public.js').Readable<T>}\n */\n\n/**\n * @template {import('./private.js').Stores} S\n * @template T\n * @param {S} stores\n * @param {Function} fn\n * @param {T} [initial_value]\n * @returns {import('./public.js').Readable<T>}\n */\nexport function derived(stores, fn, initial_value) {\n\tconst single = !Array.isArray(stores);\n\t/** @type {Array<import('./public.js').Readable<any>>} */\n\tconst stores_array = single ? [stores] : stores;\n\tif (!stores_array.every(Boolean)) {\n\t\tthrow new Error('derived() expects stores as input, got a falsy value');\n\t}\n\tconst auto = fn.length < 2;\n\treturn readable(initial_value, (set, update) => {\n\t\tlet started = false;\n\t\tconst values = [];\n\t\tlet pending = 0;\n\t\tlet cleanup = noop;\n\t\tconst sync = () => {\n\t\t\tif (pending) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tcleanup();\n\t\t\tconst result = fn(single ? values[0] : values, set, update);\n\t\t\tif (auto) {\n\t\t\t\tset(result);\n\t\t\t} else {\n\t\t\t\tcleanup = is_function(result) ? result : noop;\n\t\t\t}\n\t\t};\n\t\tconst unsubscribers = stores_array.map((store, i) =>\n\t\t\tsubscribe(\n\t\t\t\tstore,\n\t\t\t\t(value) => {\n\t\t\t\t\tvalues[i] = value;\n\t\t\t\t\tpending &= ~(1 << i);\n\t\t\t\t\tif (started) {\n\t\t\t\t\t\tsync();\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\t() => {\n\t\t\t\t\tpending |= 1 << i;\n\t\t\t\t}\n\t\t\t)\n\t\t);\n\t\tstarted = true;\n\t\tsync();\n\t\treturn function stop() {\n\t\t\trun_all(unsubscribers);\n\t\t\tcleanup();\n\t\t\t// We need to set this to false because callbacks can still happen despite having unsubscribed:\n\t\t\t// Callbacks might already be placed in the queue which doesn't know it should no longer\n\t\t\t// invoke this derived store.\n\t\t\tstarted = false;\n\t\t};\n\t});\n}\n\n/**\n * Takes a store and returns a new one derived from the old one that is readable.\n *\n * https://svelte.dev/docs/svelte-store#readonly\n * @template T\n * @param {import('./public.js').Readable<T>} store  - store to make readonly\n * @returns {import('./public.js').Readable<T>}\n */\nexport function readonly(store) {\n\treturn {\n\t\tsubscribe: store.subscribe.bind(store)\n\t};\n}\n\nexport { get_store_value as get };\n","/*\n * SPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n *\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\n\nimport { writable } from 'svelte/store';\nimport {\n    callServices,\n    type CountMessagesResponse,\n    type CreateLabelRequest,\n    type CreateMessageRequest,\n    type DeleteLabelRequest,\n    type EmptyTrashRequest,\n    type ForwardMessageRequest,\n    type GetCoursesResponse,\n    type GetLabelsResponse,\n    type GetMessageFormeResponse,\n    type GetMessageResponse,\n    type MessageQuery,\n    type ReplyMessageRequest,\n    type SearchMessagesResponse,\n    type ServiceRequest,\n    type SetDeletedRequest,\n    type SetLabelsRequest,\n    type SetPreferencesRequest,\n    type SetStarredRequest,\n    type SetUnreadRequest,\n    type UpdateLabelRequest,\n} from './services';\nimport {\n    DeletedStatus,\n    ViewportSize,\n    type Dialog,\n    type InitialData,\n    type Message,\n    type MessageData,\n    type MessageForm,\n    type MessageSummary,\n    type SelectAllType,\n    type ServiceError,\n    type State,\n    type Toast,\n    type ViewParams,\n    type Preferences,\n} from './state';\nimport { getViewParamsFromUrl, setUrlFromViewParams } from './url';\nimport { replaceStringParams } from './utils';\n\nexport type Store = Awaited<ReturnType<typeof createStore>>;\n\nexport async function createStore(data: InitialData) {\n    let currentActionId = 0;\n    let draftTimeoutId = 0;\n\n    let state: State = {\n        /* Info */\n        userid: data.userid,\n        settings: data.settings,\n        preferences: data.preferences,\n        strings: data.strings,\n        mobile: data.mobile,\n\n        /* URL parameters */\n        params: {},\n\n        /* Data */\n        unread: 0,\n        drafts: 0,\n        courses: [],\n        labels: [],\n        totalCount: 0,\n        listMessages: [],\n\n        /* Transient */\n        loading: true,\n        selectedMessages: new Map(),\n        toasts: [],\n        navigationId: 0,\n        viewportSize: 0,\n    };\n\n    const { subscribe, set } = writable<State>(state);\n\n    const patch = (update: Partial<State>) => set({ ...state, ...update });\n\n    subscribe((newState) => {\n        state = newState;\n    });\n\n    const callServicesAndRefresh = async (\n        requests: ServiceRequest[],\n        newParams?: ViewParams,\n        redirect = false,\n    ): Promise<unknown[]> => {\n        const actionId = ++currentActionId;\n\n        const messageid = state.message?.id;\n        const draftData = state.draftData;\n        const params = newParams || state.params;\n        const prevParams =\n            !redirect &&\n            (params.tray != state.params.tray ||\n                params.messageid != state.params.messageid ||\n                params.courseid != state.params.courseid ||\n                params.labelid != state.params.labelid ||\n                params.search != state.params.search)\n                ? { ...state.params, dialog: undefined }\n                : state.prevParams;\n        const perpage = state.preferences.perpage;\n\n        patch({ loading: true, error: undefined });\n\n        setUrlFromViewParams(params, redirect);\n\n        // Save draft.\n        if (messageid && draftData) {\n            window.clearTimeout(draftTimeoutId);\n            requests.unshift({\n                methodname: 'update_message',\n                messageid,\n                data: draftData,\n            });\n        }\n\n        // Courses.\n        requests.push({\n            methodname: 'get_courses',\n        });\n\n        // Labels.\n        requests.push({\n            methodname: 'get_labels',\n        });\n\n        if (params.tray) {\n            const query: MessageQuery = {\n                courseid: params.courseid,\n                labelid: params.tray == 'label' ? params.labelid : undefined,\n                draft: params.tray == 'drafts' ? true : params.tray == 'sent' ? false : undefined,\n                roles:\n                    params.tray == 'inbox'\n                        ? ['to', 'cc', 'bcc']\n                        : params.tray == 'sent'\n                        ? ['from']\n                        : undefined,\n                starred: params.tray == 'starred' ? true : undefined,\n                deleted: params.tray == 'trash',\n            };\n\n            // Total count of messages.\n            requests.push({\n                methodname: 'count_messages',\n                query,\n            });\n\n            if (params.messageid) {\n                // Full message.\n                requests.push({\n                    methodname: 'get_message',\n                    messageid: params.messageid,\n                });\n\n                // Next message.\n                requests.push({\n                    methodname: 'search_messages',\n                    query: {\n                        ...query,\n                        ...params.search,\n                        startid: params.messageid,\n                        reverse: false,\n                    },\n                    limit: 1,\n                });\n\n                // Previous message.\n                requests.push({\n                    methodname: 'search_messages',\n                    query: {\n                        ...query,\n                        ...params.search,\n                        startid: params.messageid,\n                        reverse: true,\n                    },\n                    limit: 1,\n                });\n\n                if (!params.search) {\n                    // Offset of the message.\n                    requests.push({\n                        methodname: 'count_messages',\n                        query: {\n                            ...query,\n                            startid: params.messageid,\n                            reverse: true,\n                        },\n                    });\n                }\n            } else {\n                // List of messages.\n                requests.push({\n                    methodname: 'search_messages',\n                    query: { ...query, ...params.search },\n                    offset: params.search ? undefined : params.offset,\n                    limit: params.search ? perpage + 1 : perpage,\n                });\n            }\n        }\n\n        let responses: unknown[];\n        try {\n            responses = await callServices(requests);\n        } catch (error) {\n            setError(error as ServiceError);\n            return [];\n        }\n\n        let message: Message | undefined;\n        let messageOffset: CountMessagesResponse | undefined;\n        let nextMessageId: number | undefined;\n        let prevMessageId: number | undefined;\n        let listMessages: ReadonlyArray<MessageSummary> = [];\n        let totalCount: CountMessagesResponse = 0;\n\n        if (params.tray) {\n            if (params.messageid) {\n                if (!params.search) {\n                    messageOffset = responses.pop() as CountMessagesResponse;\n                }\n                prevMessageId = (responses.pop() as SearchMessagesResponse)[0]?.id;\n                nextMessageId = (responses.pop() as SearchMessagesResponse)[0]?.id;\n                message = responses.pop() as GetMessageResponse;\n            } else {\n                listMessages = responses.pop() as SearchMessagesResponse;\n                if (params.search) {\n                    if (params.search.reverse) {\n                        prevMessageId = listMessages[perpage]?.id;\n                        nextMessageId = params.search.startid;\n                        listMessages = listMessages.slice(0, perpage).reverse();\n                    } else {\n                        prevMessageId = params.search.startid;\n                        nextMessageId = listMessages[perpage]?.id;\n                        listMessages = listMessages.slice(0, perpage);\n                    }\n                }\n            }\n            totalCount = responses.pop() as CountMessagesResponse;\n        }\n\n        const labels = responses.pop() as GetLabelsResponse;\n        const courses = responses.pop() as GetCoursesResponse;\n        if (messageid && draftData) {\n            responses.shift();\n        }\n\n        // Check if the course or label exists.\n        if (\n            (params.tray == 'course' && !courses.find((c) => c.id == params.courseid)) ||\n            (params.tray == 'label' && !labels.find((l) => l.id == params.labelid))\n        ) {\n            await navigate({ tray: 'inbox' }, true);\n            return responses;\n        }\n\n        // Fetch form if message is a draft.\n        let draftForm: MessageForm | undefined;\n        if (message?.draft && message?.id != messageid) {\n            const draftRequests: ServiceRequest[] = [\n                {\n                    methodname: 'get_message_form',\n                    messageid: message.id,\n                },\n            ];\n            let draftResponses: unknown[];\n            try {\n                draftResponses = await callServices(draftRequests);\n            } catch (error) {\n                setError(error as ServiceError);\n                return responses;\n            }\n            draftForm = draftResponses.pop() as GetMessageFormeResponse;\n        }\n\n        // Check if the user has done some other action during the web service calls.\n        if (actionId != currentActionId) {\n            return responses;\n        }\n\n        // Update state with fetched data.\n        patch({\n            params,\n            prevParams,\n            unread: courses.reduce((total, course) => total + course.unread, 0),\n            drafts: courses.reduce((total, course) => total + course.drafts, 0),\n            courses,\n            labels,\n            messageOffset,\n            totalCount,\n            listMessages,\n            message,\n            nextMessageId,\n            prevMessageId,\n            draftForm: message?.id != messageid ? draftForm : state.draftForm,\n            draftData: undefined,\n            draftSaved: message?.id == messageid ? draftData == null : false,\n            selectedMessages: new Map(\n                message\n                    ? [[message.id, message]]\n                    : state.message\n                    ? []\n                    : listMessages\n                          .filter((message) => state.selectedMessages.has(message.id))\n                          .map((message) => [message.id, message]),\n            ),\n            loading: false,\n            // Scroll to top and prevent animations if changing page.\n            navigationId:\n                redirect ||\n                params.tray != state.params.tray ||\n                params.courseid != state.params.courseid ||\n                params.labelid != state.params.labelid ||\n                params.messageid != state.params.messageid ||\n                params.offset != state.params.offset\n                    ? state.navigationId + 1\n                    : state.navigationId,\n        });\n\n        // Display draft saved notification if navigated to another page.\n        if (messageid && draftData && messageid != message?.id) {\n            showToast({ text: state.strings.draftsaved });\n        }\n\n        return responses;\n    };\n\n    const createLabel = async (name: string, color: string): Promise<number | undefined> => {\n        const request: CreateLabelRequest = {\n            methodname: 'create_label',\n            name,\n            color,\n        };\n\n        const responses = await callServicesAndRefresh([request]);\n\n        return responses.pop() as number | undefined;\n    };\n\n    const createMessage = async (courseid?: number) => {\n        courseid = courseid || state.params.courseid || state.courses[0].id;\n\n        const request: CreateMessageRequest = {\n            methodname: 'create_message',\n            courseid,\n        };\n\n        let responses: unknown[];\n        try {\n            responses = await callServices([request]);\n        } catch (error) {\n            setError(error as ServiceError);\n            return;\n        }\n\n        await navigate({\n            tray: 'drafts',\n            messageid: responses.pop() as number,\n            courseid,\n        });\n    };\n\n    const deleteLabel = async (labelid: number) => {\n        const request: DeleteLabelRequest = {\n            methodname: 'delete_label',\n            labelid,\n        };\n        await callServicesAndRefresh([request], { tray: 'inbox' });\n    };\n\n    const emptyTrash = async (courseid?: number) => {\n        const request: EmptyTrashRequest = {\n            methodname: 'empty_trash',\n            courseid,\n        };\n        await callServicesAndRefresh([request]);\n    };\n\n    const forward = async (message: Message) => {\n        const oldParams = state.params;\n\n        const request: ForwardMessageRequest = {\n            methodname: 'forward_message',\n            messageid: message.id,\n        };\n\n        const responses = await callServicesAndRefresh([request]);\n\n        await navigate({\n            tray: 'drafts',\n            messageid: responses.pop() as number,\n            courseid: oldParams.courseid ? message.course.id : undefined,\n        });\n    };\n\n    const hideDialog = () => {\n        const newParams: ViewParams = { ...state.params, dialog: undefined };\n        patch({ params: newParams });\n        setUrlFromViewParams(newParams, true);\n    };\n\n    const hideToast = (toast: Toast) => {\n        patch({ toasts: state.toasts.filter((t) => t != toast) });\n    };\n\n    const navigate = async (params?: ViewParams, redirect = false, init = true) => {\n        const requests: ServiceRequest[] = [];\n\n        if (init && state.settings.incrementalsearch) {\n            requests.push({\n                methodname: 'search_messages',\n                query: { deleted: false },\n                offset: state.settings.incrementalsearchlimit,\n                limit: 1,\n            });\n        }\n\n        if (params?.messageid) {\n            requests.push({\n                methodname: 'view_message',\n                messageid: params.messageid,\n            });\n        }\n\n        const responses = await callServicesAndRefresh(requests, params, redirect);\n\n        if (init && state.settings.incrementalsearch) {\n            const messages = responses.pop() as MessageSummary[] | undefined;\n            patch({ incrementalSearchStopId: messages?.[0]?.id });\n        }\n    };\n\n    const navigateToList = async (redirect = false) => {\n        const params: ViewParams = {\n            ...state.params,\n            messageid: undefined,\n            offset:\n                Math.floor((state.params.offset || 0) / state.preferences.perpage) *\n                    state.preferences.perpage || undefined,\n        };\n\n        await callServicesAndRefresh([], params, redirect);\n    };\n\n    const navigateToMenu = async () => {\n        await callServicesAndRefresh([], {});\n    };\n\n    const reply = async (message: Message, all: boolean) => {\n        const oldParams = state.params;\n\n        const request: ReplyMessageRequest = {\n            methodname: 'reply_message',\n            messageid: message.id,\n            all,\n        };\n\n        const responses = await callServicesAndRefresh([request]);\n\n        await navigate({\n            tray: 'drafts',\n            messageid: responses.pop() as number,\n            courseid: oldParams.courseid ? message.course.id : undefined,\n        });\n    };\n\n    const savePreferences = async (preferences: Partial<Preferences>) => {\n        patch({ preferences: { ...state.preferences, ...preferences } });\n        let newParams = state.params;\n        if (preferences.perpage) {\n            newParams = {\n                ...newParams,\n                offset: state.params.offset\n                    ? Math.trunc(state.params.offset / preferences.perpage) * preferences.perpage\n                    : undefined,\n            };\n        }\n        const request: SetPreferencesRequest = {\n            methodname: 'set_preferences',\n            preferences,\n        };\n        await callServicesAndRefresh([request], newParams, true);\n    };\n\n    const selectAll = (type: SelectAllType) => {\n        patch({\n            selectedMessages: new Map(\n                state.listMessages\n                    .filter(\n                        (message) =>\n                            type == 'all' ||\n                            (type == 'read' && !message.unread) ||\n                            (type == 'unread' && message.unread) ||\n                            (type == 'starred' && message.starred) ||\n                            (type == 'unstarred' && !message.starred),\n                    )\n                    .map((message) => [message.id, message]),\n            ),\n        });\n    };\n\n    const selectCourse = async (id?: number) => {\n        await navigate({\n            ...state.params,\n            courseid: id,\n            offset: 0,\n            messageid: undefined,\n            search: state.params.search\n                ? { ...state.params.search, startid: undefined, reverse: undefined }\n                : undefined,\n        });\n    };\n\n    const sendMessage = async () => {\n        if (!state.message?.draft) {\n            return;\n        }\n\n        const request: ServiceRequest = {\n            methodname: 'send_message',\n            messageid: state.message.id,\n        };\n\n        const newParams: ViewParams = state.prevParams\n            ? {\n                  ...state.prevParams,\n                  messageid: undefined,\n                  offset:\n                      Math.floor((state.prevParams.offset || 0) / state.preferences.perpage) *\n                          state.preferences.perpage || undefined,\n              }\n            : ['shortname', 'fullname'].includes(state.settings.filterbycourse)\n            ? { tray: 'inbox', courseid: state.message.course.id }\n            : { tray: 'course', courseid: state.message.course.id };\n        await callServicesAndRefresh([request], newParams);\n\n        showToast({ text: state.strings.messagesent });\n    };\n\n    const setDeleted = async (\n        ids: ReadonlyArray<number>,\n        deleted: DeletedStatus,\n        allowUndo: boolean,\n    ) => {\n        const requests = ids.map(\n            (id): SetDeletedRequest => ({\n                methodname: 'set_deleted',\n                messageid: id,\n                deleted,\n            }),\n        );\n\n        // Redirect if deleting message in single view.\n        const params: ViewParams = { ...state.params, messageid: undefined };\n        await callServicesAndRefresh(requests, params, true);\n\n        if (deleted != DeletedStatus.DeletedForever) {\n            const string = deleted\n                ? ids.length > 1\n                    ? 'messagesmovedtotrash'\n                    : 'messagemovedtotrash'\n                : ids.length > 1\n                ? 'messagesrestored'\n                : 'messagerestored';\n            const text = replaceStringParams(state.strings[string], ids.length);\n            const undo = () => {\n                setDeleted(ids, deleted ? DeletedStatus.NotDeleted : DeletedStatus.Deleted, false);\n            };\n            showToast({ text, undo: allowUndo ? undo : undefined });\n        }\n    };\n\n    const setError = async (error?: ServiceError) => {\n        patch({ loading: state.loading && !error, error });\n    };\n\n    const setLabels = async (added: number[], removed: number[]) => {\n        updateMessages((message) => {\n            if (!state.selectedMessages.has(message.id)) {\n                return message;\n            }\n            return {\n                ...message,\n                labels: state.labels.filter((label) => {\n                    if (added.includes(label.id)) {\n                        return true;\n                    } else if (removed.includes(label.id)) {\n                        return false;\n                    } else {\n                        return message.labels.findIndex((l) => l.id == label.id) >= 0;\n                    }\n                }),\n            };\n        });\n\n        const requests: SetLabelsRequest[] = [];\n        state.selectedMessages.forEach((message) => {\n            requests.push({\n                methodname: 'set_labels',\n                messageid: message.id,\n                labelids: message.labels.map((label) => label.id),\n            });\n        });\n\n        await callServicesAndRefresh(requests);\n    };\n\n    const setStarred = async (messageids: ReadonlyArray<number>, starred: boolean) => {\n        updateMessages((message) =>\n            messageids.includes(message.id) ? { ...message, starred } : message,\n        );\n\n        const requests = messageids.map(\n            (messageid): SetStarredRequest => ({\n                methodname: 'set_starred',\n                messageid,\n                starred,\n            }),\n        );\n\n        await callServicesAndRefresh(requests);\n    };\n\n    const setUnread = async (messageids: ReadonlyArray<number>, unread: boolean) => {\n        updateMessages((message) =>\n            messageids.includes(message.id) ? { ...message, unread } : message,\n        );\n\n        const requests = messageids.map(\n            (messageid): SetUnreadRequest => ({\n                methodname: 'set_unread',\n                messageid,\n                unread,\n            }),\n        );\n\n        const params: ViewParams = { ...state.params, messageid: undefined };\n\n        await callServicesAndRefresh(requests, params);\n    };\n\n    const setViewportSize = (width: number) => {\n        patch({\n            viewportSize: width,\n            navigationId: state.navigationId + 1, // Prevent list animations.\n        });\n\n        // Redirect to inbox on large screens if no tray is specified.\n        if (!state.params.tray && width >= ViewportSize.LG && !state.error) {\n            navigate({ tray: 'inbox', dialog: state.params.dialog }, true);\n        }\n    };\n\n    const showDialog = async (dialog: Dialog) => {\n        const params: ViewParams = { ...state.params, dialog };\n        setUrlFromViewParams(params, state.params.dialog != null);\n        patch({ params });\n    };\n\n    const showToast = async (toast: Toast) => {\n        patch({ toasts: [toast] });\n        if (toast) {\n            window.setTimeout(() => hideToast(toast), 10000);\n        }\n    };\n\n    const toggleSelected = (id: number) => {\n        patch({\n            selectedMessages: new Map(\n                state.listMessages\n                    .filter((message) =>\n                        message.id == id\n                            ? !state.selectedMessages.has(message.id)\n                            : state.selectedMessages.has(message.id),\n                    )\n                    .map((message) => [message.id, message]),\n            ),\n        });\n    };\n\n    const undo = async (toast: Toast) => {\n        if (toast.undo) {\n            hideToast(toast);\n            toast.undo();\n        }\n    };\n\n    const updateDraft = (data: MessageData, force: boolean) => {\n        if (!state.message) {\n            return;\n        }\n\n        const actionId = ++currentActionId;\n        const message = state.message;\n        const prevData = state.draftData;\n        patch({ draftData: data, draftSaved: false });\n\n        let delay = 3000;\n        if (force) {\n            delay = 0;\n        } else if (prevData) {\n            delay = Math.max(0, message.time * 1000 + delay - Date.now());\n        }\n        window.clearTimeout(draftTimeoutId);\n\n        draftTimeoutId = window.setTimeout(async () => {\n            const requests: ServiceRequest[] = [\n                {\n                    methodname: 'update_message',\n                    messageid: message.id,\n                    data,\n                },\n                {\n                    methodname: 'get_message',\n                    messageid: message.id,\n                },\n            ];\n\n            let responses: unknown[];\n            try {\n                responses = await callServices(requests);\n            } catch (error) {\n                setError(error as ServiceError);\n                return;\n            }\n            const updatedMessage = responses.pop() as Message;\n            if (actionId == currentActionId) {\n                patch({\n                    message: updatedMessage,\n                    draftData: undefined,\n                    draftSaved: true,\n                });\n            }\n        }, delay);\n    };\n\n    const updateLabel = async (labelid: number, name: string, color: string) => {\n        const request: UpdateLabelRequest = {\n            methodname: 'update_label',\n            labelid,\n            name,\n            color,\n        };\n\n        await callServicesAndRefresh([request]);\n    };\n\n    const updateMessages = (callback: <T extends MessageSummary>(message: T) => T) => {\n        patch({\n            listMessages: state.listMessages.map((message) => callback(message)),\n            message: state.message ? callback(state.message) : undefined,\n            selectedMessages: new Map(\n                Array.from(state.selectedMessages.entries()).map(([id, message]) => [\n                    id,\n                    callback(message),\n                ]),\n            ),\n        });\n    };\n\n    await navigate(getViewParamsFromUrl(), true, true);\n\n    return {\n        createLabel,\n        createMessage,\n        deleteLabel,\n        emptyTrash,\n        forward,\n        get: (): State => state,\n        hideDialog,\n        hideToast,\n        navigate,\n        navigateToList,\n        navigateToMenu,\n        reply,\n        savePreferences,\n        selectAll,\n        selectCourse,\n        sendMessage,\n        setDeleted,\n        setError,\n        setLabels,\n        setStarred,\n        setUnread,\n        setViewportSize,\n        showDialog,\n        subscribe,\n        toggleSelected,\n        undo,\n        updateDraft,\n        updateLabel,\n    };\n}\n","/*\n * SPDX-FileCopyrightText: 2023 SEIDOR <https://www.seidor.com>\n *\n * SPDX-License-Identifier: GPL-3.0-or-later\n */\n\nimport Navbar from './components/Navbar.svelte';\nimport View from './components/View.svelte';\nimport type { Preferences, Settings, Strings } from './lib/state';\nimport { createStore } from './lib/store';\n\nimport './global.css';\n\nasync function init() {\n    const viewTarget = document.getElementById('local-mail-view');\n    const navbarTarget = document.getElementById('local-mail-navbar');\n\n    // Get initial data from script tag.\n    const data = window.local_mail_view_data;\n    if (!data) {\n        return;\n    }\n\n    const store = await createStore({\n        userid: data.userid as number,\n        settings: data.settings as Settings,\n        preferences: data.preferences as Preferences,\n        strings: data.strings as Strings,\n        mobile: Boolean(data.mobile),\n    });\n\n    if (viewTarget) {\n        new View({ target: viewTarget, props: { store } });\n    }\n\n    if (navbarTarget) {\n        // Remove fallback link created in local_mail_render_navbar_output.\n        navbarTarget.innerHTML = '';\n\n        // Instantiate Navbar component with current store data.\n        const state = store.get();\n        const navbar = new Navbar({\n            target: navbarTarget,\n            props: {\n                settings: state.settings,\n                strings: state.strings,\n                courses: state.courses,\n                labels: state.labels,\n                params: state.params,\n                onClick: store.navigate,\n                onComposeClick: store.createMessage,\n                onCourseChange: store.selectCourse,\n            },\n        });\n\n        // Update properties when store data changes.\n        store.subscribe((state) => {\n            navbar.$set({\n                settings: state.settings,\n                strings: state.strings,\n                courses: state.courses,\n                labels: state.labels,\n                params: state.params,\n            });\n        });\n    }\n}\n\ninit();\n"],"names":["globals","create_animation","node","from","fn","params","noop","to","delay","duration","easing","linear","start_time","now","end","tick","css","running","started","name","start","create_rule","stop","delete_rule","loop","p","t","fix_position","style","width","height","a","add_transform","b","transform","DeletedStatus","GroupMode","RecipientType","ViewportSize","cubicOut","f","fade","o","fly","x","y","opacity","target_opacity","od","xValue","xUnit","split_css_unit","yValue","yUnit","u","ctx","create_if_block_2","if_block1","create_if_block_1","insert","target","div","anchor","button","is_function","create_if_block","div4","append","div3","div2","div0","h5","span","div1","div5","div4_transition","create_bidirectional_transition","title","$$props","cancelText","confirmText","onCancel","onConfirm","confirmClass","confirmDisabled","onMount","onDestroy","handleKey","event","$$value","_a","set_data","t_value","pre","_b","_c","t0","t0_value","if_block","store","func","i","transparent","click_handler","$store","confirm","colors","dateFromTimestamp","time","date","formatSize","size","units","unit","normalizeLabelName","replaceStringParams","string","key","timestampFromDate","attr","button_aria_checked_value","dirty","form","label0","input","label1","t6","t6_value","modaldialog_changes","label","onSubmit","nameEl","submit","selectedColor","$$invalidate","color","id","emptyName","repeatedName","l","validName","each_value","ensure_array_like","get_key","if_block0","create_if_block_3","t1_value","t1","dropup","expanded","selectedLabels","closeMenu","toggleMenu","toggleLabel","labelid","selected","applyLabels","newLabel","createLabel","messages","message","messageLabel","applyEnabled","labelIconClass","create_if_block_6","create_if_block_12","create_if_block_11","create_if_block_10","create_if_block_9","create_if_block_7","create_if_block_8","button0","button1","t3","t3_value","create_if_block_5","setUnread","unread","setStarred","starred","openEditLabelModal","confirmEditLabel","openDeleteLabelModal","deletelabelconfirm","openEmptyTrashModal","confirmEmptyTrash","click_handler_1","click_handler_2","click_handler_3","func_1","func_2","someRead","someUnread","someStarred","someUnstarred","disabled","button0_title_value","i0","i1","compact","prevParams","nextParams","hasNext","hasPrev","pagingText","placeholderNode","fixed","observer","entries","entry","flip","ox","oy","dx","dy","d","sx","sy","checkClass","button_disabled_value","button_title_value","starClass","users","user","dispose","action_destroyer","truncate_action","truncate","show_if","course","settings","text","length","span_style_value","create_if_block_4","coursebadge_changes","span_title_value","toggle_class","div1_intro","create_in_transition","a_href_value","viewUrl","recentParams","div6","current","stop_animation","rect","a_intro","a_outro","create_out_transition","previous_key","not_equal","messageParams","button2","i2","t4","t4_value","t7","t7_value","canReplyAll","click_handler_4","click_handler_5","t2_value","img","img_alt_value","src_url_equal","img_src_value","t2","downloadAllUrl","strings","fileName","file","icon","hr","t5_value","raw_value","div7","userpicture_changes","t5","reference","each_value_1","recipients","type","messageattachments_changes","messagereference_changes","div8","h3","hr0","hr1","constants_0","child_ctx","args","truncate_action_1","each_blocks","onDelete","div0_title_value","i_class_value","callServices","requests","ajax","require","ajaxRequests","methodname","error","add_render_callback","select","option","option_value_value","button_aria_pressed_value","DELAY","onChange","inputNode","loading","timeoutId","roles","groups","tooManyUsers","roleid","groupid","handleToggleClick","search","throttle","limit","responses","group","role","handleBlur","handleFocus","input_handler","select_value","change_handler","change_handler_1","all","recipientType","raw0_value","raw1_value","show_if_1","if_block3","form_1","courseselect_changes","jsNode","formNode","save","disableTinyEventHandlers","enableTinyEventHandlers","tiny","tinyEditor","handleChange","handleEditor","loader","editor","updateJavascript","javascript","fragment","handleCourseChange","handleRecipientChange","newRecipients","recipientsList","recipient","handleRecipientDelete","force","formData","data","subject","submit_handler","defaultValues","values","input_id_value","input_checked_value","input_disabled_value","label_for_value","h6","markasread","notifications","processor","handleConfirm","toggleMarkAsRead","toggleMessageProcessor","n","div9","input0","input1","label2","input2","input3","label3","input4","label4","input5","t10","t10_value","t13","t13_value","sendername","recipientname","withfilesonly","maxtime","submitEnabled","focus","senderNode","today","updateMaxTime","maxdate","LIMIT","enabled","content","onClick","moreResults","request","clickHandler","allParams","incrementalsearch_changes","entering","advancedExpanded","advancedNode","updateFields","startEntering","advancedEnabled","stopEntering","searchEnabled","toggleDropdown","cancel","handleKeypress","handleIncrementalSearchClick","searchFields","value","div2_intro","div2_outro","toast","button3","button4","button5","t8","t8_value","selectAll","iconClass","create_if_block_13","h1","composebutton_changes","preferencesbutton_changes","menu_changes","message_changes","draftform_changes","title_value","if_block2","if_block4","if_block6","if_block7","viewNode","prevNavigationId","afterUpdate","parent","handleBeforeUnload","handleMessage","handleClick","link","resize_handler","getViewParamsFromUrl","func_3","tray","heading","c","mobileTitle","subscriber_queue","writable","subscribers","set","new_value","safe_not_equal","run_queue","subscriber","update","subscribe","run","invalidate","createStore","currentActionId","draftTimeoutId","state","patch","newState","callServicesAndRefresh","newParams","redirect","actionId","messageid","draftData","perpage","setUrlFromViewParams","query","setError","messageOffset","nextMessageId","prevMessageId","listMessages","totalCount","_d","_e","labels","courses","navigate","draftForm","draftRequests","draftResponses","total","showToast","createMessage","courseid","deleteLabel","emptyTrash","forward","oldParams","hideDialog","hideToast","init","navigateToList","navigateToMenu","reply","savePreferences","preferences","selectCourse","sendMessage","setDeleted","ids","deleted","allowUndo","setLabels","added","removed","updateMessages","messageids","setViewportSize","showDialog","dialog","toggleSelected","undo","updateDraft","prevData","updatedMessage","updateLabel","callback","viewTarget","navbarTarget","View","navbar","Navbar"],"mappings":"4mBACO,MAAMA,GACZ,OAAO,OAAW,IACf,OACA,OAAO,WAAe,IACtB,WAEA,OCGG,SAASC,GAAiBC,EAAMC,EAAMC,EAAIC,EAAQ,CACxD,GAAI,CAACF,EAAM,OAAOG,EAClB,MAAMC,EAAKL,EAAK,wBAChB,GACCC,EAAK,OAASI,EAAG,MACjBJ,EAAK,QAAUI,EAAG,OAClBJ,EAAK,MAAQI,EAAG,KAChBJ,EAAK,SAAWI,EAAG,OAEnB,OAAOD,EACR,KAAM,CACL,MAAAE,EAAQ,EACR,SAAAC,EAAW,IACX,OAAAC,EAASC,GAET,MAAOC,EAAaC,GAAG,EAAKL,EAE5B,IAAAM,EAAMF,EAAaH,EACnB,KAAAM,EAAOT,EACP,IAAAU,CACF,EAAKZ,EAAGF,EAAM,CAAE,KAAAC,EAAM,GAAAI,CAAE,EAAIF,CAAM,EACjC,IAAIY,EAAU,GACVC,EAAU,GACVC,EAEJ,SAASC,GAAQ,CACZJ,IACHG,EAAOE,GAAYnB,EAAM,EAAG,EAAGO,EAAUD,EAAOE,EAAQM,CAAG,GAEvDR,IACJU,EAAU,GAEX,CAED,SAASI,GAAO,CACXN,GAAKO,GAAYrB,EAAMiB,CAAI,EAC/BF,EAAU,EACV,CACD,OAAAO,GAAMX,GAAQ,CAQb,GAPI,CAACK,GAAWL,GAAOD,IACtBM,EAAU,IAEPA,GAAWL,GAAOC,IACrBC,EAAK,EAAG,CAAC,EACTO,KAEG,CAACL,EACJ,MAAO,GAER,GAAIC,EAAS,CACZ,MAAMO,EAAIZ,EAAMD,EACVc,EAAI,EAAI,EAAIhB,EAAOe,EAAIhB,CAAQ,EACrCM,EAAKW,EAAG,EAAIA,CAAC,CACb,CACD,MAAO,EACT,CAAE,EACDN,IACAL,EAAK,EAAG,CAAC,EACFO,CACR,CAMO,SAASK,GAAazB,EAAM,CAClC,MAAM0B,EAAQ,iBAAiB1B,CAAI,EACnC,GAAI0B,EAAM,WAAa,YAAcA,EAAM,WAAa,QAAS,CAChE,KAAM,CAAE,MAAAC,EAAO,OAAAC,CAAQ,EAAGF,EACpBG,EAAI7B,EAAK,wBACfA,EAAK,MAAM,SAAW,WACtBA,EAAK,MAAM,MAAQ2B,EACnB3B,EAAK,MAAM,OAAS4B,EACpBE,GAAc9B,EAAM6B,CAAC,CACrB,CACF,CAOO,SAASC,GAAc9B,EAAM6B,EAAG,CACtC,MAAME,EAAI/B,EAAK,wBACf,GAAI6B,EAAE,OAASE,EAAE,MAAQF,EAAE,MAAQE,EAAE,IAAK,CACzC,MAAML,EAAQ,iBAAiB1B,CAAI,EAC7BgC,EAAYN,EAAM,YAAc,OAAS,GAAKA,EAAM,UAC1D1B,EAAK,MAAM,UAAY,GAAGgC,CAAS,cAAcH,EAAE,KAAOE,EAAE,IAAI,OAAOF,EAAE,IAAME,EAAE,GAAG,KACpF,CACF,CC1EY,IAAAE,IAAAA,IACRA,EAAAA,EAAA,WAAa,CAAb,EAAA,aACAA,EAAAA,EAAA,QAAU,CAAV,EAAA,UACAA,EAAAA,EAAA,eAAiB,CAAjB,EAAA,iBAHQA,IAAAA,IAAA,CAAA,CAAA,EAoBAC,IAAAA,IACRA,EAAAA,EAAA,GAAK,CAAL,EAAA,KACAA,EAAAA,EAAA,SAAW,CAAX,EAAA,WACAA,EAAAA,EAAA,QAAU,CAAV,EAAA,UAHQA,IAAAA,IAAA,CAAA,CAAA,EA2FAC,IAAAA,IACRA,EAAA,GAAK,KACLA,EAAA,GAAK,KACLA,EAAA,IAAM,MAHEA,IAAAA,IAAA,CAAA,CAAA,EA4HAC,IAAAA,IACRA,EAAAA,EAAA,GAAK,GAAL,EAAA,KACAA,EAAAA,EAAA,GAAK,GAAL,EAAA,KACAA,EAAAA,EAAA,GAAK,GAAL,EAAA,KACAA,EAAAA,EAAA,GAAK,IAAL,EAAA,KAJQA,IAAAA,IAAA,CAAA,CAAA,ECpIL,SAASC,GAASb,EAAG,CAC3B,MAAMc,EAAId,EAAI,EACd,OAAOc,EAAIA,EAAIA,EAAI,CACpB,CC/FO,SAASC,GAAKvC,EAAM,CAAE,MAAAM,EAAQ,EAAG,SAAAC,EAAW,IAAK,OAAAC,EAASC,EAAQ,EAAG,GAAI,CAC/E,MAAM+B,EAAI,CAAC,iBAAiBxC,CAAI,EAAE,QAClC,MAAO,CACN,MAAAM,EACA,SAAAC,EACA,OAAAC,EACA,IAAMgB,GAAM,YAAYA,EAAIgB,CAAC,EAC/B,CACA,CAUO,SAASC,GACfzC,EACA,CAAE,MAAAM,EAAQ,EAAG,SAAAC,EAAW,IAAK,OAAAC,EAAS6B,GAAU,EAAAK,EAAI,EAAG,EAAAC,EAAI,EAAG,QAAAC,EAAU,CAAG,EAAG,CAAE,EAC/E,CACD,MAAMlB,EAAQ,iBAAiB1B,CAAI,EAC7B6C,EAAiB,CAACnB,EAAM,QACxBM,EAAYN,EAAM,YAAc,OAAS,GAAKA,EAAM,UACpDoB,EAAKD,GAAkB,EAAID,GAC3B,CAACG,EAAQC,CAAK,EAAIC,GAAeP,CAAC,EAClC,CAACQ,EAAQC,CAAK,EAAIF,GAAeN,CAAC,EACxC,MAAO,CACN,MAAArC,EACA,SAAAC,EACA,OAAAC,EACA,IAAK,CAACgB,EAAG4B,IAAM;AAAA,gBACDpB,CAAS,eAAe,EAAIR,GAAKuB,CAAM,GAAGC,CAAK,MAAM,EAAIxB,GAAK0B,CAAM,GAAGC,CAAK;AAAA,cAC9EN,EAAiBC,EAAKM,CAAC,EACrC,CACA,gDCPyBC,EAAU,CAAA,GAAAC,GAAAD,CAAA,EAKVE,EAAAF,MAAeA,EAAS,CAAA,GAAAG,GAAAH,CAAA,oFANjCI,EAgBKC,EAAAC,EAAAC,CAAA,+CAfIP,EAAU,CAAA,yDAKVA,MAAeA,EAAS,CAAA,sJAHpBA,EAAU,CAAA,CAAA,gEADfI,EAEQC,EAAAG,EAAAD,CAAA,sCAFkDE,GAAAT,OAAAA,EAAQ,CAAA,EAAA,MAAA,KAAA,SAAA,+BAC7DA,EAAU,CAAA,CAAA,qFAUVA,EAAW,CAAA,CAAA,4CAJAA,EAAY,CAAA,CAAA,aACdA,EAAe,CAAA,UAH7BI,EAOQC,EAAAG,EAAAD,CAAA,sCAHME,GAAAT,OAAAA,EAAS,CAAA,EAAA,MAAA,KAAA,SAAA,+BAElBA,EAAW,CAAA,CAAA,sBAJAA,EAAY,CAAA,qCACdA,EAAe,CAAA,0IAXpCA,EAAU,CAAA,GAAKA,EAAW,CAAA,GAAIA,EAAS,CAAA,IAAAU,GAAAV,CAAA,6EATnCA,EAAK,CAAA,CAAA,8NAEsCA,EAAU,CAAA,CAAA,sMAZ1DA,EAAK,CAAA,CAAA,+EAJrBI,EA4CKC,EAAAM,EAAAJ,CAAA,EAlCDK,EAiCKD,EAAAE,CAAA,EAhCDD,EA+BKC,EAAAC,CAAA,EA9BDF,EAOKE,EAAAC,CAAA,EANDH,EAEIG,EAAAC,CAAA,gBACJJ,EAEQG,EAAAP,CAAA,EADJI,EAAsCJ,EAAAS,CAAA,SAG9CL,EAEKE,EAAAI,CAAA,yDAwBjBd,EAAyDC,EAAAc,EAAAZ,CAAA,gCAhDlCP,EAAS,CAAA,CAAA,yBAkBsDS,GAAAT,OAAAA,EAAQ,CAAA,EAAA,MAAA,KAAA,SAAA,wBARhFA,EAAQ,CAAA,CAAA,CAAA,sCAMDA,EAAK,CAAA,CAAA,8BAEsCA,EAAU,CAAA,CAAA,wEAOzDA,EAAU,CAAA,GAAKA,EAAW,CAAA,GAAIA,EAAS,CAAA,wFAnBxCA,EAAK,CAAA,CAAA,2CAIPA,EAAQ,CAAA,CAAA,+BADOoB,IAAAA,EAAAC,GAAAV,EAAAvB,GAAA,CAAA,MAAO,EAAA,EAAA,gFAAPgC,IAAAA,EAAAC,GAAAV,EAAAvB,GAAA,CAAA,MAAO,EAAA,EAAA,yMAnCrB,MAAAkC,CAAa,EAAAC,EACb,CAAA,WAAAC,EAAa,EAAE,EAAAD,EACf,CAAA,YAAAE,EAAc,EAAE,EAAAF,GAChB,SAAAG,CAAoB,EAAAH,EACpB,CAAA,UAAAI,EAAsC,MAAS,EAAAJ,EAC/C,CAAA,aAAAK,EAAe,aAAa,EAAAL,EAC5B,CAAA,gBAAAM,EAAkB,EAAK,EAAAN,EAE9B5E,EAEJmF,GAAO,IAAA,CACH,SAAS,KAAK,UAAU,IAAI,YAAY,EACxCnF,EAAK,MAAK,IAGdoF,GAAS,IAAA,CACL,SAAS,KAAK,UAAU,OAAO,YAAY,IAGzC,MAAAC,EAAaC,GAAoB,CAC/BA,EAAM,KAAO,UACbP,+CAaG/E,EAAIuF,qjBC/BKlC,EAAM,CAAA,EAAC,QAAQ,2IAAfA,EAAM,CAAA,EAAC,QAAQ,yLAGvBmC,EAAAnC,EAAM,CAAA,EAAC,QAAP,YAAAmC,EAAc,WAAS,wCAA3B/B,EAA+BC,EAAAnC,EAAAqC,CAAA,qCAA3B4B,EAAAnC,EAAM,CAAA,EAAC,QAAP,YAAAmC,EAAc,WAAS,KAAAC,EAAAjE,EAAAkE,CAAA,iDAGrBF,EAAAnC,EAAM,CAAA,EAAC,QAAP,YAAAmC,EAAc,YAAU,0CAA9B/B,EAAoCC,EAAAiC,EAAA/B,CAAA,qCAA9B4B,EAAAnC,EAAM,CAAA,EAAC,QAAP,YAAAmC,EAAc,YAAU,KAAAC,EAAAjE,EAAAkE,CAAA,qDAL9BF,EAAAnC,EAAM,CAAA,EAAC,QAAP,YAAAmC,EAAc,SAAO,eACpBI,EAAAvC,EAAM,CAAA,EAAC,QAAP,YAAAuC,EAAc,YAAStC,GAAAD,CAAA,MAGvBwC,EAAAxC,EAAM,CAAA,EAAC,QAAP,YAAAwC,EAAc,aAAUrC,GAAAH,CAAA,0EAJ7BI,EAA6BC,EAAAnC,EAAAqC,CAAA,4FAAzB4B,EAAAnC,EAAM,CAAA,EAAC,QAAP,YAAAmC,EAAc,SAAO,KAAAC,EAAAK,EAAAC,CAAA,GACpBH,EAAAvC,EAAM,CAAA,EAAC,QAAP,MAAAuC,EAAc,6EAGdC,EAAAxC,EAAM,CAAA,EAAC,QAAP,MAAAwC,EAAc,yJANtBG,EAAA3C,KAAO,OAAKU,GAAAV,CAAA,yEAAZA,KAAO,+QAHG,MAAA4C,CAAY,EAAArB,MAImC,MAAAsB,EAAA,IAAAD,EAAM,iUCKrD5C,EAAM,CAAA,EAAC,iBAAiB,mBAC5BA,EAAM,CAAA,EAAC,QAAQ,WAAW,uBAHXA,EAAW,CAAA,CAAA,kBAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,UAJjDI,EAWQC,EAAAG,EAAAD,CAAA,EADJK,EAA8BJ,EAAAsC,CAAA,uDALnB9C,EAAM,CAAA,EAAC,iBAAiB,kCAC5BA,EAAM,CAAA,EAAC,QAAQ,uDAHAA,EAAW,CAAA,CAAA,uBAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,oIARlC,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,YAAAwB,EAAc,EAAK,EAAAxB,EAW1B,MAAAyB,EAAA,IAAAJ,EAAM,WAAW,MAAM,KAAKK,EAAO,iBAAiB,KAAI,CAAA,EAAKrE,GAAc,QAAS,EAAI,oPCgBjFoB,EAAM,CAAA,EAAC,QAAQ,yBACVA,EAAM,CAAA,EAAC,QAAQ,mBACdA,EAAM,CAAA,EAAC,QAAQ,gEAGjBA,EAAO,CAAA,yHALXA,EAAM,CAAA,EAAC,QAAQ,kCACVA,EAAM,CAAA,EAAC,QAAQ,4BACdA,EAAM,CAAA,EAAC,QAAQ,uLAK3BA,EAAM,CAAA,EAAC,QACJA,KAAO,iBAAiB,MAAQ,EAC1B,8BACA,8BAA6B,EAAA,4DAHtCA,EAAM,CAAA,EAAC,QACJA,KAAO,iBAAiB,MAAQ,EAC1B,8BACA,8BAA6B,EAAA,KAAAoC,EAAA,EAAAC,CAAA,uDAZ1CM,EAAA3C,EAAO,CAAA,EAAA,OAAO,QAAU,iBAAeU,GAAAV,CAAA,kLAP7BA,EAAM,CAAA,EAAC,iBAAiB,mBAC5BA,EAAM,CAAA,EAAC,QAAQ,aAAa,uBAHbA,EAAW,CAAA,CAAA,kBAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,UAJjDI,EAUQC,EAAAG,EAAAD,CAAA,EADJK,EAA8BJ,EAAAsC,CAAA,+FAJnB9C,EAAM,CAAA,EAAC,iBAAiB,wCAC5BA,EAAM,CAAA,EAAC,QAAQ,gEAHAA,EAAW,CAAA,CAAA,6BAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,EAQ5CA,EAAO,CAAA,EAAA,OAAO,QAAU,8SAzBd,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,YAAAwB,EAAc,EAAK,EAAAxB,QAExB2B,EAAO,IAAA,CACTN,EAAM,WAAU,EAChBA,EAAM,WACF,MAAM,KAAKK,EAAO,iBAAiB,KAAI,CAAA,EACvCrE,GAAc,eACd,EAAI,SAYIgE,EAAM,WAAW,eAAe,EAW5BC,EAAA,IAAAD,EAAM,8MClCvB,MAAMO,GAAgC,CACzC,GACA,OACA,SACA,SACA,OACA,MACA,SACA,SACA,QACA,OACA,MACJ,EAQO,SAASC,GAAkBC,EAAsB,CACpD,GAAIA,GAAQ,EACD,MAAA,GAEX,MAAMC,EAAO,IAAI,KAAKD,EAAO,GAAI,EAC1B,MAAA,CACH,OAAOC,EAAK,aAAa,EACzB,OAAOA,EAAK,SAAS,EAAI,CAAC,EAAE,SAAS,EAAG,GAAG,EAC3C,OAAOA,EAAK,QAAA,CAAS,EAAE,SAAS,EAAG,GAAG,CAAA,EACxC,KAAK,GAAG,CACd,CAQO,SAASC,GAAWC,EAAsB,CAC7C,MAAMC,EAAQ,CACV,CAAE,MAAO,cAAS,KAAM,IAAK,EAC7B,CAAE,MAAO,WAAS,KAAM,IAAK,EAC7B,CAAE,MAAO,QAAS,KAAM,IAAK,EAC7B,CAAE,MAAO,KAAS,KAAM,IAAK,CAAA,EAGjC,UAAWC,KAAQD,EACX,GAAAD,GAAQE,EAAK,MAEN,MAAA,GADW,KAAK,aAAa,OAAW,CAAE,sBAAuB,EAAG,EACvD,OAAOF,EAAOE,EAAK,KAAK,CAAC,IAAIA,EAAK,IAAI,GAIlE,MAAO,GAAGF,CAAI,IAClB,CAQO,SAASG,GAAmB/F,EAAsB,CACrD,OAAOA,EAAK,KAAO,EAAA,WAAW,QAAS,GAAG,CAC9C,CASgB,SAAAgG,GACZC,EACA/G,EACM,CAEN,GADA+G,EAASA,GAAU,GACf,OAAO/G,GAAU,UAAY,OAAOA,GAAU,SAC9C+G,EAASA,EAAO,QAAQ,OAAQ/G,EAAO,UAAU,MAEjD,WAAWgH,KAAOhH,EACL+G,EAAAA,EAAO,QAAQ,QAAQC,CAAG,IAAKhH,EAAOgH,CAAG,EAAE,SAAU,CAAA,EAG/D,OAAAD,CACX,CAQO,SAASE,GAAkBT,EAAsB,CACpD,OAAKA,EAGE,KAAK,MACR,IAAI,KACA,SAASA,EAAK,MAAM,EAAG,CAAC,CAAC,EACzB,SAASA,EAAK,MAAM,EAAG,CAAC,CAAC,EAAI,EAC7B,SAASA,EAAK,MAAM,EAAG,EAAE,CAAC,EAC1B,GACA,GACA,EAAA,EACF,QAAY,EAAA,GAAA,EAVP,CAYf,8FCxDsB,GAEN,4DAHKtD,EAAM,CAAA,EAAC,QAAQ,uBAAsB,6DAArCA,EAAM,CAAA,EAAC,QAAQ,uBAAsB,KAAAoC,EAAA,EAAAC,CAAA,kHA4B9BjC,EAAgCC,EAAAY,EAAAV,CAAA,wIAFhCH,EAAkEC,EAAAyC,EAAAvC,CAAA,mEADjE,OAAAP,OAASA,EAAa,CAAA,EAAAU,mIAVbsD,EAAAxD,EAAA,eAAAyD,EAAAjE,OAASA,EAAa,CAAA,CAAA,oCAE7BA,EAAM,CAAA,EAAC,QAAO,QAASA,EAAK,EAAA,CAAA,EAAA,CAAA,yDAEKgE,EAAAxD,EAAA,QAAA,iCAAAR,uFACQA,EAAK,EAAA,CAAA,uCAAA,uBAPzDI,EAiBQC,EAAAG,EAAAD,CAAA,kHAfU2D,EAAA,KAAAD,KAAAA,EAAAjE,OAASA,EAAa,CAAA,uCAE7BA,EAAM,CAAA,EAAC,QAAO,QAASA,EAAK,EAAA,CAAA,EAAA,6EA9BLA,EAAM,CAAA,EAAC,QAAQ,KAAI,2BAsBxDA,EAAM,CAAA,EAAC,QAAQ,MAAK,wDAVhBA,EAAY,CAAA,EAAAG,6BAaVgD,EAAM,aAAWnD,EAAK,EAAA,kBAA3B,OAAI8C,GAAA,EAAA,8YAlBD9C,EAAE,CAAA,EAAA,OAAA,iBAFSA,EAAS,CAAA,CAAA,oBACNA,EAAS,CAAA,CAAA,2GAenBA,EAAE,CAAA,EAAA,QAAA,kFAGkDA,EAAE,CAAA,EAAA,QAAA,qCA1B3EI,EAiDMC,EAAA8D,EAAA5D,EAAA,EAhDFK,EAoBKuD,EAAArD,CAAA,EAnBDF,EAAqEE,EAAAsD,CAAA,gBACrExD,EASCE,EAAAuD,CAAA,gBADerE,EAAI,CAAA,CAAA,SAEpBY,EAMKE,EAAAC,CAAA,qBACLH,EAAuCE,EAAAI,CAAA,SAE3CN,EA0BKuD,EAAAxD,CAAA,EAzBDC,EAEOD,EAAA2D,CAAA,gBACP1D,EAqBKD,EAAAE,CAAA,kGA/CmBb,EAAM,EAAA,CAAA,CAAA,gCAEYA,EAAM,CAAA,EAAC,QAAQ,KAAI,KAAAoC,EAAAK,EAAAC,CAAA,iBAOpD1C,EAAE,CAAA,EAAA,sCAEKA,EAAI,CAAA,QAAJA,EAAI,CAAA,CAAA,yBAJAA,EAAS,CAAA,CAAA,4BACNA,EAAS,CAAA,CAAA,iFAgB3BA,EAAM,CAAA,EAAC,QAAQ,MAAK,KAAAoC,EAAAmC,EAAAC,CAAA,iBADZxE,EAAE,CAAA,EAAA,sCAIJmD,EAAM,uDADgDnD,EAAE,CAAA,EAAA,4JAjCpE,MAAAA,KAAO,QAAQA,EAAQ,CAAA,EAAA,YAAc,UAAU,aAC1CA,EAAM,CAAA,EAAC,QAAQ,qBAEd,YAAAA,KAAO,QAAQA,EAAQ,CAAA,EAAA,OAAS,QAAQ,mBACnCA,EAAS,CAAA,YAChBA,EAAM,EAAA,6GALVkE,EAAA,KAAAO,EAAA,MAAAzE,KAAO,QAAQA,EAAQ,CAAA,EAAA,YAAc,UAAU,uBAC1CA,EAAM,CAAA,EAAC,QAAQ,+BAEdkE,EAAA,KAAAO,EAAA,YAAAzE,KAAO,QAAQA,EAAQ,CAAA,EAAA,OAAS,QAAQ,8BACnCA,EAAS,CAAA,gPA5BhB,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,MAAAmD,EAA2B,MAAS,EAAAnD,GACpC,SAAAG,CAAoB,EAAAH,GACpB,SAAAoD,CAA+C,EAAApD,EAEtDqD,QAWEC,EAAM,SAAA,CACRF,EAAS/G,EAAMkH,CAAa,GAGhChD,GAAO,IAAO8C,EAAO,MAAK,CAAA,4CAqBHA,EAAM1C,wBACLtE,EAAI,KAAA,gCA0BJmH,EAAA,EAAAD,EAAgBE,CAAK,0LA7D1CC,EAAE,2BAA6BP,GAAA,YAAAA,EAAO,KAAM,KAAK,EAAA,oBACjD9G,GAAO8G,GAAA,YAAAA,EAAO,OAAQ,EAAE,gBAC1BK,EAAA,EAAED,GAAgBJ,GAAA,YAAAA,EAAO,QAASvB,GAAO,CAAC,CAAA,qBACxC+B,EAAYvB,GAAmB/F,CAAI,GAAK,EAAE,iBAC5CmH,EAAA,EAAEI,EAAelC,EAAO,OAAO,KAC3BmC,GAAMA,EAAE,KAAMV,GAAA,YAAAA,EAAO,KAAMU,EAAE,MAAQzB,GAAmB/F,CAAI,CAAA,CAAA,mBAE9DmH,EAAA,EAAAM,EAAa,CAAAH,IAAcC,CAAY,+PCgF3BG,EAAAC,GAAAvF,KAAO,MAAM,EAAW,MAAAwF,EAAAxF,GAAAA,MAAM,mBAAnC,OAAI8C,GAAA,EAAA,8CAUD,IAAA2C,EAAAzF,EAAO,CAAA,EAAA,OAAO,OAAS,GAAC0F,GAAA,yBAGxB1F,EAAY,CAAA,EAAAC,wJAdrBG,EA+BKC,EAAAC,EAAAC,CAAA,4GA9BM+E,EAAAC,GAAAvF,KAAO,MAAM,oCAUfA,EAAO,CAAA,EAAA,OAAO,OAAS,iNAHnB2F,EAAA3F,MAAM,KAAI,oIADSA,EAAc,CAAA,EAACA,EAAK,EAAA,EAAC,EAAE,CAAA,6GAL/CI,EAOQC,EAAAG,EAAAD,CAAA,EAFJK,EAAgDJ,EAAAsC,CAAA,gFAA5B9C,EAAc,CAAA,EAACA,EAAK,EAAA,EAAC,EAAE,mBAC1CkE,EAAA,GAAAyB,KAAAA,EAAA3F,MAAM,KAAI,KAAAoC,EAAAwD,EAAAD,CAAA,8GAIfvF,EAA+BC,EAAAC,EAAAC,CAAA,yCAgB1BP,EAAM,CAAA,EAAC,QAAQ,SAAQ,uIAL5BI,EAMQC,EAAAG,EAAAD,CAAA,2BAHMP,EAAQ,EAAA,CAAA,4BAEjBA,EAAM,CAAA,EAAC,QAAQ,SAAQ,KAAAoC,EAAAjE,EAAAkE,CAAA,kDARvBrC,EAAM,CAAA,EAAC,QAAQ,MAAK,uIALzBI,EAMQC,EAAAG,EAAAD,CAAA,2BAHMP,EAAW,EAAA,CAAA,4BAEpBA,EAAM,CAAA,EAAC,QAAQ,MAAK,KAAAoC,EAAAjE,EAAAkE,CAAA,6GAciCrC,EAAW,EAAA,mPAnC5EA,EAAQ,CAAA,GAAAG,GAAAH,CAAA,EAkCRE,EAAAF,EAAO,CAAA,EAAA,OAAO,QAAU,eAAaU,GAAAV,CAAA,iNAzC3BA,EAAM,CAAA,EAAC,iBAAiB,yBACpBA,EAAQ,CAAA,CAAA,gBAChBA,EAAM,CAAA,EAAC,QAAQ,MAAM,uBAJNA,EAAW,CAAA,CAAA,kBAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,0EALrDI,EAkDKC,EAAAC,EAAAC,CAAA,EAjDDK,EAWQN,EAAAE,CAAA,EADJI,EAA4BJ,EAAAsC,CAAA,sEAFlB9C,EAAU,CAAA,CAAA,oBAT+BA,EAAS,CAAA,CAAA,CAAA,qCAMjDA,EAAM,CAAA,EAAC,iBAAiB,uDACpBA,EAAQ,CAAA,CAAA,mBAChBA,EAAM,CAAA,EAAC,QAAQ,yDAJAA,EAAW,CAAA,CAAA,6BAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,EAQ5CA,EAAQ,CAAA,yDAkCRA,EAAO,CAAA,EAAA,OAAO,QAAU,oUAhIlB,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,YAAAwB,EAAc,EAAK,EAAAxB,EACnB,CAAA,OAAAsE,EAAS,EAAK,EAAAtE,EAErBuE,EAAW,GAEXC,MAAsE,UAoCpEC,EAAS,IAAA,CACXjB,EAAA,EAAAe,EAAW,EAAK,GAGdG,EAAU,IAAA,CACZlB,EAAA,EAAAe,GAAYA,CAAQ,GAGlBI,EAAeC,GAAe,CAChCpB,EAAA,GAAAgB,EAAqB,IAAA,IACjB,MAAM,KAAKA,EAAe,QAAO,CAAI,EAAA,IAAM,CAAA,CAAAd,EAAImB,CAAQ,IAAA,CACnDnB,EACAA,GAAMkB,EAAWC,GAAY,OAAS,QAAU,OAAUA,OAKhEC,EAAW,IAAA,CACbtB,EAAA,EAAAe,EAAW,EAAK,EAChBlD,EAAM,UACF,MAAM,KAAKmD,EAAe,KAAI,CAAA,EAAI,OAAQd,GAAOc,EAAe,IAAId,CAAE,GAAK,MAAM,EACjF,MAAM,KAAKc,EAAe,KAAI,CAAA,EAAI,OAAQd,GAAOc,EAAe,IAAId,CAAE,GAAK,OAAO,CAAA,GAIpFqB,EAAQ,IAAA,CACVN,IACApD,EAAM,WAAW,aAAa,GAG5B2D,EAAW,MAAU3I,EAAcoH,IAAa,CAClDpC,EAAM,WAAU,EACV,MAAAqC,QAAWrC,EAAM,YAAYhF,EAAMoH,CAAK,EAC1CC,GACArC,EAAM,UAAS,CAAEqC,CAAE,EAAA,CAAA,CAAA,QAwBKiB,EAAYxB,EAAM,EAAE,EA6BZ7B,EAAA,IAAAD,EAAM,qKAzH7CmC,EAAA,GAAEgB,EAAc,IAAO,IACpB9C,EAAO,OAAO,IAAKyB,GAAK,CACd,MAAA8B,EAAW,MAAM,KAAKvD,EAAO,iBAAiB,OAAM,CAAI,EAAA,OAAQwD,GAClEA,EAAQ,OAAO,KAAMC,GAAiBA,EAAa,IAAMhC,EAAM,EAAE,CAAA,SAGjEA,EAAM,GACN8B,EAAS,QAAU,EACb,QACAA,EAAS,OAASvD,EAAO,iBAAiB,KAC1C,QACA,6BAKf8B,EAAA,EAAA4B,EAAe,MAAM,KAAKZ,EAAe,SAAW,EAAA,OAAOI,EAASC,CAAQ,IAC3E,MAAM,KAAKnD,EAAO,iBAAiB,QAAM,EAAI,KACxCwD,GACIL,GAAY,QAAUK,EAAQ,OAAO,MAAO/B,GAAUA,EAAM,IAAMyB,CAAO,GACzEC,GAAY,SAAWK,EAAQ,OAAO,KAAM/B,GAAUA,EAAM,IAAMyB,CAAO,CAAA,CAAA,CAAA,mBAIrFpB,EAAA,EAAE6B,EAAkBT,GACbJ,EAAe,IAAII,CAAO,GAAK,QACxB,cACAJ,EAAe,IAAII,CAAO,GAAK,QAC/B,oBAEA,8LCyDF,OAAAnG,EAAO,CAAA,EAAA,OAAO,MAAQ,QAAO6G,8FADtCzG,EAsCKC,EAAAC,EAAAC,CAAA,2IAhCQP,EAAU,CAAA,GAAA8G,GAAA9G,CAAA,IAKVA,EAAQ,CAAA,GAAA+G,GAAA/G,CAAA,IAKRA,EAAa,CAAA,GAAAgH,GAAAhH,CAAA,IAKbA,EAAW,CAAA,GAAAiH,GAAAjH,CAAA,IAKXA,EAAK,CAAA,GAAAkH,GAAAlH,CAAA,kNApBLA,EAAU,CAAA,oEAKVA,EAAQ,CAAA,oEAKRA,EAAa,CAAA,oEAKbA,EAAW,CAAA,oEAKXA,EAAK,CAAA,mLAvBLA,EAAM,CAAA,EAAC,QAAQ,WAAU,mGAD9BI,EAEQC,EAAAG,EAAAD,CAAA,2BAF8CP,EAAmB,EAAA,CAAA,8BACpEA,EAAM,CAAA,EAAC,QAAQ,WAAU,KAAAoC,EAAAjE,EAAAkE,CAAA,kDAKrBrC,EAAM,CAAA,EAAC,QAAQ,WAAU,mGAD9BI,EAEQC,EAAAG,EAAAD,CAAA,8DADHP,EAAM,CAAA,EAAC,QAAQ,WAAU,KAAAoC,EAAAjE,EAAAkE,CAAA,kDAKzBrC,EAAM,CAAA,EAAC,QAAQ,aAAY,mGADhCI,EAEQC,EAAAG,EAAAD,CAAA,8DADHP,EAAM,CAAA,EAAC,QAAQ,aAAY,KAAAoC,EAAAjE,EAAAkE,CAAA,kDAK3BrC,EAAM,CAAA,EAAC,QAAQ,cAAa,mGADjCI,EAEQC,EAAAG,EAAAD,CAAA,8DADHP,EAAM,CAAA,EAAC,QAAQ,cAAa,KAAAoC,EAAAjE,EAAAkE,CAAA,kDAK5BrC,EAAM,CAAA,EAAC,QAAQ,gBAAe,mGADnCI,EAEQC,EAAAG,EAAAD,CAAA,8DADHP,EAAM,CAAA,EAAC,QAAQ,gBAAe,KAAAoC,EAAAjE,EAAAkE,CAAA,oDAQ9BrC,EAAM,CAAA,EAAC,QAAQ,UAAS,WAGxBA,EAAM,CAAA,EAAC,QAAQ,YAAW,SAP1B2C,GAAA3C,EAAc,CAAA,GAAAA,EAAY,CAAA,GAAAA,MAAiBA,EAAW,CAAA,IAAAmH,GAAA,6MAG3D/G,EAEQC,EAAA+G,EAAA7G,CAAA,kBACRH,EAEQC,EAAAgH,EAAA9G,CAAA,4BAL8CP,EAAkB,EAAA,CAAA,cAGlBA,EAAoB,EAAA,CAAA,iBANrEA,EAAc,CAAA,GAAAA,EAAY,CAAA,GAAAA,MAAiBA,EAAW,CAAA,yEAItDA,EAAM,CAAA,EAAC,QAAQ,UAAS,KAAAoC,EAAAwD,EAAAD,CAAA,gBAGxB3F,EAAM,CAAA,EAAC,QAAQ,YAAW,KAAAoC,EAAAkF,EAAAC,CAAA,2IAN3BnH,EAA+BC,EAAAC,EAAAC,CAAA,kFA4B9C,OAAAP,EAAO,CAAA,EAAA,OAAO,QAAU,YAAW,EAO9BA,EAAO,CAAA,EAAA,OAAO,QAAU,cAAa,sWApB1C2C,EAAA3C,EAAO,CAAA,EAAA,OAAO,QAAU,cAAYG,GAAAH,CAAA,uEAApCA,EAAO,CAAA,EAAA,OAAO,QAAU,4OAsBdA,EAAM,CAAA,EAAC,QAAQ,uBACVA,EAAM,CAAA,EAAC,QAAQ,mBACdA,EAAM,CAAA,EAAC,QAAQ,+DAGjBA,EAAkB,EAAA,2HALtBA,EAAM,CAAA,EAAC,QAAQ,kCACVA,EAAM,CAAA,EAAC,QAAQ,8BACdA,EAAM,CAAA,EAAC,QAAQ,qQANlBA,EAAgB,EAAA,mPAWzB4D,GAAoB5D,EAAO,CAAA,EAAA,QAAQ,mBAAoBA,EAAK,CAAA,EAAC,IAAI,EAAA,8DAAjE4D,GAAoB5D,EAAO,CAAA,EAAA,QAAQ,mBAAoBA,EAAK,CAAA,EAAC,IAAI,EAAA,KAAAoC,EAAA,EAAAC,CAAA,uEA3B3DrC,EAAM,CAAA,EAAC,QAAQ,sBACVA,EAAM,CAAA,EAAC,QAAQ,mBACdA,EAAM,CAAA,EAAC,QAAQ,8DAGjBA,EAAiB,EAAA,2HALrBA,EAAM,CAAA,EAAC,QAAQ,iCACVA,EAAM,CAAA,EAAC,QAAQ,8BACdA,EAAM,CAAA,EAAC,QAAQ,4LAK3BA,EAAM,CAAA,EAAC,QAAQ,kBAAiB,8DAAhCA,EAAM,CAAA,EAAC,QAAQ,kBAAiB,KAAAoC,EAAA,EAAAC,CAAA,+DArDpCrC,EAAQ,CAAA,GAAAwH,GAAAxH,CAAA,uCA2CZ,OAAAA,EAAO,CAAA,EAAA,OAAO,MAAQ,QAAO,EAaxBA,EAAK,CAAA,EAAA,oRA9DQA,EAAQ,CAAA,CAAA,gBAChBA,EAAM,CAAA,EAAC,QAAQ,IAAI,uBAJJA,EAAW,CAAA,CAAA,4EAJzCI,EAsDKC,EAAAC,EAAAC,CAAA,EArDDK,EAWQN,EAAAE,CAAA,EADJI,EAAmCJ,EAAAsC,CAAA,kFAFzB9C,EAAU,EAAA,CAAA,oBATkBA,EAAS,EAAA,CAAA,CAAA,qFAOhCA,EAAQ,CAAA,CAAA,qBAChBA,EAAM,CAAA,EAAC,QAAQ,uDAJAA,EAAW,CAAA,CAAA,sCAShCA,EAAQ,CAAA,gdA3FF,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,YAAAwB,EAAc,EAAK,EAAAxB,EACnB,CAAA,OAAAsE,EAAS,EAAK,EAAAtE,EAErBuE,EAAW,SAiBTE,EAAS,IAAA,CACXjB,EAAA,EAAAe,EAAW,EAAK,GAGdG,EAAU,IAAA,CACZlB,EAAA,EAAAe,GAAYA,CAAQ,GAGlB2B,EAAaC,IAAe,CAC9B1B,IACApD,EAAM,UACF4D,EAAS,OAAQC,GAAa,CAAAA,EAAQ,KAAK,EAAE,IAAKA,GAAYA,EAAQ,EAAE,EACxEiB,EAAM,GAIRC,EAAcC,IAAgB,CAChC5B,IACApD,EAAM,WACF4D,EAAS,IAAKC,GAAYA,EAAQ,EAAE,EACpCmB,EAAO,GAITC,EAAkB,IAAA,CACpB7B,IACApD,EAAM,WAAW,WAAW,GAG1BkF,EAAgB,CAAIlK,GAAcoH,IAAa,CACjDpC,EAAM,WAAU,EACZ8B,GACA9B,EAAM,YAAY8B,EAAM,GAAI9G,GAAMoH,CAAK,GAIzC+C,EAAoB,IAAA,CACtB/B,IACApD,EAAM,WAAW,aAAa,GAG5BoF,EAAkB,IAAA,CACpBpF,EAAM,WAAU,EAChBA,EAAM,YAAYK,EAAO,OAAO,SAAW,CAAC,GAG1CgF,EAAmB,IAAA,CACrBjC,IACApD,EAAM,WAAW,YAAY,GAG3BsF,EAAiB,IAAA,CACnBtF,EAAM,WAAU,EAChBA,EAAM,WAAWK,EAAO,OAAO,QAAQ,GAyBiCD,EAAA,IAAAyE,EAAU,EAAK,EAKfU,EAAA,IAAAV,EAAU,EAAI,EAKdW,EAAA,IAAAT,EAAW,EAAI,EAKfU,EAAA,IAAAV,EAAW,EAAK,EA2BpE9E,EAAA,IAAAD,EAAM,aAWN0F,GAAA,IAAA1F,EAAM,aASN2F,GAAA,IAAA3F,EAAM,8KA3J3BmC,EAAA,EAAAL,EACCzB,EAAO,OAAO,MAAQ,SAAWA,EAAO,SAAW,KAC7CA,EAAO,OAAO,KAAMyB,IAAUA,GAAM,IAAMzB,EAAO,OAAO,OAAO,EAC/D,IAAI,kBAEb8B,EAAA,GAAEyB,EAAW,MAAM,KAAKvD,EAAO,iBAAiB,OAAM,CAAA,CAAA,sBACpD8B,EAAA,EAAAyD,EAAWhC,EAAS,KAAMC,IAAO,CAAMA,GAAQ,OAAU,CAAAA,GAAQ,MAAM,CAAA,sBACvE1B,EAAA,EAAA0D,EAAajC,EAAS,KAAMC,IAAO,CAAMA,GAAQ,OAASA,GAAQ,MAAM,CAAA,sBAC1E1B,EAAA,EAAE2D,EAAclC,EAAS,KAAMC,IAAYA,GAAQ,OAAO,CAAA,sBAC1D1B,EAAA,EAAE4D,EAAgBnC,EAAS,KAAMC,IAAO,CAAMA,GAAQ,OAAO,CAAA,kBAC7D1B,EAAA,GAAE6D,EACC3F,EAAO,OAAO,MAAQ,QACf,CAAAA,EAAO,WACP,CAAAyB,IAAU8D,GAAQ,CAAKC,GAAe,CAAAC,IAAgBC,CAAa,mNCuDrE3I,EAAU,CAAA,CAAA,uDADfI,EAEKC,EAAAC,EAAAC,CAAA,2BADAP,EAAU,CAAA,CAAA,mEAiBNA,EAAU,CAAA,CAAA,8DADfI,EAEKC,EAAAC,EAAAC,CAAA,2BADAP,EAAU,CAAA,CAAA,0EAnBjBA,EAAO,CAAA,GAAAG,GAAAH,CAAA,IAiBJA,EAAO,CAAA,GAAAU,GAAAV,CAAA,+KAFuCA,EAAM,CAAA,EAAC,QAAQ,YAAY,sEAJ/DA,EAAU,CAAA,EACdgE,EAAAoD,EAAA,QAAAyB,EAAA7I,EAAO,CAAA,EAAA,QAAQA,KAAO,QAAU,kBAAoB,cAAc,CAAA,uBAFnDA,EAAW,CAAA,CAAA,6DAoBeA,EAAM,CAAA,EAAC,QAAQ,QAAQ,wDAJ5DA,EAAU,CAAA,gBACdA,EAAM,CAAA,EAAC,QAAQA,KAAO,QAAU,cAAgB,UAAU,CAAA,uBAF3CA,EAAW,CAAA,CAAA,uEAnBOA,EAAO,CAAA,CAAA,iEAPGA,EAAO,CAAA,CAAA,UAArEI,EAkCKC,EAAAa,EAAAX,CAAA,wBA3BDK,EA0BKM,EAAAH,CAAA,EAzBDH,EASQG,EAAAqG,CAAA,EADJxG,EAA6EwG,EAAA0B,CAAA,+BAOjFlI,EASQG,EAAAsG,CAAA,EADJzG,EAA0EyG,EAAA0B,CAAA,uEA9B5E/I,EAAO,CAAA,qEAe0CA,EAAM,CAAA,EAAC,QAAQ,iDAJnDA,EAAU,CAAA,mBACdkE,EAAA,GAAA2E,KAAAA,EAAA7I,EAAO,CAAA,EAAA,QAAQA,KAAO,QAAU,kBAAoB,cAAc,6CAFnDA,EAAW,CAAA,CAAA,EAOhCA,EAAO,CAAA,qEAawCA,EAAM,CAAA,EAAC,QAAQ,6CAJpDA,EAAU,CAAA,+BACdA,EAAM,CAAA,EAAC,QAAQA,KAAO,QAAU,cAAgB,UAAU,6CAF3CA,EAAW,CAAA,CAAA,wBAnBOA,EAAO,CAAA,CAAA,sBAPGA,EAAO,CAAA,CAAA,kKA1EtD,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,YAAAwB,EAAc,EAAK,EAAAxB,EACnB,CAAA,QAAAyH,EAAU,EAAK,EAAAzH,cAsFaqB,EAAM,SAASqG,CAAU,QAezBrG,EAAM,SAASsG,CAAU,kKAnG7DnE,EAAA,EAAAoE,EACClG,EAAO,eACL,CAAAA,EAAO,OAAO,SACXA,EAAO,OAAO,QAAU,GAAKA,EAAO,YAAY,QAAUA,EAAO,UAAU,oBAEjFmG,EAAUnG,EAAO,gBAAmBA,EAAO,OAAO,SAAWA,EAAO,OAAO,QAAU,EAAC,kBAExF8B,EAAA,EAAEmE,EAAaC,EACVlG,EAAO,SAEI,GAAAA,EAAO,OACV,UAAWA,EAAO,cAClB,QAASA,EAAO,OAAO,QAAU,GAAK,IAGnC,GAAAA,EAAO,OACV,UAAW,OACX,QAASA,EAAO,OAAO,QAAU,GAAKA,EAAO,YAAY,QACzD,OAAQA,EAAO,OAAO,WAETA,EAAO,OAAO,OACjB,SAASd,EAAAc,EAAO,aAAaA,EAAO,aAAa,OAAS,CAAC,IAAlD,YAAAd,EAAqD,GAC9D,QAAS,IAEb,QAEd,MAAS,kBAEd4C,EAAA,EAAEkE,EAAaG,EACVnG,EAAO,SAEI,GAAAA,EAAO,OACV,UAAWA,EAAO,cAClB,OAAQ,KAAK,IAAI,GAAIA,EAAO,OAAO,QAAU,GAAK,CAAC,IAGhD,GAAAA,EAAO,OACV,UAAW,OACX,OAAQ,KAAK,IAAI,GAAIA,EAAO,OAAO,QAAU,GAAKA,EAAO,YAAY,OAAO,EAC5E,OAAQA,EAAO,OAAO,WAETA,EAAO,OAAO,OACjB,QAASA,EAAO,aAAa,CAAC,EAAE,GAChC,QAAS,IAEb,QAEd,MAAS,gBAEZ8B,EAAA,EAAAsE,EAAapG,EAAO,QACjBA,EAAO,OAAO,QACTA,EAAO,OAAO,QAAU,GAAK,EAC9BW,GAAoBX,EAAO,QAAQ,aAAY,CAC3C,OAAQA,EAAO,eAAiB,GAAK,EACrC,MAAOA,EAAO,aAEtBA,EAAO,aAAa,QAAU,EAC9B,GACAA,EAAO,OAAO,OACdW,GAAoBX,EAAO,QAAQ,YAAW,CAC1C,OAAQA,EAAO,OAAO,QAAU,GAAK,EACrC,MAAOA,EAAO,OAAO,QAAU,GAAKA,EAAO,aAAa,SAE5DW,GAAoBX,EAAO,QAAQ,iBAAgB,CAC/C,OAAQA,EAAO,OAAO,QAAU,GAAK,EACrC,MAAOA,EAAO,OAAO,QAAU,GAAKA,EAAO,aAAa,OACxD,MAAOA,EAAO,8LC1CbjD,EAAM,CAAA,EAAC,QAAQ,mBACVA,EAAM,CAAA,EAAC,QAAQ,mBACdA,EAAM,CAAA,EAAC,QAAQ,gCAEjBA,EAAO,CAAA,yHAJXA,EAAM,CAAA,EAAC,QAAQ,4BACVA,EAAM,CAAA,EAAC,QAAQ,4BACdA,EAAM,CAAA,EAAC,QAAQ,iLAI3BA,EAAM,CAAA,EAAC,QAAQ,sBAAqB,4DAApCA,EAAM,CAAA,EAAC,QAAQ,sBAAqB,KAAAoC,EAAA,EAAAC,CAAA,uDARxCM,EAAA3C,EAAO,CAAA,EAAA,OAAO,QAAU,WAASU,GAAAV,CAAA,yKAPvBA,EAAM,CAAA,EAAC,iBAAiB,mBAC5BA,EAAM,CAAA,EAAC,QAAQ,OAAO,uBAHPA,EAAW,CAAA,CAAA,kBAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,UAJjDI,EAUAC,EAAAG,EAAAD,CAAA,EADIK,EAA8BJ,EAAAsC,CAAA,+FAJnB9C,EAAM,CAAA,EAAC,iBAAiB,wCAC5BA,EAAM,CAAA,EAAC,QAAQ,0DAHAA,EAAW,CAAA,CAAA,6BAChBA,EAAM,CAAA,EAAC,iBAAiB,IAAI,EAQ5CA,EAAO,CAAA,EAAA,OAAO,QAAU,wSAzBd,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,YAAAwB,EAAc,EAAK,EAAAxB,QAExB2B,EAAO,IAAA,CACTN,EAAM,WAAU,EAChBA,EAAM,WACF,MAAM,KAAKK,EAAO,iBAAiB,KAAI,CAAA,EACvCrE,GAAc,WACd,EAAI,SAYIgE,EAAM,WAAW,SAAS,EAUtBC,EAAA,IAAAD,EAAM,wRCeqB,UAAc,8CACd,oYAJC,8CACM,wYAFzC,OAAA5C,EAAO,CAAA,EAAA,OAAO,MAAQ,QAAO,yEAOM,UAAc,8CAClB,WAAe,oTAjBjCA,EAAK,CAAA,CAAA,2BACDA,EAAK,CAAA,CAAA,qBACXA,EAAK,CAAA,CAAA,uBACHA,EAAK,CAAA,CAAA,kBACVA,EAAK,CAAA,CAAA,iBACNA,EAAK,CAAA,CAAA,qDATkDA,EAAM,CAAA,EAAA,IAAA,UAArFI,EAwBKC,EAAAS,EAAAP,CAAA,EAvBDK,EAsBKE,EAAAI,CAAA,EAXDN,EAUKM,EAAAH,CAAA,uVAlBiBf,EAAK,CAAA,CAAA,sCACDA,EAAK,CAAA,CAAA,gCACXA,EAAK,CAAA,CAAA,kCACHA,EAAK,CAAA,CAAA,6BACVA,EAAK,CAAA,CAAA,4BACNA,EAAK,CAAA,CAAA,2BATkDA,EAAM,CAAA,EAAA,IAAA,sQAvBtE,MAAA4C,CAAY,EAAArB,UAEnBhD,EACA+K,EACAC,EAAQ,GAEZzH,GAAO,IAAA,OACG0H,EAAQ,IAAO,qBAChBC,GAAO,CACO,UAAAC,KAASD,EAChB1E,EAAA,EAAAwE,EACIG,EAAM,kBAAoB,GAC1BA,EAAM,mBAAmB,KAAOA,EAAM,mBAAmB,MAAM,GAGzE,CAAA,UAAW,CAAC,CAAA,EAElB,OAAAF,EAAS,QAAQF,CAAe,EAEnB,IAAAE,EAAS,4BAcHjL,EAAM,KAAA,8DAVa+K,EAAepH,wJC3BtD,SAASyH,GAAKhN,EAAM,CAAE,KAAAC,EAAM,GAAAI,CAAI,EAAEF,EAAS,GAAI,CACrD,MAAMuB,EAAQ,iBAAiB1B,CAAI,EAC7BgC,EAAYN,EAAM,YAAc,OAAS,GAAKA,EAAM,UACpD,CAACuL,EAAIC,CAAE,EAAIxL,EAAM,gBAAgB,MAAM,GAAG,EAAE,IAAI,UAAU,EAC1DyL,EAAKlN,EAAK,KAAQA,EAAK,MAAQgN,EAAM5M,EAAG,OAASA,EAAG,KAAO4M,GAC3DG,EAAKnN,EAAK,IAAOA,EAAK,OAASiN,EAAM7M,EAAG,QAAUA,EAAG,IAAM6M,GAC3D,CAAE,MAAA5M,EAAQ,EAAG,SAAAC,EAAY8M,GAAM,KAAK,KAAKA,CAAC,EAAI,IAAK,OAAA7M,EAAS6B,EAAQ,EAAKlC,EAC/E,MAAO,CACN,MAAAG,EACA,SAAUwD,GAAYvD,CAAQ,EAAIA,EAAS,KAAK,KAAK4M,EAAKA,EAAKC,EAAKA,CAAE,CAAC,EAAI7M,EAC3E,OAAAC,EACA,IAAK,CAACgB,EAAG4B,IAAM,CACd,MAAMV,EAAIU,EAAI+J,EACRxK,EAAIS,EAAIgK,EACRE,EAAK9L,EAAK4B,EAAInD,EAAK,MAASI,EAAG,MAC/BkN,EAAK/L,EAAK4B,EAAInD,EAAK,OAAUI,EAAG,OACtC,MAAO,cAAc2B,CAAS,cAAcU,CAAC,OAAOC,CAAC,aAAa2K,CAAE,KAAKC,CAAE,IAC3E,CACH,CACA,qGCP+BlK,EAAU,CAAA,CAAA,2FAJvB,EAAQA,EAAO,CAAA,EAAA,iBAAiB,IAAIA,EAAO,CAAA,EAAC,EAAE,CAAA,gBACrDA,EAAM,CAAA,EAAC,QAAQ,MAAM,UALhCI,EASQC,EAAAG,EAAAD,CAAA,EADJK,EAAyCJ,EAAAsC,CAAA,iFAAd9C,EAAU,CAAA,+BAJvB,EAAQA,EAAO,CAAA,EAAA,iBAAiB,IAAIA,EAAO,CAAA,EAAC,EAAE,sCACrDA,EAAM,CAAA,EAAC,QAAQ,4JAXX,MAAA4C,CAAY,EAAArB,UACZ,QAAAkF,CAAuB,EAAAlF,EAWa,MAAAyB,EAAA,IAAAJ,EAAM,eAAe6D,EAAQ,EAAE,oHAT7E1B,EAAA,EAAEoF,EAAalH,EAAO,iBAAiB,IAAIwD,EAAQ,EAAE,EAAI,oBAAsB,aAAa,4LCc/EzG,EAAS,CAAA,CAAA,sEAPTgE,EAAAxD,EAAA,eAAAyD,EAAAjE,KAAQ,OAAO,EACnBQ,EAAA,SAAA4J,EAAApK,KAAQ,QACXgE,EAAAxD,EAAA,QAAA6J,EAAArK,EAAQ,CAAA,EAAA,QACTA,EAAM,CAAA,EAAC,QAAQA,KAAQ,QAAU,UAAY,WAAW,EACxDA,EAAO,CAAA,EAAA,QAAQA,KAAQ,QAAU,kBAAoB,eAAe,CAAA,UAR9EI,EAYQC,EAAAG,EAAAD,CAAA,EADJK,EAA2BJ,EAAAsC,CAAA,oEAAb9C,EAAS,CAAA,mBAPTkE,EAAA,GAAAD,KAAAA,EAAAjE,KAAQ,gCACZkE,EAAA,GAAAkG,KAAAA,EAAApK,KAAQ,yBACXkE,EAAA,IAAAmG,KAAAA,EAAArK,EAAQ,CAAA,EAAA,QACTA,EAAM,CAAA,EAAC,QAAQA,KAAQ,QAAU,UAAY,WAAW,EACxDA,EAAO,CAAA,EAAA,QAAQA,KAAQ,QAAU,kBAAoB,eAAe,uJAd/D,MAAA4C,CAAY,EAAArB,UACZ,QAAAkF,CAAuB,EAAAlF,cAcaqB,EAAM,WAAY,CAAA6D,EAAQ,EAAE,EAAA,CAAIA,EAAQ,OAAO,oHAZ7F1B,EAAA,EAAEuF,EAAY7D,EAAQ,QAAU,uBAAyB,WAAW,0HCUpEzG,EAAK,CAAA,EAAC,KAAK,IAAI,EAAA,gDADpBI,EAEKC,EAAAC,EAAAC,CAAA,mCAFcP,EAAK,CAAA,EAAC,KAAK;AAAA,CAAI,CAAA,CAAA,8BAC7BA,EAAK,CAAA,EAAC,KAAK,IAAI,EAAA,KAAAoC,EAAAjE,EAAAkE,CAAA,2CADDrC,EAAK,CAAA,EAAC,KAAK;AAAA,CAAI,CAAA,sIAXnB,MAAA4C,CAAY,EAAArB,UACZ,QAAAkF,CAAuB,EAAAlF,yHAE/BgJ,EACCtH,EAAO,OAAO,MAAQ,QAAUA,EAAO,OAAO,MAAQ,SAChDwD,EAAQ,WAAW,OAAS,EACxBA,EAAQ,WAAW,IAAK+D,GAASA,EAAK,QAAQ,GAC7CvH,EAAO,QAAQ,WAAW,GAC9BwD,EAAQ,OAAO,QAAQ,CAAA,wHCDzBzG,EAAM,CAAA,EAAC,QAAQ,MAAK,2EADzBI,EAEMC,EAAAY,EAAAV,CAAA,6BADDP,EAAM,CAAA,EAAC,QAAQ,MAAK,KAAAoC,EAAAjE,EAAAkE,CAAA,yCAG5BsD,GAAA3F,KAAQ,SAAWA,EAAO,CAAA,EAAA,QAAQ,WAAS,WALvC2C,EAAA3C,KAAQ,OAAKU,GAAAV,CAAA,sDADtBI,EAOKC,EAAAC,EAAAC,CAAA,mCAPckK,EAAAC,GAAAC,EAAAC,GAAA,KAAA,KAAAtK,EAAAN,KAAQ,SAAWA,EAAO,CAAA,EAAA,QAAQ,SAAS,CAAA,kBACrDA,KAAQ,6DAKZkE,EAAA,GAAAyB,KAAAA,GAAA3F,KAAQ,SAAWA,EAAO,CAAA,EAAA,QAAQ,WAAS,KAAAoC,EAAAwD,EAAAD,CAAA,EAN7BgF,GAAAlK,GAAAkK,EAAA,MAAA,GAAAzG,EAAA,GAAAyG,EAAA,OAAA,KAAA,KAAA3K,KAAQ,SAAWA,EAAO,CAAA,EAAA,QAAQ,SAAS,6IAJ/C,MAAA4C,CAAY,EAAArB,UACZ,QAAAkF,CAAuB,EAAAlF,yOCW7BvB,EAAI,CAAA,CAAA,gHAFoCA,EAAM,CAAA,EAAA,cAAA,UAHnDI,EAMMC,EAAAY,EAAAV,CAAA,mCAJYP,EAAI,CAAA,CAAA,CAAA,yBAGjBA,EAAI,CAAA,CAAA,gCAFoCA,EAAM,CAAA,EAAA,cAAA,2CADjCA,EAAI,CAAA,CAAA,0CAHpB,IAAA6K,EAAA,CAAA,YAAa,UAAU,EAAE,SAAS7K,KAAS,YAAY,iFAAvDkE,EAAA,IAAA2G,EAAA,CAAA,YAAa,UAAU,EAAE,SAAS7K,KAAS,YAAY,qIAP9C,OAAA8K,CAAc,EAAAvJ,GACd,SAAAwJ,CAAkB,EAAAxJ,yHAE1ByJ,EAAOD,EAAS,cAAgB,YAAcD,EAAO,UAAYA,EAAO,QAAQ,oBAChFG,EAASF,EAAS,oBAAsB,EAAE,wHCM5C1I,EAAArC,KAAM,KAAI,8GAH6BgE,EAAA/C,EAAA,QAAAiK,EAAA,iCAAAlL,sFACQA,EAAK,CAAA,CAAA,uCAAA,UAHzDI,EAMMC,EAAAY,EAAAV,CAAA,mBADD2D,EAAA,GAAA7B,KAAAA,EAAArC,KAAM,KAAI,KAAAoC,EAAAjE,EAAAkE,CAAA,EAH6B6B,EAAA,GAAAgH,KAAAA,EAAA,iCAAAlL,sFACQA,EAAK,CAAA,CAAA,2GAR1C,MAAA0E,CAAY,EAAAnD,iFAEpBwD,EAAA,EAAAC,EAAQ7B,GAAO,SAASuB,EAAM,KAAK,EAAIA,EAAM,MAAQ,MAAM,oKCKzD1E,EAAM,CAAA,EAAC,OAAO,UAAYA,EAAO,CAAA,EAAC,OAAO,IAAEmL,GAAAnL,CAAA,uEAA3CA,EAAM,CAAA,EAAC,OAAO,UAAYA,EAAO,CAAA,EAAC,OAAO,0NACrB,OAAAA,KAAQ,OAAkB,SAAAA,KAAO,2EAAjCkE,EAAA,IAAAkH,EAAA,OAAApL,KAAQ,QAAkBkE,EAAA,IAAAkH,EAAA,SAAApL,KAAO,yWAIrD2C,GAAA3C,EAAO,CAAA,EAAA,OAAO,MAAQ,SAAWA,EAAM,CAAA,EAAC,OAAO,SAAWA,KAAM,KAAEC,GAAAD,CAAA,yHAAlEA,EAAO,CAAA,EAAA,OAAO,MAAQ,SAAWA,EAAM,CAAA,EAAC,OAAO,SAAWA,KAAM,2MAKhEA,EAAM,CAAA,EAAC,OAAO,UAAYA,EAAO,CAAA,EAAC,OAAO,IAAEG,GAAAH,CAAA,uEAA3CA,EAAM,CAAA,EAAC,OAAO,UAAYA,EAAO,CAAA,EAAC,OAAO,0NACrB,OAAAA,KAAQ,OAAkB,SAAAA,KAAO,2EAAjCkE,EAAA,IAAAkH,EAAA,OAAApL,KAAQ,QAAkBkE,EAAA,IAAAkH,EAAA,SAAApL,KAAO,8IAZzDyF,EAAAzF,EAAO,CAAA,EAAA,aAAejB,GAAa,IAAE2G,GAAA1F,CAAA,EAKnCsF,EAAAC,GAAAvF,KAAQ,MAAM,EAAW,MAAAwF,EAAAxF,GAAAA,KAAM,mBAApC,OAAI8C,GAAA,EAAA,8CAKD,IAAA5C,EAAAF,EAAO,CAAA,EAAA,cAAgBjB,GAAa,IAAE2B,GAAAV,CAAA,+MAVtCA,EAAO,CAAA,EAAA,aAAejB,GAAa,kHAKjCuG,EAAAC,GAAAvF,KAAQ,MAAM,yDAKhBA,EAAO,CAAA,EAAA,cAAgBjB,GAAa,8IALvC,OAAI+D,GAAA,qQATS,MAAAF,CAAY,EAAArB,UACZ,QAAAkF,CAAuB,EAAAlF,yQCOVvB,EAAO,CAAA,EAAC,eAAiB,EAAI,eAAiB,GAAE,oBAAgB,EAAI,oDAH3EA,EAAO,CAAA,EAAC,gBAAkB,CAAC,gBACjCA,EAAO,CAAA,EAAC,eAAiB,EAAIA,EAAM,CAAA,EAAC,QAAQ,eAAiB,MAAS,UAHjFI,EAMMC,EAAAY,EAAAV,CAAA,EADFK,EAA2FK,EAAA6B,CAAA,mCAAvE9C,EAAO,CAAA,EAAC,eAAiB,EAAI,eAAiB,iCAHrDA,EAAO,CAAA,EAAC,gBAAkB,qCAChCA,EAAO,CAAA,EAAC,eAAiB,EAAIA,EAAM,CAAA,EAAC,QAAQ,eAAiB,gEAJvEA,EAAO,CAAA,EAAC,eAAiB,GAAKA,EAAM,CAAA,EAAC,cAAgBjB,GAAa,KAAE2B,GAAAV,CAAA,oEAApEA,EAAO,CAAA,EAAC,eAAiB,GAAKA,EAAM,CAAA,EAAC,cAAgBjB,GAAa,wMAJxD,MAAA6D,CAAY,EAAArB,UACZ,QAAAkF,CAAuB,EAAAlF,sMCQjCc,EAAArC,KAAQ,UAAS,mHAFXgE,EAAA/C,EAAA,QAAAoK,EAAArL,KAAQ,QAAQ,EADgBsL,EAAArK,EAAA,kCAAAjB,EAAO,CAAA,EAAA,cAAgBjB,GAAa,EAAE,UAFjFqB,EAMMC,EAAAY,EAAAV,CAAA,mBADD2D,EAAA,GAAA7B,KAAAA,EAAArC,KAAQ,UAAS,KAAAoC,EAAAjE,EAAAkE,CAAA,EAFX6B,EAAA,GAAAmH,KAAAA,EAAArL,KAAQ,+BADwBsL,EAAArK,EAAA,kCAAAjB,EAAO,CAAA,EAAA,cAAgBjB,GAAa,EAAE,2HANlE,QAAA0H,CAAuB,EAAAlF,GACvB,MAAAqB,CAAY,EAAArB,8MCYdvB,EAAM,CAAA,EAAC,QAAQ,gBAAe,WAE9BA,EAAM,CAAA,EAAC,WAAa,GAACG,GAAAH,CAAA,iGAJ9BI,EAaKC,EAAAa,EAAAX,CAAA,EAZDK,EAEKM,EAAAH,CAAA,mDADAf,EAAM,CAAA,EAAC,QAAQ,gBAAe,KAAAoC,EAAAK,EAAAC,CAAA,EAE9B1C,EAAM,CAAA,EAAC,WAAa,iFAJbuL,EAAAC,GAAAtK,EAAAhC,GAAA,CAAA,MAAO,GAAG,CAAA,mEAUbc,EAAM,CAAA,EAAC,QAAQ,mBAAkB,kFAH5BgE,EAAAxF,EAAA,OAAAiN,EAAAC,GAAQ1L,EAAY,CAAA,CAAA,CAAA,UAF9BI,EAMGC,EAAA7B,EAAA+B,CAAA,+DADEP,EAAM,CAAA,EAAC,QAAQ,mBAAkB,KAAAoC,EAAAjE,EAAAkE,CAAA,EAH5B6B,EAAA,GAAAuH,KAAAA,EAAAC,GAAQ1L,EAAY,CAAA,CAAA,mEARpCA,EAAM,CAAA,EAAC,aAAa,QAAMU,GAAAV,CAAA,oEAA1BA,EAAM,CAAA,EAAC,aAAa,0OATX,MAAA4C,CAAY,EAAArB,kBAkBoBqB,EAAM,SAAS+I,CAAY,wFAhBnEA,EAAY,CACX,KAAM1I,EAAO,OAAO,KACpB,SAAUA,EAAO,OAAO,SACxB,QAASA,EAAO,OAAO,2iCC2DX7C,EAoBKC,EAAAuL,EAAArL,CAAA,qBAlBDK,EAiBKgL,EAAAzK,CAAA,EAhBDP,EAMKO,EAAAD,CAAA,wCAHDN,EAEKM,EAAAH,CAAA,qBAETH,EAKKO,EAAAN,CAAA,EAJDD,EAEKC,EAAAC,CAAA,wCAGTF,EAEKO,EAAAR,CAAA,+wDA7CbP,EAyBKC,EAAAM,EAAAJ,CAAA,wCAtBDK,EAmBKD,EAAAE,CAAA,EAfDD,EAEKC,EAAAE,CAAA,qBACLH,EAWKC,EAAAC,CAAA,qBANDF,EAKKE,EAAAI,CAAA,o6BArBhB,OAAAlB,EAAO,CAAA,EAAA,cAAgBjB,GAAa,GAAE,2LAPrCiF,EAAAxF,EAAA,OAAAiN,EAAAC,GAAQ1L,EAAc,CAAA,EAAAA,KAASA,EAAC,CAAA,CAAA,CAAA,CAAA,EACPsL,EAAA9M,EAAA,0BAAAwB,KAAO,iBAAiB,IAAIA,KAAQ,EAAE,CAAA,mCACnCA,EAAO,CAAA,EAAC,QAAM,CAC3CA,EAAM,CAAA,EAAC,iBAAiB,IAAIA,EAAO,CAAA,EAAC,EAAE,CAAA,EACnBsL,EAAA9M,EAAA,mBAAAwB,KAAQ,MAAM,uBAT1CI,EA8DGC,EAAA7B,EAAA+B,CAAA,uMAzDO,CAAAsL,GAAA3H,EAAA,GAAAuH,KAAAA,EAAAC,GAAQ1L,EAAc,CAAA,EAAAA,KAASA,EAAC,CAAA,CAAA,CAAA,8BACPsL,EAAA9M,EAAA,0BAAAwB,KAAO,iBAAiB,IAAIA,KAAQ,EAAE,CAAA,8CACnCA,EAAO,CAAA,EAAC,QAAM,CAC3CA,EAAM,CAAA,EAAC,iBAAiB,IAAIA,EAAO,CAAA,EAAC,EAAE,CAAA,aACnBsL,EAAA9M,EAAA,mBAAAwB,KAAQ,MAAM,mEARtB8L,EAAApP,GAAA8B,EAAAuN,EAAApC,GAAA,CAAA,MAAO,IAAK,SAAU,GAAG,CAAA,4CAC9BqC,EAAAR,GAAAhN,EAAAU,GAAA,CAAA,MAAO,GAAG,CAAA,sDACT+M,EAAAC,GAAA1N,EAAAU,GAAA,CAAA,SAAU,GAAG,CAAA,kGAJ1BoG,EAAAC,GAAAvF,KAAO,YAAY,EAAgB,MAAAwF,EAAAxF,GAAAA,KAAQ,mBAAhD,OAAI8C,GAAA,EAAA,kMADV1C,EAmEKC,EAAAC,EAAAC,CAAA,2FAlEM+E,EAAAC,GAAAvF,KAAO,YAAY,6LAAxB,OAAI8C,GAAA,8KAFR,IAAAqJ,EAAAnM,KAAO,0FAAPkE,EAAA,GAAAkI,GAAAD,EAAAA,EAAAnM,KAAO,YAAY,wOAXV,MAAA4C,CAAY,EAAArB,YAEjB8K,EAAa,CAAI5F,EAAyB3D,MAErC,GAAAG,EAAO,OACV,UAAWwD,EAAQ,GACnB,QAASxD,EAAO,OAAO,QAAU,GAAKH,IAkBHE,EAAA,CAAAyD,EAAA3D,IAAAF,EAAM,SAASyJ,EAAc5F,EAAS3D,CAAC,CAAA,4KCMzE9C,EAAQ,CAAA,GAAAC,GAAAD,CAAA,6KANMA,EAAQ,CAAA,CAAA,gBAChBA,EAAM,CAAA,EAAC,QAAQ,IAAI,kCALlCI,EAoCKC,EAAAC,EAAAC,CAAA,EAnCDK,EAQQN,EAAAE,CAAA,EADJI,EAAgDJ,EAAAsC,CAAA,2CAFtC9C,EAAU,CAAA,CAAA,oBANIA,EAAS,CAAA,CAAA,CAAA,0CAIlBA,EAAQ,CAAA,CAAA,eAChBA,EAAM,CAAA,EAAC,QAAQ,sBAKrBA,EAAQ,CAAA,6HAQAA,EAAM,CAAA,EAAC,QAAQ,MAAK,eAUpBA,EAAM,CAAA,EAAC,QAAQ,SAAQ,iBAIvBA,EAAM,CAAA,EAAC,QAAQ,QAAO,sWAVZA,EAAW,CAAA,+CAELA,EAAW,CAAA,CAAA,6KAbpCI,EAuBKC,EAAAC,EAAAC,CAAA,EAtBDK,EAOQN,EAAA8G,CAAA,EAFJxG,EAAiDwG,EAAA0B,CAAA,uBAGrDlI,EASQN,EAAA+G,CAAA,EAFJzG,EAAqDyG,EAAA0B,CAAA,uBAGzDnI,EAGQN,EAAAgM,CAAA,EAFJ1L,EAAiD0L,EAAAC,CAAA,2GAbhDvM,EAAM,CAAA,EAAC,QAAQ,MAAK,KAAAoC,EAAAwD,EAAAD,CAAA,eAUpB3F,EAAM,CAAA,EAAC,QAAQ,SAAQ,KAAAoC,EAAAoK,EAAAC,CAAA,eANbzM,EAAW,CAAA,wCAELA,EAAW,CAAA,CAAA,eAQ3BA,EAAM,CAAA,EAAC,QAAQ,QAAO,KAAAoC,EAAAsK,EAAAC,CAAA,sQAU5B3M,EAAM,CAAA,EAAC,QAAQ,KAAK,qIAQhBA,EAAW,CAAA,gBAEfA,EAAM,CAAA,EAAC,QAAQ,QAAQ,mDADbA,EAAW,CAAA,CAAA,gGASrBA,EAAM,CAAA,EAAC,QAAQ,OAAO,2CApBjCI,EAOQC,EAAA+G,EAAA7G,CAAA,EADJK,EAAiDwG,EAAA0B,CAAA,WAErD1I,EASQC,EAAAgH,EAAA9G,CAAA,EADJK,EAAqDyG,EAAA0B,CAAA,WAEzD3I,EAOQC,EAAAiM,EAAA/L,CAAA,EADJK,EAAiD0L,EAAAC,CAAA,8FAtB1CvM,EAAM,CAAA,EAAC,QAAQ,oCAQXA,EAAW,CAAA,gCAEfA,EAAM,CAAA,EAAC,QAAQ,+CADLA,EAAW,CAAA,CAAA,eASrBA,EAAM,CAAA,EAAC,QAAQ,mHA7DzByF,EAAAzF,EAAO,CAAA,EAAA,aAAejB,GAAa,IAAEoB,GAAAH,CAAA,EAwCrCE,EAAAF,EAAO,CAAA,EAAA,cAAgBjB,GAAa,IAAE2B,GAAAV,CAAA,6FA3CzBA,EAAS,CAAA,CAAA,+EALTgE,EAAAxD,EAAA,eAAAyD,EAAAjE,KAAQ,OAAO,EACnBQ,EAAA,SAAA4J,EAAApK,KAAQ,QACXgE,EAAAxD,EAAA,QAAA6J,EAAArK,KAAQ,QAAUA,EAAM,CAAA,EAAC,QAAQ,gBAAkBA,EAAM,CAAA,EAAC,QAAQ,aAAa,UAN1FI,EAUQC,EAAAG,EAAAD,CAAA,EADJK,EAA2BJ,EAAAsC,CAAA,gHAAb9C,EAAS,CAAA,mBALTkE,EAAA,GAAAD,KAAAA,EAAAjE,KAAQ,gCACZkE,EAAA,GAAAkG,KAAAA,EAAApK,KAAQ,yBACXkE,EAAA,IAAAmG,KAAAA,EAAArK,KAAQ,QAAUA,EAAM,CAAA,EAAC,QAAQ,gBAAkBA,EAAM,CAAA,EAAC,QAAQ,+BAMxEA,EAAO,CAAA,EAAA,aAAejB,GAAa,qEAwCnCiB,EAAO,CAAA,EAAA,cAAgBjB,GAAa,8OArE1B,MAAA6D,CAAY,EAAArB,UACZ,QAAAkF,CAAgB,EAAAlF,GAChB,YAAAqL,CAAoB,EAAArL,EAE3BuE,EAAW,SAITG,EAAU,IAAA,CACZlB,EAAA,EAAAe,GAAYA,CAAQ,GAGlBE,EAAS,IAAA,CACXjB,EAAA,EAAAe,EAAW,EAAK,SAWJlD,EAAM,WAAY,CAAA6D,EAAQ,EAAE,EAAA,CAAIA,EAAQ,OAAO,EAqB/B0B,EAAA,IAAAvF,EAAM,MAAM6D,EAAS,EAAK,EAU1B2B,EAAA,IAAAxF,EAAM,MAAM6D,EAAS,EAAI,QAKe7D,EAAM,QAAQ6D,CAAO,EAczEoG,EAAA,IAAAjK,EAAM,MAAM6D,EAAS,EAAK,EAU1BqG,EAAA,IAAAlK,EAAM,MAAM6D,EAAS,EAAI,QAQzB7D,EAAM,QAAQ6D,CAAO,4JAtFxC1B,EAAA,EAAEuF,EAAY7D,EAAQ,QAAU,uBAAyB,WAAW,kOCsBrBsG,EAAA/M,KAASA,EAAI,CAAA,CAAA,EAAA,aACduD,GAAWvD,EAAI,CAAA,EAAC,QAAQ,EAAA,8IAbtDgE,EAAAgJ,EAAA,MAAAC,EAAAjN,KAAK,QAAQ,EACbkN,GAAAF,EAAA,IAAAG,EAAAnN,KAAK,OAAO,GAAAgE,EAAAgJ,EAAA,MAAAG,CAAA,yTANfnJ,EAAAxF,EAAA,OAAAiN,EAAAzL,KAAK,OAAO,yHADtBI,EAqBGC,EAAA7B,EAAA+B,CAAA,EAjBCK,EAOCpC,EAAAwO,CAAA,SACDpM,EAICpC,EAAAsE,CAAA,SACDlC,EAGKpC,EAAAsC,CAAA,EAFDF,EAAwDE,EAAAC,CAAA,gBACxDH,EAAkEE,EAAAI,CAAA,aAD/CuJ,EAAAC,GAAAC,EAAAC,GAAA,KAAA,KAAA7J,EAAAf,KAASA,EAAI,CAAA,CAAA,CAAA,CAAA,oBAZ3BkE,EAAA,GAAA+I,KAAAA,EAAAjN,KAAK,wBACLkE,EAAA,GAAA,CAAAgJ,GAAAF,EAAA,IAAAG,EAAAnN,KAAK,OAAO,gBAWmBkE,EAAA,GAAA6I,KAAAA,EAAA/M,KAASA,EAAI,CAAA,CAAA,EAAA,KAAAoC,EAAAgL,EAAAL,CAAA,EAA9BpC,GAAAlK,GAAAkK,EAAA,MAAA,GAAAzG,EAAA,GAAAyG,EAAA,OAAA,KAAA,KAAA3K,KAASA,EAAI,CAAA,CAAA,CAAA,cACGuD,GAAWvD,EAAI,CAAA,EAAC,QAAQ,EAAA,KAAAoC,EAAAoK,EAAAC,CAAA,EAlBzDvI,EAAA,GAAAuH,KAAAA,EAAAzL,KAAK,4EAgCsB2F,EAAA3F,KAAQ,YAAW,6QAR9CqN,GAAerN,EAAO,CAAA,EAAC,EAAE,CAAA,+EADnCI,EAUGC,EAAA7B,EAAA+B,CAAA,EANCK,EAICpC,EAAAsE,CAAA,SACDlC,EAA0DpC,EAAA8B,CAAA,iBAAzB4D,EAAA,GAAAyB,KAAAA,EAAA3F,KAAQ,YAAW,KAAAoC,EAAAwD,EAAAD,CAAA,cAR9C0H,GAAerN,EAAO,CAAA,EAAC,EAAE,yDA1BhCsF,EAAAC,GAAAvF,KAAQ,WAAW,uBAAxB,OAAI8C,GAAA,qBAwBD,IAAAH,EAAA3C,EAAQ,CAAA,EAAA,YAAY,OAAS,GAACU,GAAAV,CAAA,0KAzBvCI,EAsCKC,EAAAC,EAAAC,CAAA,2FArCM+E,EAAAC,GAAAvF,KAAQ,WAAW,oBAAxB,OAAI8C,GAAA,EAAA,gHAAJ,OAwBG9C,EAAQ,CAAA,EAAA,YAAY,OAAS,4HAhCvB,QAAAsN,CAAgB,EAAA/L,GAChB,QAAAkF,CAAkB,EAAAlF,EAEvB,MAAAgM,EAAYC,IACbA,EAAK,SAAWA,EAAK,UAAU,QAAQ,MAAO,EAAE,+MCKpDxN,EAAM,CAAA,EAAC,QAAQ,MAAK,eAYpBA,EAAM,CAAA,EAAC,QAAQ,SAAQ,iBAIvBA,EAAM,CAAA,EAAC,QAAQ,QAAO,6TAZZA,EAAW,CAAA,+CACLA,EAAW,CAAA,CAAA,oBAETA,EAAW,CAAA,CAAA,uBACRA,EAAW,CAAA,CAAA,8GAdrCI,EAOQC,EAAA+G,EAAA7G,CAAA,EAFJK,EAAmCwG,EAAA0B,CAAA,yBAGvC1I,EAWQC,EAAAgH,EAAA9G,CAAA,EAFJK,EAAuCyG,EAAA0B,CAAA,yBAG3C3I,EAGQC,EAAAiM,EAAA/L,CAAA,EAFJK,EAAmC0L,EAAAC,CAAA,0GAflCvM,EAAM,CAAA,EAAC,QAAQ,MAAK,KAAAoC,EAAAwD,EAAAD,CAAA,cAYpB3F,EAAM,CAAA,EAAC,QAAQ,SAAQ,KAAAoC,EAAAoK,EAAAC,CAAA,eARbzM,EAAW,CAAA,wCACLA,EAAW,CAAA,CAAA,yBAETA,EAAW,CAAA,CAAA,4BACRA,EAAW,CAAA,CAAA,cAQhCA,EAAM,CAAA,EAAC,QAAQ,QAAO,KAAAoC,EAAAsK,EAAAC,CAAA,4JA3BZ,MAAA/J,CAAY,EAAArB,UACZ,QAAAkF,CAAgB,EAAAlF,GAChB,YAAAqL,CAAoB,EAAArL,EAMf,MAAAyB,EAAA,IAAAJ,EAAM,MAAM6D,EAAS,EAAK,EAY1B0B,EAAA,IAAAvF,EAAM,MAAM6D,EAAS,EAAI,QAK2B7D,EAAM,QAAQ6D,CAAO,sVClBpE,OAAAzG,KAAQ,OAAkB,SAAAA,KAAO,2EAAjCkE,EAAA,IAAAkH,EAAA,OAAApL,KAAQ,QAAkBkE,EAAA,IAAAkH,EAAA,SAAApL,KAAO,sbADrDA,EAAO,CAAA,EAAC,OAAO,IAAMA,EAAM,CAAA,EAAC,OAAO,UAAQU,GAAAV,CAAA,EAGzCsF,EAAAC,GAAAvF,KAAQ,MAAM,EAAW,MAAAwF,EAAAxF,GAAAA,KAAM,mBAApC,OAAI8C,GAAA,EAAA,uNAHD9C,EAAO,CAAA,EAAC,OAAO,IAAMA,EAAM,CAAA,EAAC,OAAO,wHAGjCsF,EAAAC,GAAAvF,KAAQ,MAAM,2FAAnB,OAAI8C,GAAA,4OAPS,MAAAF,CAAY,EAAArB,UACZ,QAAAkF,CAAgB,EAAAlF,yNCWlBvB,EAAI,CAAA,EAAA,OAAAG,MAECH,EAAI,CAAA,EAAA,OAAAC,oHAHlBG,EAMMC,EAAAY,EAAAV,CAAA,qKAdG2M,GAAAF,EAAA,IAAAG,EAAAnN,KAAK,UAAU,GAAAgE,EAAAgJ,EAAA,MAAAG,CAAA,qHADxB/M,EAOCC,EAAA2M,EAAAzM,CAAA,UANQ2D,EAAA,GAAA,CAAAgJ,GAAAF,EAAA,IAAAG,EAAAnN,KAAK,UAAU,+FAYFA,EAAI,CAAA,CAAA,UAAlBI,EAAsBC,EAAAyC,EAAAvC,CAAA,4BAARP,EAAI,CAAA,kDAFjB,IAAA0C,EAAA1C,KAAK,UAAU,MAAM,EAAG,CAAC,EAAA,KAAG2F,EAAA3F,KAAK,SAAS,MAAM,EAAG,CAAC,EAAA,gEAApDkE,EAAA,GAAAxB,KAAAA,EAAA1C,KAAK,UAAU,MAAM,EAAG,CAAC,EAAA,KAAAoC,EAAAK,EAAAC,CAAA,EAAGwB,EAAA,GAAAyB,KAAAA,EAAA3F,KAAK,SAAS,MAAM,EAAG,CAAC,EAAA,KAAAoC,EAAAwD,EAAAD,CAAA,oEAZ5D,OAAAxD,EAAAnC,OAAA,MAAAmC,EAAM,WAAUzB,8MAJN,GAAA,CAAA,KAAA8J,EAAyB,MAAS,EAAAjJ,EAClC,CAAA,KAAAkM,EAA2B,MAAS,EAAAlM,wOCgCAvB,EAAS,CAAA,mDADhDI,EAAKC,EAAAqN,EAAAnN,CAAA,kFACkCP,EAAS,CAAA,qIAxB/C0C,EAAA1C,KAAU,QAAO,uBASLA,EAAS,CAAA,EAAC,OAAO,SAAQ,WAKjC2N,EAAA3N,KAAU,SAAQ,aAMhB4N,EAAA5N,KAAU,QAAO,iBAfG,MAAA,CAAA,KAAAA,KAAU,MAAM,IAiB1C,IAAA2C,EAAA3C,EAAU,CAAA,EAAA,YAAY,OAAS,GAACU,GAAAV,CAAA,wRAdhBA,EAAS,CAAA,EAAC,OAAO,UAAU,8OAXxDI,EA8BKC,EAAAwN,EAAAtN,CAAA,EA7BDK,EA4BKiN,EAAAjC,CAAA,EA3BDhL,EAEIgL,EAAA5K,CAAA,gBACJJ,EAcKgL,EAAAjL,CAAA,EAbDC,EASKD,EAAAG,CAAA,EARDF,EAEKE,EAAAC,CAAA,qBACLH,EAIKE,EAAAI,CAAA,EAHDN,EAEGM,EAAA1C,CAAA,gBAGXoC,EAEKD,EAAAE,CAAA,gBAETD,EAAKgL,EAAA8B,CAAA,SACL9M,EAGKgL,EAAAzK,CAAA,sDArBA,CAAA0K,GAAA3H,EAAA,IAAAxB,KAAAA,EAAA1C,KAAU,QAAO,KAAAoC,EAAAK,EAAAC,CAAA,aAKSwB,EAAA,IAAA4J,EAAA,KAAA9N,KAAU,oCAIxBA,EAAS,CAAA,EAAC,OAAO,SAAQ,KAAAoC,EAAAkF,EAAAC,CAAA,mBADrBvH,EAAS,CAAA,EAAC,OAAO,6BAM7B,CAAA6L,GAAA3H,EAAA,IAAAyJ,KAAAA,EAAA3N,KAAU,SAAQ,KAAAoC,EAAA2L,EAAAJ,CAAA,GAMhB,CAAA9B,GAAA3H,EAAA,IAAA0J,KAAAA,EAAA5N,KAAU,QAAO,MAAAmB,EAAA,UAAAyM,GAEvB5N,EAAU,CAAA,EAAA,YAAY,OAAS,mOA7B7B,QAAAsN,CAAgB,EAAA/L,GAChB,UAAAyM,CAAoB,EAAAzM,wUCoBPvB,EAAM,CAAA,EAAC,QAAQA,EAAI,CAAA,CAAA,EAAA,0BACpBiO,EAAA1I,GAAAvF,KAAWA,EAAI,CAAA,CAAA,CAAA,EAAc,MAAAwF,EAAAxF,GAAAA,KAAK,mBAAvC,OAAI8C,GAAA,EAAA,2FADuB,GAAE,+EADnC1C,EAMKC,EAAAC,EAAAC,CAAA,EALDK,EAAqCN,EAAAW,CAAA,mGAA7BjB,EAAM,CAAA,EAAC,QAAQA,EAAI,CAAA,CAAA,EAAA,KAAAoC,EAAAK,EAAAC,CAAA,QACpBuL,EAAA1I,GAAAvF,KAAWA,EAAI,CAAA,CAAA,CAAA,6HACP,GAAE,8DACc2F,EAAA3F,KAAK,SAAQ,OADnC2C,EAAA3C,KAAI,GAACG,GAAA,oEACD6D,EAAAxF,EAAA,OAAAiN,EAAAzL,KAAK,UAAU,qDAAxBI,EAA4CC,EAAA7B,EAAA+B,CAAA,qBADvCP,KAAI,2DACkBkE,EAAA,GAAAyB,KAAAA,EAAA3F,KAAK,SAAQ,KAAAoC,EAAAwD,EAAAD,CAAA,EAA/BzB,EAAA,GAAAuH,KAAAA,EAAAzL,KAAK,gFALrB,IAAA6K,EAAA7K,EAAW,CAAA,EAAAA,EAAM,CAAA,CAAA,EAAA,OAAS,+EAA1BkE,EAAA,IAAA2G,EAAA7K,EAAW,CAAA,EAAAA,EAAM,CAAA,CAAA,EAAA,OAAS,oIAJ1BA,EAAO,CAAA,EAAC,OAAO,SAAQ,qBALb,MAAA,CAAA,KAAAA,KAAQ,MAAM,aAQ1B,OAAO,OAAOlB,EAAa,CAAA,uBAAhC,OAAIgE,GAAA,+LAJO9C,EAAO,CAAA,EAAC,OAAO,UAAU,0HAN9CI,EAsBKC,EAAAQ,EAAAN,CAAA,EArBDK,EAEKC,EAAAE,CAAA,qBACLH,EAiBKC,EAAAC,CAAA,EAhBDF,EAIKE,EAAAI,CAAA,EAHDN,EAEGM,EAAA,CAAA,8FANYgD,EAAA,IAAA4J,EAAA,KAAA9N,KAAQ,oCAKlBA,EAAO,CAAA,EAAC,OAAO,SAAQ,KAAAoC,EAAAwD,EAAAD,CAAA,mBADnB3F,EAAO,CAAA,EAAC,OAAO,uCAIrB,OAAO,OAAOlB,EAAa,CAAA,oBAAhC,OAAIgE,GAAA,EAAA,mHAAJ,yMAlBK,MAAAF,CAAY,EAAArB,UACZ,QAAAkF,CAAgB,EAAAlF,oHAE1BwD,EAAA,EAAEmJ,EAAcC,GACN1H,EAAQ,WAAW,OAAQ+D,GAASA,EAAK,MAAQ2D,CAAI,6MCsC3B,QAAAnO,KAAO,sEADpCI,EAAKC,EAAAqN,EAAAnN,CAAA,4CACwB2D,EAAA,IAAAkK,EAAA,QAAApO,KAAO,+JAWvCA,EAAM,CAAA,EAAC,QAAQ,WAAU,0BAEvBsF,EAAAC,GAAAvF,KAAQ,UAAU,EAAe,MAAAwF,EAAAxF,GAAAA,KAAU,mBAAhD,OAAI8C,GAAA,EAAA,gMAHN1C,EAEKC,EAAAC,EAAAC,CAAA,wGADAP,EAAM,CAAA,EAAC,QAAQ,WAAU,KAAAoC,EAAAK,EAAAC,CAAA,QAEvB4C,EAAAC,GAAAvF,KAAQ,UAAU,sFAAvB,OAAI8C,GAAA,oLACyB,QAAA9C,KAAO,2IAAPkE,EAAA,IAAAmK,EAAA,QAAArO,KAAO,4JArC7B0C,EAAA1C,KAAQ,QAAO,mBAQPuH,EAAAvH,KAAQ,SAAQ,uBAWlB4N,EAAA5N,KAAQ,QAAO,4KAErB,IAAAyF,GAAAzF,EAAQ,CAAA,EAAA,YAAY,OAAS,GAACG,GAAAH,CAAA,+DAWtC,IAAAE,EAAAF,EAAQ,CAAA,EAAA,WAAW,OAAS,GAACU,GAAAV,CAAA,syBAnClCI,EAiCKC,EAAAiO,EAAA/N,CAAA,EAhCDK,EA+BK0N,EAAAT,CAAA,EA9BDjN,EAEIiN,EAAAU,CAAA,gBACJ3N,EAYKiN,EAAAlN,CAAA,EAXDC,EAEKD,EAAAI,CAAA,qBACLH,EAOKD,EAAAE,CAAA,EANDD,EAEKC,EAAAK,CAAA,gBACLN,EAEKC,EAAAC,CAAA,wCAIbF,EAAKiN,EAAAW,CAAA,SACL5N,EAGKiN,EAAA1M,CAAA,+CAKLP,EAAKiN,EAAAY,CAAA,SACL7N,EAEKiN,EAAAjC,CAAA,8DA5BA,CAAAC,IAAA3H,EAAA,IAAAxB,KAAAA,EAAA1C,KAAQ,QAAO,KAAAoC,EAAAK,EAAAC,CAAA,sEAQP,CAAAmJ,IAAA3H,EAAA,IAAAqD,KAAAA,EAAAvH,KAAQ,SAAQ,KAAAoC,EAAAkF,EAAAC,CAAA,gKAWlB,CAAAsE,IAAA3H,EAAA,IAAA0J,KAAAA,EAAA5N,KAAQ,QAAO,MAAAmB,EAAA,UAAAyM,GAErB5N,EAAQ,CAAA,EAAA,YAAY,OAAS,wMAWrCA,EAAQ,CAAA,EAAA,WAAW,OAAS,keA9ClB,MAAA4C,CAAY,EAAArB,UACZ,QAAAkF,CAAgB,EAAAlF,oHAE1BwD,EAAA,EAAE6H,EACCnG,EAAQ,OAAO,IAAMxD,EAAO,OACtBwD,EAAQ,WAAW,OAAQ1G,GAAMA,EAAE,MAAQ,IAAI,EAAE,OAAS,EAC1D0G,EAAQ,WAAW,OACd1G,GAAC,CAAM,KAAM,IAAI,EAAE,SAASA,EAAE,IAAI,GAAKA,EAAE,IAAMkD,EAAO,MAAM,EAC/D,OAAS,CAAC,gJCJN,MAAAyL,EAAA,MAAM,KAAKC,EAAW,CAAA,EAAA,OAAM,GAAI,OAAM,YAAAC,EAAA,4HAIzC5O,EAAM,CAAA,EAAC,QAAQA,EAAI,CAAA,CAAA,EAAA,qCAGbA,EAAK,CAAA,CAAA,EAAU,MAAAwF,EAAAxF,GAAAA,MAAK,mBAAzB,OAAI8C,GAAA,EAAA,0FAHgB,GAC1B,sOAHJ1C,EAuCKC,EAAAS,EAAAP,CAAA,EAtCDK,EAEKE,EAAAC,CAAA,uBACLH,EAkCKE,EAAAI,CAAA,yFApCAlB,EAAM,CAAA,EAAC,QAAQA,EAAI,CAAA,CAAA,EAAA,KAAAoC,EAAAK,EAAAC,CAAA,cAGb1C,EAAK,CAAA,CAAA,8EAAV,OAAI8C,GAAA,obAcqB9C,EAAM,CAAA,EAAC,QAAQ,oBAAoB,UAH9CI,EAMKC,EAAAC,EAAAC,CAAA,EADDK,EAAqCN,EAAAwC,CAAA,sBAF9B9C,EAAM,CAAA,EAAC,QAAQ,yUAO7B2F,EAAA3F,MAAK,SAAQ,gEAbT,OAAAA,MAAK,QAAO,0VAkBVA,EAAM,CAAA,EAAC,QAAQ,MAAM,yGArBXsL,EAAAxK,EAAA,eAAA,CAAAd,MAAK,OAAO,uBAJrCI,EA8BKC,EAAAS,EAAAP,CAAA,EAxBDK,EAYKE,EAAAC,CAAA,wBACLH,EAEKE,EAAAI,CAAA,gBACLN,EAOQE,EAAAN,CAAA,EADJI,EAA8BJ,EAAAsC,CAAA,qBATF4H,GAAAC,EAAAC,GAAA,KAAA,KAAA1J,EAAAlB,MAAK,QAAQ,CAAA,iBAjB/B0K,GAAAmE,EAAAjE,GAAA,KAAA,KAAA9J,EAAAd,MAAK,QAAQ,CAAA,2JAkBtB,CAAA6L,GAAA3H,EAAA,IAAAyB,KAAAA,EAAA3F,MAAK,SAAQ,KAAAoC,EAAAwD,EAAAD,CAAA,EADcgF,GAAAlK,GAAAkK,EAAA,MAAA,GAAAzG,EAAA,GAAAyG,EAAA,OAAA,KAAA,KAAA3K,MAAK,QAAQ,mBAMlCA,EAAM,CAAA,EAAC,QAAQ,yBAvBZ6O,GAAApO,GAAAoO,EAAA,MAAA,GAAA3K,EAAA,GAAA2K,EAAA,OAAA,KAAA,KAAA7O,MAAK,QAAQ,aAENsL,EAAAxK,EAAA,eAAA,CAAAd,MAAK,OAAO,qMAXhD2C,EAAA3C,KAAM,QAAMU,GAAAV,CAAA,uEAAZA,KAAM,2MAFR,OAAO,OAAOlB,EAAa,CAAA,uBAAhC,OAAIgE,GAAA,+MAAC,OAAO,OAAOhE,EAAa,CAAA,oBAAhC,OAAIgE,GAAA,EAAA,oHAAJ,OAAIA,EAAAgM,EAAA,OAAAhM,GAAA,0CAAJ,OAAIA,GAAA,4MALS,MAAAF,CAAY,EAAArB,UACZ,WAAA2M,CAA0C,EAAA3M,GAC1C,SAAAwN,CAAiC,EAAAxN,EAsCJ,MAAAyB,EAAAwH,GAAAuE,EAASvE,CAAI,EAlCG3H,EAAA,CAAAsL,EAAA3D,IAASA,EAAK,MAAQ2D,4TCCbxI,EAAA3F,KAAQ,UAAS,0GAAtEI,EAAmDC,EAAAyC,EAAAvC,CAAA,4BAAE2D,EAAA,GAAAyB,KAAAA,EAAA3F,KAAQ,UAAS,KAAAoC,EAAAwD,EAAAD,CAAA,uDAFnB3F,EAAM,CAAA,EAAC,QAAQ,WAAU,wGAA5EI,EAAiDC,EAAAyC,EAAAvC,CAAA,wCAAEP,EAAM,CAAA,EAAC,QAAQ,WAAU,KAAAoC,EAAAwD,EAAAD,CAAA,oEAoBzEL,EAAAC,GAAAvF,KAAQ,MAAM,EAAW,MAAAwF,EAAAxF,GAAAA,KAAM,mBAApC,OAAI8C,GAAA,EAAA,iLADV1C,EAIKC,EAAAC,EAAAC,CAAA,sEAHM+E,EAAAC,GAAAvF,KAAQ,MAAM,8EAAnB,OAAI8C,GAAA,6dArBD,OAAA9C,KAAO,WAAUG,wBAmBzBD,EAAAF,KAAQ,QAAMU,GAAAV,CAAA,+JApBqDgE,EAAAjD,EAAA,QAAAiO,EAAAhP,KAAQ,QAAQ,EAgBlEgE,EAAAlB,EAAA,QAAAmM,EAAA,OAAAjP,KAAQ,QAAU,uBAAyB,YAAW,oGALtDgE,EAAAxD,EAAA,eAAAyD,EAAAjE,KAAQ,OAAO,EACnBQ,EAAA,SAAA4J,EAAApK,KAAQ,QACXgE,EAAAxD,EAAA,QAAA6J,EAAArK,KAAQ,QAAUA,EAAM,CAAA,EAAC,QAAQ,gBAAkBA,EAAM,CAAA,EAAC,QAAQ,aAAa,wGAflGI,EA6BKC,EAAAS,EAAAP,CAAA,EA5BDK,EAmBKE,EAAAI,CAAA,EAlBDN,EAMKM,EAAAH,CAAA,qBACLH,EAUQM,EAAAV,CAAA,EADJI,EAAwEJ,EAAAsC,CAAA,sIAhBR,CAAA+I,GAAA3H,EAAA,GAAA8K,KAAAA,EAAAhP,KAAQ,4BAgB1D,CAAA6L,GAAA3H,EAAA,GAAA+K,KAAAA,EAAA,OAAAjP,KAAQ,QAAU,uBAAyB,gCAL3C,CAAA6L,GAAA3H,EAAA,GAAAD,KAAAA,EAAAjE,KAAQ,kCACZ,CAAA6L,GAAA3H,EAAA,GAAAkG,KAAAA,EAAApK,KAAQ,2BACX,CAAA6L,GAAA3H,EAAA,GAAAmG,KAAAA,EAAArK,KAAQ,QAAUA,EAAM,CAAA,EAAC,QAAQ,gBAAkBA,EAAM,CAAA,EAAC,QAAQ,gCAO5EA,KAAQ,sRA1BF,MAAA4C,CAAY,EAAArB,UACZ,QAAAkF,CAAgB,EAAAlF,cAmBHqB,EAAM,WAAY,CAAA6D,EAAQ,EAAE,EAAA,CAAIA,EAAQ,OAAO,mLCkO3E,eAAsByI,GAAaC,EAAgD,CACzE,MAAAC,EAAQ,MAAMC,GAAQ,WAAW,EACjCC,EAAe,MAAM,KAAKH,CAAQ,EAAE,IAAI,CAAC,CAAE,WAAAI,EAAY,GAAGX,MAAY,CACxE,WAAY,cAAcW,CAAU,GACpC,KAAAX,CACF,EAAA,EACE,GAAA,CACA,OAAO,MAAM,QAAQ,IAAIQ,EAAK,KAAKE,CAAY,CAAC,QAC3CE,EAAO,CACZ,MAAM,OAAOA,GAAS,SAAW,CAAE,QAASA,CAAU,EAAAA,CAC1D,CACJ,uDC9B4C,MAAAd,GAAAvM,EAAAwM,KAAW,IAAIA,EAAK,EAAA,EAAA,EAAE,IAAtB,YAAAxM,EAAyB,+HAlBvB,MAAAuM,EAAAC,MAAM,MAAK,YAAAC,EAAA,8LA/Cd5O,EAAM,EAAA,EAAC,QAAQ,SAAQ,uCACnCA,EAAK,CAAA,CAAA,EAAU,MAAAwF,EAAAxF,GAAAA,MAAK,mBAAzB,OAAI8C,GAAA,EAAA,oDAOT9C,EAAM,CAAA,EAAC,OAAS,GAAC0F,GAAA1F,CAAA,0CAoBpB,OAAAA,MAAM,OAIFA,EAAY,EAAA,EAAA,IAJJ,kLA5BS,4DAHHA,EAAM,EAAA,IAAA,QAAAyP,GAAA,IAAAzP,EAAA,EAAA,EAAA,KAAA0P,CAAA,CAAA,+OARlCtP,EAwGKC,EAAAS,EAAAP,CAAA,EApGDK,EAkCKE,EAAAI,CAAA,EAjCDN,EAaKM,EAAAH,CAAA,EAZDH,EAWQG,EAAA2O,CAAA,EANJ9O,EAAmD8O,EAAAC,CAAA,+DAHvC3P,EAAM,EAAA,EAAA,EAAA,0IAGCA,EAAM,EAAA,EAAC,QAAQ,SAAQ,KAAAoC,EAAAK,EAAAC,CAAA,kBACnC1C,EAAK,CAAA,CAAA,uDAJAA,EAAM,EAAA,CAAA,EAWrBA,EAAM,CAAA,EAAC,OAAS,+UALJ0C,EAAA1C,MAAK,KAAI,gEADC2P,EAAA,QAAAC,EAAA5P,MAAK,wCAApBI,EAEQC,EAAAsP,EAAApP,CAAA,4BADH2D,EAAA,CAAA,EAAA,KAAAxB,KAAAA,EAAA1C,MAAK,KAAI,KAAAoC,EAAAK,EAAAC,CAAA,EADCwB,EAAA,CAAA,EAAA,KAAA0L,KAAAA,EAAA5P,MAAK,+FAcf2C,EAAA3C,EAAO,CAAA,EAAA,WAAanB,GAAU,UAAQsM,GAAAnL,CAAA,OAGpCA,EAAM,CAAA,CAAA,EAAW,MAAAwF,EAAAxF,GAAAA,MAAM,mBAA5B,OAAI8C,GAAA,EAAA,uMANM9C,EAAO,EAAA,IAAA,QAAAyP,GAAA,IAAAzP,EAAA,EAAA,EAAA,KAAA0P,CAAA,CAAA,uDAJ3BtP,EAgBKC,EAAAC,EAAAC,CAAA,EAfDK,EAcQN,EAAAoP,CAAA,8EAXQ1P,EAAO,EAAA,EAAA,EAAA,gEAGdA,EAAO,CAAA,EAAA,WAAanB,GAAU,gFAG5BmB,EAAM,CAAA,CAAA,uDANDA,EAAO,EAAA,CAAA,kGAIIA,EAAM,EAAA,EAAC,QAAQ,UAAS,+CAA5B,0BAAfI,EAAoDC,EAAAsP,EAAApP,CAAA,oCAAjCP,EAAM,EAAA,EAAC,QAAQ,UAAS,KAAAoC,EAAAjE,EAAAkE,CAAA,yCAItCK,EAAA1C,MAAM,KAAI,gEADA2P,EAAA,QAAAC,EAAA5P,MAAM,qEAArBI,EAEQC,EAAAsP,EAAApP,CAAA,4BADH2D,EAAA,CAAA,EAAA,KAAAxB,KAAAA,EAAA1C,MAAM,KAAI,KAAAoC,EAAAK,EAAAC,CAAA,EADAwB,EAAA,CAAA,EAAA,KAAA0L,KAAAA,EAAA5P,MAAM,oFAuBxBA,EAAM,EAAA,EAAC,QAAQ,SAAQ,iFAGjB,OAAO,OAAOlB,EAAa,CAAA,uBAAhC,OAAIgE,GAAA,8BAkBX9C,EAAK,EAAA,CAAA,EAAU,MAAAwF,EAAAxF,GAAAA,MAAK,mBAAzB,OAAI8C,GAAA,EAAA,gcA3BN1C,EA0BKC,EAAAM,EAAAJ,CAAA,EAzBDK,EAEKD,EAAAI,CAAA,qBACLH,EAqBKD,EAAAE,CAAA,EApBDD,EAEKC,EAAAK,CAAA,gBACLN,EAgBKC,EAAAC,CAAA,kJAnBgCd,EAAM,EAAA,EAAC,QAAQ,QAAQ,CAAA,4CACvDA,EAAM,EAAA,EAAC,QAAQ,SAAQ,KAAAoC,EAAAwD,EAAAD,CAAA,kDADS3F,EAAM,EAAA,EAAC,QAAQ,QAAQ,mBAIjD,OAAO,OAAOlB,EAAa,CAAA,oBAAhC,OAAIgE,GAAA,EAAA,mHAAJ,yBAkBP9C,EAAK,EAAA,CAAA,yGAAV,OAAI8C,GAAA,iMA9BD9C,EAAM,EAAA,EAAC,QAAQ,kBAAiB,qFADrCI,EAEKC,EAAAC,EAAAC,CAAA,oCADAP,EAAM,EAAA,EAAC,QAAQ,kBAAiB,KAAAoC,EAAAjE,EAAAkE,CAAA,iDAJhCrC,EAAM,EAAA,EAAC,QAAQ,aAAY,qFADhCI,EAEKC,EAAAC,EAAAC,CAAA,oCADAP,EAAM,EAAA,EAAC,QAAQ,aAAY,KAAAoC,EAAAjE,EAAAkE,CAAA,iDA4BXrC,EAAM,EAAA,EAAC,QAAQA,EAAI,EAAA,CAAA,EAAA,qLAHNA,EAAG,EAAA,CAAA,oBAFEA,EAAG,EAAA,CAAA,uBACAA,EAAG,EAAA,CAAA,UAJ7BI,EASQC,EAAAG,EAAAD,CAAA,0EADHP,EAAM,EAAA,EAAC,QAAQA,EAAI,EAAA,CAAA,EAAA,KAAAoC,EAAAK,EAAAC,CAAA,oBAHN1C,EAAG,EAAA,uDAFEA,EAAG,EAAA,CAAA,kCACAA,EAAG,EAAA,CAAA,kDA+BpBA,EAAM,EAAA,EAAC,QAAQA,EAAI,EAAA,CAAA,EAAA,sKAJNgE,EAAAxD,EAAA,eAAAqP,EAAA7P,OAAiBA,EAAI,EAAA,CAAA,EAFhBsL,EAAA9K,EAAA,cAAAR,OAAiBA,EAAI,EAAA,CAAA,EACnBsL,EAAA9K,EAAA,gBAAAR,OAAiBA,EAAI,EAAA,CAAA,UAJ9CI,EAUQC,EAAAG,EAAAD,CAAA,0EADHP,EAAM,EAAA,EAAC,QAAQA,EAAI,EAAA,CAAA,EAAA,KAAAoC,EAAAK,EAAAC,CAAA,EAJNwB,EAAA,CAAA,EAAA,MAAA2L,KAAAA,EAAA7P,OAAiBA,EAAI,EAAA,qCAFhBsL,EAAA9K,EAAA,cAAAR,OAAiBA,EAAI,EAAA,CAAA,aACnBsL,EAAA9K,EAAA,gBAAAR,OAAiBA,EAAI,EAAA,CAAA,4DARjD2F,EAAA3F,MAAK,SAAQ,2DAGP,OAAO,OAAOlB,EAAa,CAAA,uBAAhC,OAAIgE,GAAA,yZATlB1C,EAwBKC,EAAAM,EAAAJ,CAAA,EAvBDK,EAEKD,EAAAI,CAAA,qBACLH,EAmBKD,EAAAE,CAAA,EAlBDD,EAEKC,EAAAK,CAAA,gBACLN,EAcKC,EAAAC,CAAA,mEAjBc2J,EAAAC,GAAAC,EAAAC,GAAA,KAAA,KAAA1J,EAAAlB,MAAK,QAAQ,CAAA,uEAC3B,CAAA6L,GAAA3H,EAAA,CAAA,EAAA,OAAAyB,KAAAA,EAAA3F,MAAK,SAAQ,KAAAoC,EAAAwD,EAAAD,CAAA,EADCgF,GAAAlK,GAAAkK,EAAA,MAAA,GAAAzG,EAAA,CAAA,EAAA,MAAAyG,EAAA,OAAA,KAAA,KAAA3K,MAAK,QAAQ,mBAIrB,OAAO,OAAOlB,EAAa,CAAA,oBAAhC,OAAIgE,GAAA,EAAA,mHAAJ,wKAvFzB9C,EAAQ,CAAA,GAAAU,GAAAV,CAAA,iJA/BWA,EAAO,CAAA,EAAG,sBAAwB,UAAS,kOAOlDA,EAAM,EAAA,EAAC,QAAQ,aAAa,qBAC7BA,EAAM,EAAA,EAAC,QAAQ,aAAa,4BAFrBsL,EAAAjH,EAAA,aAAA,CAAArE,KAAW,IAAI,6BAmBTA,EAAI,CAAA,EAAG,WAAaA,EAAQ,CAAA,EAAG,cAAgB,gBAAe,qEANpEA,EAAQ,CAAA,CAAA,wCAEhBA,EAAM,EAAA,EAAC,QAAQ,aAAa,oMA7B/CI,EAkJKC,EAAAS,EAAAP,CAAA,EA9IDK,EAKKE,EAAAC,CAAA,EADDH,EAAsFG,EAAA+H,CAAA,SAG1FlI,EAWCE,EAAAuD,CAAA,OAJerE,EAAI,CAAA,CAAA,kBAMpBY,EAaKE,EAAAI,CAAA,EAZDN,EAWQM,EAAAV,CAAA,EAJJI,EAGCJ,EAAAuI,CAAA,sFAdK/I,EAAW,EAAA,CAAA,iBASQA,EAAiB,EAAA,CAAA,CAAA,oBA5BxCA,EAAU,EAAA,CAAA,CAAA,oDAMIA,EAAO,CAAA,EAAG,sBAAwB,qDAOzCA,EAAM,EAAA,EAAC,QAAQ,8DAChBA,EAAM,EAAA,EAAC,QAAQ,wDAEfA,EAAI,CAAA,QAAJA,EAAI,CAAA,CAAA,gBAJGsL,EAAAjH,EAAA,aAAA,CAAArE,KAAW,IAAI,oCAmBTA,EAAI,CAAA,EAAG,WAAaA,EAAQ,CAAA,EAAG,cAAgB,sEANrDA,EAAQ,CAAA,CAAA,0BAEhBA,EAAM,EAAA,EAAC,QAAQ,gCAUzBA,EAAQ,CAAA,4LArIP,MAAA8P,GAAQ,sGALH,MAAAlN,CAAY,EAAArB,UACZ,OAAAuJ,CAAc,EAAAvJ,GACd,WAAA2M,CAA0C,EAAA3M,GAC1C,SAAAwO,CAA6E,EAAAxO,EAIpFuE,EAAW,GACXkF,EAAO,GACPgF,EACAC,EAAU,GACVC,EACAC,EAAK,CAAA,EACLC,EAAM,CAAA,EACN7F,EAAK,CAAA,EACL8F,EAAe,GACfC,EAAS,EACTC,EAAU,QAERC,EAAiB,SAAA,CACf1K,GACAf,EAAA,EAAAiG,EAAO,EAAE,EACTjG,EAAA,EAAAe,EAAW,EAAK,EAChB,OAAO,aAAaoK,CAAS,IAE7BO,EAAO,EAAK,EACZT,EAAU,MAAK,IAIjBS,QAAgBC,GAAiB,CAC7B,MAAAC,EAAQ1N,EAAO,SAAS,gBAE9B8B,EAAA,EAAAkL,EAAU,EAAI,EACd,OAAO,aAAaC,CAAS,EAE7BA,EAAY,OAAO,kCAELf,EAAQ,EAEN,WAAY,YACZ,SAAUrE,EAAO,KAGjB,WAAY,aACZ,SAAUA,EAAO,KAGjB,WAAY,eACZ,MAAK,CACD,SAAUA,EAAO,GACjB,SAAUE,EACV,OAAAsF,EACA,QAAAC,GAEJ,MAAOI,EAAQ,QAGnBC,OAEAA,GAAS,MAAS1B,GAAaC,CAAQ,QAClCK,EAAK,CACV5M,EAAM,SAAS4M,CAAqB,EACpCzK,EAAA,EAAAkL,EAAU,EAAK,EACflL,EAAA,EAAAe,EAAW,EAAK,EAChBf,EAAA,GAAAsL,EAAe,EAAK,OACpB9F,EAAK,CAAA,CAAA,cAGTA,EAAQqG,GAAU,IAAG,CAAA,EACrB7L,EAAA,GAAAsL,EAAe9F,EAAM,OAASoG,CAAK,EACnC5L,EAAA,GAAAwF,EAAQA,EAAM,MAAM,EAAGoG,CAAK,CAAA,MAC5BP,EAASQ,GAAU,IAAG,CAAA,OACtBL,EAAUH,EAAO,KAAMS,GAAUA,EAAM,IAAMN,CAAO,EAC9CA,EACAzF,EAAO,WAAajM,GAAU,YAC9BsD,GAAAiO,EAAO,CAAC,IAAR,YAAAjO,GAAW,KAAM,CAChB,MACPgO,EAAQS,GAAU,IAAG,CAAA,EACrB7L,EAAA,GAAAuL,EAASH,EAAM,KAAMW,GAASA,EAAK,IAAMR,CAAM,EAAIA,EAAS,CAAC,EAC7DvL,EAAA,EAAAkL,EAAU,EAAK,EACflL,EAAA,EAAAe,EAAW,EAAI,GAEnB4K,EAAWZ,GAAQ,IAIrBiB,EAAU,IAAA,CACZhM,EAAA,EAAAiG,EAAO,EAAE,EACTjG,EAAA,EAAAe,EAAW,EAAK,GAGdkL,EAAW,IAAA,CACRlL,GACD2K,EAAO,EAAK,gBAuBJzF,EAAI,KAAA,uDACLgF,EAAS9N,WACJ,MAAA+O,EAAA,IAAAR,EAAO,EAAI,eA4BCH,EAAMY,GAAA,IAAA,iBACD,MAAAC,EAAA,IAAAV,EAAO,EAAK,eAebF,EAAOW,GAAA,IAAA,iBACF,MAAAE,EAAA,IAAAX,EAAO,EAAK,EA0CLzN,GAAA,CAAAqO,EAAAlD,IAAA4B,EAASxF,EAAO8G,EAAM,KAAOlD,CAAI,QARhD3D,WAAS,QAAArI,EAAA+L,EAAW,IAAI1D,EAAK,EAAE,IAAtB,YAAArI,EAAyB,OAAQgM,eAmCnC4B,EAAQ,CAAEvF,CAAI,EAAG8G,GAAiBnD,EAAO,KAAOA,CAAI,6WC7O3FnO,EAAM,CAAA,EAAC,QAAQ,KAAI,uOAJbA,EAAM,CAAA,EAAC,QAAQ,IAAI,UAH9BI,EAQQC,EAAAG,EAAAD,CAAA,EAFJK,EAA4BJ,EAAAsC,CAAA,oEAC3B9C,EAAM,CAAA,EAAC,QAAQ,KAAI,KAAAoC,EAAAwD,EAAAD,CAAA,cAJb3F,EAAM,CAAA,EAAC,QAAQ,wJANX,MAAA4C,CAAY,EAAArB,MAOP,MAAAyB,EAAA,IAAAJ,EAAM,wPCuLb5C,EAAM,CAAA,EAAC,QAAQ,uBAAsB,wIAF1CI,EAGKC,EAAAC,EAAAC,CAAA,EAFDK,EAA0CN,EAAAwC,CAAA,sCACzC9C,EAAM,CAAA,EAAC,QAAQ,uBAAsB,KAAAoC,EAAAwD,EAAAD,CAAA,6CAWrC/B,GACG5D,EAAM,CAAA,EAAC,QAAQ,uBACfA,EAAM,CAAA,EAAC,SAAS,aAAa,EAAA,wIAJrCI,EAMKC,EAAAC,EAAAC,CAAA,EALDK,EAA0CN,EAAAwC,CAAA,sCACzCc,GACG5D,EAAM,CAAA,EAAC,QAAQ,uBACfA,EAAM,CAAA,EAAC,SAAS,aAAa,EAAA,KAAAoC,EAAAwD,EAAAD,CAAA,6CAPhC3F,EAAM,CAAA,EAAC,QAAQ,qBAAoB,wIAFxCI,EAGKC,EAAAC,EAAAC,CAAA,EAFDK,EAA0CN,EAAAwC,CAAA,sCACzC9C,EAAM,CAAA,EAAC,QAAQ,qBAAoB,KAAAoC,EAAAwD,EAAAD,CAAA,6CAcnC3F,EAAM,CAAA,EAAC,QAAQ,kBAAiB,wIAFrCI,EAGKC,EAAAC,EAAAC,CAAA,EAFDK,EAA0CN,EAAAwC,CAAA,sCACzC9C,EAAM,CAAA,EAAC,QAAQ,kBAAiB,KAAAoC,EAAAwD,EAAAD,CAAA,yCAUpC3F,EAAM,CAAA,EAAC,QAAQ,WAAU,yBAEvBsF,EAAAC,GAAAvF,KAAQ,UAAU,EAAe,MAAAwF,EAAAxF,GAAAA,MAAU,mBAAhD,OAAI8C,GAAA,EAAA,gMAHN1C,EAEKC,EAAAC,EAAAC,CAAA,0GADAP,EAAM,CAAA,EAAC,QAAQ,WAAU,KAAAoC,EAAAK,EAAAC,CAAA,UAEvB4C,EAAAC,GAAAvF,KAAQ,UAAU,sFAAvB,OAAI8C,GAAA,oLACyB,QAAA9C,KAAO,4IAAPkE,EAAA,MAAAmK,EAAA,QAAArO,KAAO,+LA3C3BuR,EAAAvR,KAAK,WAAU,OAIfwR,EAAAxR,KAAK,gBAAe,KAG1ByR,EAAA,MAAM,KAAKzR,EAAW,CAAA,EAAA,UAAU,KAAI6C,EAAA,MAoBnCgI,EAAA,CAAA7K,KAAQ,KAAI,kFA7DI,SAAAA,KAAO,SACR,QAAAA,KAAO,QACP,QAAAA,KAAO,cACTA,EAAM,CAAA,EAAC,QAAQ,OACZ,SAAAA,KAAO,YACP,GACA,SAAAA,EAAQ,CAAA,EAAA,WAAW,OAAS,+BAE5BA,EAAkB,CAAA,sEAI6BA,EAAqB,CAAA,0DAGtCA,EAAqB,EAAA,0CAgCpEA,EAAU,CAAA,EAAC,MAAQ,EAAC,OAAAC,GAKf,GAAAD,KAAW,KAAOA,EAAO,CAAA,EAAA,SAAS,cAAa,OAAA0F,qEAoBxD,IAAAgM,GAAA1R,EAAQ,CAAA,EAAA,WAAW,OAAS,GAACU,GAAAV,CAAA,okBAjDTA,EAAM,CAAA,EAAC,QAAQ,OAAO,qBACvBA,EAAM,CAAA,EAAC,QAAQ,OAAO,mDAFfsL,EAAAjH,EAAA,aAAA,CAAArE,KAAQ,KAAI,CAAA,iLA5B3BsL,EAAAqG,EAAA,OAAA3R,EAAO,CAAA,EAAA,cAAgBjB,GAAa,EAAE,WALtDqB,EAAyCC,EAAAqN,EAAAnN,EAAA,YACzCH,EAgFMC,EAAAsR,EAAApR,EAAA,qBAzEFK,EAiBK+Q,EAAA7Q,CAAA,EAhBDF,EAYKE,EAAAC,CAAA,qBACLH,EAEKE,EAAAI,CAAA,wCAITN,EAaK+Q,EAAA9Q,CAAA,EAZDD,EAWCC,EAAAwD,CAAA,OAFerE,EAAO,CAAA,CAAA,SAK3BY,EAGK+Q,EAAAhR,CAAA,uBACLC,EAGK+Q,EAAAxQ,CAAA,6FA4BLP,EAEK+Q,EAAA/F,CAAA,8PArEiB1H,GAAA,MAAA0N,GAAA,SAAA5R,KAAO,UACRkE,GAAA,MAAA0N,GAAA,QAAA5R,KAAO,SACPkE,GAAA,MAAA0N,GAAA,QAAA5R,KAAO,2BACTA,EAAM,CAAA,EAAC,QAAQ,QACZkE,GAAA,KAAA0N,GAAA,SAAA5R,KAAO,IAEPkE,GAAA,IAAA0N,GAAA,SAAA5R,EAAQ,CAAA,EAAA,WAAW,OAAS,4MAiB7BA,EAAM,CAAA,EAAC,QAAQ,oDAChBA,EAAM,CAAA,EAAC,QAAQ,gDAGfA,EAAO,CAAA,QAAPA,EAAO,CAAA,CAAA,eALAsL,EAAAjH,EAAA,aAAA,CAAArE,KAAQ,KAAI,CAAA,GAY5B,CAAA6L,GAAA3H,GAAA,IAAAqN,KAAAA,EAAAvR,KAAK,WAAU,MAAAW,EAAA,UAAA4Q,IAIf,CAAA1F,GAAA3H,GAAA,IAAAsN,KAAAA,EAAAxR,KAAK,gBAAe,MAAAmB,EAAA,UAAAqQ,GAG1BtN,GAAA,KAAAuN,EAAA,MAAM,KAAKzR,EAAW,CAAA,EAAA,UAAU,KAAI6C,EAAA,kJAoBnCqB,GAAA,KAAA2G,EAAA,CAAA7K,KAAQ,8HAnEFsL,EAAAqG,EAAA,OAAA3R,EAAO,CAAA,EAAA,cAAgBjB,GAAa,EAAE,EA8EjDiB,EAAQ,CAAA,EAAA,WAAW,OAAS,6eA/BcwK,GAAI,CAAMA,EAAK,+GA1K/C,MAAA5H,CAAY,EAAArB,UACZ,QAAAkF,CAAgB,EAAAlF,GAChB,KAAA4C,CAAiB,EAAA5C,EAExBsQ,EACAC,EAQJhQ,GAAO,IAAA,CACHgQ,GAAA,MAAAA,EAAU,iBAAiB,0BAAiC,IAAAC,EAAK,EAAK,GAChE,MAAAC,EAA2BC,eAG7BJ,GAAA,MAAAA,EAAQ,SACRG,aAIFC,EAAuB,IAAA,KACrBC,EACAC,QAEEC,EAAY,IAAA,CACdD,GAAA,MAAAA,EAAY,OACZJ,EAAK,EAAK,GAGRM,EAAgBpQ,GAAiC,CAC/CA,EAAM,OAAO,IAAmC,6BAAAwE,EAAQ,EAAE,KAC1D0L,GAAA,MAAAA,EAAY,IAAI,QAASC,GACzBD,GAAA,MAAAA,EAAY,IAAI,cAAeC,GAC/BD,EAAalQ,EAAM,OACnBA,EAAM,OAAO,GAAG,QAASmQ,CAAY,EACrCnQ,EAAM,OAAO,GAAG,cAAemQ,CAAY,IAInD,OAAA/C,GAAQ,oBAAoB,EAAE,WAAYiD,GAAM,CAC5CJ,EAAI,MAAUI,EAA4B,aAC1CJ,EAAK,cAAc,IAAG,EAAG,QAASK,GAAWF,EAAY,CAAG,OAAAE,CAAM,CAAA,CAAA,EAClEL,EAAK,cAAc,GAAG,cAAeG,CAAY,SAIjDH,GAAA,MAAAA,EAAM,cAAc,IAAI,cAAeG,GACvCF,GAAA,MAAAA,EAAY,IAAI,QAASC,GACzBD,GAAA,MAAAA,EAAY,IAAI,cAAeC,KAIjCI,QAA0BC,GAAkB,OACxCC,EAAQ,MAAUrD,GAAQ,eAAe,EAC/CwC,GAAA,MAAAA,EAAQ,eACFrU,GAAI,EACVqU,EAAS,SAAS,cAAc,QAAQ,EACxCA,EAAO,aAAa,OAAQ,iBAAiB,EAC7CA,EAAO,UAAYa,EAAS,2BAA2BD,CAAU,EACjE,SAAS,KAAK,OAAOZ,CAAM,GAGzBc,EAAsB1N,GAAW,CACnCF,EAAA,EAAA+F,EAAS7H,EAAO,QAAQ,KAAM6H,GAAWA,EAAO,IAAM7F,CAAE,GAAKhC,EAAO,QAAQ,CAAC,CAAA,EAC7E8O,EAAK,EAAI,GAGPa,EAAqB,CAAIrI,EAA4B4D,IAA0B,OAC3E0E,EAAa,IAAO,IAAI3E,CAAU,EAC7B,UAAA1D,KAAQD,EACX4D,EACA0E,EAAc,IAAIrI,EAAK,GAAS,CAAA,GAAAA,EAAM,KAAA2D,EAAM,QAAS,EAAI,CAAA,EAEzD0E,EAAc,OAAOrI,EAAK,EAAE,EAG9B,MAAAsI,EAAiB,MAAM,KAAKD,EAAc,OAAM,CAAA,EACtDC,EAAe,KAAM,CAAAtU,EAAGE,IAAMF,EAAE,UAAU,cAAcE,EAAE,SAAS,CAAA,EACnEqG,EAAA,EAAAmJ,EAAiB,IAAA,IAAI4E,EAAe,IAAKC,GAAe,CAAAA,EAAU,GAAIA,CAAS,CAAA,CAAA,CAAA,EAE/EhB,EAAK,EAAK,GAGRiB,EAAyBxI,GAAU,CACrCoI,EAAqB,CAAEpI,CAAI,EAAG,IAAI,GAGhCuH,QAAckB,GAAc,eACzBnB,eAICoB,EAAQ,IAAO,SAASpB,CAAQ,EAEhCqB,EAAI,CACN,SAAUrI,EAAO,GACjB,GAAI,MAAM,KAAKoD,EAAW,OAAM,CAC3B,EAAA,OAAQ1D,GAASA,EAAK,MAAQ,IAAI,EAClC,IAAKA,GAASA,EAAK,EAAE,EAC1B,GAAI,MAAM,KAAK0D,EAAW,OAAM,CAC3B,EAAA,OAAQ1D,GAASA,EAAK,MAAQ,IAAI,EAClC,IAAKA,GAASA,EAAK,EAAE,EAC1B,IAAK,MAAM,KAAK0D,EAAW,OAAM,CAC5B,EAAA,OAAQ1D,GAASA,EAAK,MAAQ,KAAK,EACnC,IAAKA,GAASA,EAAK,EAAE,EAC1B,QAAA4I,EACA,UAASjR,EAAA+Q,EAAS,IAAI,eAAe,IAA5B,YAAA/Q,EAA+B,aAAc,GACtD,OAAQ,WAASI,EAAA2Q,EAAS,IAAI,iBAAiB,IAA9B,YAAA3Q,EAAiC,aAAc,EAAE,GAAK,EACvE,YAAa,WAASC,EAAA0Q,EAAS,IAAI,iBAAiB,IAA9B,YAAA1Q,EAAiC,aAAc,EAAE,GAAK,GAG1E,MAAAI,EAAM,YAAYuQ,EAAMF,CAAK,gBA0CnBG,EAAO,KAAA,oBACH,MAAAnC,EAAA,IAAAc,EAAK,EAAK,EAIOZ,EAAA,IAAAY,EAAK,EAAK,4CAzCxCD,EAAQ5P,WACa,MAAAmR,EAAA,IAAAtB,EAAK,EAAI,8IAlHtChN,EAAA,EAAA+F,EAASrE,EAAQ,MAAM,gBACvB1B,EAAA,EAAAqO,EAAU3M,EAAQ,OAAO,oBACzByH,EAAU,IAAO,IAAIzH,EAAQ,WAAW,IAAK+D,GAAI,CAAMA,EAAK,GAAIA,CAAI,CAAA,CAAA,CAAA,gBAEpEgI,EAAiBrO,EAAK,UAAU,iNCRNnE,EAAK,CAAA,EAAA,gFAAtBI,EAA+BC,EAAAsP,EAAApP,CAAA,6BAAdP,EAAK,CAAA,EAAA,KAAAoC,EAAAjE,EAAAkE,CAAA,8FARUrC,EAAM,CAAA,EAAC,QAAQ,gBAAe,oBAO3DA,EAAM,CAAA,CAAA,uBAAX,OAAI8C,GAAA,8EAP6D,GAAC,qKAIxD9C,EAAQ,CAAA,IAAA,QAAAyP,GAAA,IAAAzP,EAAA,CAAA,EAAA,KAAA0P,CAAA,CAAA,wFANhCtP,EAcKC,EAAAa,EAAAX,CAAA,EAbDK,EAYKM,EAAAH,CAAA,EAXDH,EAA+EG,EAAA2D,CAAA,uBAC/E9D,EASQG,EAAA2O,CAAA,wDANQ1P,EAAQ,CAAA,EAAA,EAAA,+EAJgBA,EAAM,CAAA,EAAC,QAAQ,gBAAe,KAAAoC,EAAAK,EAAAC,CAAA,YAO3D1C,EAAM,CAAA,CAAA,oBAAX,OAAI8C,GAAA,EAAA,mHAAJ,kBAHU9C,EAAQ,CAAA,CAAA,gJAjBjB,MAAA4C,CAAY,EAAArB,YAEjB+R,EAAa,CAA2B,EAAG,GAAI,GAAI,GAAI,GAAG,EAM5D,IAAAlN,EAAmBnD,EAAO,YAAY,qBAStBmD,EAAQ8K,GAAA,IAAA,uBACH,MAAAC,EAAA,IAAAvO,EAAM,gBAAkB,CAAA,QAASwD,CAAQ,CAAA,oFAdjErB,EAAA,EAAEwO,EAASD,EAAc,SAASrQ,EAAO,YAAY,OAAO,EACvDqQ,EACAA,EAAc,OAAM,CAAErQ,EAAO,YAAY,OAAO,CAAG,EAAA,MAAMzE,EAAGE,IAAMF,EAAIE,CAAC,CAAA,4KC+CxCsB,EAAM,CAAA,EAAC,QAAQ,OAAM,kCAAvB,GAAC,aAAuB,GAAC,8BAA5CI,EAAkDC,EAAAY,EAAAV,CAAA,4CAA7BP,EAAM,CAAA,EAAC,QAAQ,OAAM,KAAAoC,EAAAwD,EAAAD,CAAA,mDAF7CA,EAAA3F,KAAU,YAAW,4CACjB,IAAA2C,EAAA3C,KAAU,QAAMU,GAAAV,CAAA,8EAdwBgE,EAAAK,EAAA,KAAAmP,EAAA,2CAAAxT,KAAU,IAAI,6DAGlDqE,EAAA,QAAAoP,EAAAzT,EAAU,CAAA,EAAA,OACbA,EAAU,CAAA,EAAA,QACVA,EAAc,CAAA,EAAA,SAASA,KAAU,IAAI,EACjCqE,EAAA,SAAAqP,EAAA1T,KAAU,OAI0BgE,EAAAU,EAAA,MAAAiP,EAAA,2CAAA3T,KAAU,IAAI,oGAZpEI,EAoBKC,EAAAC,EAAAC,CAAA,EAnBDK,EASCN,EAAA+D,CAAA,SACDzD,EAQON,EAAAoE,CAAA,sEAjB0CR,EAAA,IAAAsP,KAAAA,EAAA,2CAAAxT,KAAU,mBAG9CkE,EAAA,IAAAuP,KAAAA,EAAAzT,EAAU,CAAA,EAAA,OACbA,EAAU,CAAA,EAAA,QACVA,EAAc,CAAA,EAAA,SAASA,KAAU,IAAI,kBACjCkE,EAAA,IAAAwP,KAAAA,EAAA1T,KAAU,wBAOnBkE,EAAA,IAAAyB,KAAAA,EAAA3F,KAAU,YAAW,KAAAoC,EAAAwD,EAAAD,CAAA,EACjB3F,KAAU,iEAJ+BkE,EAAA,IAAAyP,KAAAA,EAAA,2CAAA3T,KAAU,6EAflDA,EAAM,CAAA,EAAC,QAAQ,cAAa,uBAmCrCA,EAAM,CAAA,EAAC,QAAQ,mBAAkB,cAjCnCA,EAAM,CAAA,EAAC,SAAS,iBAAiB,uBAAtC,OAAI8C,GAAA,iRA4BWuB,EAAA,QAAAoP,EAAAzT,EAAc,CAAA,GAAAA,EAAc,CAAA,EAAA,OAAS,eACpCA,EAAa,CAAA,EAAC,QAAU,wJA/B1CI,EAAmDC,EAAAuT,EAAArT,CAAA,yEAyBnDH,EAYKC,EAAAC,EAAAC,CAAA,EAXDK,EAOCN,EAAA+D,CAAA,SACDzD,EAEON,EAAAoE,CAAA,2BAJO1E,EAAgB,CAAA,CAAA,gCAhChBA,EAAM,CAAA,EAAC,QAAQ,cAAa,KAAAoC,EAAAK,EAAAC,CAAA,cAEvC1C,EAAM,CAAA,EAAC,SAAS,iBAAiB,oBAAtC,OAAI8C,GAAA,EAAA,2HAAJ,OA4BeoB,EAAA,IAAAuP,KAAAA,EAAAzT,EAAc,CAAA,GAAAA,EAAc,CAAA,EAAA,OAAS,8BACpCA,EAAa,CAAA,EAAC,QAAU,gCAIjCA,EAAM,CAAA,EAAC,QAAQ,mBAAkB,KAAAoC,EAAAoK,EAAAC,CAAA,yGAzCnCzM,EAAM,CAAA,EAAC,QAAQ,wBACTA,EAAM,CAAA,EAAC,QAAQ,gBAChBA,EAAM,CAAA,EAAC,QAAQ,iBAChBA,EAAa,CAAA,0IAHjBA,EAAM,CAAA,EAAC,QAAQ,kCACTA,EAAM,CAAA,EAAC,QAAQ,0BAChBA,EAAM,CAAA,EAAC,QAAQ,8PA3BhB,MAAA4C,CAAY,EAAArB,UACZ,SAAAG,CAAoB,EAAAH,EAE3BsS,EAAa5Q,EAAO,YAAY,WAChC6Q,EAAgB7Q,EAAO,SAAS,kBAC/B,IAAK8Q,GAAcA,EAAU,IAAI,EACjC,OAAQnW,GAASqF,EAAO,YAAY,cAAc,SAASrF,CAAI,CAAA,QAE9DoW,EAAa,IAAA,CACftS,IACAkB,EAAM,gBAAkB,CAAA,WAAAiR,EAAY,cAAAC,CAAa,CAAA,GAG/CG,EAAgB,IAAA,CAClBlP,EAAA,EAAA8O,GAAcA,CAAU,GAGtBK,EAA0BtW,GAAY,CACxCmH,EAAA,EAAA+O,EAAgBA,EAAc,SAASlW,CAAI,EACrCkW,EAAc,OAAQK,GAAMA,GAAKvW,CAAI,EACjC,CAAA,GAAAkW,EAAelW,CAAI,CAAA,QAuBLsW,EAAuBH,EAAU,IAAI,2NCjBxD/T,EAAM,CAAA,EAAC,QAAQ,KAAI,mBAcnBA,EAAM,CAAA,EAAC,QAAQ,GAAE,mBAajBA,EAAM,CAAA,EAAC,QAAQ,KAAI,yBAuBfA,EAAM,CAAA,EAAC,QAAQ,WAAU,qBAWzBA,EAAM,CAAA,EAAC,QAAQ,eAAc,wgCA3BzBA,EAAK,EAAA,CAAA,UACHA,EAAO,CAAA,yfA+BPA,EAAa,CAAA,2DAGjBA,EAAM,CAAA,EAAC,QAAQ,8MAxElCI,EA2EKC,GAAA+T,EAAA7T,EAAA,EA1EDK,EAaKwT,EAAAlT,CAAA,EAZDN,EAEOM,EAAAkD,CAAA,gBACPxD,EAQKM,EAAAH,CAAA,EAPDH,EAMCG,EAAAsT,CAAA,OAFerU,EAAU,CAAA,CAAA,kBAKlCY,EAYKwT,EAAAvT,CAAA,EAXDD,EAEOC,EAAAyD,CAAA,gBACP1D,EAOKC,EAAAC,CAAA,EANDF,EAKCE,EAAAwT,CAAA,OADetU,EAAa,CAAA,CAAA,SAIrCY,EAcKwT,EAAAjT,CAAA,EAbDP,EAEOO,EAAAoT,CAAA,gBACP3T,EASKO,EAAAR,CAAA,EARDC,EAOCD,EAAA6T,CAAA,SAIT5T,EA8BKwT,EAAA9F,CAAA,EA7BD1N,EAUK0N,EAAA1C,CAAA,EATDhL,EAKCgL,EAAA6I,CAAA,YADiBzU,EAAM,CAAA,SAExBY,EAEOgL,EAAA8I,CAAA,kBAEX9T,EAUK0N,EAAAT,EAAA,EATDjN,EAKCiN,GAAA8G,CAAA,YADiB3U,EAAa,CAAA,UAE/BY,EAEOiN,GAAA+G,CAAA,iBAEXhU,EAMC0N,EAAAuG,EAAA,4DAlCiB7U,EAAa,EAAA,CAAA,qEAgCFS,GAAAT,OAAAA,EAAM,CAAA,EAAA,MAAA,KAAA,SAAA,4CApE9BA,EAAM,CAAA,EAAC,QAAQ,KAAI,KAAAoC,EAAAK,EAAAC,CAAA,kBAOJ1C,EAAU,CAAA,QAAVA,EAAU,CAAA,CAAA,iBAOzBA,EAAM,CAAA,EAAC,QAAQ,GAAE,KAAAoC,EAAAkF,EAAAC,CAAA,kBAOFvH,EAAa,CAAA,QAAbA,EAAa,CAAA,CAAA,iBAM5BA,EAAM,CAAA,EAAC,QAAQ,KAAI,KAAAoC,EAAAmC,EAAAC,CAAA,mBAQTxE,EAAO,CAAA,oBAYAA,EAAM,CAAA,kBAGnBA,EAAM,CAAA,EAAC,QAAQ,WAAU,KAAAoC,EAAA0S,GAAAC,CAAA,mBAQZ/U,EAAa,CAAA,oBAG1BA,EAAM,CAAA,EAAC,QAAQ,eAAc,KAAAoC,EAAA4S,GAAAC,EAAA,iBAKvBjV,EAAa,CAAA,qCAGjBA,EAAM,CAAA,EAAC,QAAQ,4KA/FnB,MAAA4C,CAAY,EAAArB,MACZ,GAAA,CAAA,WAAA2T,EAAa,EAAE,EAAA3T,EACf,CAAA,cAAA4T,EAAgB,EAAE,EAAA5T,EAClB,CAAA,OAAAmG,EAAS,EAAK,EAAAnG,EACd,CAAA,cAAA6T,EAAgB,EAAK,EAAA7T,EACrB,CAAA,QAAA8T,EAAU,CAAC,EAAA9T,GACX,OAAAsD,CAAkB,EAAAtD,GAClB,cAAA+T,CAAsB,EAAA/T,WAEjBgU,GAAK,CACjBC,EAAW,MAAK,MAGhBA,EACAC,EAAQrS,GAAkB,KAAK,MAAK,IAAK,KAAI,EAAG,QAAO,EAAK,GAAI,CAAA,EAI9D,MAAAsS,EAAiBzT,GAAY,CAC/B8C,EAAA,GAAAsQ,EAAUtR,GAAmB9B,EAAM,OAA4B,KAAK,CAAA,gBAchDiT,EAAU,KAAA,uDACXM,EAAUtT,wBAaTiT,EAAa,KAAA,0BA0BXzN,EAAM,KAAA,4BAWN0N,EAAa,KAAA,2WApEpCrQ,EAAA,EAAA4Q,EAAUvS,GAAkBiS,CAAO,CAAA,+WC4F3BrV,EAAQ,CAAA,CAAA,uBAAb,OAAI8C,GAAA,+EAmBD9C,EAAW,CAAA,EAAA,OAAAG,GASL,GAAA,CAAAH,KAAS,OAAM,OAAAC,mNAhC9BG,EAqCKC,EAAAC,EAAAC,CAAA,qGAjCMP,EAAQ,CAAA,CAAA,oBAAb,OAAI8C,GAAA,EAAA,yGAAJ,OAAIA,EAAAgM,EAAA,OAAAhM,GAAA,+GAAJ,OAAIA,GAAA,uMAEE1C,EAAoCC,EAAAC,EAAAC,CAAA,qDAY3BgH,EAAAvH,MAAQ,UAAS,eAbzB2C,EAAA3C,MAAI,GAAC0F,GAAA,2MAYU1B,EAAAjD,EAAA,QAAAiO,EAAAhP,MAAQ,QAAQ,mJAN1BgE,EAAAxF,EAAA,OAAAiN,EAAAC,GAAQ1L,EAAc,CAAA,EAAAA,MAASA,EAAC,EAAA,CAAA,CAAA,CAAA,EADdsL,EAAA9M,EAAA,mBAAAwB,MAAQ,MAAM,+BAF1CI,EAaGC,EAAA7B,EAAA+B,CAAA,qBANCK,EAKKpC,EAAA0C,CAAA,qBAHDN,EAEKM,EAAAH,CAAA,8CAPCf,EAAY,CAAA,EAACA,EAAS,EAAA,EAAAA,SAAtBA,EAAY,CAAA,EAACA,EAAO,EAAA,EAAEA,EAAC,EAAA,CAAA,EAAA,MAAA,KAAA,SAAA,yJAMxB,CAAA6L,GAAA3H,EAAA,KAAAqD,KAAAA,EAAAvH,MAAQ,UAAS,KAAAoC,EAAAkF,EAAAC,CAAA,GADV,CAAAsE,GAAA3H,EAAA,IAAA8K,KAAAA,EAAAhP,MAAQ,4BANlB,CAAA6L,GAAA3H,EAAA,KAAAuH,KAAAA,EAAAC,GAAQ1L,EAAc,CAAA,EAAAA,MAASA,EAAC,EAAA,CAAA,CAAA,+BADdsL,EAAA9M,EAAA,mBAAAwB,MAAQ,MAAM,oLAwBrCA,EAAM,CAAA,EAAC,QAAQ,gBAAe,+EADnCI,EAEKC,EAAAC,EAAAC,CAAA,6BADAP,EAAM,CAAA,EAAC,QAAQ,gBAAe,KAAAoC,EAAAjE,EAAAkE,CAAA,6CAJ9BrC,EAAM,CAAA,EAAC,QAAQ,kBAAiB,8HAH3BgE,EAAAxF,EAAA,OAAAiN,EAAAC,GAAQ1L,EAAS,CAAA,CAAA,CAAA,UAH3BI,EAAoCC,EAAAC,EAAAC,CAAA,WACpCH,EAMGC,EAAA7B,EAAA+B,CAAA,gEADEP,EAAM,CAAA,EAAC,QAAQ,kBAAiB,KAAAoC,EAAAwD,EAAAD,CAAA,EAH3BzB,EAAA,IAAAuH,KAAAA,EAAAC,GAAQ1L,EAAS,CAAA,CAAA,gFA5BlCA,EAAO,CAAA,GAAIA,EAAQ,CAAA,GAAI,MAAIU,GAAAV,CAAA,yEAA3BA,EAAO,CAAA,GAAIA,EAAQ,CAAA,GAAI,8KA/ElB,MAAA4V,GAAQ,GACR9F,GAAQ,yGAfH,MAAAlN,CAAY,EAAArB,UACZ,QAAAsU,CAAgB,EAAAtU,GAChB,QAAAuU,CAAe,EAAAvU,EACf,CAAA,QAAA0O,EAAU,EAAK,EAAA1O,GACf,QAAAwU,CAAqC,EAAAxU,EAa5C2O,EACA1J,EACAwP,EAAc,GAEZ,MAAAvF,QAAgBqF,GAAe,CACjC/Q,EAAA,EAAAkL,EAAU,EAAI,EACd,OAAO,aAAaC,CAAS,OAE7BA,EAAY,OAAO,2BACTpT,EAASmG,EAAO,OAgBhBgT,EAAO,CACT,WAAY,kBACZ,MAjBO,CACP,SAAUnZ,EAAO,SACjB,QAASA,EAAO,MAAQ,QAAUA,EAAO,QAAU,OACnD,MAAOA,EAAO,MAAQ,SAAW,GAAOA,EAAO,MAAQ,OAAS,GAAQ,OACxE,MACIA,EAAO,MAAQ,QACT,OAAO,OAAOgC,EAAa,EAC3BhC,EAAO,MAAQ,OACd,CAAA,MAAM,EACP,OACV,QAASA,EAAO,MAAQ,UAAY,GAAO,OAC3C,QAASA,EAAO,MAAQ,QACxB,QAASgZ,EAAQ,KAAI,EACrB,OAAQ7S,EAAO,yBAKf,MAAO2S,GAAQ,OAEfhF,MAEAA,EAAS,MAAS1B,GAAY,CAAE+G,CAAO,CAAA,QAClCzG,EAAK,CACV5M,EAAM,SAAS4M,CAAqB,EACpCzK,EAAA,EAAAkL,EAAU,EAAK,EACflL,EAAA,EAAAyB,EAAW,MAAS,SAGxBzB,EAAA,EAAAkL,EAAU,EAAK,MACfzJ,EAAWoK,EAAU,CAAC,CAAA,MACtBoF,EAAcxP,EAAS,OAASoP,IAAS,EAAQ3S,EAAO,uBAAuB,EAC/E8B,EAAA,EAAAyB,EAAWA,EAAS,MAAM,EAAGoP,EAAK,CAAA,GACnC9F,MAGDoG,EAAY,CAAIzP,EAAyB3D,IACnCb,GAAiB,CAChBwE,EAAQ,QACTxE,EAAM,eAAc,EACpB8T,EAAQ1J,EAAc5F,EAAS3D,CAAC,CAAA,IAK5Cf,GAAS,IAAA,CACL,OAAO,aAAamO,CAAS,IAiDU,MAAAlN,EAAA,IAAA+S,EAAQI,CAAS,yNApHrDN,EACHpF,EAAOqF,CAAO,GAEd/Q,EAAA,EAAAyB,EAAW,MAAS,EACpBzB,EAAA,EAAAkL,EAAU,EAAK,EACf,OAAO,aAAaC,CAAS,qBAiE9BnL,EAAA,EAAAsH,EAAiB,CAAA5F,EAAyB3D,MAElC,GAAAG,EAAO,OACV,UAAWwD,EAAQ,GACnB,OAAQ3D,EACR,OAAU,CAAA,QAASgT,EAAQ,KAAI,CAAA,0BAIpCK,EAAS,CACL,GAAAlT,EAAO,OACV,UAAW,OACX,OAAQ,EACR,OAAU,CAAA,QAAS6S,EAAQ,KAAI,CAAA,0QCsEpB9V,EAAY,EAAA,CAAA,uBAAjB,OAAI8C,GAAA,sNALV1C,EAcQC,EAAAG,EAAAD,CAAA,qEAXMP,EAAa,EAAA,CAAA,oCAEhBA,EAAY,EAAA,CAAA,oBAAjB,OAAI8C,GAAA,EAAA,mHAAJ,6LAbW9C,EAAM,CAAA,EAAC,QAAQ,MAAM,qBACtBA,EAAM,CAAA,EAAC,QAAQ,MAAM,4BAFUsL,EAAAjH,EAAA,sCAAArE,OAAiBA,EAAa,EAAA,CAAA,UAH7EI,EAUCC,EAAAgE,EAAA9D,CAAA,OAHeP,EAAO,CAAA,CAAA,oDAENA,EAAc,EAAA,CAAA,kCALdA,EAAM,CAAA,EAAC,QAAQ,+CAChBA,EAAM,CAAA,EAAC,QAAQ,+CAEfA,EAAO,CAAA,QAAPA,EAAO,CAAA,CAAA,cAJwBsL,EAAAjH,EAAA,sCAAArE,OAAiBA,EAAa,EAAA,CAAA,2IAe1DI,EAAwCC,EAAAY,EAAAV,CAAA,yCAK9CP,EAAK,EAAA,EAAA,OADDA,EAAK,EAAA,GAAAwH,GAAAxH,CAAA,iFAALA,EAAK,EAAA,uFACTA,EAAK,EAAA,EAAA,KAAAoC,EAAAwD,EAAAD,CAAA,0DAHqB3F,EAAK,EAAA,EAAA,sEAAhCI,EAAuCC,EAAAY,EAAAV,CAAA,oCAAZP,EAAK,EAAA,EAAA,KAAAoC,EAAAjE,EAAAkE,CAAA,yCAEMrC,EAAK,EAAA,EAAA,yCAAC,GAAE,qCAAnCI,EAA0CC,EAAAY,EAAAV,CAAA,2CAAfP,EAAK,EAAA,EAAA,KAAAoC,EAAAK,EAAAC,CAAA,yCAJ1C+C,EAAAzF,MAAI,GAAC6G,GAAA,kBACL,OAAA7G,QAAU,GAAImL,sbAcZnL,EAAM,CAAA,EAAC,QAAQ,WAAW,UAHrCI,EAOQC,EAAAG,EAAAD,CAAA,EADJK,EAAiDJ,EAAAsC,CAAA,uBAFxB9C,EAAM,EAAA,CAAA,CAAA,iCADxBA,EAAM,CAAA,EAAC,QAAQ,spCAmCjB,QAAAA,EAAa,CAAA,GAAA,CAAAA,EAAsB,CAAA,GAAA,CAAA,CAAAA,KAAQ,KAAI,uBAG/CA,EAA4B,EAAA,qLAH5BkE,EAAA,CAAA,EAAA,MAAAkS,EAAA,QAAApW,EAAa,CAAA,GAAA,CAAAA,EAAsB,CAAA,GAAA,CAAA,CAAAA,KAAQ,0PArEvDA,EAAQ,CAAA,EAAA0F,wBA8BJxF,GAAAF,OAAiBA,EAAa,EAAA,IAAAC,GAAAD,CAAA,IAuBlCA,EAAgB,CAAA,GAAAG,GAAAH,CAAA,IAahBA,EAAM,CAAA,EAAC,SAAS,mBAAiBU,GAAAV,CAAA,yKArEdA,EAAO,EAAA,EAAG,sBAAwB,YAAW,gNAmDxCA,EAAgB,CAAA,EAAG,cAAgB,aAAY,qEANrDA,EAAgB,CAAA,CAAA,mEAExBA,EAAM,CAAA,EAAC,QAAQ,aAAa,oKApD/CI,EAmFMC,EAAA8D,EAAA5D,CAAA,EAlFFK,EAKKuD,EAAApD,CAAA,EADDH,EAAwFG,EAAA+H,CAAA,4BAgC5FlI,EAuBKuD,EAAAjD,CAAA,wBAZDN,EAWQM,EAAAV,CAAA,EAJJI,EAGCJ,EAAAuI,CAAA,yEALwB/I,EAAc,EAAA,CAAA,CAAA,oBArDaA,EAAY,EAAA,CAAA,CAAA,qDAKhDA,EAAO,EAAA,EAAG,sBAAwB,4FAiCjDA,OAAiBA,EAAa,EAAA,4FAkBVA,EAAgB,CAAA,EAAG,cAAgB,oEANzCA,EAAgB,CAAA,CAAA,wBAExBA,EAAM,CAAA,EAAC,QAAQ,gCASzBA,EAAgB,CAAA,qGAahBA,EAAM,CAAA,EAAC,SAAS,8UArNV,MAAA4C,CAAY,EAAArB,MAEnB,IAAA8U,EAAY,CAAApT,EAAO,OAAO,OAC1BqT,EAAmB,GACnBtG,EACAuG,EACAT,EAAU,GACVZ,EAAa,GACbC,EAAgB,GAChBzN,EAAS,GACT0N,EAAgB,GAChBC,EAAU,EACVpF,EAAU,GAER,MAAAuG,EAAgB/F,GAAqB,CACvC1L,EAAA,EAAA+Q,GAAUrF,GAAA,YAAAA,EAAQ,UAAW,EAAE,EAC/B1L,EAAA,EAAAmQ,GAAazE,GAAA,YAAAA,EAAQ,aAAc,EAAE,EACrC1L,EAAA,EAAAoQ,GAAgB1E,GAAA,YAAAA,EAAQ,gBAAiB,EAAE,EAC3C1L,EAAA,EAAA2C,GAAS+I,GAAA,YAAAA,EAAQ,SAAU,EAAK,EAChC1L,EAAA,EAAAqQ,GAAgB3E,GAAA,YAAAA,EAAQ,gBAAiB,EAAK,EAC9C1L,EAAA,EAAAsQ,GAAU5E,GAAA,YAAAA,EAAQ,UAAW,CAAC,GAsC5BgG,EAAa,SAAA,CACf1R,EAAA,EAAAsR,EAAW,EAAI,EACXK,GACA3R,EAAA,EAAAuR,EAAmB,EAAI,QAErB9Y,GAAI,EACVwS,EAAU,MAAK,GAGb2G,EAAY,SAAA,CACd5R,EAAA,EAAAsR,GAAYO,CAAa,EACzB7R,EAAA,EAAAuR,EAAmB,EAAK,EACxBE,EAAa/F,CAAM,GAGjBoG,EAAc,SAAA,CACZP,GACAvR,EAAA,EAAAuR,EAAmB,EAAK,QAClB9Y,GAAI,EACVwS,EAAU,MAAK,IAEfjL,EAAA,EAAAuR,EAAmB,EAAI,EACvBG,UACMjZ,GAAI,EACV+Y,EAAa,MAAK,IAIpBO,EAAM,SAAA,CACR/R,EAAA,EAAAsR,EAAW,EAAI,EACftR,EAAA,EAAAuR,EAAmB,EAAK,EACxBE,IACM,MAAA5T,EAAM,SAAQ,CACb,GAAAK,EAAO,OACV,OAAQ,OACR,OAAQ,eAENzF,GAAI,EACVwS,EAAU,MAAK,GAGbnL,EAAM,SAAA,CACF,MAAAjC,EAAM,SAAQ,CACb,GAAAK,EAAO,OACV,UAAW,OACX,OAAQ,OACR,OAAQqT,GAEE,QAASR,EAAQ,KAAI,EACrB,WAAYZ,EAAW,KAAI,EAC3B,cAAeC,EAAc,KAAI,EACjC,OAAAzN,EACA,cAAA0N,EACA,QAAAC,IAGA,QAASS,EAAQ,MAAI,IAGnC/Q,EAAA,EAAAuR,EAAmB,EAAK,EACxBvR,EAAA,EAAAsR,EAAW,EAAK,GAGdU,EAAkB9U,GAAoB,CACpCA,EAAM,KAAO,UACbA,EAAM,eAAc,EAChBqT,EACAzQ,IAEAiS,MAKNE,QAAsCla,GAAkB,OACpD8F,EAAM,SAAS9F,CAAM,EAC3BiI,EAAA,EAAAuR,EAAmB,EAAK,EACxBvR,EAAA,EAAAsR,EAAW,EAAK,gBAoBAP,EAAO,KAAA,wDACR9F,EAAS9N,uDA8CTqU,EAAYrU,kQAnL5BuO,EAASxN,EAAO,OAAO,MAAM,yBAE7BuT,EAAa/F,CAAM,yBAErB1L,EAAA,GAAE2R,EAAkB,GACjBjG,GAAA,MAAAA,EAAQ,YACJA,GAAA,MAAAA,EAAQ,eACRA,GAAA,MAAAA,EAAQ,QACRA,GAAA,MAAAA,EAAQ,eACRA,GAAA,MAAAA,EAAQ,QAAO,0BAGtB1L,EAAA,GAAE6R,EAAgB,GAAQnG,GAAA,MAAAA,EAAQ,UAAYiG,CAAe,qBAE7D3R,EAAA,GAAEuQ,EAAgB,GACfQ,EAAQ,KAAI,GACRZ,EAAW,KAAI,GACfC,EAAc,QACdzN,GACA0N,GACAC,EAAO,0BAGZ4B,EAAY,CACT,CAAA,MAAO,GAAI,MAAOnB,CAAO,GACzB,MAAO7S,EAAO,QAAQ,KAAM,MAAOiS,IACnC,MAAOjS,EAAO,QAAQ,GAAI,MAAOkS,IAE/B,MAAOlS,EAAO,QAAQ,KACtB,MAAOoS,EAAU,EAAQ,IAAA,KAAKA,EAAU,GAAI,EAAE,mBAAkB,EAAK,KAEvE,MAAOpS,EAAO,QAAQ,WAAY,MAAOyE,IACzC,MAAOzE,EAAO,QAAQ,eAAgB,MAAOmS,EACjD,EAAA,OAAU,CAAA,CAAA,MAAA8B,CAAK,IAAO,EAAQA,CAAK,CAAA,oPChChBlX,EAAM,CAAA,EAAC,QAAQ,KAAI,8KALxBI,EAMQC,EAAAG,EAAAD,CAAA,4DADHP,EAAM,CAAA,EAAC,QAAQ,KAAI,KAAAoC,EAAAjE,EAAAkE,CAAA,sDAPDK,EAAA1C,KAAM,KAAI,iCAChC2C,EAAA3C,KAAM,MAAIU,GAAAV,CAAA,iSAaJA,EAAM,CAAA,EAAC,QAAQ,KAAK,sNAzBvCI,EA+BKC,EAAAS,EAAAP,CAAA,EArBDK,EAoBKE,EAAAI,CAAA,EAnBDN,EAA2CM,EAAAH,CAAA,sCAW3CH,EAOQM,EAAAV,CAAA,EADJI,EAAwBJ,EAAAsC,CAAA,sDAjBD,CAAA+I,GAAA3H,EAAA,IAAAxB,KAAAA,EAAA1C,KAAM,KAAI,KAAAoC,EAAAK,EAAAC,CAAA,EAChC1C,KAAM,6EAaAA,EAAM,CAAA,EAAC,QAAQ,2IAvBbmX,EAAA3L,GAAA1K,EAAA1B,GAAA,CAAA,EAAG,GAAI,MAAO,GAAG,CAAA,6CAChBgY,EAAAlL,GAAApL,EAAA1B,GAAA,CAAA,EAAG,GAAI,SAAU,GAAG,CAAA,6FAJvCkG,EAAAC,GAAAvF,KAAO,MAAM,aAAWA,EAAK,CAAA,kBAAlC,OAAI8C,GAAA,EAAA,oPALV1C,EAuCKC,EAAAC,EAAAC,CAAA,0EAlCM+E,EAAAC,GAAAvF,KAAO,MAAM,wJAAlB,OAAI8C,GAAA,qNARK,MAAAF,CAAY,EAAArB,iBAyBaqB,EAAM,KAAKyU,CAAK,OAUpBzU,EAAM,UAAUyU,CAAK,4UC/B9CrX,EAAM,CAAA,EAAC,QAAQ,WAAW,UAHrCI,EAOQC,EAAAG,EAAAD,CAAA,EADJK,EAAsCJ,EAAAsC,CAAA,sDAH/B9C,EAAM,CAAA,EAAC,QAAQ,+JANX,MAAA4C,CAAY,EAAArB,MAOP,MAAAyB,EAAA,IAAAJ,EAAM,+KCgCT5C,EAAM,CAAA,EAAC,QAAQ,IAAG,WAGlBA,EAAM,CAAA,EAAC,QAAQ,KAAI,WAGnBA,EAAM,CAAA,EAAC,QAAQ,KAAI,WAGnBA,EAAM,CAAA,EAAC,QAAQ,OAAM,WAGrBA,EAAM,CAAA,EAAC,QAAQ,QAAO,WAGtBA,EAAM,CAAA,EAAC,QAAQ,UAAS,ihBAjBjCI,EAmBKC,EAAAC,EAAAC,CAAA,EAlBDK,EAEQN,EAAA8G,CAAA,gBACRxG,EAEQN,EAAA+G,CAAA,gBACRzG,EAEQN,EAAAgM,CAAA,gBACR1L,EAEQN,EAAAgX,CAAA,gBACR1W,EAEQN,EAAAiX,CAAA,gBACR3W,EAEQN,EAAAkX,CAAA,0JAhBHxX,EAAM,CAAA,EAAC,QAAQ,IAAG,KAAAoC,EAAAK,EAAAC,CAAA,cAGlB1C,EAAM,CAAA,EAAC,QAAQ,KAAI,KAAAoC,EAAAgL,EAAAL,CAAA,cAGnB/M,EAAM,CAAA,EAAC,QAAQ,KAAI,KAAAoC,EAAAoK,EAAAC,CAAA,cAGnBzM,EAAM,CAAA,EAAC,QAAQ,OAAM,KAAAoC,EAAAmC,EAAAC,CAAA,cAGrBxE,EAAM,CAAA,EAAC,QAAQ,QAAO,KAAAoC,EAAAqV,EAAAC,CAAA,cAGtB1X,EAAM,CAAA,EAAC,QAAQ,UAAS,KAAAoC,EAAA0S,EAAAC,CAAA,kEAlBhC/U,EAAQ,CAAA,GAAAU,GAAAV,CAAA,wFAFWA,EAAS,CAAA,CAAA,uEAJdA,EAAQ,CAAA,CAAA,gBAChBA,EAAM,CAAA,EAAC,QAAQ,MAAM,uDAJpCI,EA+BKC,EAAAC,EAAAC,CAAA,EA9BDK,EAOQN,EAAAE,CAAA,EADJI,EAAiCJ,EAAAsC,CAAA,2CAFvB9C,EAAU,CAAA,CAAA,oBALkBA,EAAS,CAAA,CAAA,CAAA,2CAO3BA,EAAS,CAAA,4CAJdA,EAAQ,CAAA,CAAA,cAChBA,EAAM,CAAA,EAAC,QAAQ,wBAKrBA,EAAQ,CAAA,2MAlCF,MAAA4C,CAAY,EAAArB,MAEnB,IAAAuE,EAAW,SAETE,EAAS,IAAA,CACXjB,EAAA,EAAAe,EAAW,EAAK,GAGdG,EAAU,IAAA,CACZlB,EAAA,EAAAe,GAAYA,CAAQ,GAGlB6R,EAAaxJ,GAAmB,CAClCnI,IACApD,EAAM,UAAUuL,CAAI,GAsB4CnL,EAAA,IAAA2U,EAAU,KAAK,EAGfxP,EAAA,IAAAwP,EAAU,MAAM,EAGhBvP,EAAA,IAAAuP,EAAU,MAAM,EAGhBtP,EAAA,IAAAsP,EAAU,QAAQ,EAGlB9K,EAAA,IAAA8K,EAAU,SAAS,EAGnB7K,EAAA,IAAA6K,EAAU,WAAW,oFAlCxF5S,EAAA,EAAE6S,EACC3U,EAAO,iBAAiB,MAAQ,EAC1B,cACAA,EAAO,iBAAiB,KAAOA,EAAO,aAAa,OACnD,oBACA,mBAAmB,ioBCDhB,OAAAjD,EAAO,CAAA,EAAA,OAAO,MAAQ,QAAO,kKADtCI,EASKC,EAAAC,EAAAC,CAAA,8pCAQa,SAAAP,KAAO,SACR,QAAAA,KAAO,QACP,QAAAA,KAAO,cACTA,EAAM,CAAA,EAAC,QAAQ,oBACZA,EAAM,CAAA,EAAC,OAAO,SACd,SAAAA,EAAO,CAAA,EAAA,OAAO,MAAQ,+BAEvB,GACF,MAAAA,EAAO,CAAA,EAAA,cAAgBjB,GAAa,GAAK,cAAgB,6KAbxEqB,EAeKC,EAAAC,EAAAC,CAAA,sCAVa2D,EAAA,IAAA0N,EAAA,SAAA5R,KAAO,UACRkE,EAAA,IAAA0N,EAAA,QAAA5R,KAAO,SACPkE,EAAA,IAAA0N,EAAA,QAAA5R,KAAO,uBACTA,EAAM,CAAA,EAAC,QAAQ,6BACZA,EAAM,CAAA,EAAC,OAAO,UACdkE,EAAA,IAAA0N,EAAA,SAAA5R,EAAO,CAAA,EAAA,OAAO,MAAQ,iCAGzBkE,EAAA,IAAA0N,EAAA,MAAA5R,EAAO,CAAA,EAAA,cAAgBjB,GAAa,GAAK,cAAgB,4mBAdtEoD,EAAAnC,EAAM,CAAA,EAAC,UAAP,MAAAmC,EAAgB,SAAU,YAAa,UAAU,EAAE,SAASnC,EAAO,CAAA,EAAA,SAAS,cAAc,GAAKA,KAAO,aAAejB,GAAa,gDAlBnI,OAAAiB,KAAO,QAAO,0BAMd,IAAAE,EAAAF,EAAO,CAAA,EAAA,cAAgBjB,GAAa,IAAE2G,GAAA1F,CAAA,wDA+BtC,OAAAA,EAAO,CAAA,EAAA,cAAgBjB,GAAa,GAAE,GAEjCoD,EAAAnC,EAAM,CAAA,EAAC,UAAP,MAAAmC,EAAgB,MAAK,uLAxCnC/B,EA2CKC,EAAAC,EAAAC,CAAA,8OApCIP,EAAO,CAAA,EAAA,cAAgBjB,GAAa,4GAYnCoD,EAAAnC,EAAM,CAAA,EAAC,UAAP,MAAAmC,EAAgB,SAAU,YAAa,UAAU,EAAE,SAASnC,EAAO,CAAA,EAAA,SAAS,cAAc,GAAKA,KAAO,aAAejB,GAAa,0dAtB7H,MAAA6D,CAAY,EAAArB,MAkCA,MAAAsB,EAAAoC,GAAOrC,EAAM,aAAaqC,CAAE,kLC8EtCjF,EAAM,CAAA,EAAC,QAAQ,WAAU,OACrB2C,EAAA3C,MAAWA,EAAM,CAAA,EAAC,aAAejB,GAAa,IAAE8Y,GAAA7X,CAAA,sHAFzDI,EAMIC,EAAAyX,EAAAvX,CAAA,mDALCP,EAAM,CAAA,EAAC,QAAQ,WAAU,KAAAoC,EAAAK,EAAAC,CAAA,EACrB1C,MAAWA,EAAM,CAAA,EAAC,aAAejB,GAAa,oLAJvDqB,EAA0CC,EAAAC,EAAAC,CAAA,6EAMjCP,EAAO,CAAA,CAAA,0EADRI,EAAsDC,EAAAyC,EAAAvC,CAAA,qCACrDP,EAAO,CAAA,CAAA,4KAUZI,EAEKC,EAAAC,EAAAC,CAAA,sMAIQ,QAAAP,KAAO,QACN,SAAAA,MAAQA,EAAM,CAAA,EAAC,aAAejB,GAAa,2BAGnDiB,EAAI,CAAA,GAAAgH,GAAAhH,CAAA,2HAJGkE,EAAA,IAAA6T,EAAA,QAAA/X,KAAO,SACNkE,EAAA,KAAA6T,EAAA,SAAA/X,MAAQA,EAAM,CAAA,EAAC,aAAejB,GAAa,qCAGnDiB,EAAI,CAAA,+QAGW,QAAAA,KAAO,yFAFxBI,EAKKC,EAAAC,EAAAC,CAAA,sCAHY2D,EAAA,IAAA8T,EAAA,QAAAhY,KAAO,yJAY3ByF,EAAAzF,EAAO,CAAA,EAAA,cAAgBjB,GAAa,IAAEoI,GAAAnH,CAAA,IAKtCA,EAAI,CAAA,GAAAkH,GAAAlH,CAAA,gFANbI,EAWKC,EAAAC,EAAAC,CAAA,oDAVIP,EAAO,CAAA,EAAA,cAAgBjB,GAAa,iGAKpCiB,EAAI,CAAA,qOAHuB,QAAAA,KAAO,6GADnCI,EAEKC,EAAAC,EAAAC,CAAA,sCADuB2D,EAAA,IAAA6T,EAAA,QAAA/X,KAAO,0RAInCI,EAEKC,EAAAC,EAAAC,CAAA,2MAUS,SAAAP,KAAO,SACR,QAAAA,KAAO,QACP,QAAAA,KAAO,QACR,OAAAA,KAAO,OACP,OAAAA,KAAO,OACN,QAAAA,KAAM,SACC,eAAAA,KAAM,oGAR9BI,EAUKC,EAAAC,EAAAC,CAAA,sCARa2D,EAAA,IAAA+T,EAAA,SAAAjY,KAAO,UACRkE,EAAA,IAAA+T,EAAA,QAAAjY,KAAO,SACPkE,EAAA,IAAA+T,EAAA,QAAAjY,KAAO,SACRkE,EAAA,IAAA+T,EAAA,OAAAjY,KAAO,QACPkE,EAAA,IAAA+T,EAAA,OAAAjY,KAAO,QACNkE,EAAA,IAAA+T,EAAA,QAAAjY,KAAM,UACCkE,EAAA,IAAA+T,EAAA,eAAAjY,KAAM,uLAMrB,OAAAmC,EAAAnC,KAAO,UAAP,MAAAmC,EAAgB,OAASnC,KAAO,UAAS,EAEpCA,KAAO,QAAO,0GAH5BI,EAUKC,EAAAC,EAAAC,CAAA,+qBAN6B,QAAAP,KAAO,8FAAPkE,EAAA,IAAAgU,EAAA,QAAAlY,KAAO,6JAFL,QAAAA,KAAO,QAAe,KAAAA,KAAO,gGAA7BkE,EAAA,IAAAiU,EAAA,QAAAnY,KAAO,SAAekE,EAAA,IAAAiU,EAAA,KAAAnY,KAAO,6pBApFjE,SAAA,MAAAoY,EAAApY,EAAU,CAAA,EAAA,MAAAA,EAAO,CAAA,EAAA,QAAQ,oCAWxBA,GAAM,CAAA,EAAC,QAAUA,MAAO,aAAejB,GAAa,GAAE+H,0BAgBlD9G,EAAI,CAAA,GAAA+G,GAAA/G,CAAA,EAKJqY,EAAArY,EAAO,CAAA,EAAA,aAAejB,GAAa,IAAEkI,GAAAjH,CAAA,EAmB7C0R,GAAA1R,MAAQA,EAAM,CAAA,EAAC,cAAgBjB,GAAa,KAAE8H,GAAA7G,CAAA,EAiBzCsY,GAAA,CAAAtY,MAAQA,EAAM,CAAA,EAAC,cAAgBjB,GAAa,KAAEyI,GAAAxH,CAAA,IAa/CA,EAAI,CAAA,GAAAC,GAAAD,CAAA,EAeRuY,EAAAvY,MAAQA,EAAM,CAAA,EAAC,aAAejB,GAAa,IAAEoB,GAAAH,CAAA,EAI7CwY,EAAAxY,EAAO,CAAA,EAAA,OAAO,QAAU,eAAaU,GAAAV,CAAA,wVA3EtBsL,EAAAvK,EAAA,OAAAf,EAAO,CAAA,EAAA,cAAgBjB,GAAa,EAAE,+HApB9CuM,EAAAzK,EAAA,MAAA,CAAAb,KAAO,MAAM,EACCsL,EAAAzK,EAAA,qBAAAb,KAAO,OAAO,kCAH5CI,EAuGKC,GAAAQ,EAAAN,EAAA,EAhGDK,EAsCKC,EAAAK,CAAA,qBAzBDN,EAwBKM,EAAAH,CAAA,oEAoBTH,EA2BKC,EAAAC,CAAA,8MArGYd,EAAkB,CAAA,CAAA,iBACvBA,EAAa,CAAA,CAAA,gCAGFS,GAAAT,KAAO,OAASA,EAAW,CAAA,EAAG,MAAS,IAAvCA,EAAM,CAAA,EAAC,OAASA,EAAW,CAAA,EAAG,QAAS,MAAA,KAAA,SAAA,6BAGtD,CAAA6L,GAAA3H,GAAA,KAAAkU,KAAAA,EAAApY,EAAU,CAAA,EAAA,MAAAA,EAAO,CAAA,EAAA,QAAQ,8FA2BpBA,EAAI,CAAA,kGAKJA,EAAO,CAAA,EAAA,aAAejB,GAAa,kHAP5BuM,EAAAvK,EAAA,OAAAf,EAAO,CAAA,EAAA,cAAgBjB,GAAa,EAAE,EA0BrDiB,MAAQA,EAAM,CAAA,EAAC,cAAgBjB,GAAa,oGAiBvC,CAAAiB,MAAQA,EAAM,CAAA,EAAC,cAAgBjB,GAAa,oGAa7CiB,EAAI,CAAA,qGAeRA,MAAQA,EAAM,CAAA,EAAC,aAAejB,GAAa,oGAI3CiB,EAAO,CAAA,EAAA,OAAO,QAAU,iNA/FjBsL,EAAAzK,EAAA,MAAA,CAAAb,KAAO,MAAM,cACCsL,EAAAzK,EAAA,qBAAAb,KAAO,OAAO,kaAlG7B,MAAA4C,CAAY,EAAArB,UAEnBkX,EACAC,EAAmB,EAmCvB5W,GAAO,IAAA,CACHc,EAAM,gBAAgB,OAAO,UAAU,IAG3C+V,GAAW,IAAA,IACHD,GAAoBzV,EAAO,aAAY,CACvCyV,EAAmBzV,EAAO,iBACtB2V,EAASH,EAAS,mBACfG,GACCA,EAAO,UAAY,GACnBA,EAAO,SAAW,CAAA,IAAK,CAAC,CAAA,EAE5BA,EAASA,EAAO,iBAKtB,MAAAC,EAAsB5W,GAAY,CAChC,GAAAgB,EAAO,UACP,OAAAhB,EAAM,eAAc,EACpBW,EAAM,YAAYK,EAAO,UAAW,EAAI,EACjC,IAIT6V,EAAiB7W,GAAmB,CAClCgB,EAAO,QAAUhB,EAAM,KAAK,OAAS,cAAgBA,EAAM,KAAK,aAChEW,EAAM,eAAc,GAItBmW,EAAe9W,GAAY,UACzBgB,EAAO,QAAM,CAAKhB,EAAM,kBAAoBA,EAAM,kBAAkB,YAAW,CACzE,MAAA+W,EAAO/W,EAAM,OAAO,QAAQ,GAAG,EACjC+W,KACA7W,EAAA,OAAO,SAAP,MAAAA,EAAe,aAAc,MAAO,aAAc,QAAS6W,EAAK,MAAQ,MAEvE/W,EAAM,kBACPA,EAAM,eAAc,IAOfgX,EAAA,IAAArW,EAAM,gBAAgB,OAAO,UAAU,QACrCA,EAAM,SAASsW,GAAoB,CAAA,EA4CvBrW,EAAA,IAAAD,EAAM,sBAMEA,EAAM,WAAW,aAAa,EAaE2F,EAAA,IAAA3F,EAAM,gBA8C9BuW,EAAA,IAAAvW,EAAM,uDA9F1C6V,EAAQvW,2GA9FhBkX,EAAOnW,EAAO,OAAO,IAAI,iBAEzB8B,EAAA,EAAAsU,EACCD,GAAQ,QACFnW,EAAO,QAAQ,MACfmW,GAAQ,UACRnW,EAAO,QAAQ,cACfmW,GAAQ,OACRnW,EAAO,QAAQ,WACfmW,GAAQ,SACRnW,EAAO,QAAQ,OACfmW,GAAQ,QACRnW,EAAO,QAAQ,MACfmW,GAAQ,UACRjX,EAAAc,EAAO,OAAO,KAAMmC,GAAMA,EAAE,IAAMnC,EAAO,OAAO,OAAO,IAAvD,YAAAd,EAA0D,OAAQ,GAClEiX,GAAQ,YACR7W,EAAAU,EAAO,QAAQ,KAAMqW,GAAMA,EAAE,IAAMrW,EAAO,OAAO,QAAQ,IAAzD,YAAAV,EAA4D,WAAY,EACtE,iBAETwC,EAAA,EAAAzD,EAAQ2B,EAAO,QAAUA,EAAO,QAAQ,QAAQ,KAAI,GAAMA,EAAO,QAAQ,UAAYoW,CAAO,iBAE9FtU,EAAA,EAAEwU,EACCtW,EAAO,aAAelE,GAAa,GAAKsa,GAAWpW,EAAO,QAAQ,WAAa,EAAE,oBAElFT,EAAA,OAAO,SAAP,MAAAA,EAAe,aAEV,MAAO,aACP,SAAU+W,EACV,YAAaH,GAAQ,MAEzB,qHCpDR,MAAMI,GAAmB,CAAA,EA0BlB,SAASC,GAASvC,EAAOrZ,EAAQd,EAAM,CAE7C,IAAIgB,EAEJ,MAAM2b,EAAc,IAAI,IAIxB,SAASC,EAAIC,EAAW,CACvB,GAAIC,GAAe3C,EAAO0C,CAAS,IAClC1C,EAAQ0C,EACJ7b,GAAM,CAET,MAAM+b,EAAY,CAACN,GAAiB,OACpC,UAAWO,KAAcL,EACxBK,EAAW,CAAC,IACZP,GAAiB,KAAKO,EAAY7C,CAAK,EAExC,GAAI4C,EAAW,CACd,QAAShX,EAAI,EAAGA,EAAI0W,GAAiB,OAAQ1W,GAAK,EACjD0W,GAAiB1W,CAAC,EAAE,CAAC,EAAE0W,GAAiB1W,EAAI,CAAC,CAAC,EAE/C0W,GAAiB,OAAS,CAC1B,CACD,CAEF,CAMD,SAASQ,EAAOnd,EAAI,CACnB8c,EAAI9c,EAAGqa,CAAK,CAAC,CACb,CAOD,SAAS+C,EAAUC,EAAKC,EAAapd,EAAM,CAE1C,MAAMgd,EAAa,CAACG,EAAKC,CAAU,EACnC,OAAAT,EAAY,IAAIK,CAAU,EACtBL,EAAY,OAAS,IACxB3b,EAAOF,EAAM8b,EAAKK,CAAM,GAAKjd,GAE9Bmd,EAAIhD,CAAK,EACF,IAAM,CACZwC,EAAY,OAAOK,CAAU,EACzBL,EAAY,OAAS,GAAK3b,IAC7BA,IACAA,EAAO,KAEX,CACE,CACD,MAAO,CAAE,IAAA4b,EAAK,OAAAK,EAAQ,UAAAC,EACvB,CC1CA,eAAsBG,GAAYjH,EAAmB,CACjD,IAAIkH,EAAkB,EAClBC,EAAiB,EAEjBC,EAAe,CAEf,OAAQpH,EAAK,OACb,SAAUA,EAAK,SACf,YAAaA,EAAK,YAClB,QAASA,EAAK,QACd,OAAQA,EAAK,OAGb,OAAQ,CAAC,EAGT,OAAQ,EACR,OAAQ,EACR,QAAS,CAAC,EACV,OAAQ,CAAC,EACT,WAAY,EACZ,aAAc,CAAC,EAGf,QAAS,GACT,qBAAsB,IACtB,OAAQ,CAAC,EACT,aAAc,EACd,aAAc,CAAA,EAGlB,KAAM,CAAE,UAAA8G,EAAW,IAAAN,CAAI,EAAIF,GAAgBc,CAAK,EAE1CC,EAASR,GAA2BL,EAAI,CAAE,GAAGY,EAAO,GAAGP,CAAA,CAAQ,EAErEC,EAAWQ,GAAa,CACZF,EAAAE,CAAA,CACX,EAED,MAAMC,EAAyB,MAC3BvL,EACAwL,EACAC,GAAW,KACU,oBACrB,MAAMC,GAAW,EAAER,EAEbS,GAAY3Y,GAAAoY,EAAM,UAAN,YAAApY,GAAe,GAC3B4Y,GAAYR,EAAM,UAClBzd,EAAS6d,GAAaJ,EAAM,OAC5BtR,GACF,CAAC2R,KACA9d,EAAO,MAAQyd,EAAM,OAAO,MACzBzd,EAAO,WAAayd,EAAM,OAAO,WACjCzd,EAAO,UAAYyd,EAAM,OAAO,UAChCzd,EAAO,SAAWyd,EAAM,OAAO,SAC/Bzd,EAAO,QAAUyd,EAAM,OAAO,QAC5B,CAAE,GAAGA,EAAM,OAAQ,OAAQ,QAC3BA,EAAM,WACVS,EAAUT,EAAM,YAAY,QA0BlC,GAxBAC,EAAM,CAAE,QAAS,GAAM,MAAO,OAAW,EAEzCS,GAAqBne,EAAQ8d,EAAQ,EAGjCE,GAAaC,KACb,OAAO,aAAaT,CAAc,EAClCnL,EAAS,QAAQ,CACb,WAAY,iBACZ,UAAA2L,EACA,KAAMC,EAAA,CACT,GAIL5L,EAAS,KAAK,CACV,WAAY,aAAA,CACf,EAGDA,EAAS,KAAK,CACV,WAAY,YAAA,CACf,EAEGrS,EAAO,KAAM,CACb,MAAMoe,GAAsB,CACxB,SAAUpe,EAAO,SACjB,QAASA,EAAO,MAAQ,QAAUA,EAAO,QAAU,OACnD,MAAOA,EAAO,MAAQ,SAAW,GAAOA,EAAO,MAAQ,OAAS,GAAQ,OACxE,MACIA,EAAO,MAAQ,QACT,CAAC,KAAM,KAAM,KAAK,EAClBA,EAAO,MAAQ,OACf,CAAC,MAAM,EACP,OACV,QAASA,EAAO,MAAQ,UAAY,GAAO,OAC3C,QAASA,EAAO,MAAQ,OAAA,EAI5BqS,EAAS,KAAK,CACV,WAAY,iBACZ,MAAA+L,EAAA,CACH,EAEGpe,EAAO,WAEPqS,EAAS,KAAK,CACV,WAAY,cACZ,UAAWrS,EAAO,SAAA,CACrB,EAGDqS,EAAS,KAAK,CACV,WAAY,kBACZ,MAAO,CACH,GAAG+L,GACH,GAAGpe,EAAO,OACV,QAASA,EAAO,UAChB,QAAS,EACb,EACA,MAAO,CAAA,CACV,EAGDqS,EAAS,KAAK,CACV,WAAY,kBACZ,MAAO,CACH,GAAG+L,GACH,GAAGpe,EAAO,OACV,QAASA,EAAO,UAChB,QAAS,EACb,EACA,MAAO,CAAA,CACV,EAEIA,EAAO,QAERqS,EAAS,KAAK,CACV,WAAY,iBACZ,MAAO,CACH,GAAG+L,GACH,QAASpe,EAAO,UAChB,QAAS,EACb,CAAA,CACH,GAILqS,EAAS,KAAK,CACV,WAAY,kBACZ,MAAO,CAAE,GAAG+L,GAAO,GAAGpe,EAAO,MAAO,EACpC,OAAQA,EAAO,OAAS,OAAYA,EAAO,OAC3C,MAAOA,EAAO,OAASke,EAAU,EAAIA,CAAA,CACxC,CAET,CAEI,IAAApK,GACA,GAAA,CACYA,GAAA,MAAM1B,GAAaC,CAAQ,QAClCK,GAAO,CACZ,OAAA2L,EAAS3L,EAAqB,EACvB,EACX,CAEI,IAAA/I,GACA2U,GACAC,GACAC,GACAC,GAA8C,CAAA,EAC9CC,GAAoC,EAEpC1e,EAAO,OACHA,EAAO,WACFA,EAAO,SACRse,GAAgBxK,GAAU,OAE9B0K,IAAiB/Y,GAAAqO,GAAU,IAAiC,EAAA,CAAC,IAA5C,YAAArO,GAA+C,GAChE8Y,IAAiB7Y,GAAAoO,GAAU,IAAiC,EAAA,CAAC,IAA5C,YAAApO,GAA+C,GAChEiE,GAAUmK,GAAU,QAEpB2K,GAAe3K,GAAU,MACrB9T,EAAO,SACHA,EAAO,OAAO,SACEwe,IAAAG,GAAAF,GAAaP,CAAO,IAApB,YAAAS,GAAuB,GACvCJ,GAAgBve,EAAO,OAAO,QAC9Bye,GAAeA,GAAa,MAAM,EAAGP,CAAO,EAAE,YAE9CM,GAAgBxe,EAAO,OAAO,QACdue,IAAAK,GAAAH,GAAaP,CAAO,IAApB,YAAAU,GAAuB,GACxBH,GAAAA,GAAa,MAAM,EAAGP,CAAO,KAIxDQ,GAAa5K,GAAU,OAGrB,MAAA+K,GAAS/K,GAAU,MACnBgL,GAAUhL,GAAU,MAOrB,GANDkK,GAAaC,IACbnK,GAAU,MAAM,EAKf9T,EAAO,MAAQ,UAAY,CAAC8e,GAAQ,KAAMtC,IAAMA,GAAE,IAAMxc,EAAO,QAAQ,GACvEA,EAAO,MAAQ,SAAW,CAAC6e,GAAO,KAAMvW,IAAMA,GAAE,IAAMtI,EAAO,OAAO,EAErE,aAAM+e,EAAS,CAAE,KAAM,SAAW,EAAI,EAC/BjL,GAIP,IAAAkL,GACJ,GAAIrV,IAAA,MAAAA,GAAS,QAASA,IAAA,YAAAA,GAAS,KAAMqU,EAAW,CAC5C,MAAMiB,GAAkC,CACpC,CACI,WAAY,mBACZ,UAAWtV,GAAQ,EACvB,CAAA,EAEA,IAAAuV,GACA,GAAA,CACiBA,GAAA,MAAM9M,GAAa6M,EAAa,QAC5CvM,GAAO,CACZ,OAAA2L,EAAS3L,EAAqB,EACvBoB,EACX,CACAkL,GAAYE,GAAe,KAC/B,CAGA,OAAInB,IAAYR,IAKVG,EAAA,CACF,OAAA1d,EACA,WAAAmM,GACA,OAAQ2S,GAAQ,OAAO,CAACK,GAAOnR,KAAWmR,GAAQnR,GAAO,OAAQ,CAAC,EAClE,OAAQ8Q,GAAQ,OAAO,CAACK,GAAOnR,KAAWmR,GAAQnR,GAAO,OAAQ,CAAC,EAClE,QAAA8Q,GACA,OAAAD,GACA,cAAAP,GACA,WAAAI,GACA,aAAAD,GACA,QAAA9U,GACA,cAAA4U,GACA,cAAAC,GACA,WAAW7U,IAAA,YAAAA,GAAS,KAAMqU,EAAYgB,GAAYvB,EAAM,UACxD,UAAW,OACX,YAAY9T,IAAA,YAAAA,GAAS,KAAMqU,EAAYC,IAAa,KAAO,GAC3D,iBAAkB,IAAI,IAClBtU,GACM,CAAC,CAACA,GAAQ,GAAIA,EAAO,CAAC,EACtB8T,EAAM,QACN,CAAA,EACAgB,GACK,OAAQ9U,IAAY8T,EAAM,iBAAiB,IAAI9T,GAAQ,EAAE,CAAC,EAC1D,IAAKA,IAAY,CAACA,GAAQ,GAAIA,EAAO,CAAC,CACrD,EACA,QAAS,GAET,aACImU,IACA9d,EAAO,MAAQyd,EAAM,OAAO,MAC5Bzd,EAAO,UAAYyd,EAAM,OAAO,UAChCzd,EAAO,SAAWyd,EAAM,OAAO,SAC/Bzd,EAAO,WAAayd,EAAM,OAAO,WACjCzd,EAAO,QAAUyd,EAAM,OAAO,OACxBA,EAAM,aAAe,EACrBA,EAAM,YAAA,CACnB,EAGGO,GAAaC,IAAaD,IAAarU,IAAA,YAAAA,GAAS,KAChDyV,EAAU,CAAE,KAAM3B,EAAM,QAAQ,UAAY,CAAA,GAGzC3J,EAAA,EAGLrK,EAAc,MAAO3I,EAAcoH,KAOnB,MAAM0V,EAAuB,CANX,CAChC,WAAY,eACZ,KAAA9c,EACA,MAAAoH,CAAA,CAGmD,CAAC,GAEvC,MAGfmX,EAAgB,MAAOC,GAAsB,CAC/CA,EAAWA,GAAY7B,EAAM,OAAO,UAAYA,EAAM,QAAQ,CAAC,EAAE,GAEjE,MAAMtE,EAAgC,CAClC,WAAY,iBACZ,SAAAmG,CAAA,EAGA,IAAAxL,GACA,GAAA,CACAA,GAAY,MAAM1B,GAAa,CAAC+G,CAAO,CAAC,QACnCzG,GAAO,CACZ2L,EAAS3L,EAAqB,EAC9B,MACJ,CAEA,MAAMqM,EAAS,CACX,KAAM,SACN,UAAWjL,GAAU,IAAI,EACzB,SAAAwL,CAAA,CACH,CAAA,EAGCC,EAAc,MAAOlW,GAAoB,CAK3C,MAAMuU,EAAuB,CAJO,CAChC,WAAY,eACZ,QAAAvU,CAAA,CAEiC,EAAG,CAAE,KAAM,QAAS,CAAA,EAGvDmW,EAAa,MAAOF,GAAsB,CAKtC,MAAA1B,EAAuB,CAJM,CAC/B,WAAY,cACZ,SAAA0B,CAAA,CAEiC,CAAC,CAAA,EAGpCG,EAAU,MAAO9V,GAAqB,CACxC,MAAM+V,EAAYjC,EAAM,OAElBtE,GAAiC,CACnC,WAAY,kBACZ,UAAWxP,EAAQ,EAAA,EAGjBmK,GAAY,MAAM8J,EAAuB,CAACzE,EAAO,CAAC,EAExD,MAAM4F,EAAS,CACX,KAAM,SACN,UAAWjL,GAAU,IAAI,EACzB,SAAU4L,EAAU,SAAW/V,EAAQ,OAAO,GAAK,MAAA,CACtD,CAAA,EAGCgW,EAAa,IAAM,CACrB,MAAM9B,EAAwB,CAAE,GAAGJ,EAAM,OAAQ,OAAQ,QACnDC,EAAA,CAAE,OAAQG,CAAA,CAAW,EAC3BM,GAAqBN,EAAW,EAAI,CAAA,EAGlC+B,EAAarF,GAAiB,CAC1BmD,EAAA,CAAE,OAAQD,EAAM,OAAO,OAAQpc,GAAMA,GAAKkZ,CAAK,CAAA,CAAG,CAAA,EAGtDwE,EAAW,MAAO/e,EAAqB8d,EAAW,GAAO+B,GAAO,KAAS,QAC3E,MAAMxN,GAA6B,CAAA,EAE/BwN,IAAQpC,EAAM,SAAS,mBACvBpL,GAAS,KAAK,CACV,WAAY,kBACZ,MAAO,CAAE,QAAS,EAAM,EACxB,OAAQoL,EAAM,SAAS,uBACvB,MAAO,CAAA,CACV,EAGDzd,GAAA,MAAAA,EAAQ,WACRqS,GAAS,KAAK,CACV,WAAY,eACZ,UAAWrS,EAAO,SAAA,CACrB,EAGL,MAAM8T,EAAY,MAAM8J,EAAuBvL,GAAUrS,EAAQ8d,CAAQ,EAErE,GAAA+B,IAAQpC,EAAM,SAAS,kBAAmB,CACpC,MAAA/T,EAAWoK,EAAU,MAC3B4J,EAAM,CAAE,yBAAyBrY,GAAAqE,GAAA,YAAAA,EAAW,KAAX,YAAArE,GAAe,GAAI,CACxD,CAAA,EAGEya,EAAiB,MAAOhC,EAAW,KAAU,CAC/C,MAAM9d,EAAqB,CACvB,GAAGyd,EAAM,OACT,UAAW,OACX,OACI,KAAK,OAAOA,EAAM,OAAO,QAAU,GAAKA,EAAM,YAAY,OAAO,EAC7DA,EAAM,YAAY,SAAW,MAAA,EAGzC,MAAMG,EAAuB,CAAA,EAAI5d,EAAQ8d,CAAQ,CAAA,EAG/CiC,EAAiB,SAAY,CAC/B,MAAMnC,EAAuB,GAAI,CAAA,CAAE,CAAA,EAGjCoC,EAAQ,MAAOrW,EAAkB4K,IAAiB,CACpD,MAAMmL,GAAYjC,EAAM,OAElBtE,GAA+B,CACjC,WAAY,gBACZ,UAAWxP,EAAQ,GACnB,IAAA4K,CAAA,EAGET,EAAY,MAAM8J,EAAuB,CAACzE,EAAO,CAAC,EAExD,MAAM4F,EAAS,CACX,KAAM,SACN,UAAWjL,EAAU,IAAI,EACzB,SAAU4L,GAAU,SAAW/V,EAAQ,OAAO,GAAK,MAAA,CACtD,CAAA,EAGCsW,EAAkB,MAAOC,GAAsC,CAC3DxC,EAAA,CAAE,YAAa,CAAE,GAAGD,EAAM,YAAa,GAAGyC,CAAY,CAAA,CAAG,EAC/D,IAAIrC,EAAYJ,EAAM,OAClByC,EAAY,UACArC,EAAA,CACR,GAAGA,EACH,OAAQJ,EAAM,OAAO,OACf,KAAK,MAAMA,EAAM,OAAO,OAASyC,EAAY,OAAO,EAAIA,EAAY,QACpE,MAAA,GAOd,MAAMtC,EAAuB,CAJU,CACnC,WAAY,kBACZ,YAAAsC,CAAA,CAEiC,EAAGrC,EAAW,EAAI,CAAA,EAGrDhD,EAAaxJ,GAAwB,CACjCqM,EAAA,CACF,iBAAkB,IAAI,IAClBD,EAAM,aACD,OACI9T,GACG0H,GAAQ,OACPA,GAAQ,QAAU,CAAC1H,EAAQ,QAC3B0H,GAAQ,UAAY1H,EAAQ,QAC5B0H,GAAQ,WAAa1H,EAAQ,SAC7B0H,GAAQ,aAAe,CAAC1H,EAAQ,OAAA,EAExC,IAAKA,GAAY,CAACA,EAAQ,GAAIA,CAAO,CAAC,CAC/C,CAAA,CACH,CAAA,EAGCwW,EAAe,MAAOhY,GAAgB,CACxC,MAAM4W,EAAS,CACX,GAAGtB,EAAM,OACT,SAAUtV,EACV,OAAQ,EACR,UAAW,OACX,OAAQsV,EAAM,OAAO,OACf,CAAE,GAAGA,EAAM,OAAO,OAAQ,QAAS,OAAW,QAAS,QACvD,MAAA,CACT,CAAA,EAGC2C,EAAc,SAAY,QACxB,GAAA,GAAC/a,GAAAoY,EAAM,UAAN,MAAApY,GAAe,OAChB,OAGJ,MAAM8T,EAA0B,CAC5B,WAAY,eACZ,UAAWsE,EAAM,QAAQ,EAAA,EAGvBI,EAAwBJ,EAAM,WAC9B,CACI,GAAGA,EAAM,WACT,UAAW,OACX,OACI,KAAK,OAAOA,EAAM,WAAW,QAAU,GAAKA,EAAM,YAAY,OAAO,EACjEA,EAAM,YAAY,SAAW,MACzC,EACA,CAAC,YAAa,UAAU,EAAE,SAASA,EAAM,SAAS,cAAc,EAChE,CAAE,KAAM,QAAS,SAAUA,EAAM,QAAQ,OAAO,EAChD,EAAA,CAAE,KAAM,SAAU,SAAUA,EAAM,QAAQ,OAAO,EAAG,EAC1D,MAAMG,EAAuB,CAACzE,CAAO,EAAG0E,CAAS,EAEjDuB,EAAU,CAAE,KAAM3B,EAAM,QAAQ,WAAa,CAAA,CAAA,EAG3C4C,EAAa,MACfC,EACAC,EACAC,KACC,CACD,MAAMnO,GAAWiO,EAAI,IAChBnY,KAA2B,CACxB,WAAY,cACZ,UAAWA,GACX,QAAAoY,CAAA,EACJ,EAIEvgB,EAAqB,CAAE,GAAGyd,EAAM,OAAQ,UAAW,QAGrD,GAFE,MAAAG,EAAuBvL,GAAUrS,EAAQ,EAAI,EAE/CugB,GAAWze,GAAc,eAAgB,CACnC,MAAAiF,GAASwZ,EACTD,EAAI,OAAS,EACT,uBACA,sBACJA,EAAI,OAAS,EACb,mBACA,kBACApS,EAAOpH,GAAoB2W,EAAM,QAAQ1W,EAAM,EAAGuZ,EAAI,MAAM,EAIlElB,EAAU,CAAE,KAAAlR,EAAM,KAAMsS,GAHX,IAAM,CACfH,EAAWC,EAAKC,EAAUze,GAAc,WAAaA,GAAc,QAAS,EAAK,CAAA,EAE1C,OAAW,CAC1D,CAAA,EAGEuc,EAAW,MAAO3L,GAAyB,CAC7CgL,EAAM,CAAE,QAASD,EAAM,SAAW,CAAC/K,EAAO,MAAAA,EAAO,CAAA,EAG/C+N,EAAY,MAAOC,EAAiBC,IAAsB,CAC5DC,EAAgBjX,IACP8T,EAAM,iBAAiB,IAAI9T,GAAQ,EAAE,EAGnC,CACH,GAAGA,GACH,OAAQ8T,EAAM,OAAO,OAAQ7V,GACrB8Y,EAAM,SAAS9Y,EAAM,EAAE,EAChB,GACA+Y,EAAQ,SAAS/Y,EAAM,EAAE,EACzB,GAEA+B,GAAQ,OAAO,UAAWrB,IAAMA,GAAE,IAAMV,EAAM,EAAE,GAAK,CAEnE,CAAA,EAZM+B,EAcd,EAED,MAAM0I,GAA+B,CAAA,EAC/BoL,EAAA,iBAAiB,QAAS9T,IAAY,CACxC0I,GAAS,KAAK,CACV,WAAY,aACZ,UAAW1I,GAAQ,GACnB,SAAUA,GAAQ,OAAO,IAAK/B,GAAUA,EAAM,EAAE,CAAA,CACnD,CAAA,CACJ,EAED,MAAMgW,EAAuBvL,EAAQ,CAAA,EAGnCxH,EAAa,MAAOgW,EAAmC/V,IAAqB,CAC9E8V,EAAgBjX,IACZkX,EAAW,SAASlX,GAAQ,EAAE,EAAI,CAAE,GAAGA,GAAS,QAAAmB,CAAA,EAAYnB,EAAA,EAGhE,MAAM0I,GAAWwO,EAAW,IACvB7C,KAAkC,CAC/B,WAAY,cACZ,UAAAA,GACA,QAAAlT,CAAA,EACJ,EAGJ,MAAM8S,EAAuBvL,EAAQ,CAAA,EAGnC1H,EAAY,MAAOkW,EAAmCjW,IAAoB,CAC5EgW,EAAgBjX,GACZkX,EAAW,SAASlX,EAAQ,EAAE,EAAI,CAAE,GAAGA,EAAS,OAAAiB,CAAA,EAAWjB,CAAA,EAG/D,MAAM0I,GAAWwO,EAAW,IACvB7C,IAAiC,CAC9B,WAAY,aACZ,UAAAA,EACA,OAAApT,CAAA,EACJ,EAGE5K,GAAqB,CAAE,GAAGyd,EAAM,OAAQ,UAAW,QAEnD,MAAAG,EAAuBvL,GAAUrS,EAAM,CAAA,EAG3C8gB,EAAmBtf,GAAkB,CACjCkc,EAAA,CACF,aAAclc,EACd,aAAcic,EAAM,aAAe,CAAA,CACtC,EAGG,CAACA,EAAM,OAAO,MAAQjc,GAASS,GAAa,IAAM,CAACwb,EAAM,OAChDsB,EAAA,CAAE,KAAM,QAAS,OAAQtB,EAAM,OAAO,QAAU,EAAI,CACjE,EAGEsD,EAAa,MAAOC,GAAmB,CACzC,MAAMhhB,EAAqB,CAAE,GAAGyd,EAAM,OAAQ,OAAAuD,CAAO,EACrD7C,GAAqBne,EAAQyd,EAAM,OAAO,QAAU,IAAI,EAClDC,EAAA,CAAE,OAAA1d,EAAQ,CAAA,EAGdof,EAAY,MAAO7E,GAAiB,CACtCmD,EAAM,CAAE,OAAQ,CAACnD,CAAK,CAAG,CAAA,EACrBA,GACA,OAAO,WAAW,IAAMqF,EAAUrF,CAAK,EAAG,GAAK,CACnD,EAGE0G,EAAkB9Y,GAAe,CAC7BuV,EAAA,CACF,iBAAkB,IAAI,IAClBD,EAAM,aACD,OAAQ9T,GACLA,EAAQ,IAAMxB,EACR,CAACsV,EAAM,iBAAiB,IAAI9T,EAAQ,EAAE,EACtC8T,EAAM,iBAAiB,IAAI9T,EAAQ,EAAE,CAAA,EAE9C,IAAKA,GAAY,CAACA,EAAQ,GAAIA,CAAO,CAAC,CAC/C,CAAA,CACH,CAAA,EAGCuX,GAAO,MAAO3G,GAAiB,CAC7BA,EAAM,OACNqF,EAAUrF,CAAK,EACfA,EAAM,KAAK,EACf,EAGE4G,GAAc,CAAC9K,EAAmBF,IAAmB,CACnD,GAAA,CAACsH,EAAM,QACP,OAGJ,MAAMM,GAAW,EAAER,EACb5T,GAAU8T,EAAM,QAChB2D,EAAW3D,EAAM,UACvBC,EAAM,CAAE,UAAWrH,EAAM,WAAY,EAAO,CAAA,EAE5C,IAAIlW,GAAQ,IACRgW,EACQhW,GAAA,EACDihB,IACCjhB,GAAA,KAAK,IAAI,EAAGwJ,GAAQ,KAAO,IAAOxJ,GAAQ,KAAK,IAAK,CAAA,GAEhE,OAAO,aAAaqd,CAAc,EAEjBA,EAAA,OAAO,WAAW,SAAY,CAC3C,MAAMnL,EAA6B,CAC/B,CACI,WAAY,iBACZ,UAAW1I,GAAQ,GACnB,KAAA0M,CACJ,EACA,CACI,WAAY,cACZ,UAAW1M,GAAQ,EACvB,CAAA,EAGA,IAAAmK,GACA,GAAA,CACYA,GAAA,MAAM1B,GAAaC,CAAQ,QAClCK,GAAO,CACZ2L,EAAS3L,EAAqB,EAC9B,MACJ,CACM,MAAA2O,EAAiBvN,GAAU,MAC7BiK,IAAYR,GACNG,EAAA,CACF,QAAS2D,EACT,UAAW,OACX,WAAY,EAAA,CACf,GAENlhB,EAAK,CAAA,EAGNmhB,GAAc,MAAOjY,EAAiBvI,EAAcoH,KAAkB,CAQlE,MAAA0V,EAAuB,CAPO,CAChC,WAAY,eACZ,QAAAvU,EACA,KAAAvI,EACA,MAAAoH,EAAA,CAGiC,CAAC,CAAA,EAGpC0Y,EAAkBW,GAA0D,CACxE7D,EAAA,CACF,aAAcD,EAAM,aAAa,IAAK9T,GAAY4X,EAAS5X,CAAO,CAAC,EACnE,QAAS8T,EAAM,QAAU8D,EAAS9D,EAAM,OAAO,EAAI,OACnD,iBAAkB,IAAI,IAClB,MAAM,KAAKA,EAAM,iBAAiB,QAAQ,CAAC,EAAE,IAAI,CAAC,CAACtV,EAAIwB,EAAO,IAAM,CAChExB,EACAoZ,EAAS5X,EAAO,CAAA,CACnB,CACL,CAAA,CACH,CAAA,EAGL,aAAMoV,EAAS3C,GAAA,EAAwB,GAAM,EAAI,EAE1C,CACH,YAAA3S,EACA,cAAA4V,EACA,YAAAE,EACA,WAAAC,EACA,QAAAC,EACA,IAAK,IAAahC,EAClB,WAAAkC,EACA,UAAAC,EACA,SAAAb,EACA,eAAAe,EACA,eAAAC,EACA,MAAAC,EACA,gBAAAC,EACA,UAAApF,EACA,aAAAsF,EACA,YAAAC,EACA,WAAAC,EACA,SAAAhC,EACA,UAAAoC,EACA,WAAA5V,EACA,UAAAF,EACA,gBAAAmW,EACA,WAAAC,EACA,UAAA5D,EACA,eAAA8D,EACA,KAAAC,GACA,YAAAC,GACA,YAAAG,EAAA,CAER,CCnxBA,eAAezB,IAAO,CACZ,MAAA2B,EAAa,SAAS,eAAe,iBAAiB,EACtDC,EAAe,SAAS,eAAe,mBAAmB,EAG1DpL,EAAO,OAAO,qBACpB,GAAI,CAACA,EACD,OAGE,MAAAvQ,EAAQ,MAAMwX,GAAY,CAC5B,OAAQjH,EAAK,OACb,SAAUA,EAAK,SACf,YAAaA,EAAK,YAClB,QAASA,EAAK,QACd,OAAQ,EAAQA,EAAK,MAAM,CAC9B,EAMD,GAJImL,GACI,IAAAE,GAAK,CAAE,OAAQF,EAAY,MAAO,CAAE,MAAA1b,GAAS,EAGjD2b,EAAc,CAEdA,EAAa,UAAY,GAGnB,MAAAhE,EAAQ3X,EAAM,MACd6b,EAAS,IAAIC,GAAO,CACtB,OAAQH,EACR,MAAO,CACH,SAAUhE,EAAM,SAChB,QAASA,EAAM,QACf,QAASA,EAAM,QACf,OAAQA,EAAM,OACd,OAAQA,EAAM,OACd,QAAS3X,EAAM,SACf,eAAgBA,EAAM,cACtB,eAAgBA,EAAM,YAC1B,CAAA,CACH,EAGKA,EAAA,UAAW2X,GAAU,CACvBkE,EAAO,KAAK,CACR,SAAUlE,EAAM,SAChB,QAASA,EAAM,QACf,QAASA,EAAM,QACf,OAAQA,EAAM,OACd,OAAQA,EAAM,MAAA,CACjB,CAAA,CACJ,CACL,CACJ,CAEAoC,GAAK","x_google_ignoreList":[0,1,3,4,16,52]}