import{n as I,i as Vs,a as hl,l as vl,c as kl,d as wl,s as yl,g as Ml,b as $l,e as Ws,f as rt,S as le,h as ne,j as te,k as Cl,m as L,o as v,t as j,p as d,q as w,r as g,u as O,v as he,w as ke,x as ze,y as R,z as Sl,A as Tl,B as Ll,C,D as Le,E as Oe,F as A,G as y,H as ge,I as Xe,J as Xs,K as pe,L as me,M as x,N as ee,O as U,P as G,Q as H,R as ae,T as P,U as ue,V as ve,W as we,X as ye,Y as Ye,Z as ie,_ as zl,$ as Ys,a0 as Ge,a1 as xe,a2 as et,a3 as Ce,a4 as Js,a5 as Ke,a6 as Qs,a7 as Ie,a8 as Re,a9 as qe,aa as He,ab as Ee,ac as it,ad as Dl,ae as Be,af as je,ag as Fe,ah as Al,ai as Nl,aj as Zs,ak as Bl,al as jl}from"./global-b3455cc6.js";const Je=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function xs(l,e,t,s){if(!e)return I;const r=l.getBoundingClientRect();if(e.left===r.left&&e.right===r.right&&e.top===r.top&&e.bottom===r.bottom)return I;const{delay:n=0,duration:i=300,easing:a=Vs,start:o=hl()+n,end:f=o+i,tick:c=I,css:m}=t(l,{from:e,to:r},s);let u=!0,_=!1,b;function p(){m&&(b=kl(l,0,1,i,n,a,m)),n||(_=!0)}function h(){m&&wl(l,b),u=!1}return vl(k=>{if(!_&&k>=o&&(_=!0),_&&k>=f&&(c(1,0),h()),!u)return!1;if(_){const S=k-o,z=0+1*a(S/i);c(z,1-z)}return!0}),p(),c(0,1),h}function el(l){const e=getComputedStyle(l);if(e.position!=="absolute"&&e.position!=="fixed"){const{width:t,height:s}=e,r=l.getBoundingClientRect();l.style.position="absolute",l.style.width=t,l.style.height=s,tt(l,r)}}function tt(l,e){const t=l.getBoundingClientRect();if(e.left!==t.left||e.top!==t.top){const s=getComputedStyle(l),r=s.transform==="none"?"":s.transform;l.style.transform=`${r} translate(${e.left-t.left}px, ${e.top-t.top}px)`}}const Ne=[];function Il(l,e=I){let t;const s=new Set;function r(a){if(yl(l,a)&&(l=a,t)){const o=!Ne.length;for(const f of s)f[1](),Ne.push(f,l);if(o){for(let f=0;f<Ne.length;f+=2)Ne[f][0](Ne[f+1]);Ne.length=0}}}function n(a){r(a(l))}function i(a,o=I){const f=[a,o];return s.add(f),s.size===1&&(t=e(r,n)||I),a(l),()=>{s.delete(f),s.size===0&&t&&(t(),t=null)}}return{set:r,update:n,subscribe:i}}const Qe={};async function Rl(l){return Qe[l]==null&&(Qe[l]=await new Promise(e=>{window.require([l],e)})),Qe[l]}var Te=(l=>(l[l.NotDeleted=0]="NotDeleted",l[l.Deleted=1]="Deleted",l[l.DeletedForever=2]="DeletedForever",l))(Te||{});async function tl(l){const e=await Rl("core/ajax");return await Promise.all(e.call(Array.from(l).map(({methodname:s,...r})=>({methodname:`local_mail_${s}`,args:r}))))}const Ve=["","blue","indigo","purple","pink","red","orange","yellow","green","teal","cyan"];function at(l){if(l==0)return"";const e=new Date(l*1e3);return[String(e.getFullYear()),String(e.getMonth()+1).padStart(2,"0"),String(e.getDate()).padStart(2,"0")].join("-")}function ot(l){const e=[{bytes:1099511627776,name:"TB"},{bytes:1073741824,name:"GB"},{bytes:1048576,name:"MB"},{bytes:1024,name:"KB"}];for(const t of e)if(l>=t.bytes)return`${Intl.NumberFormat(void 0,{maximumFractionDigits:1}).format(l/t.bytes)} ${t.name}`;return`${l} B`}function ft(l){return l.trim().replaceAll(/\s+/gu," ")}function $e(l,e){if(l=l||"",typeof e=="string"||typeof e=="number")l=l.replace("{$a}",e.toString());else for(const t in e)l=l.replace(`{$a->${t}}`,e[t].toString());return l}async function ql(l){return new Promise(e=>{setTimeout(e,l)})}function El(l){return l?Math.floor(new Date(parseInt(l.slice(0,4)),parseInt(l.slice(5,7))-1,parseInt(l.slice(8,10)),23,59,59).getTime()/1e3):0}var fe=(l=>(l[l.SM=576]="SM",l[l.MD=768]="MD",l[l.LG=992]="LG",l[l.XL=1200]="XL",l))(fe||{});async function Pl(l){let e=0;const{subscribe:t,update:s}=Il({userid:l.userid,settings:l.settings,preferences:l.preferences,strings:l.strings,params:{tray:"inbox"},unread:0,drafts:0,courses:[],labels:[],totalCount:0,listMessages:[],loading:!0,selectedMessages:new Map,toasts:[],navigationId:0,viewSize:0}),r={subscribe:t,get(){return Ml(this)},async callServicesAndRefresh(n,i,a=!1){var D,N,F,V;const o=++e,f=i||r.get().params,c=r.get().preferences.perpage;s(B=>({...B,loading:!0})),n.push({methodname:"count_messages",query:{roles:["to","cc","bcc"],unread:!0}}),n.push({methodname:"count_messages",query:{draft:!0}}),n.push({methodname:"get_courses"}),n.push({methodname:"get_labels"});const m={courseid:f.courseid,labelid:f.tray=="label"?f.labelid:void 0,draft:f.tray=="drafts"?!0:f.tray=="sent"?!1:void 0,roles:f.tray=="inbox"?["to","cc","bcc"]:f.tray=="sent"?["from"]:void 0,starred:f.tray=="starred"?!0:void 0,deleted:f.tray=="trash"};n.push({methodname:"count_messages",query:m}),f.messageid?(n.push({methodname:"get_message",messageid:f.messageid}),n.push({methodname:"search_messages",query:{...m,...f.search,startid:f.messageid,reverse:!1},limit:1}),n.push({methodname:"search_messages",query:{...m,...f.search,startid:f.messageid,reverse:!0},limit:1}),f.search||n.push({methodname:"count_messages",query:{...m,startid:f.messageid,reverse:!0}})):n.push({methodname:"search_messages",query:{...m,...f.search},offset:f.search?void 0:f.offset,limit:f.search?c+1:c});let u;try{u=await tl(n)}catch(B){return r.setError(B),[]}let _,b,p,h,k=[];f.messageid?(f.search||(b=u.pop()),h=(D=u.pop()[0])==null?void 0:D.id,p=(N=u.pop()[0])==null?void 0:N.id,_=u.pop()):(k=u.pop(),f.search&&(f.search.reverse?(h=(F=k[c])==null?void 0:F.id,p=f.search.startid,k=k.slice(0,c).reverse()):(h=f.search.startid,p=(V=k[c])==null?void 0:V.id,k=k.slice(0,c))));const S=u.pop(),z=u.pop(),M=u.pop(),$=u.pop(),T=u.pop();return f.tray=="course"&&!M.find(B=>B.id==f.courseid)||f.tray=="label"&&!z.find(B=>B.id==f.labelid)?(await r.navigate({tray:"inbox"},!0),u):(o!=e||(s(B=>({...B,params:f,unread:T,drafts:$,courses:M,labels:z,messageOffset:b,totalCount:S,listMessages:k,message:_,nextMessageId:p,prevMessageId:h,selectedMessages:new Map(_?[[_.id,_]]:B.message?[]:k.filter(J=>B.selectedMessages.has(J.id)).map(J=>[J.id,J])),loading:!1})),$l(f,a)),u)},async createLabel(n,i){const a={methodname:"create_label",name:n,color:i};return(await r.callServicesAndRefresh([a])).pop()},async deleteLabel(n){const i={methodname:"delete_label",labelid:n};r.callServicesAndRefresh([i],{tray:"inbox"})},async emptyTrash(){const n={methodname:"empty_trash"};await r.callServicesAndRefresh([n])},hideToast(n){s(i=>({...i,toasts:i.toasts.filter(a=>a!=n)}))},async init(){const n=[];this.get().settings.incrementalsearch&&n.push({methodname:"search_messages",query:{deleted:!1},offset:r.get().settings.incrementalsearchlimit,limit:1});const i=await r.callServicesAndRefresh(n,Ws());s(a=>{var o,f;return{...a,incrementalSearchStopId:(f=(o=i.pop())==null?void 0:o[0])==null?void 0:f.id}})},async navigate(n,i=!1){const a=[];n!=null&&n.messageid&&a.push({methodname:"set_unread",messageid:n.messageid,unread:!1}),await r.callServicesAndRefresh(a,n,i),s(o=>({...o,navigationId:o.navigationId+1}))},selectAll(n){s(i=>({...i,selectedMessages:new Map(i.listMessages.filter(a=>n=="all"||n=="read"&&!a.unread||n=="unread"&&a.unread||n=="starred"&&a.starred||n=="unstarred"&&!a.starred).map(a=>[a.id,a]))}))},async selectCourse(n){const i=this.get().params;await this.navigate({...i,courseid:n,offset:0,messageid:void 0,search:i.search?{...i.search,startid:void 0,reverse:void 0}:void 0})},async setDeleted(n,i,a){const o=n.map(c=>({methodname:"set_deleted",messageid:c,deleted:i})),f={...r.get().params,messageid:void 0};if(await r.callServicesAndRefresh(o,f,!0),i!=Te.DeletedForever){const c=i?n.length>1?"undodeletemany":"undodeleteone":n.length>1?"undorestoremany":"undorestoreone",m=$e(r.get().strings[c],n.length),u=()=>{r.setDeleted(n,i?Te.NotDeleted:Te.Deleted,!1)};r.showToast({text:m,undo:a?u:void 0})}},async setError(n){s(i=>({...i,loading:i.loading&&!n,error:n}))},async setLabels(n,i){this.updateMessages((o,f)=>f.selectedMessages.has(o.id)?{...o,labels:f.labels.filter(c=>n.includes(c.id)?!0:i.includes(c.id)?!1:o.labels.findIndex(m=>m.id==c.id)>=0)}:o);const a=[];r.get().selectedMessages.forEach(o=>{a.push({methodname:"set_labels",messageid:o.id,labelids:o.labels.map(f=>f.id)})}),await r.callServicesAndRefresh(a)},setViewportSize(n){s(i=>({...i,viewSize:n,navigationId:i.navigationId+1}))},async setPerPage(n){s(a=>({...a,preferences:{...a.preferences,perpage:n}}));const i={methodname:"set_preferences",preferences:{perpage:n}};await r.callServicesAndRefresh([i]),s(a=>({...a,navigationId:a.navigationId+1}))},async setStarred(n,i){this.updateMessages(o=>n.includes(o.id)?{...o,starred:i}:o);const a=n.map(o=>({methodname:"set_starred",messageid:o,starred:i}));await r.callServicesAndRefresh(a)},async setUnread(n,i){this.updateMessages(f=>n.includes(f.id)?{...f,unread:i}:f);const a=n.map(f=>({methodname:"set_unread",messageid:f,unread:i})),o={...r.get().params,messageid:void 0};await r.callServicesAndRefresh(a,o)},async showToast(n){s(i=>({...i,toasts:[n]})),n&&(await ql(1e4),r.hideToast(n))},toggleSelected(n){s(i=>({...i,selectedMessages:new Map(i.listMessages.filter(a=>a.id==n?!i.selectedMessages.has(a.id):i.selectedMessages.has(a.id)).map(a=>[a.id,a]))}))},async undo(n){n.undo&&(await n.undo(),r.hideToast(n))},async updateLabel(n,i,a){const o={methodname:"update_label",labelid:n,name:i,color:a};await r.callServicesAndRefresh([o])},updateMessages(n){s(i=>({...i,listMessages:i.listMessages.map(a=>n(a,i)),message:i.message?n(i.message,i):void 0,selectedMessages:new Map(Array.from(i.selectedMessages.entries()).map(([a,o])=>[a,n(o,i)]))}))}};return await r.init(),r}function sl(l){const e=l-1;return e*e*e+1}function Ue(l,{delay:e=0,duration:t=400,easing:s=Vs}={}){const r=+getComputedStyle(l).opacity;return{delay:e,duration:t,easing:s,css:n=>`opacity: ${n*r}`}}function We(l,{delay:e=0,duration:t=400,easing:s=sl,x:r=0,y:n=0,opacity:i=0}={}){const a=getComputedStyle(l),o=+a.opacity,f=a.transform==="none"?"":a.transform,c=o*(1-i),[m,u]=rt(r),[_,b]=rt(n);return{delay:e,duration:t,easing:s,css:(p,h)=>`
			transform: ${f} translate(${(1-p)*m}${u}, ${(1-p)*_}${b});
			opacity: ${o-c*h}`}}const{document:Fl}=Je;function ut(l){let e,t,s=l[1]&&ct(l),r=l[2]&&l[4]&&mt(l);return{c(){e=v("div"),s&&s.c(),t=L(),r&&r.c(),d(e,"class","modal-footer")},m(n,i){w(n,e,i),s&&s.m(e,null),g(e,t),r&&r.m(e,null)},p(n,i){n[1]?s?s.p(n,i):(s=ct(n),s.c(),s.m(e,t)):s&&(s.d(1),s=null),n[2]&&n[4]?r?r.p(n,i):(r=mt(n),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(n){n&&y(e),s&&s.d(),r&&r.d()}}}function ct(l){let e,t,s,r;return{c(){e=v("button"),t=j(l[1]),d(e,"type","button"),d(e,"class","btn btn-secondary")},m(n,i){w(n,e,i),g(e,t),s||(r=O(e,"click",function(){he(l[3])&&l[3].apply(this,arguments)}),s=!0)},p(n,i){l=n,i&2&&R(t,l[1])},d(n){n&&y(e),s=!1,r()}}}function mt(l){let e,t,s,r,n;return{c(){e=v("button"),t=j(l[2]),d(e,"type","button"),d(e,"class",s="btn "+l[5]),e.disabled=l[6]},m(i,a){w(i,e,a),g(e,t),r||(n=O(e,"click",function(){he(l[4])&&l[4].apply(this,arguments)}),r=!0)},p(i,a){l=i,a&4&&R(t,l[2]),a&32&&s!==(s="btn "+l[5])&&d(e,"class",s),a&64&&(e.disabled=l[6])},d(i){i&&y(e),r=!1,n()}}}function Ul(l){let e,t,s,r,n,i,a,o,f,c,m,u,_,b,p,h,k,S,z,M,$;const T=l[10].default,D=Cl(T,l,l[9],null);let N=(l[1]||l[2]&&l[4])&&ut(l);return{c(){e=L(),t=v("div"),s=v("div"),r=v("div"),n=v("div"),i=v("h5"),a=j(l[0]),o=L(),f=v("button"),c=v("span"),c.textContent="×",m=L(),u=v("div"),D&&D.c(),_=L(),N&&N.c(),h=L(),k=v("div"),d(i,"class","modal-title"),d(c,"aria-hidden","true"),d(f,"type","button"),d(f,"class","close"),d(f,"aria-label",l[1]),d(n,"class","modal-header"),d(u,"class","modal-body"),d(r,"class","modal-content"),d(s,"class","modal-dialog"),d(t,"class","modal show"),d(t,"tabindex","-1"),d(t,"role","dialog"),d(t,"aria-label",l[0]),d(t,"aria-modal","true"),d(k,"class","modal-backdrop show")},m(F,V){w(F,e,V),w(F,t,V),g(t,s),g(s,r),g(r,n),g(n,i),g(i,a),g(n,o),g(n,f),g(f,c),g(r,m),g(r,u),D&&D.m(u,null),g(r,_),N&&N.m(r,null),l[11](t),w(F,h,V),w(F,k,V),z=!0,M||($=[O(Fl.body,"keyup",l[8]),O(f,"click",function(){he(l[3])&&l[3].apply(this,arguments)}),ke(b=ze.call(null,r,l[3]))],M=!0)},p(F,[V]){l=F,(!z||V&1)&&R(a,l[0]),(!z||V&2)&&d(f,"aria-label",l[1]),D&&D.p&&(!z||V&512)&&Sl(D,T,l,l[9],z?Ll(T,l[9],V,null):Tl(l[9]),null),l[1]||l[2]&&l[4]?N?N.p(l,V):(N=ut(l),N.c(),N.m(r,null)):N&&(N.d(1),N=null),b&&he(b.update)&&V&8&&b.update.call(null,l[3]),(!z||V&1)&&d(t,"aria-label",l[0])},i(F){z||(C(D,F),Le(()=>{z&&(p||(p=Oe(t,We,{y:-100},!0)),p.run(1))}),Le(()=>{z&&(S||(S=Oe(k,Ue,{},!0)),S.run(1))}),z=!0)},o(F){A(D,F),p||(p=Oe(t,We,{y:-100},!1)),p.run(0),S||(S=Oe(k,Ue,{},!1)),S.run(0),z=!1},d(F){F&&(y(e),y(t),y(h),y(k)),D&&D.d(F),N&&N.d(),l[11](null),F&&p&&p.end(),F&&S&&S.end(),M=!1,ge($)}}}function Gl(l,e,t){let{$$slots:s={},$$scope:r}=e,{title:n}=e,{cancelText:i=""}=e,{confirmText:a=""}=e,{handleCancel:o}=e,{handleConfirm:f=void 0}=e,{confirmClass:c="btn-primary"}=e,{confirmDisabled:m=!1}=e,u;Xe(()=>{document.body.classList.add("modal-open"),u.focus()}),Xs(()=>{document.body.classList.remove("modal-open")});const _=p=>{p.key=="Escape"&&o()};function b(p){pe[p?"unshift":"push"](()=>{u=p,t(7,u)})}return l.$$set=p=>{"title"in p&&t(0,n=p.title),"cancelText"in p&&t(1,i=p.cancelText),"confirmText"in p&&t(2,a=p.confirmText),"handleCancel"in p&&t(3,o=p.handleCancel),"handleConfirm"in p&&t(4,f=p.handleConfirm),"confirmClass"in p&&t(5,c=p.confirmClass),"confirmDisabled"in p&&t(6,m=p.confirmDisabled),"$$scope"in p&&t(9,r=p.$$scope)},[n,i,a,o,f,c,m,u,_,r,s,b]}class Pe extends le{constructor(e){super(),ne(this,e,Gl,Ul,te,{title:0,cancelText:1,confirmText:2,handleCancel:3,handleConfirm:4,confirmClass:5,confirmDisabled:6})}}function dt(l){let e,t;return e=new Pe({props:{title:l[1].strings.error,handleCancel:l[2],$$slots:{default:[Hl]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.title=s[1].strings.error),r&1&&(n.handleCancel=s[2]),r&10&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function _t(l){var r;let e,t=((r=l[1].error)==null?void 0:r.debuginfo)+"",s;return{c(){e=v("p"),s=j(t)},m(n,i){w(n,e,i),g(e,s)},p(n,i){var a;i&2&&t!==(t=((a=n[1].error)==null?void 0:a.debuginfo)+"")&&R(s,t)},d(n){n&&y(e)}}}function gt(l){var r;let e,t=((r=l[1].error)==null?void 0:r.stacktrace)+"",s;return{c(){e=v("pre"),s=j(t)},m(n,i){w(n,e,i),g(e,s)},p(n,i){var a;i&2&&t!==(t=((a=n[1].error)==null?void 0:a.stacktrace)+"")&&R(s,t)},d(n){n&&y(e)}}}function Hl(l){var f,c,m;let e,t=((f=l[1].error)==null?void 0:f.message)+"",s,r,n,i,a=((c=l[1].error)==null?void 0:c.debuginfo)&&_t(l),o=((m=l[1].error)==null?void 0:m.stacktrace)&&gt(l);return{c(){e=v("p"),s=j(t),r=L(),a&&a.c(),n=L(),o&&o.c(),i=me()},m(u,_){w(u,e,_),g(e,s),w(u,r,_),a&&a.m(u,_),w(u,n,_),o&&o.m(u,_),w(u,i,_)},p(u,_){var b,p,h;_&2&&t!==(t=((b=u[1].error)==null?void 0:b.message)+"")&&R(s,t),(p=u[1].error)!=null&&p.debuginfo?a?a.p(u,_):(a=_t(u),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),(h=u[1].error)!=null&&h.stacktrace?o?o.p(u,_):(o=gt(u),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(u){u&&(y(e),y(r),y(n),y(i)),a&&a.d(u),o&&o.d(u)}}}function Ol(l){let e,t,s=l[1].error&&dt(l);return{c(){s&&s.c(),e=me()},m(r,n){s&&s.m(r,n),w(r,e,n),t=!0},p(r,[n]){r[1].error?s?(s.p(r,n),n&2&&C(s,1)):(s=dt(r),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(x(),A(s,1,1,()=>{s=null}),ee())},i(r){t||(C(s),t=!0)},o(r){A(s),t=!1},d(r){r&&y(e),s&&s.d(r)}}}function Kl(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,o=>t(1,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=()=>i.setError();return l.$$set=o=>{"store"in o&&n(t(0,i=o.store))},[i,s,a]}class Vl extends le{constructor(e){super(),ne(this,e,Kl,Ol,te,{store:0})}}function Wl(l){let e,t,s,r,n,i;return{c(){e=v("button"),t=v("i"),d(t,"class","fa fa-fw fa-trash"),d(e,"type","button"),d(e,"class","local-mail-action-delete btn flex-grow-0"),e.disabled=s=!l[2].selectedMessages.size,d(e,"title",r=l[2].strings.delete),P(e,"btn-secondary",!l[1]),P(e,"disabled",!l[2].selectedMessages.size)},m(a,o){w(a,e,o),g(e,t),n||(i=O(e,"click",l[3]),n=!0)},p(a,[o]){o&4&&s!==(s=!a[2].selectedMessages.size)&&(e.disabled=s),o&4&&r!==(r=a[2].strings.delete)&&d(e,"title",r),o&2&&P(e,"btn-secondary",!a[1]),o&4&&P(e,"disabled",!a[2].selectedMessages.size)},i:I,o:I,d(a){a&&y(e),n=!1,i()}}}function Xl(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,f=>t(2,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{transparent:a=!1}=e;const o=()=>i.setDeleted(Array.from(s.selectedMessages.keys()),Te.Deleted,!0);return l.$$set=f=>{"store"in f&&n(t(0,i=f.store)),"transparent"in f&&t(1,a=f.transparent)},[i,a,s,o]}class ll extends le{constructor(e){super(),ne(this,e,Xl,Wl,te,{store:0,transparent:1})}}function pt(l){let e,t;return e=new Pe({props:{title:l[3].strings.deleteforever,cancelText:l[3].strings.cancel,confirmText:l[3].strings.deleteforever,confirmClass:"btn-danger",handleCancel:l[5],handleConfirm:l[6],$$slots:{default:[Yl]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&8&&(n.title=s[3].strings.deleteforever),r&8&&(n.cancelText=s[3].strings.cancel),r&8&&(n.confirmText=s[3].strings.deleteforever),r&136&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Yl(l){let e=l[3].strings.messagedeleteconfirm+"",t;return{c(){t=j(e)},m(s,r){w(s,t,r)},p(s,r){r&8&&e!==(e=s[3].strings.messagedeleteconfirm+"")&&R(t,e)},d(s){s&&y(t)}}}function Jl(l){let e,t,s,r,n,i,a,o,f,c=l[2]&&pt(l);return{c(){e=v("button"),t=v("i"),n=L(),c&&c.c(),i=me(),d(t,"class","fa fa-fw fa-trash"),d(e,"type","button"),d(e,"class","local-mail-action-delete-forever btn flex-grow-0"),e.disabled=s=!l[3].selectedMessages.size,d(e,"title",r=l[3].strings.deleteforever),P(e,"btn-secondary",!l[1]),P(e,"disabled",!l[3].selectedMessages.size)},m(m,u){w(m,e,u),g(e,t),w(m,n,u),c&&c.m(m,u),w(m,i,u),a=!0,o||(f=O(e,"click",l[4]),o=!0)},p(m,[u]){(!a||u&8&&s!==(s=!m[3].selectedMessages.size))&&(e.disabled=s),(!a||u&8&&r!==(r=m[3].strings.deleteforever))&&d(e,"title",r),(!a||u&2)&&P(e,"btn-secondary",!m[1]),(!a||u&8)&&P(e,"disabled",!m[3].selectedMessages.size),m[2]?c?(c.p(m,u),u&4&&C(c,1)):(c=pt(m),c.c(),C(c,1),c.m(i.parentNode,i)):c&&(x(),A(c,1,1,()=>{c=null}),ee())},i(m){a||(C(c),a=!0)},o(m){A(c),a=!1},d(m){m&&(y(e),y(n),y(i)),c&&c.d(m),o=!1,f()}}}function Ql(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,u=>t(3,s=u)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{transparent:a=!1}=e,o=!1;const f=()=>{t(2,o=!0)},c=()=>{t(2,o=!1)},m=()=>{t(2,o=!1),i.setDeleted(Array.from(s.selectedMessages.keys()),Te.DeletedForever,!0)};return l.$$set=u=>{"store"in u&&n(t(0,i=u.store)),"transparent"in u&&t(1,a=u.transparent)},[i,a,o,s,f,c,m]}class nl extends le{constructor(e){super(),ne(this,e,Ql,Jl,te,{store:0,transparent:1})}}function bt(l,e,t){const s=l.slice();return s[16]=e[t],s}function Zl(l){let e;return{c(){e=v("span"),e.textContent="a",d(e,"aria-hidden","true")},m(t,s){w(t,e,s)},d(t){t&&y(e)}}}function xl(l){let e;return{c(){e=v("i"),d(e,"class","fa fa-check local-mail-label-modal-color-option-check")},m(t,s){w(t,e,s)},d(t){t&&y(e)}}}function ht(l,e){let t,s,r,n,i,a;function o(u,_){return u[16]==u[7]?xl:Zl}let f=o(e),c=f(e);function m(){return e[15](e[16])}return{key:l,first:null,c(){t=v("button"),c.c(),s=L(),d(t,"role","radio"),d(t,"aria-checked",r=e[16]==e[7]),d(t,"tabindex","0"),d(t,"title",n=e[5].strings[`color${e[16]}`]),d(t,"class","local-mail-label-modal-color-option btn svelte-cky3j8"),d(t,"style",`color: var(--local-mail-color-${e[16]}-fg, var(--local-mail-color-gray-fg));background-color: var(--local-mail-color-${e[16]}-bg, var(--local-mail-color-gray-bg))`),this.first=t},m(u,_){w(u,t,_),c.m(t,null),g(t,s),i||(a=O(t,"click",we(m)),i=!0)},p(u,_){e=u,f!==(f=o(e))&&(c.d(1),c=f(e),c&&(c.c(),c.m(t,s))),_&128&&r!==(r=e[16]==e[7])&&d(t,"aria-checked",r),_&32&&n!==(n=e[5].strings[`color${e[16]}`])&&d(t,"title",n)},d(u){u&&y(t),c.d(),i=!1,a()}}}function en(l){let e,t,s,r=l[5].strings.labelname+"",n,i,a,o,f,c,m=l[5].strings[l[4]?"errorrepeatedlabelname":"erroremptylabelname"]+"",u,_,b,p,h,k,S=l[5].strings.labelcolor+"",z,M,$,T,D=[],N=new Map,F,V,B,J=ue(Ve);const se=q=>q[16];for(let q=0;q<J.length;q+=1){let Y=bt(l,J,q),re=se(Y);N.set(re,D[q]=ht(re,Y))}return{c(){e=v("form"),t=v("div"),s=v("label"),n=j(r),i=L(),a=v("input"),f=L(),c=v("div"),u=j(m),_=L(),b=v("div"),b.textContent=" ",p=L(),h=v("div"),k=v("label"),z=j(S),$=L(),T=v("div");for(let q=0;q<D.length;q+=1)D[q].c();d(s,"for","local-mail-label-modal-name"),d(a,"type","text"),a.required=!0,d(a,"class","form-control is-invalid"),d(a,"id",o=l[9]+"-name"),P(a,"is-valid",l[8]),P(a,"is-invalid",!l[8]),d(c,"class","invalid-feedback"),d(b,"class","valid-feedback"),d(t,"class","form-group"),d(k,"for",M=l[9]+"-color"),d(T,"role","radiogroup"),d(T,"class","local-mail-label-modal-color svelte-cky3j8"),d(T,"id",F=l[9]+"-color"),d(h,"class","form-group")},m(q,Y){w(q,e,Y),g(e,t),g(t,s),g(s,n),g(t,i),g(t,a),l[13](a),ve(a,l[3]),g(t,f),g(t,c),g(c,u),g(t,_),g(t,b),g(e,p),g(e,h),g(h,k),g(k,z),g(h,$),g(h,T);for(let re=0;re<D.length;re+=1)D[re]&&D[re].m(T,null);V||(B=[O(a,"input",l[14]),O(e,"submit",we(l[10]))],V=!0)},p(q,Y){Y&32&&r!==(r=q[5].strings.labelname+"")&&R(n,r),Y&512&&o!==(o=q[9]+"-name")&&d(a,"id",o),Y&8&&a.value!==q[3]&&ve(a,q[3]),Y&256&&P(a,"is-valid",q[8]),Y&256&&P(a,"is-invalid",!q[8]),Y&48&&m!==(m=q[5].strings[q[4]?"errorrepeatedlabelname":"erroremptylabelname"]+"")&&R(u,m),Y&32&&S!==(S=q[5].strings.labelcolor+"")&&R(z,S),Y&512&&M!==(M=q[9]+"-color")&&d(k,"for",M),Y&160&&(J=ue(Ve),D=ye(D,Y,se,1,q,J,N,T,Ye,ht,null,bt)),Y&512&&F!==(F=q[9]+"-color")&&d(T,"id",F)},d(q){q&&y(e),l[13](null);for(let Y=0;Y<D.length;Y+=1)D[Y].d();V=!1,ge(B)}}}function tn(l){let e,t;return e=new Pe({props:{title:l[5].strings[l[1]?"editlabel":"newlabel"],cancelText:l[5].strings.cancel,handleCancel:l[2],confirmText:l[5].strings[l[1]?"save":"create"],confirmDisabled:!l[8],handleConfirm:l[10],$$slots:{default:[en]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,[r]){const n={};r&34&&(n.title=s[5].strings[s[1]?"editlabel":"newlabel"]),r&32&&(n.cancelText=s[5].strings.cancel),r&4&&(n.handleCancel=s[2]),r&34&&(n.confirmText=s[5].strings[s[1]?"save":"create"]),r&256&&(n.confirmDisabled=!s[8]),r&525304&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function sn(l,e,t){let s,r,n,i,a,o,f,c=I,m=()=>(c(),c=ae(u,$=>t(5,f=$)),u);l.$$.on_destroy.push(()=>c());let{store:u}=e;m();let{label:_=void 0}=e,{handleCancel:b}=e,{handleSubmit:p}=e,h;const k=async()=>{p(r,n)};Xe(()=>h.focus());function S($){pe[$?"unshift":"push"](()=>{h=$,t(6,h)})}function z(){r=this.value,t(3,r),t(1,_)}const M=$=>{t(7,n=$)};return l.$$set=$=>{"store"in $&&m(t(0,u=$.store)),"label"in $&&t(1,_=$.label),"handleCancel"in $&&t(2,b=$.handleCancel),"handleSubmit"in $&&t(11,p=$.handleSubmit)},l.$$.update=()=>{l.$$.dirty&2&&t(9,s=`local-mail-label-modal-${(_==null?void 0:_.id)||"new"}`),l.$$.dirty&2&&t(3,r=(_==null?void 0:_.name)||""),l.$$.dirty&2&&t(7,n=(_==null?void 0:_.color)||Ve[0]),l.$$.dirty&8&&t(12,i=ft(r)==""),l.$$.dirty&42&&t(4,a=f.labels.some($=>$.id!=(_==null?void 0:_.id)&&$.name==ft(r))),l.$$.dirty&4112&&t(8,o=!i&&!a)},[u,_,b,r,a,f,h,n,o,s,k,p,i,S,z,M]}class rl extends le{constructor(e){super(),ne(this,e,sn,tn,te,{store:0,label:1,handleCancel:2,handleSubmit:11})}}const{Map:ln}=Je;function vt(l,e,t){const s=l.slice();return s[16]=e[t],s}function kt(l){let e,t=[],s=new ln,r,n,i=ue(l[3].labels);const a=u=>u[16].id;for(let u=0;u<i.length;u+=1){let _=vt(l,i,u),b=a(_);s.set(b,t[u]=wt(b,_))}let o=l[3].labels.length>0&&yt();function f(u,_){return u[7]?rn:nn}let c=f(l),m=c(l);return{c(){e=v("div");for(let u=0;u<t.length;u+=1)t[u].c();r=L(),o&&o.c(),n=L(),m.c(),d(e,"class","dropdown-menu show")},m(u,_){w(u,e,_);for(let b=0;b<t.length;b+=1)t[b]&&t[b].m(e,null);g(e,r),o&&o.m(e,null),g(e,n),m.m(e,null)},p(u,_){_&1096&&(i=ue(u[3].labels),t=ye(t,_,a,1,u,i,s,e,Ye,wt,r,vt)),u[3].labels.length>0?o||(o=yt(),o.c(),o.m(e,n)):o&&(o.d(1),o=null),c===(c=f(u))&&m?m.p(u,_):(m.d(1),m=c(u),m&&(m.c(),m.m(e,null)))},d(u){u&&y(e);for(let _=0;_<t.length;_+=1)t[_].d();o&&o.d(),m.d()}}}function wt(l,e){let t,s,r,n,i=e[16].name+"",a,o,f;function c(){return e[15](e[16])}return{key:l,first:null,c(){t=v("button"),s=v("i"),n=L(),a=j(i),d(s,"class",r="fa fa-fw "+e[6](e[16].id)+" svelte-ufjoxg"),d(t,"type","button"),d(t,"class","dropdown-item local-mail-action-label-button-item"),this.first=t},m(m,u){w(m,t,u),g(t,s),g(t,n),g(t,a),o||(f=O(t,"click",c),o=!0)},p(m,u){e=m,u&72&&r!==(r="fa fa-fw "+e[6](e[16].id)+" svelte-ufjoxg")&&d(s,"class",r),u&8&&i!==(i=e[16].name+"")&&R(a,i)},d(m){m&&y(t),o=!1,f()}}}function yt(l){let e;return{c(){e=v("div"),d(e,"class","dropdown-divider")},m(t,s){w(t,e,s)},d(t){t&&y(e)}}}function nn(l){let e,t=l[3].strings.newlabel+"",s,r,n;return{c(){e=v("button"),s=j(t),d(e,"type","button"),d(e,"class","dropdown-item local-mail-action-label-button-item")},m(i,a){w(i,e,a),g(e,s),r||(n=O(e,"click",l[12]),r=!0)},p(i,a){a&8&&t!==(t=i[3].strings.newlabel+"")&&R(s,t)},d(i){i&&y(e),r=!1,n()}}}function rn(l){let e,t=l[3].strings.applychanges+"",s,r,n;return{c(){e=v("button"),s=j(t),d(e,"type","button"),d(e,"class","dropdown-item local-mail-action-label-button-item")},m(i,a){w(i,e,a),g(e,s),r||(n=O(e,"click",l[11]),r=!0)},p(i,a){a&8&&t!==(t=i[3].strings.applychanges+"")&&R(s,t)},d(i){i&&y(e),r=!1,n()}}}function Mt(l){let e,t;return e=new rl({props:{store:l[0],handleCancel:l[9],handleSubmit:l[13]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function an(l){let e,t,s,r,n,i,a,o,f,c,m=l[4]&&kt(l),u=l[5]&&Mt(l);return{c(){e=v("div"),t=v("button"),s=v("i"),i=L(),m&&m.c(),a=L(),u&&u.c(),d(s,"class","fa fa-fw fa-tag"),d(t,"type","button"),d(t,"class","local-mail-action-label-button btn dropdown-toggle svelte-ufjoxg"),t.disabled=r=!l[3].selectedMessages.size,d(t,"aria-expanded",l[4]),d(t,"title",n=l[3].strings.labels),P(t,"btn-secondary",!l[1]),P(t,"disabled",!l[3].selectedMessages.size),d(e,"class","btn-group"),d(e,"role","group"),P(e,"dropup",l[2])},m(_,b){w(_,e,b),g(e,t),g(t,s),g(e,i),m&&m.m(e,null),g(e,a),u&&u.m(e,null),o=!0,f||(c=[O(t,"click",l[8]),ke(ze.call(null,e,l[9]))],f=!0)},p(_,[b]){(!o||b&8&&r!==(r=!_[3].selectedMessages.size))&&(t.disabled=r),(!o||b&16)&&d(t,"aria-expanded",_[4]),(!o||b&8&&n!==(n=_[3].strings.labels))&&d(t,"title",n),(!o||b&2)&&P(t,"btn-secondary",!_[1]),(!o||b&8)&&P(t,"disabled",!_[3].selectedMessages.size),_[4]?m?m.p(_,b):(m=kt(_),m.c(),m.m(e,a)):m&&(m.d(1),m=null),_[5]?u?(u.p(_,b),b&32&&C(u,1)):(u=Mt(_),u.c(),C(u,1),u.m(e,null)):u&&(x(),A(u,1,1,()=>{u=null}),ee()),(!o||b&4)&&P(e,"dropup",_[2])},i(_){o||(C(u),o=!0)},o(_){A(u),o=!1},d(_){_&&y(e),m&&m.d(),u&&u.d(),f=!1,ge(c)}}}function on(l,e,t){let s,r,n,i=I,a=()=>(i(),i=ae(o,$=>t(3,n=$)),o);l.$$.on_destroy.push(()=>i());let{store:o}=e;a();let{transparent:f=!1}=e,{dropup:c=!1}=e,m=!1,u=!1,_=new Map;const b=()=>{t(4,m=!m)},p=()=>{t(4,m=!1),t(5,u=!1)},h=$=>{t(14,_=new Map(Array.from(_.entries()).map(([T,D])=>[T,T==$?D=="true"?"false":"true":D])))},k=()=>{t(4,m=!1),o.setLabels(Array.from(_.keys()).filter($=>_.get($)=="true"),Array.from(_.keys()).filter($=>_.get($)=="false"))},S=()=>{t(4,m=!1),t(5,u=!0)},z=async($,T)=>{t(5,u=!1);const D=await o.createLabel($,T);D&&o.setLabels([D],[])},M=$=>h($.id);return l.$$set=$=>{"store"in $&&a(t(0,o=$.store)),"transparent"in $&&t(1,f=$.transparent),"dropup"in $&&t(2,c=$.dropup)},l.$$.update=()=>{l.$$.dirty&8&&t(14,_=new Map(n.labels.map($=>{const T=Array.from(n.selectedMessages.values()).filter(D=>D.labels.some(N=>N.id==$.id));return[$.id,T.length==0?"false":T.length<n.selectedMessages.size?"mixed":"true"]}))),l.$$.dirty&16392&&t(7,s=Array.from(_.entries()).some(([$,T])=>Array.from(n.selectedMessages.values()).some(D=>T=="true"&&D.labels.every(N=>N.id!=$)||T=="false"&&D.labels.some(N=>N.id==$)))),l.$$.dirty&16384&&t(6,r=$=>_.get($)=="false"?"fa-square-o":_.get($)=="mixed"?"fa-minus-square-o":"fa-check-square-o")},[o,f,c,n,m,u,r,s,b,p,h,k,S,z,_,M]}class il extends le{constructor(e){super(),ne(this,e,on,an,te,{store:0,transparent:1,dropup:2})}}function $t(l){let e;function t(n,i){return n[8].params.tray=="trash"?un:fn}let s=t(l),r=s(l);return{c(){e=v("div"),r.c(),d(e,"class","dropdown-menu show")},m(n,i){w(n,e,i),r.m(e,null)},p(n,i){s===(s=t(n))&&r?r.p(n,i):(r.d(1),r=s(n),r&&(r.c(),r.m(e,null)))},d(n){n&&y(e),r.d()}}}function fn(l){let e,t,s,r,n,i=l[6]&&Ct(l),a=l[7]&&St(l),o=l[4]&&Tt(l),f=l[5]&&Lt(l),c=l[3]&&zt(l);return{c(){i&&i.c(),e=L(),a&&a.c(),t=L(),o&&o.c(),s=L(),f&&f.c(),r=L(),c&&c.c(),n=me()},m(m,u){i&&i.m(m,u),w(m,e,u),a&&a.m(m,u),w(m,t,u),o&&o.m(m,u),w(m,s,u),f&&f.m(m,u),w(m,r,u),c&&c.m(m,u),w(m,n,u)},p(m,u){m[6]?i?i.p(m,u):(i=Ct(m),i.c(),i.m(e.parentNode,e)):i&&(i.d(1),i=null),m[7]?a?a.p(m,u):(a=St(m),a.c(),a.m(t.parentNode,t)):a&&(a.d(1),a=null),m[4]?o?o.p(m,u):(o=Tt(m),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),m[5]?f?f.p(m,u):(f=Lt(m),f.c(),f.m(r.parentNode,r)):f&&(f.d(1),f=null),m[3]?c?c.p(m,u):(c=zt(m),c.c(),c.m(n.parentNode,n)):c&&(c.d(1),c=null)},d(m){m&&(y(e),y(t),y(s),y(r),y(n)),i&&i.d(m),a&&a.d(m),o&&o.d(m),f&&f.d(m),c&&c.d(m)}}}function un(l){let e,t=l[8].strings.emptytrash+"",s,r,n;return{c(){e=v("button"),s=j(t),d(e,"type","button"),d(e,"class","dropdown-item")},m(i,a){w(i,e,a),g(e,s),r||(n=O(e,"click",l[24]),r=!0)},p(i,a){a[0]&256&&t!==(t=i[8].strings.emptytrash+"")&&R(s,t)},d(i){i&&y(e),r=!1,n()}}}function Ct(l){let e,t=l[8].strings.markasread+"",s,r,n;return{c(){e=v("button"),s=j(t),d(e,"type","button"),d(e,"class","dropdown-item")},m(i,a){w(i,e,a),g(e,s),r||(n=O(e,"click",l[28]),r=!0)},p(i,a){a[0]&256&&t!==(t=i[8].strings.markasread+"")&&R(s,t)},d(i){i&&y(e),r=!1,n()}}}function St(l){let e,t=l[8].strings.markasunread+"",s,r,n;return{c(){e=v("button"),s=j(t),d(e,"type","button"),d(e,"class","dropdown-item")},m(i,a){w(i,e,a),g(e,s),r||(n=O(e,"click",l[29]),r=!0)},p(i,a){a[0]&256&&t!==(t=i[8].strings.markasunread+"")&&R(s,t)},d(i){i&&y(e),r=!1,n()}}}function Tt(l){let e,t=l[8].strings.markasstarred+"",s,r,n;return{c(){e=v("button"),s=j(t),d(e,"type","button"),d(e,"class","dropdown-item")},m(i,a){w(i,e,a),g(e,s),r||(n=O(e,"click",l[30]),r=!0)},p(i,a){a[0]&256&&t!==(t=i[8].strings.markasstarred+"")&&R(s,t)},d(i){i&&y(e),r=!1,n()}}}function Lt(l){let e,t=l[8].strings.markasunstarred+"",s,r,n;return{c(){e=v("button"),s=j(t),d(e,"type","button"),d(e,"class","dropdown-item")},m(i,a){w(i,e,a),g(e,s),r||(n=O(e,"click",l[31]),r=!0)},p(i,a){a[0]&256&&t!==(t=i[8].strings.markasunstarred+"")&&R(s,t)},d(i){i&&y(e),r=!1,n()}}}function zt(l){let e,t,s=l[8].strings.editlabel+"",r,n,i,a=l[8].strings.deletelabel+"",o,f,c,m=(l[6]||l[7]||l[4]||l[5])&&Dt();return{c(){m&&m.c(),e=L(),t=v("button"),r=j(s),n=L(),i=v("button"),o=j(a),d(t,"type","button"),d(t,"class","dropdown-item"),d(i,"type","button"),d(i,"class","dropdown-item")},m(u,_){m&&m.m(u,_),w(u,e,_),w(u,t,_),g(t,r),w(u,n,_),w(u,i,_),g(i,o),f||(c=[O(t,"click",l[18]),O(i,"click",l[21])],f=!0)},p(u,_){u[6]||u[7]||u[4]||u[5]?m||(m=Dt(),m.c(),m.m(e.parentNode,e)):m&&(m.d(1),m=null),_[0]&256&&s!==(s=u[8].strings.editlabel+"")&&R(r,s),_[0]&256&&a!==(a=u[8].strings.deletelabel+"")&&R(o,a)},d(u){u&&(y(e),y(t),y(n),y(i)),m&&m.d(u),f=!1,ge(c)}}}function Dt(l){let e;return{c(){e=v("div"),d(e,"class","dropdown-divider")},m(t,s){w(t,e,s)},d(t){t&&y(e)}}}function cn(l){let e,t,s,r=l[10]&&At(l),n=l[11]&&Nt(l);return{c(){r&&r.c(),e=L(),n&&n.c(),t=me()},m(i,a){r&&r.m(i,a),w(i,e,a),n&&n.m(i,a),w(i,t,a),s=!0},p(i,a){i[10]?r?(r.p(i,a),a[0]&1024&&C(r,1)):(r=At(i),r.c(),C(r,1),r.m(e.parentNode,e)):r&&(x(),A(r,1,1,()=>{r=null}),ee()),i[11]?n?(n.p(i,a),a[0]&2048&&C(n,1)):(n=Nt(i),n.c(),C(n,1),n.m(t.parentNode,t)):n&&(x(),A(n,1,1,()=>{n=null}),ee())},i(i){s||(C(r),C(n),s=!0)},o(i){A(r),A(n),s=!1},d(i){i&&(y(e),y(t)),r&&r.d(i),n&&n.d(i)}}}function mn(l){let e,t,s=l[12]&&Bt(l);return{c(){s&&s.c(),e=me()},m(r,n){s&&s.m(r,n),w(r,e,n),t=!0},p(r,n){r[12]?s?(s.p(r,n),n[0]&4096&&C(s,1)):(s=Bt(r),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(x(),A(s,1,1,()=>{s=null}),ee())},i(r){t||(C(s),t=!0)},o(r){A(s),t=!1},d(r){r&&y(e),s&&s.d(r)}}}function At(l){let e,t;return e=new rl({props:{store:l[0],label:l[3],handleCancel:l[19],handleSubmit:l[20]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r[0]&1&&(n.store=s[0]),r[0]&8&&(n.label=s[3]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Nt(l){let e,t;return e=new Pe({props:{title:l[8].strings.deletelabel,cancelText:l[8].strings.cancel,confirmText:l[8].strings.deletelabel,confirmClass:"btn-danger",handleCancel:l[22],handleConfirm:l[23],$$slots:{default:[dn]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r[0]&256&&(n.title=s[8].strings.deletelabel),r[0]&256&&(n.cancelText=s[8].strings.cancel),r[0]&256&&(n.confirmText=s[8].strings.deletelabel),r[0]&264|r[1]&2&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function dn(l){let e=$e(l[8].strings.labeldeleteconfirm,l[3].name)+"",t;return{c(){t=j(e)},m(s,r){w(s,t,r)},p(s,r){r[0]&264&&e!==(e=$e(s[8].strings.labeldeleteconfirm,s[3].name)+"")&&R(t,e)},d(s){s&&y(t)}}}function Bt(l){let e,t;return e=new Pe({props:{title:l[8].strings.emptytrash,cancelText:l[8].strings.cancel,confirmText:l[8].strings.emptytrash,confirmClass:"btn-danger",handleCancel:l[25],handleConfirm:l[26],$$slots:{default:[_n]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r[0]&256&&(n.title=s[8].strings.emptytrash),r[0]&256&&(n.cancelText=s[8].strings.cancel),r[0]&256&&(n.confirmText=s[8].strings.emptytrash),r[0]&256|r[1]&2&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function _n(l){let e=l[8].strings.emptytrashconfirm+"",t;return{c(){t=j(e)},m(s,r){w(s,t,r)},p(s,r){r[0]&256&&e!==(e=s[8].strings.emptytrashconfirm+"")&&R(t,e)},d(s){s&&y(t)}}}function gn(l){let e,t,s,r,n,i,a,o,f,c,m,u=l[9]&&$t(l);const _=[mn,cn],b=[];function p(h,k){return h[8].params.tray=="trash"?0:h[3]?1:-1}return~(a=p(l))&&(o=b[a]=_[a](l)),{c(){e=v("div"),t=v("button"),s=v("i"),n=L(),u&&u.c(),i=L(),o&&o.c(),d(s,"class","fa fa-fw fa-ellipsis-v"),d(t,"type","button"),d(t,"class","local-mail-action-more-button btn dropdown-toggle svelte-kx0nzt"),t.disabled=l[13],d(t,"aria-expanded",l[9]),d(t,"title",r=l[8].strings.moreactions),P(t,"btn-secondary",!l[1]),P(t,"disabled",l[13]),d(e,"class","btn-group"),P(e,"dropup",l[2])},m(h,k){w(h,e,k),g(e,t),g(t,s),g(e,n),u&&u.m(e,null),g(e,i),~a&&b[a].m(e,null),f=!0,c||(m=[O(t,"click",l[15]),ke(ze.call(null,e,l[14]))],c=!0)},p(h,k){(!f||k[0]&8192)&&(t.disabled=h[13]),(!f||k[0]&512)&&d(t,"aria-expanded",h[9]),(!f||k[0]&256&&r!==(r=h[8].strings.moreactions))&&d(t,"title",r),(!f||k[0]&2)&&P(t,"btn-secondary",!h[1]),(!f||k[0]&8192)&&P(t,"disabled",h[13]),h[9]?u?u.p(h,k):(u=$t(h),u.c(),u.m(e,i)):u&&(u.d(1),u=null);let S=a;a=p(h),a===S?~a&&b[a].p(h,k):(o&&(x(),A(b[S],1,1,()=>{b[S]=null}),ee()),~a?(o=b[a],o?o.p(h,k):(o=b[a]=_[a](h),o.c()),C(o,1),o.m(e,null)):o=null),(!f||k[0]&4)&&P(e,"dropup",h[2])},i(h){f||(C(o),f=!0)},o(h){A(o),f=!1},d(h){h&&y(e),u&&u.d(),~a&&b[a].d(),c=!1,ge(m)}}}function pn(l,e,t){let s,r,n,i,a,o,f,c,m=I,u=()=>(m(),m=ae(_,X=>t(8,c=X)),_);l.$$.on_destroy.push(()=>m());let{store:_}=e;u();let{transparent:b=!1}=e,{dropup:p=!1}=e,h=!1,k=!1,S=!1,z=!1;const M=()=>{t(9,h=!1)},$=()=>{t(9,h=!h)},T=X=>{t(9,h=!1),_.setUnread(r.map(de=>de.id),X)},D=X=>{t(9,h=!1),_.setStarred(r.map(de=>de.id),X)},N=()=>{t(9,h=!1),t(10,k=!0)},F=()=>{t(10,k=!1)},V=async(X,de)=>{t(10,k=!1),s&&_.updateLabel(s.id,X,de)},B=()=>{t(9,h=!1),t(11,S=!0)},J=()=>{t(11,S=!1)},se=()=>{t(11,S=!1),_.deleteLabel(c.params.labelid||0)},q=()=>{t(9,h=!1),t(12,z=!0)},Y=()=>{t(12,z=!1)},re=()=>{t(12,z=!1),_.emptyTrash()},oe=()=>T(!1),Z=()=>T(!0),Q=()=>D(!0),K=()=>D(!1);return l.$$set=X=>{"store"in X&&u(t(0,_=X.store)),"transparent"in X&&t(1,b=X.transparent),"dropup"in X&&t(2,p=X.dropup)},l.$$.update=()=>{l.$$.dirty[0]&256&&t(3,s=c.params.tray=="label"&&c.message==null?c.labels.find(X=>X.id==c.params.labelid):null),l.$$.dirty[0]&256&&t(27,r=Array.from(c.selectedMessages.values())),l.$$.dirty[0]&134217728&&t(7,n=r.some(X=>!X.unread)),l.$$.dirty[0]&134217728&&t(6,i=r.some(X=>X.unread)),l.$$.dirty[0]&134217728&&t(5,a=r.some(X=>X.starred)),l.$$.dirty[0]&134217728&&t(4,o=r.some(X=>!X.starred)),l.$$.dirty[0]&504&&t(13,f=c.params.tray=="trash"?!c.totalCount:!s&&!n&&!i&&!a&&!o)},[_,b,p,s,o,a,i,n,c,h,k,S,z,f,M,$,T,D,N,F,V,B,J,se,q,Y,re,r,oe,Z,Q,K]}class al extends le{constructor(e){super(),ne(this,e,pn,gn,te,{store:0,transparent:1,dropup:2},null,[-1,-1])}}function jt(l){let e,t;return{c(){e=v("div"),t=j(l[4]),d(e,"class","align-self-center text-nowrap")},m(s,r){w(s,e,r),g(e,t)},p(s,r){r&16&&R(t,s[4])},d(s){s&&y(e)}}}function It(l){let e,t;return{c(){e=v("div"),t=j(l[4]),d(e,"class","text-truncate align-self-center mx-2")},m(s,r){w(s,e,r),g(e,t)},p(s,r){r&16&&R(t,s[4])},d(s){s&&y(e)}}}function bn(l){let e,t,s,r,n,i,a,o,f,c,m,u,_,b,p,h,k,S=!l[2]&&jt(l),z=l[2]&&It(l);return{c(){e=v("div"),S&&S.c(),t=L(),s=v("div"),r=v("button"),n=v("i"),f=L(),z&&z.c(),c=L(),m=v("button"),u=v("i"),d(n,"class","fa fa-w fa-chevron-left"),d(n,"aria-label",i=l[3].strings.previouspage),d(r,"class","btn btn-secondary"),r.disabled=a=!l[5],d(r,"title",o=l[3].strings[l[3].message?"previousmessage":"previouspage"]),P(r,"btn-secondary",!l[1]),d(u,"class","fa fa-w fa-chevron-right"),d(u,"aria-label",_=l[3].strings.nextpage),d(m,"class","btn"),m.disabled=b=!l[6],d(m,"title",p=l[3].strings[l[3].message?"nextmessage":"nextpage"]),P(m,"btn-secondary",!l[1]),d(s,"class","btn-group d-flex flex-shrink-1"),d(s,"role","group"),P(s,"btn-group",!l[2]),d(e,"class","local-mail-paging-buttons d-flex svelte-nbwrye"),P(e,"ml-auto",!l[2])},m(M,$){w(M,e,$),S&&S.m(e,null),g(e,t),g(e,s),g(s,r),g(r,n),g(s,f),z&&z.m(s,null),g(s,c),g(s,m),g(m,u),h||(k=[O(r,"click",we(l[9])),O(m,"click",we(l[10]))],h=!0)},p(M,[$]){M[2]?S&&(S.d(1),S=null):S?S.p(M,$):(S=jt(M),S.c(),S.m(e,t)),$&8&&i!==(i=M[3].strings.previouspage)&&d(n,"aria-label",i),$&32&&a!==(a=!M[5])&&(r.disabled=a),$&8&&o!==(o=M[3].strings[M[3].message?"previousmessage":"previouspage"])&&d(r,"title",o),$&2&&P(r,"btn-secondary",!M[1]),M[2]?z?z.p(M,$):(z=It(M),z.c(),z.m(s,c)):z&&(z.d(1),z=null),$&8&&_!==(_=M[3].strings.nextpage)&&d(u,"aria-label",_),$&64&&b!==(b=!M[6])&&(m.disabled=b),$&8&&p!==(p=M[3].strings[M[3].message?"nextmessage":"nextpage"])&&d(m,"title",p),$&2&&P(m,"btn-secondary",!M[1]),$&4&&P(s,"btn-group",!M[2]),$&4&&P(e,"ml-auto",!M[2])},i:I,o:I,d(M){M&&y(e),S&&S.d(),z&&z.d(),h=!1,ge(k)}}}function hn(l,e,t){let s,r,n,i,a,o,f=I,c=()=>(f(),f=ae(m,h=>t(3,o=h)),m);l.$$.on_destroy.push(()=>f());let{store:m}=e;c();let{transparent:u=!1}=e,{compact:_=!1}=e;const b=()=>m.navigate(i),p=()=>m.navigate(n);return l.$$set=h=>{"store"in h&&c(t(0,m=h.store)),"transparent"in h&&t(1,u=h.transparent),"compact"in h&&t(2,_=h.compact)},l.$$.update=()=>{var h;l.$$.dirty&8&&t(8,s=o.nextMessageId||!o.params.search&&(o.params.offset||0)+o.preferences.perpage<o.totalCount),l.$$.dirty&8&&t(7,r=o.prevMessageId||!o.params.search&&(o.params.offset||0)>0),l.$$.dirty&264&&t(6,n=s?o.message?{...o.params,messageid:o.nextMessageId,offset:(o.params.offset||0)+1}:{...o.params,messageid:void 0,offset:(o.params.offset||0)+o.preferences.perpage,search:o.params.search?{...o.params.search,startid:(h=o.listMessages[o.listMessages.length-1])==null?void 0:h.id,reverse:!1}:void 0}:void 0),l.$$.dirty&136&&t(5,i=r?o.message?{...o.params,messageid:o.prevMessageId,offset:Math.max(0,(o.params.offset||0)-1)}:{...o.params,messageid:void 0,offset:Math.max(0,(o.params.offset||0)-o.preferences.perpage),search:o.params.search?{...o.params.search,startid:o.listMessages[0].id,reverse:!0}:void 0}:void 0),l.$$.dirty&8&&t(4,a=o.message?o.params.search?(o.params.offset||0)+1:$e(o.strings.pagingsingle,{index:(o.messageOffset||0)+1,total:o.totalCount}):o.listMessages.length==0?"":o.params.search?$e(o.strings.pagingsearch,{first:(o.params.offset||0)+1,last:(o.params.offset||0)+o.listMessages.length}):$e(o.strings.pagingmultiple,{first:(o.params.offset||0)+1,last:(o.params.offset||0)+o.listMessages.length,total:o.totalCount}))},[m,u,_,o,a,i,n,r,s,b,p]}class ol extends le{constructor(e){super(),ne(this,e,hn,bn,te,{store:0,transparent:1,compact:2})}}function Rt(l){let e,t;return e=new Pe({props:{title:l[3].strings.restore,cancelText:l[3].strings.cancel,confirmText:l[3].strings.restore,handleCancel:l[5],handleConfirm:l[6],$$slots:{default:[vn]},$$scope:{ctx:l}}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&8&&(n.title=s[3].strings.restore),r&8&&(n.cancelText=s[3].strings.cancel),r&8&&(n.confirmText=s[3].strings.restore),r&136&&(n.$$scope={dirty:r,ctx:s}),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function vn(l){let e=l[3].strings.messagerestoreconfirm+"",t;return{c(){t=j(e)},m(s,r){w(s,t,r)},p(s,r){r&8&&e!==(e=s[3].strings.messagerestoreconfirm+"")&&R(t,e)},d(s){s&&y(t)}}}function kn(l){let e,t,s,r,n,i,a,o,f,c=l[2]&&Rt(l);return{c(){e=v("button"),t=v("i"),n=L(),c&&c.c(),i=me(),d(t,"class","fa fa-fw fa-undo"),d(e,"type","button"),d(e,"class","local-mail-action-delete btn"),e.disabled=s=!l[3].selectedMessages.size,d(e,"title",r=l[3].strings.restore),P(e,"btn-secondary",!l[1]),P(e,"disabled",!l[3].selectedMessages.size)},m(m,u){w(m,e,u),g(e,t),w(m,n,u),c&&c.m(m,u),w(m,i,u),a=!0,o||(f=O(e,"click",l[4]),o=!0)},p(m,[u]){(!a||u&8&&s!==(s=!m[3].selectedMessages.size))&&(e.disabled=s),(!a||u&8&&r!==(r=m[3].strings.restore))&&d(e,"title",r),(!a||u&2)&&P(e,"btn-secondary",!m[1]),(!a||u&8)&&P(e,"disabled",!m[3].selectedMessages.size),m[2]?c?(c.p(m,u),u&4&&C(c,1)):(c=Rt(m),c.c(),C(c,1),c.m(i.parentNode,i)):c&&(x(),A(c,1,1,()=>{c=null}),ee())},i(m){a||(C(c),a=!0)},o(m){A(c),a=!1},d(m){m&&(y(e),y(n),y(i)),c&&c.d(m),o=!1,f()}}}function wn(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,u=>t(3,s=u)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{transparent:a=!1}=e,o=!1;const f=()=>{t(2,o=!0)},c=()=>{t(2,o=!1)},m=()=>{t(2,o=!1),i.setDeleted(Array.from(s.selectedMessages.keys()),Te.NotDeleted,!0)};return l.$$set=u=>{"store"in u&&n(t(0,i=u.store)),"transparent"in u&&t(1,a=u.transparent)},[i,a,o,s,f,c,m]}class fl extends le{constructor(e){super(),ne(this,e,wn,kn,te,{store:0,transparent:1})}}function yn(l){let e,t,s,r;return e=new il({props:{store:l[0],transparent:!0,dropup:!0}}),s=new ll({props:{store:l[0],transparent:!0}}),{c(){U(e.$$.fragment),t=L(),U(s.$$.fragment)},m(n,i){G(e,n,i),w(n,t,i),G(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(C(e.$$.fragment,n),C(s.$$.fragment,n),r=!0)},o(n){A(e.$$.fragment,n),A(s.$$.fragment,n),r=!1},d(n){n&&y(t),H(e,n),H(s,n)}}}function Mn(l){let e,t,s,r;return e=new fl({props:{store:l[0],transparent:!0}}),s=new nl({props:{store:l[0],transparent:!0}}),{c(){U(e.$$.fragment),t=L(),U(s.$$.fragment)},m(n,i){G(e,n,i),w(n,t,i),G(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(C(e.$$.fragment,n),C(s.$$.fragment,n),r=!0)},o(n){A(e.$$.fragment,n),A(s.$$.fragment,n),r=!1},d(n){n&&y(t),H(e,n),H(s,n)}}}function $n(l){let e,t,s,r,n,i,a,o,f,c,m;const u=[Mn,yn],_=[];function b(p,h){return p[4].params.tray=="trash"?0:1}return r=b(l),n=_[r]=u[r](l),a=new al({props:{store:l[0],transparent:!0,dropup:!0}}),f=new ol({props:{store:l[0],transparent:!0,compact:!0}}),{c(){e=v("div"),t=v("div"),s=v("div"),n.c(),i=L(),U(a.$$.fragment),o=L(),U(f.$$.fragment),d(s,"class","w-100 d-flex justify-content-around"),d(s,"role","group"),d(t,"role","toolbar"),d(t,"class","local-mail-toolbar d-flex w-100 py-3 border-top"),Le(()=>l[5].call(t)),P(t,"position-fixed",l[3]),P(t,"position-absolute",!l[3]),P(t,"fixed-bottom",l[3]),P(t,"border-bottom",!l[3]),P(t,"bg-white",!l[3]),P(t,"bg-light",l[3]),d(e,"class","row position-relative"),ie(e,"height",l[1]+"px")},m(p,h){w(p,e,h),g(e,t),g(t,s),_[r].m(s,null),g(s,i),G(a,s,null),g(s,o),G(f,s,null),c=zl(t,l[5].bind(t)),l[6](e),m=!0},p(p,[h]){let k=r;r=b(p),r===k?_[r].p(p,h):(x(),A(_[k],1,1,()=>{_[k]=null}),ee(),n=_[r],n?n.p(p,h):(n=_[r]=u[r](p),n.c()),C(n,1),n.m(s,i));const S={};h&1&&(S.store=p[0]),a.$set(S);const z={};h&1&&(z.store=p[0]),f.$set(z),(!m||h&8)&&P(t,"position-fixed",p[3]),(!m||h&8)&&P(t,"position-absolute",!p[3]),(!m||h&8)&&P(t,"fixed-bottom",p[3]),(!m||h&8)&&P(t,"border-bottom",!p[3]),(!m||h&8)&&P(t,"bg-white",!p[3]),(!m||h&8)&&P(t,"bg-light",p[3]),(!m||h&2)&&ie(e,"height",p[1]+"px")},i(p){m||(C(n),C(a.$$.fragment,p),C(f.$$.fragment,p),m=!0)},o(p){A(n),A(a.$$.fragment,p),A(f.$$.fragment,p),m=!1},d(p){p&&y(e),_[r].d(),H(a),H(f),c(),l[6](null)}}}function Cn(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,u=>t(4,s=u)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let a,o,f=!1;Xe(()=>{const u=new IntersectionObserver(_=>{for(const b of _)t(3,f=b.intersectionRatio<1&&b.boundingClientRect.top>=b.boundingClientRect.height)},{threshold:1});return u.observe(o),()=>u.disconnect()});function c(){a=this.offsetHeight,t(1,a)}function m(u){pe[u?"unshift":"push"](()=>{o=u,t(2,o)})}return l.$$set=u=>{"store"in u&&n(t(0,i=u.store))},[i,a,o,f,s,c,m]}class Sn extends le{constructor(e){super(),ne(this,e,Cn,$n,te,{store:0})}}function ul(l,{from:e,to:t},s={}){const r=getComputedStyle(l),n=r.transform==="none"?"":r.transform,[i,a]=r.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*i/t.width-(t.left+i),f=e.top+e.height*a/t.height-(t.top+a),{delay:c=0,duration:m=_=>Math.sqrt(_)*120,easing:u=sl}=s;return{delay:c,duration:he(m)?m(Math.sqrt(o*o+f*f)):m,easing:u,css:(_,b)=>{const p=b*o,h=b*f,k=_+b*e.width/t.width,S=_+b*e.height/t.height;return`transform: ${n} translate(${p}px, ${h}px) scale(${k}, ${S});`}}}function Tn(l){let e,t,s,r,n,i,a;return{c(){e=v("button"),t=v("i"),d(t,"class",s="fa align-middle "+l[3]),d(e,"class","btn px-2"),d(e,"role","checkbox"),d(e,"aria-checked",r=!!l[2].selectedMessages.has(l[1].id)),d(e,"title",n=l[2].strings.select)},m(o,f){w(o,e,f),g(e,t),i||(a=O(e,"click",Ys(we(l[4]))),i=!0)},p(o,[f]){f&8&&s!==(s="fa align-middle "+o[3])&&d(t,"class",s),f&6&&r!==(r=!!o[2].selectedMessages.has(o[1].id))&&d(e,"aria-checked",r),f&4&&n!==(n=o[2].strings.select)&&d(e,"title",n)},i:I,o:I,d(o){o&&y(e),i=!1,a()}}}function Ln(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,c=>t(2,r=c)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;const f=()=>a.toggleSelected(o.id);return l.$$set=c=>{"store"in c&&i(t(0,a=c.store)),"message"in c&&t(1,o=c.message)},l.$$.update=()=>{l.$$.dirty&6&&t(3,s=r.selectedMessages.has(o.id)?"fa-check-square-o":"fa-square-o")},[a,o,r,s,f]}class cl extends le{constructor(e){super(),ne(this,e,Ln,Tn,te,{store:0,message:1})}}function zn(l){let e,t,s,r,n,i,a,o;return{c(){e=v("button"),t=v("i"),d(t,"class",s="fa "+l[2]),d(e,"class","btn px-2"),d(e,"role","checkbox"),d(e,"aria-checked",r=l[1].starred),e.disabled=n=l[1].deleted,d(e,"title",i=l[1].deleted?l[3].strings[l[1].starred?"starred":"unstarred"]:l[3].strings[l[1].starred?"markasunstarred":"markasstarred"])},m(f,c){w(f,e,c),g(e,t),a||(o=O(e,"click",Ys(we(l[4]))),a=!0)},p(f,[c]){c&4&&s!==(s="fa "+f[2])&&d(t,"class",s),c&2&&r!==(r=f[1].starred)&&d(e,"aria-checked",r),c&2&&n!==(n=f[1].deleted)&&(e.disabled=n),c&10&&i!==(i=f[1].deleted?f[3].strings[f[1].starred?"starred":"unstarred"]:f[3].strings[f[1].starred?"markasunstarred":"markasstarred"])&&d(e,"title",i)},i:I,o:I,d(f){f&&y(e),a=!1,o()}}}function Dn(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,c=>t(3,r=c)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;const f=()=>a.setStarred([o.id],!o.starred);return l.$$set=c=>{"store"in c&&i(t(0,a=c.store)),"message"in c&&t(1,o=c.message)},l.$$.update=()=>{l.$$.dirty&2&&t(2,s=o.starred?"fa-star text-warning":"fa-star-o")},[a,o,s,r,f]}class ml extends le{constructor(e){super(),ne(this,e,Dn,zn,te,{store:0,message:1})}}function An(l){let e,t=l[1].join(", ")+"",s,r,n,i;return{c(){e=v("div"),s=j(t)},m(a,o){w(a,e,o),g(e,s),n||(i=ke(r=Ge.call(null,e,l[1].join(`
`))),n=!0)},p(a,[o]){o&2&&t!==(t=a[1].join(", ")+"")&&R(s,t),r&&he(r.update)&&o&2&&r.update.call(null,a[1].join(`
`))},i:I,o:I,d(a){a&&y(e),n=!1,i()}}}function Nn(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,f=>t(3,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;return l.$$set=f=>{"store"in f&&i(t(0,a=f.store)),"message"in f&&t(2,o=f.message)},l.$$.update=()=>{l.$$.dirty&12&&t(1,s=r.params.tray=="sent"||r.params.tray=="drafts"?o.recipients.length>0?o.recipients.map(f=>f.fullname):[r.strings.norecipient]:[o.sender.fullname])},[a,s,o,r]}class st extends le{constructor(e){super(),ne(this,e,Nn,An,te,{store:0,message:2})}}function qt(l){let e,t=l[2].strings.draft+"",s;return{c(){e=v("span"),s=j(t),d(e,"class","mr-2 text-danger")},m(r,n){w(r,e,n),g(e,s)},p(r,n){n&4&&t!==(t=r[2].strings.draft+"")&&R(s,t)},d(r){r&&y(e)}}}function Bn(l){let e,t,s=(l[1].subject||l[2].strings.nosubject)+"",r,n,i,a,o=l[1].draft&&qt(l);return{c(){e=v("div"),o&&o.c(),t=L(),r=j(s)},m(f,c){w(f,e,c),o&&o.m(e,null),g(e,t),g(e,r),i||(a=ke(n=Ge.call(null,e,l[1].subject||l[2].strings.nosubject)),i=!0)},p(f,[c]){f[1].draft?o?o.p(f,c):(o=qt(f),o.c(),o.m(e,t)):o&&(o.d(1),o=null),c&6&&s!==(s=(f[1].subject||f[2].strings.nosubject)+"")&&R(r,s),n&&he(n.update)&&c&6&&n.update.call(null,f[1].subject||f[2].strings.nosubject)},i:I,o:I,d(f){f&&y(e),o&&o.d(),i=!1,a()}}}function jn(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class lt extends le{constructor(e){super(),ne(this,e,jn,Bn,te,{store:0,message:1})}}function Et(l){let e,t,s,r,n;return{c(){e=v("span"),t=j(l[2]),d(e,"class","local-mail-course-badge badge px-2 mr-2 mb-2 svelte-zl9zhm"),ie(e,"min-width","3rem"),ie(e,"max-width","calc("+l[1]+"ch + 1.5rem)")},m(i,a){w(i,e,a),g(e,t),r||(n=ke(s=Ge.call(null,e,l[2])),r=!0)},p(i,a){a&4&&R(t,i[2]),a&2&&ie(e,"max-width","calc("+i[1]+"ch + 1.5rem)"),s&&he(s.update)&&a&4&&s.update.call(null,i[2])},d(i){i&&y(e),r=!1,n()}}}function In(l){let e=["shortname","fullname"].includes(l[0].coursebadges),t,s=e&&Et(l);return{c(){s&&s.c(),t=me()},m(r,n){s&&s.m(r,n),w(r,t,n)},p(r,[n]){n&1&&(e=["shortname","fullname"].includes(r[0].coursebadges)),e?s?s.p(r,n):(s=Et(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},i:I,o:I,d(r){r&&y(t),s&&s.d(r)}}}function Rn(l,e,t){let s,r,{course:n}=e,{settings:i}=e;return l.$$set=a=>{"course"in a&&t(3,n=a.course),"settings"in a&&t(0,i=a.settings)},l.$$.update=()=>{l.$$.dirty&9&&t(2,s=i.coursebadges=="shortname"?n.shortname:n.fullname),l.$$.dirty&1&&t(1,r=i.coursebadgeslength||20)},[i,r,s,n]}class nt extends le{constructor(e){super(),ne(this,e,Rn,In,te,{course:3,settings:0})}}function qn(l){let e,t=l[0].name+"",s,r;return{c(){e=v("span"),s=j(t),d(e,"class","local-mail-label-badge badge flex-shrink-0 px-2 mr-2 mb-2 svelte-1xmrn49"),d(e,"style",r=`color: var(--local-mail-color-${l[1]}-fg, var(--local-mail-color-gray-fg));background-color: var(--local-mail-color-${l[1]}-bg, var(--local-mail-color-gray-bg))`)},m(n,i){w(n,e,i),g(e,s)},p(n,[i]){i&1&&t!==(t=n[0].name+"")&&R(s,t),i&2&&r!==(r=`color: var(--local-mail-color-${n[1]}-fg, var(--local-mail-color-gray-fg));background-color: var(--local-mail-color-${n[1]}-bg, var(--local-mail-color-gray-bg))`)&&d(e,"style",r)},i:I,o:I,d(n){n&&y(e)}}}function En(l,e,t){let s,{label:r}=e;return l.$$set=n=>{"label"in n&&t(0,r=n.label)},l.$$.update=()=>{l.$$.dirty&1&&t(1,s=Ve.includes(r.color)?r.color:"gray")},[r,s]}class dl extends le{constructor(e){super(),ne(this,e,En,qn,te,{label:0})}}function Pt(l,e,t){const s=l.slice();return s[3]=e[t],s}function Ft(l){let e,t,s=l[2].params.courseid!=l[1].course.id&&Ut(l);return{c(){s&&s.c(),e=me()},m(r,n){s&&s.m(r,n),w(r,e,n),t=!0},p(r,n){r[2].params.courseid!=r[1].course.id?s?(s.p(r,n),n&6&&C(s,1)):(s=Ut(r),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(x(),A(s,1,1,()=>{s=null}),ee())},i(r){t||(C(s),t=!0)},o(r){A(s),t=!1},d(r){r&&y(e),s&&s.d(r)}}}function Ut(l){let e,t;return e=new nt({props:{course:l[1].course,settings:l[2].settings}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.course=s[1].course),r&4&&(n.settings=s[2].settings),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Gt(l){let e,t;return e=new dl({props:{label:l[3]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.label=s[3]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Ht(l,e){let t,s,r,n=(e[2].params.tray!="label"||e[2].params.labelid!=e[3].id)&&Gt(e);return{key:l,first:null,c(){t=me(),n&&n.c(),s=me(),this.first=t},m(i,a){w(i,t,a),n&&n.m(i,a),w(i,s,a),r=!0},p(i,a){e=i,e[2].params.tray!="label"||e[2].params.labelid!=e[3].id?n?(n.p(e,a),a&6&&C(n,1)):(n=Gt(e),n.c(),C(n,1),n.m(s.parentNode,s)):n&&(x(),A(n,1,1,()=>{n=null}),ee())},i(i){r||(C(n),r=!0)},o(i){A(n),r=!1},d(i){i&&(y(t),y(s)),n&&n.d(i)}}}function Ot(l){let e,t,s=l[2].params.courseid!=l[1].course.id&&Kt(l);return{c(){s&&s.c(),e=me()},m(r,n){s&&s.m(r,n),w(r,e,n),t=!0},p(r,n){r[2].params.courseid!=r[1].course.id?s?(s.p(r,n),n&6&&C(s,1)):(s=Kt(r),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(x(),A(s,1,1,()=>{s=null}),ee())},i(r){t||(C(s),t=!0)},o(r){A(s),t=!1},d(r){r&&y(e),s&&s.d(r)}}}function Kt(l){let e,t;return e=new nt({props:{course:l[1].course,settings:l[2].settings}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.course=s[1].course),r&4&&(n.settings=s[2].settings),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Pn(l){let e,t=[],s=new Map,r,n,i,a=l[2].viewSize<fe.MD&&Ft(l),o=ue(l[1].labels);const f=m=>m[3].id;for(let m=0;m<o.length;m+=1){let u=Pt(l,o,m),_=f(u);s.set(_,t[m]=Ht(_,u))}let c=l[2].viewSize>=fe.MD&&Ot(l);return{c(){a&&a.c(),e=L();for(let m=0;m<t.length;m+=1)t[m].c();r=L(),c&&c.c(),n=me()},m(m,u){a&&a.m(m,u),w(m,e,u);for(let _=0;_<t.length;_+=1)t[_]&&t[_].m(m,u);w(m,r,u),c&&c.m(m,u),w(m,n,u),i=!0},p(m,[u]){m[2].viewSize<fe.MD?a?(a.p(m,u),u&4&&C(a,1)):(a=Ft(m),a.c(),C(a,1),a.m(e.parentNode,e)):a&&(x(),A(a,1,1,()=>{a=null}),ee()),u&6&&(o=ue(m[1].labels),x(),t=ye(t,u,f,1,m,o,s,r.parentNode,xe,Ht,r,Pt),ee()),m[2].viewSize>=fe.MD?c?(c.p(m,u),u&4&&C(c,1)):(c=Ot(m),c.c(),C(c,1),c.m(n.parentNode,n)):c&&(x(),A(c,1,1,()=>{c=null}),ee())},i(m){if(!i){C(a);for(let u=0;u<o.length;u+=1)C(t[u]);C(c),i=!0}},o(m){A(a);for(let u=0;u<t.length;u+=1)A(t[u]);A(c),i=!1},d(m){m&&(y(e),y(r),y(n)),a&&a.d(m);for(let u=0;u<t.length;u+=1)t[u].d(m);c&&c.d(m)}}}function Fn(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class _l extends le{constructor(e){super(),ne(this,e,Fn,Pn,te,{store:0,message:1})}}function Vt(l){let e,t,s,r,n;return{c(){e=v("span"),t=v("i"),d(t,"class",s="fa fa-fw "+(l[1].numattachments>0?"fa-paperclip":"")),d(t,"aria-hidden",!0),d(e,"class","-shrink-0 mr-2"),d(e,"title",r=l[1].numattachments>0?$e(l[2].strings.attachnumber,l[1].numattachments):""),d(e,"aria-hidden",n=l[1].numattachments==0)},m(i,a){w(i,e,a),g(e,t)},p(i,a){a&2&&s!==(s="fa fa-fw "+(i[1].numattachments>0?"fa-paperclip":""))&&d(t,"class",s),a&6&&r!==(r=i[1].numattachments>0?$e(i[2].strings.attachnumber,i[1].numattachments):"")&&d(e,"title",r),a&2&&n!==(n=i[1].numattachments==0)&&d(e,"aria-hidden",n)},d(i){i&&y(e)}}}function Un(l){let e,t=(l[1].numattachments>0||l[2].viewSize>=fe.MD)&&Vt(l);return{c(){t&&t.c(),e=me()},m(s,r){t&&t.m(s,r),w(s,e,r)},p(s,[r]){s[1].numattachments>0||s[2].viewSize>=fe.MD?t?t.p(s,r):(t=Vt(s),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:I,o:I,d(s){s&&y(e),t&&t.d(s)}}}function Gn(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class gl extends le{constructor(e){super(),ne(this,e,Gn,Un,te,{store:0,message:1})}}function Hn(l){let e,t=l[0].shorttime+"",s,r;return{c(){e=v("span"),s=j(t),d(e,"class","local-mail-list-message-time d-shrink-0 text-nowrap text-right svelte-phmq8k"),d(e,"title",r=l[0].fulltime),P(e,"local-mail-list-message-time-md",l[2].viewSize>=fe.MD)},m(n,i){w(n,e,i),g(e,s)},p(n,[i]){i&1&&t!==(t=n[0].shorttime+"")&&R(s,t),i&1&&r!==(r=n[0].fulltime)&&d(e,"title",r),i&4&&P(e,"local-mail-list-message-time-md",n[2].viewSize>=fe.MD)},i:I,o:I,d(n){n&&y(e)}}}function On(l,e,t){let s,r=I,n=()=>(r(),r=ae(a,o=>t(2,s=o)),a);l.$$.on_destroy.push(()=>r());let{message:i}=e,{store:a}=e;return n(),l.$$set=o=>{"message"in o&&t(0,i=o.message),"store"in o&&n(t(1,a=o.store))},[i,a,s]}class pl extends le{constructor(e){super(),ne(this,e,On,Hn,te,{message:0,store:1})}}function Wt(l){let e,t,s=l[1].strings.nomessagesfound+"",r,n,i,a=l[1].totalCount>0&&Xt(l);return{c(){e=v("div"),t=v("div"),r=j(s),n=L(),a&&a.c(),d(e,"class","alert alert-info")},m(o,f){w(o,e,f),g(e,t),g(t,r),g(e,n),a&&a.m(e,null)},p(o,f){f&2&&s!==(s=o[1].strings.nomessagesfound+"")&&R(r,s),o[1].totalCount>0?a?a.p(o,f):(a=Xt(o),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(o){o&&(i||Le(()=>{i=et(e,Ue,{delay:400}),i.start()}))},o:I,d(o){o&&y(e),a&&a.d()}}}function Xt(l){let e,t=l[1].strings.showrecentmessages+"",s,r,n,i;return{c(){e=v("a"),s=j(t),d(e,"class","btn btn-info text-white mt-3"),d(e,"href",r=Ce(l[2]))},m(a,o){w(a,e,o),g(e,s),n||(i=O(e,"click",we(l[3])),n=!0)},p(a,o){o&2&&t!==(t=a[1].strings.showrecentmessages+"")&&R(s,t),o&4&&r!==(r=Ce(a[2]))&&d(e,"href",r)},d(a){a&&y(e),n=!1,i()}}}function Kn(l){let e,t=!l[1].listMessages.length&&Wt(l);return{c(){t&&t.c(),e=me()},m(s,r){t&&t.m(s,r),w(s,e,r)},p(s,[r]){s[1].listMessages.length?t&&(t.d(1),t=null):t?(t.p(s,r),r&2&&C(t,1)):(t=Wt(s),t.c(),C(t,1),t.m(e.parentNode,e))},i(s){C(t)},o:I,d(s){s&&y(e),t&&t.d(s)}}}function Vn(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,f=>t(1,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();const o=()=>a.navigate(s);return l.$$set=f=>{"store"in f&&i(t(0,a=f.store))},l.$$.update=()=>{l.$$.dirty&2&&t(2,s={tray:r.params.tray,courseid:r.params.courseid,labelid:r.params.labelid})},[a,r,s,o]}class Wn extends le{constructor(e){super(),ne(this,e,Vn,Kn,te,{store:0})}}function Yt(l,e,t){const s=l.slice();return s[4]=e[t],s[6]=t,s}function Xn(l){let e,t,s,r,n,i,a,o,f,c,m,u,_,b,p,h,k,S,z,M,$;return t=new cl({props:{store:l[0],message:l[4]}}),i=new st({props:{store:l[0],message:l[4]}}),o=new gl({props:{store:l[0],message:l[4]}}),m=new pl({props:{store:l[0],message:l[4]}}),p=new lt({props:{store:l[0],message:l[4]}}),k=new ml({props:{store:l[0],message:l[4]}}),M=new _l({props:{store:l[0],message:l[4]}}),{c(){e=v("div"),U(t.$$.fragment),s=L(),r=v("div"),n=v("div"),U(i.$$.fragment),a=L(),U(o.$$.fragment),f=L(),c=v("div"),U(m.$$.fragment),u=L(),_=v("div"),b=v("div"),U(p.$$.fragment),h=L(),U(k.$$.fragment),S=L(),z=v("div"),U(M.$$.fragment),d(c,"class","ml-auto mr-2"),d(n,"class","d-flex mt-2"),d(b,"class","d-flex w-100 d-shrink-1 my-2 mr-2"),ie(b,"min-width","0"),d(_,"class","d-flex"),d(z,"class","d-flex flex-wrap ml-n2 mr-2"),d(r,"class","flex-shrink-1 w-100 ml-1"),ie(r,"min-width","0"),d(e,"class","d-flex align-items-start pt-1 pb-2 pl-1 pr-2")},m(T,D){w(T,e,D),G(t,e,null),g(e,s),g(e,r),g(r,n),G(i,n,null),g(n,a),G(o,n,null),g(n,f),g(n,c),G(m,c,null),g(r,u),g(r,_),g(_,b),G(p,b,null),g(_,h),G(k,_,null),g(r,S),g(r,z),G(M,z,null),$=!0},p(T,D){const N={};D&1&&(N.store=T[0]),D&2&&(N.message=T[4]),t.$set(N);const F={};D&1&&(F.store=T[0]),D&2&&(F.message=T[4]),i.$set(F);const V={};D&1&&(V.store=T[0]),D&2&&(V.message=T[4]),o.$set(V);const B={};D&1&&(B.store=T[0]),D&2&&(B.message=T[4]),m.$set(B);const J={};D&1&&(J.store=T[0]),D&2&&(J.message=T[4]),p.$set(J);const se={};D&1&&(se.store=T[0]),D&2&&(se.message=T[4]),k.$set(se);const q={};D&1&&(q.store=T[0]),D&2&&(q.message=T[4]),M.$set(q)},i(T){$||(C(t.$$.fragment,T),C(i.$$.fragment,T),C(o.$$.fragment,T),C(m.$$.fragment,T),C(p.$$.fragment,T),C(k.$$.fragment,T),C(M.$$.fragment,T),$=!0)},o(T){A(t.$$.fragment,T),A(i.$$.fragment,T),A(o.$$.fragment,T),A(m.$$.fragment,T),A(p.$$.fragment,T),A(k.$$.fragment,T),A(M.$$.fragment,T),$=!1},d(T){T&&y(e),H(t),H(i),H(o),H(m),H(p),H(k),H(M)}}}function Yn(l){let e,t,s,r,n,i,a,o,f,c,m,u,_,b,p,h,k,S,z;return t=new cl({props:{store:l[0],message:l[4]}}),r=new ml({props:{store:l[0],message:l[4]}}),o=new st({props:{store:l[0],message:l[4]}}),m=new lt({props:{store:l[0],message:l[4]}}),b=new _l({props:{store:l[0],message:l[4]}}),h=new gl({props:{store:l[0],message:l[4]}}),S=new pl({props:{store:l[0],message:l[4]}}),{c(){e=v("div"),U(t.$$.fragment),s=L(),U(r.$$.fragment),n=L(),i=v("div"),a=v("div"),U(o.$$.fragment),f=L(),c=v("div"),U(m.$$.fragment),u=L(),_=v("div"),U(b.$$.fragment),p=L(),U(h.$$.fragment),k=L(),U(S.$$.fragment),d(a,"class","flex-grow-1 mx-2"),ie(a,"width","25%"),ie(a,"min-width","0"),d(_,"class","d-flex text-truncate flex-shrink-0 justify-content-end mb-n2 ml-auto"),ie(_,"max-width","80%"),d(c,"class","flex-grow-1 d-flex my-2 mx-2"),ie(c,"width","75%"),ie(c,"min-width","0"),d(i,"class","d-flex w-100 flex-grow-1 align-items-center"),ie(i,"min-width","0"),d(e,"class","d-flex align-items-center pl-1 pr-3")},m(M,$){w(M,e,$),G(t,e,null),g(e,s),G(r,e,null),g(e,n),g(e,i),g(i,a),G(o,a,null),g(i,f),g(i,c),G(m,c,null),g(c,u),g(c,_),G(b,_,null),g(e,p),G(h,e,null),g(e,k),G(S,e,null),z=!0},p(M,$){const T={};$&1&&(T.store=M[0]),$&2&&(T.message=M[4]),t.$set(T);const D={};$&1&&(D.store=M[0]),$&2&&(D.message=M[4]),r.$set(D);const N={};$&1&&(N.store=M[0]),$&2&&(N.message=M[4]),o.$set(N);const F={};$&1&&(F.store=M[0]),$&2&&(F.message=M[4]),m.$set(F);const V={};$&1&&(V.store=M[0]),$&2&&(V.message=M[4]),b.$set(V);const B={};$&1&&(B.store=M[0]),$&2&&(B.message=M[4]),h.$set(B);const J={};$&1&&(J.store=M[0]),$&2&&(J.message=M[4]),S.$set(J)},i(M){z||(C(t.$$.fragment,M),C(r.$$.fragment,M),C(o.$$.fragment,M),C(m.$$.fragment,M),C(b.$$.fragment,M),C(h.$$.fragment,M),C(S.$$.fragment,M),z=!0)},o(M){A(t.$$.fragment,M),A(r.$$.fragment,M),A(o.$$.fragment,M),A(m.$$.fragment,M),A(b.$$.fragment,M),A(h.$$.fragment,M),A(S.$$.fragment,M),z=!1},d(M){M&&y(e),H(t),H(r),H(o),H(m),H(b),H(h),H(S)}}}function Jt(l,e){let t,s,r,n,i,a,o,f=I,c,m,u;const _=[Yn,Xn],b=[];function p(h,k){return h[1].viewSize>=fe.MD?0:1}return s=p(e),r=b[s]=_[s](e),{key:l,first:null,c(){t=v("a"),r.c(),d(t,"class","local-mail-list-message list-group-item list-group-item-action p-0 svelte-unh3d4"),d(t,"href",n=e[4].draft?Ke(e[4].id):Ce(e[2](e[4],e[6]))),P(t,"list-group-item-primary",e[1].selectedMessages.has(e[4].id)),P(t,"list-group-item-secondary",!e[4].unread&&!e[1].selectedMessages.has(e[4].id)),P(t,"font-weight-bold",e[4].unread),this.first=t},m(h,k){w(h,t,k),b[s].m(t,null),c=!0,m||(u=O(t,"click",function(){he(e[3](e[4],e[6]))&&e[3](e[4],e[6]).apply(this,arguments)}),m=!0)},p(h,k){e=h;let S=s;s=p(e),s===S?b[s].p(e,k):(x(),A(b[S],1,1,()=>{b[S]=null}),ee(),r=b[s],r?r.p(e,k):(r=b[s]=_[s](e),r.c()),C(r,1),r.m(t,null)),(!c||k&2&&n!==(n=e[4].draft?Ke(e[4].id):Ce(e[2](e[4],e[6]))))&&d(t,"href",n),(!c||k&2)&&P(t,"list-group-item-primary",e[1].selectedMessages.has(e[4].id)),(!c||k&2)&&P(t,"list-group-item-secondary",!e[4].unread&&!e[1].selectedMessages.has(e[4].id)),(!c||k&2)&&P(t,"font-weight-bold",e[4].unread)},r(){o=t.getBoundingClientRect()},f(){el(t),f(),tt(t,o)},a(){f(),f=xs(t,o,ul,{delay:400,duration:400})},i(h){c||(C(r),h&&Le(()=>{c&&(a&&a.end(1),i=et(t,Ue,{delay:400}),i.start())}),c=!0)},o(h){A(r),i&&i.invalidate(),h&&(a=Qs(t,Ue,{duration:400})),c=!1},d(h){h&&y(t),b[s].d(),h&&a&&a.end(),m=!1,u()}}}function Qt(l){let e,t=[],s=new Map,r,n,i,a=ue(l[1].listMessages);const o=f=>f[4].id;for(let f=0;f<a.length;f+=1){let c=Yt(l,a,f),m=o(c);s.set(m,t[f]=Jt(m,c))}return n=new Wn({props:{store:l[0]}}),{c(){e=v("div");for(let f=0;f<t.length;f+=1)t[f].c();r=L(),U(n.$$.fragment),d(e,"class","list-group")},m(f,c){w(f,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(e,null);g(e,r),G(n,e,null),i=!0},p(f,c){if(c&15){a=ue(f[1].listMessages),x();for(let u=0;u<t.length;u+=1)t[u].r();t=ye(t,c,o,1,f,a,s,e,Js,Jt,r,Yt);for(let u=0;u<t.length;u+=1)t[u].a();ee()}const m={};c&1&&(m.store=f[0]),n.$set(m)},i(f){if(!i){for(let c=0;c<a.length;c+=1)C(t[c]);C(n.$$.fragment,f),i=!0}},o(f){for(let c=0;c<t.length;c+=1)A(t[c]);A(n.$$.fragment,f),i=!1},d(f){f&&y(e);for(let c=0;c<t.length;c+=1)t[c].d();H(n)}}}function Jn(l){let e=l[1].navigationId,t,s,r=Qt(l);return{c(){r.c(),t=me()},m(n,i){r.m(n,i),w(n,t,i),s=!0},p(n,[i]){i&2&&te(e,e=n[1].navigationId)?(x(),A(r,1,1,I),ee(),r=Qt(n),r.c(),C(r,1),r.m(t.parentNode,t)):r.p(n,i)},i(n){s||(C(r),s=!0)},o(n){A(r),s=!1},d(n){n&&y(t),r.d(n)}}}function Qn(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,f=>t(1,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=(f,c)=>({...s.params,messageid:f.id,offset:(s.params.offset||0)+c}),o=(f,c)=>m=>{f.draft||(m.preventDefault(),i.navigate(a(f,c)))};return l.$$set=f=>{"store"in f&&n(t(0,i=f.store))},[i,s,a,o]}class Zn extends le{constructor(e){super(),ne(this,e,Qn,Jn,te,{store:0})}}function Zt(l){let e,t,s,r,n,i,a,o=l[3]&&xt(l);return{c(){e=v("div"),t=v("button"),s=v("i"),n=L(),o&&o.c(),d(s,"class","fa fa-fw fa-ellipsis-v align-middle"),d(t,"type","button"),d(t,"class","btn"),d(t,"aria-expanded",l[3]),d(t,"title",r=l[5].strings.moreactions),d(e,"class","dropdown")},m(f,c){w(f,e,c),g(e,t),g(t,s),g(e,n),o&&o.m(e,null),i||(a=[O(t,"click",l[6]),ke(ze.call(null,e,l[7]))],i=!0)},p(f,c){c&8&&d(t,"aria-expanded",f[3]),c&32&&r!==(r=f[5].strings.moreactions)&&d(t,"title",r),f[3]?o?o.p(f,c):(o=xt(f),o.c(),o.m(e,null)):o&&(o.d(1),o=null)},d(f){f&&y(e),o&&o.d(),i=!1,ge(a)}}}function xt(l){let e,t,s,r,n=l[5].strings.reply+"",i,a,o,f,c,m,u=l[5].strings.replyall+"",_,b,p,h,k,S,z=l[5].strings.forward+"",M,$;return{c(){e=v("div"),t=v("a"),s=v("i"),r=L(),i=j(n),o=L(),f=v("a"),c=v("i"),m=L(),_=j(u),p=L(),h=v("a"),k=v("i"),S=L(),M=j(z),d(s,"class","fa fa-fw fa-reply"),d(s,"aria-hidden","true"),d(t,"type","button"),d(t,"class","dropdown-item"),d(t,"href",a=Ie(l[1].id)+"}"),d(c,"class","fa fa-fw fa-reply-all"),d(c,"aria-hidden","true"),d(f,"type","button"),d(f,"class","dropdown-item"),d(f,"href",b=Re(l[1].id)+"}"),P(f,"disabled",!l[2]),d(k,"class","fa fa-fw fa-share"),d(k,"aria-hidden","true"),d(h,"type","button"),d(h,"class","dropdown-item"),d(h,"href",$=qe(l[1].id)+"}"),d(e,"class","dropdown-menu dropdown-menu-right show")},m(T,D){w(T,e,D),g(e,t),g(t,s),g(t,r),g(t,i),g(e,o),g(e,f),g(f,c),g(f,m),g(f,_),g(e,p),g(e,h),g(h,k),g(h,S),g(h,M)},p(T,D){D&32&&n!==(n=T[5].strings.reply+"")&&R(i,n),D&2&&a!==(a=Ie(T[1].id)+"}")&&d(t,"href",a),D&32&&u!==(u=T[5].strings.replyall+"")&&R(_,u),D&2&&b!==(b=Re(T[1].id)+"}")&&d(f,"href",b),D&4&&P(f,"disabled",!T[2]),D&32&&z!==(z=T[5].strings.forward+"")&&R(M,z),D&2&&$!==($=qe(T[1].id)+"}")&&d(h,"href",$)},d(T){T&&y(e)}}}function es(l){let e,t,s,r,n,i,a,o,f,c,m,u,_,b;return{c(){e=v("a"),t=v("i"),n=L(),i=v("a"),a=v("i"),c=L(),m=v("a"),u=v("i"),d(t,"class","fa fa-fw fa-reply"),d(t,"aria-hidden","true"),d(e,"href",s=Ie(l[1].id)),d(e,"title",r=l[5].strings.reply),d(e,"class","btn py-2 border-0"),d(a,"class","fa fa-fw fa-reply-all"),d(a,"aria-hidden","true"),d(i,"href",o=Re(l[1].id)),d(i,"title",f=l[5].strings.replyall),d(i,"class","btn py-2 border-0"),P(i,"disabled",!l[2]),d(u,"class","fa fa-fw fa-share"),d(u,"aria-hidden","true"),d(m,"href",_=qe(l[1].id)),d(m,"title",b=l[5].strings.forward),d(m,"class","btn py-2 border-0")},m(p,h){w(p,e,h),g(e,t),w(p,n,h),w(p,i,h),g(i,a),w(p,c,h),w(p,m,h),g(m,u)},p(p,h){h&2&&s!==(s=Ie(p[1].id))&&d(e,"href",s),h&32&&r!==(r=p[5].strings.reply)&&d(e,"title",r),h&2&&o!==(o=Re(p[1].id))&&d(i,"href",o),h&32&&f!==(f=p[5].strings.replyall)&&d(i,"title",f),h&4&&P(i,"disabled",!p[2]),h&2&&_!==(_=qe(p[1].id))&&d(m,"href",_),h&32&&b!==(b=p[5].strings.forward)&&d(m,"title",b)},d(p){p&&(y(e),y(n),y(i),y(c),y(m))}}}function xn(l){let e,t,s,r,n,i,a,o,f,c,m,u=l[5].viewSize<fe.SM&&Zt(l),_=l[5].viewSize>=fe.SM&&es(l);return{c(){e=v("button"),t=v("i"),a=L(),u&&u.c(),o=L(),_&&_.c(),f=me(),d(t,"class",s="fa "+l[4]),d(e,"class","btn py-2 border-0"),d(e,"role","checkbox"),d(e,"aria-checked",r=l[1].starred),e.disabled=n=l[1].deleted,d(e,"title",i=l[1].starred?l[5].strings.markasunstarred:l[5].strings.markasstarred)},m(b,p){w(b,e,p),g(e,t),w(b,a,p),u&&u.m(b,p),w(b,o,p),_&&_.m(b,p),w(b,f,p),c||(m=O(e,"click",l[8]),c=!0)},p(b,[p]){p&16&&s!==(s="fa "+b[4])&&d(t,"class",s),p&2&&r!==(r=b[1].starred)&&d(e,"aria-checked",r),p&2&&n!==(n=b[1].deleted)&&(e.disabled=n),p&34&&i!==(i=b[1].starred?b[5].strings.markasunstarred:b[5].strings.markasstarred)&&d(e,"title",i),b[5].viewSize<fe.SM?u?u.p(b,p):(u=Zt(b),u.c(),u.m(o.parentNode,o)):u&&(u.d(1),u=null),b[5].viewSize>=fe.SM?_?_.p(b,p):(_=es(b),_.c(),_.m(f.parentNode,f)):_&&(_.d(1),_=null)},i:I,o:I,d(b){b&&(y(e),y(a),y(o),y(f)),u&&u.d(b),_&&_.d(b),c=!1,m()}}}function er(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,b=>t(5,r=b)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e,{canReplyAll:f}=e,c=!1;const m=()=>{t(3,c=!c)},u=()=>{t(3,c=!1)},_=()=>a.setStarred([o.id],!o.starred);return l.$$set=b=>{"store"in b&&i(t(0,a=b.store)),"message"in b&&t(1,o=b.message),"canReplyAll"in b&&t(2,f=b.canReplyAll)},l.$$.update=()=>{l.$$.dirty&2&&t(4,s=o.starred?"fa-star text-warning":"fa-star-o")},[a,o,f,c,s,r,m,u,_]}class tr extends le{constructor(e){super(),ne(this,e,er,xn,te,{store:0,message:1,canReplyAll:2})}}function ts(l,e,t){const s=l.slice();return s[1]=e[t],s}function ss(l){let e,t,s,r,n,i,a=(l[1].filepath+l[1].filename).replace(/^\//,"")+"",o,f,c,m,u=ot(l[1].filesize)+"",_,b;return{c(){e=v("div"),t=v("img"),n=L(),i=v("a"),o=j(a),c=L(),m=v("span"),_=j(u),b=L(),d(t,"aria-hidden","true"),d(t,"alt",s=l[1].filename),Ee(t.src,r=l[1].iconurl)||d(t,"src",r),d(t,"width","24"),d(t,"height","24"),d(t,"class","mr-2"),d(i,"href",f=l[1].fileurl),d(i,"class","mr-2"),d(m,"class","text-muted"),d(e,"class","mr-5 mb-3")},m(p,h){w(p,e,h),g(e,t),g(e,n),g(e,i),g(i,o),g(e,c),g(e,m),g(m,_),g(e,b)},p(p,h){h&1&&s!==(s=p[1].filename)&&d(t,"alt",s),h&1&&!Ee(t.src,r=p[1].iconurl)&&d(t,"src",r),h&1&&a!==(a=(p[1].filepath+p[1].filename).replace(/^\//,"")+"")&&R(o,a),h&1&&f!==(f=p[1].fileurl)&&d(i,"href",f),h&1&&u!==(u=ot(p[1].filesize)+"")&&R(_,u)},d(p){p&&y(e)}}}function sr(l){let e,t=ue(l[0].attachments),s=[];for(let r=0;r<t.length;r+=1)s[r]=ss(ts(l,t,r));return{c(){e=v("div");for(let r=0;r<s.length;r+=1)s[r].c();d(e,"class","d-sm-flex flex-sm-wrap mr-n5 mt-3 mb-n3")},m(r,n){w(r,e,n);for(let i=0;i<s.length;i+=1)s[i]&&s[i].m(e,null)},p(r,[n]){if(n&1){t=ue(r[0].attachments);let i;for(i=0;i<t.length;i+=1){const a=ts(r,t,i);s[i]?s[i].p(a,n):(s[i]=ss(a),s[i].c(),s[i].m(e,null))}for(;i<s.length;i+=1)s[i].d(1);s.length=t.length}},i:I,o:I,d(r){r&&y(e),He(s,r)}}}function lr(l,e,t){let{message:s}=e;return l.$$set=r=>{"message"in r&&t(0,s=r.message)},[s]}class bl extends le{constructor(e){super(),ne(this,e,lr,sr,te,{message:0})}}function nr(l){let e,t,s,r=l[3].strings.reply+"",n,i,a,o,f,c,m=l[3].strings.replyall+"",u,_,b,p,h,k,S=l[3].strings.forward+"",z,M;return{c(){e=v("a"),t=v("i"),s=L(),n=j(r),a=L(),o=v("a"),f=v("i"),c=L(),u=j(m),b=L(),p=v("a"),h=v("i"),k=L(),z=j(S),d(t,"class","fa fa-fw fa-reply mr-2"),d(e,"href",i=Ie(l[1].id)),d(e,"class","btn btn-primary mr-3 mb-3"),d(f,"class","fa fa-fw fa-reply-all mr-2"),d(o,"href",_=Re(l[1].id)),d(o,"class","btn mr-3 mb-3"),P(o,"disabled",!l[2]),P(o,"btn-primary",l[2]),P(o,"btn-secondary",!l[2]),d(h,"class","fa fa-fw fa-share mr-2"),d(p,"href",M=qe(l[1].id)),d(p,"class","btn btn-primary mr-3 mb-3")},m($,T){w($,e,T),g(e,t),g(e,s),g(e,n),w($,a,T),w($,o,T),g(o,f),g(o,c),g(o,u),w($,b,T),w($,p,T),g(p,h),g(p,k),g(p,z)},p($,[T]){T&8&&r!==(r=$[3].strings.reply+"")&&R(n,r),T&2&&i!==(i=Ie($[1].id))&&d(e,"href",i),T&8&&m!==(m=$[3].strings.replyall+"")&&R(u,m),T&2&&_!==(_=Re($[1].id))&&d(o,"href",_),T&4&&P(o,"disabled",!$[2]),T&4&&P(o,"btn-primary",$[2]),T&4&&P(o,"btn-secondary",!$[2]),T&8&&S!==(S=$[3].strings.forward+"")&&R(z,S),T&2&&M!==(M=qe($[1].id))&&d(p,"href",M)},i:I,o:I,d($){$&&(y(e),y(a),y(o),y(b),y(p))}}}function rr(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,f=>t(3,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e,{canReplyAll:o}=e;return l.$$set=f=>{"store"in f&&n(t(0,i=f.store)),"message"in f&&t(1,a=f.message),"canReplyAll"in f&&t(2,o=f.canReplyAll)},[i,a,o,s]}class ir extends le{constructor(e){super(),ne(this,e,rr,nr,te,{store:0,message:1,canReplyAll:2})}}function ls(l,e,t){const s=l.slice();return s[3]=e[t],s}function ns(l){let e,t;return e=new nt({props:{course:l[1].course,settings:l[2].settings}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&2&&(n.course=s[1].course),r&4&&(n.settings=s[2].settings),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function rs(l,e){let t,s,r;return s=new dl({props:{label:e[3]}}),{key:l,first:null,c(){t=me(),U(s.$$.fragment),this.first=t},m(n,i){w(n,t,i),G(s,n,i),r=!0},p(n,i){e=n;const a={};i&2&&(a.label=e[3]),s.$set(a)},i(n){r||(C(s.$$.fragment,n),r=!0)},o(n){A(s.$$.fragment,n),r=!1},d(n){n&&y(t),H(s,n)}}}function ar(l){let e,t=[],s=new Map,r,n,i=l[1].course.id!=l[2].params.courseid&&ns(l),a=ue(l[1].labels);const o=f=>f[3].id;for(let f=0;f<a.length;f+=1){let c=ls(l,a,f),m=o(c);s.set(m,t[f]=rs(m,c))}return{c(){i&&i.c(),e=L();for(let f=0;f<t.length;f+=1)t[f].c();r=me()},m(f,c){i&&i.m(f,c),w(f,e,c);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(f,c);w(f,r,c),n=!0},p(f,[c]){f[1].course.id!=f[2].params.courseid?i?(i.p(f,c),c&6&&C(i,1)):(i=ns(f),i.c(),C(i,1),i.m(e.parentNode,e)):i&&(x(),A(i,1,1,()=>{i=null}),ee()),c&2&&(a=ue(f[1].labels),x(),t=ye(t,c,o,1,f,a,s,r.parentNode,xe,rs,r,ls),ee())},i(f){if(!n){C(i);for(let c=0;c<a.length;c+=1)C(t[c]);n=!0}},o(f){A(i);for(let c=0;c<t.length;c+=1)A(t[c]);n=!1},d(f){f&&(y(e),y(r)),i&&i.d(f);for(let c=0;c<t.length;c+=1)t[c].d(f)}}}function or(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,o=>t(2,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();let{message:a}=e;return l.$$set=o=>{"store"in o&&n(t(0,i=o.store)),"message"in o&&t(1,a=o.message)},[i,a,s]}class fr extends le{constructor(e){super(),ne(this,e,or,ar,te,{store:0,message:1})}}function is(l){let e,t,s,r;return s=new bl({props:{message:l[0]}}),{c(){e=v("hr"),t=L(),U(s.$$.fragment)},m(n,i){w(n,e,i),w(n,t,i),G(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.message=n[0]),s.$set(a)},i(n){r||(C(s.$$.fragment,n),r=!0)},o(n){A(s.$$.fragment,n),r=!1},d(n){n&&(y(e),y(t)),H(s,n)}}}function ur(l){let e,t,s,r=l[0].subject+"",n,i,a,o,f,c,m,u,_,b,p,h=l[0].sender.fullname+"",k,S,z,M,$=l[0].fulltime+"",T,D,N,F,V,B=l[0].content+"",J,se,q=l[0].attachments.length>0&&is(l);return{c(){e=v("div"),t=v("div"),s=v("h5"),n=j(r),i=L(),a=v("div"),o=v("div"),f=v("div"),c=v("img"),_=L(),b=v("div"),p=v("a"),k=j(h),z=L(),M=v("div"),T=j($),D=L(),N=v("hr"),F=L(),V=v("div"),J=L(),q&&q.c(),d(s,"class","h5 card-title mb-3"),d(c,"aria-hidden","true"),d(c,"alt",m=l[0].sender.fullname),Ee(c.src,u=l[0].sender.pictureurl)||d(c,"src",u),d(c,"width","35"),d(c,"height","35"),d(c,"class","rounded-circle"),d(f,"class","mr-3"),d(p,"href",S=l[0].sender.profileurl),d(b,"class","mt-1"),d(o,"class","d-flex mb-3 mb-sm-0"),d(M,"class","mt-1 ml-auto"),d(a,"class","d-sm-flex mb-n1"),d(V,"class","local-mail-message-reference-content svelte-nahnfm"),d(t,"class","card-body p-3 px-xl-4"),d(e,"class","card mb-4")},m(Y,re){w(Y,e,re),g(e,t),g(t,s),g(s,n),g(t,i),g(t,a),g(a,o),g(o,f),g(f,c),g(o,_),g(o,b),g(b,p),g(p,k),g(a,z),g(a,M),g(M,T),g(t,D),g(t,N),g(t,F),g(t,V),V.innerHTML=B,g(t,J),q&&q.m(t,null),se=!0},p(Y,[re]){(!se||re&1)&&r!==(r=Y[0].subject+"")&&R(n,r),(!se||re&1&&m!==(m=Y[0].sender.fullname))&&d(c,"alt",m),(!se||re&1&&!Ee(c.src,u=Y[0].sender.pictureurl))&&d(c,"src",u),(!se||re&1)&&h!==(h=Y[0].sender.fullname+"")&&R(k,h),(!se||re&1&&S!==(S=Y[0].sender.profileurl))&&d(p,"href",S),(!se||re&1)&&$!==($=Y[0].fulltime+"")&&R(T,$),(!se||re&1)&&B!==(B=Y[0].content+"")&&(V.innerHTML=B),Y[0].attachments.length>0?q?(q.p(Y,re),re&1&&C(q,1)):(q=is(Y),q.c(),C(q,1),q.m(t,null)):q&&(x(),A(q,1,1,()=>{q=null}),ee())},i(Y){se||(C(q),se=!0)},o(Y){A(q),se=!1},d(Y){Y&&y(e),q&&q.d()}}}function cr(l,e,t){let{reference:s}=e;return l.$$set=r=>{"reference"in r&&t(0,s=r.reference)},[s]}class mr extends le{constructor(e){super(),ne(this,e,cr,ur,te,{reference:0})}}function as(l,e,t){const s=l.slice();return s[4]=e[t],s}function os(l,e,t){const s=l.slice();return s[7]=e[t],s[9]=t,s}function fs(l){let e,t,s=l[3].strings[l[4]]+"",r,n,i,a=[],o=new Map,f,c=ue(l[2](l[4]));const m=u=>u[7].id;for(let u=0;u<c.length;u+=1){let _=os(l,c,u),b=m(_);o.set(b,a[u]=cs(b,_))}return{c(){e=v("div"),t=v("span"),r=j(s),n=j(":"),i=L();for(let u=0;u<a.length;u+=1)a[u].c();f=L(),d(e,"class","mb-2")},m(u,_){w(u,e,_),g(e,t),g(t,r),g(t,n),g(e,i);for(let b=0;b<a.length;b+=1)a[b]&&a[b].m(e,null);g(e,f)},p(u,_){_&8&&s!==(s=u[3].strings[u[4]]+"")&&R(r,s),_&4&&(c=ue(u[2](u[4])),a=ye(a,_,m,1,u,c,o,e,Ye,cs,f,os))},d(u){u&&y(e);for(let _=0;_<a.length;_+=1)a[_].d()}}}function us(l){let e;return{c(){e=j(",")},m(t,s){w(t,e,s)},d(t){t&&y(e)}}}function cs(l,e){let t,s,r,n=e[7].fullname+"",i,a,o=e[9]>0&&us();return{key:l,first:null,c(){t=me(),o&&o.c(),s=L(),r=v("a"),i=j(n),d(r,"href",a=e[7].profileurl),this.first=t},m(f,c){w(f,t,c),o&&o.m(f,c),w(f,s,c),w(f,r,c),g(r,i)},p(f,c){e=f,e[9]>0?o||(o=us(),o.c(),o.m(s.parentNode,s)):o&&(o.d(1),o=null),c&4&&n!==(n=e[7].fullname+"")&&R(i,n),c&4&&a!==(a=e[7].profileurl)&&d(r,"href",a)},d(f){f&&(y(t),y(s),y(r)),o&&o.d(f)}}}function ms(l){let e=l[2](l[4]).length>0,t,s=e&&fs(l);return{c(){s&&s.c(),t=me()},m(r,n){s&&s.m(r,n),w(r,t,n)},p(r,n){n&4&&(e=r[2](r[4]).length>0),e?s?s.p(r,n):(s=fs(r),s.c(),s.m(t.parentNode,t)):s&&(s.d(1),s=null)},d(r){r&&y(t),s&&s.d(r)}}}function dr(l){let e,t,s,r,n,i,a,o,f,c=l[1].sender.fullname+"",m,u,_,b=ue(["to","cc","bcc"]),p=[];for(let h=0;h<3;h+=1)p[h]=ms(as(l,b,h));return{c(){e=v("div"),t=v("div"),s=v("img"),i=L(),a=v("div"),o=v("div"),f=v("a"),m=j(c),_=L();for(let h=0;h<3;h+=1)p[h].c();d(s,"aria-hidden","true"),d(s,"alt",r=l[1].sender.fullname),Ee(s.src,n=l[1].sender.pictureurl)||d(s,"src",n),d(s,"width","35"),d(s,"height","35"),d(s,"class","rounded-circle"),d(t,"class","mr-3"),d(f,"href",u=l[1].sender.profileurl),d(o,"class","mt-1 mb-2"),d(a,"class","d-flex flex-column"),d(e,"class","local-mail-message-users d-flex mb-n2")},m(h,k){w(h,e,k),g(e,t),g(t,s),g(e,i),g(e,a),g(a,o),g(o,f),g(f,m),g(a,_);for(let S=0;S<3;S+=1)p[S]&&p[S].m(a,null)},p(h,[k]){if(k&2&&r!==(r=h[1].sender.fullname)&&d(s,"alt",r),k&2&&!Ee(s.src,n=h[1].sender.pictureurl)&&d(s,"src",n),k&2&&c!==(c=h[1].sender.fullname+"")&&R(m,c),k&2&&u!==(u=h[1].sender.profileurl)&&d(f,"href",u),k&12){b=ue(["to","cc","bcc"]);let S;for(S=0;S<3;S+=1){const z=as(h,b,S);p[S]?p[S].p(z,k):(p[S]=ms(z),p[S].c(),p[S].m(a,null))}for(;S<3;S+=1)p[S].d(1)}},i:I,o:I,d(h){h&&y(e),He(p,h)}}}function _r(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,f=>t(3,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;return l.$$set=f=>{"store"in f&&i(t(0,a=f.store)),"message"in f&&t(1,o=f.message)},l.$$.update=()=>{l.$$.dirty&2&&t(2,s=f=>o.recipients.filter(c=>c.type==f))},[a,o,s,r]}class gr extends le{constructor(e){super(),ne(this,e,_r,dr,te,{store:0,message:1})}}function ds(l,e,t){const s=l.slice();return s[4]=e[t],s}function _s(l){let e,t,s,r;return s=new bl({props:{message:l[1]}}),{c(){e=v("hr"),t=L(),U(s.$$.fragment)},m(n,i){w(n,e,i),w(n,t,i),G(s,n,i),r=!0},p(n,i){const a={};i&2&&(a.message=n[1]),s.$set(a)},i(n){r||(C(s.$$.fragment,n),r=!0)},o(n){A(s.$$.fragment,n),r=!1},d(n){n&&(y(e),y(t)),H(s,n)}}}function gs(l){let e,t=l[2].strings.references+"",s,r,n=[],i=new Map,a,o,f=ue(l[1].references);const c=m=>m[4].id;for(let m=0;m<f.length;m+=1){let u=ds(l,f,m),_=c(u);i.set(_,n[m]=ps(_,u))}return{c(){e=v("div"),s=j(t),r=L();for(let m=0;m<n.length;m+=1)n[m].c();a=me(),d(e,"class","alert alert-secondary mt-4 mb-4 text-center")},m(m,u){w(m,e,u),g(e,s),w(m,r,u);for(let _=0;_<n.length;_+=1)n[_]&&n[_].m(m,u);w(m,a,u),o=!0},p(m,u){(!o||u&4)&&t!==(t=m[2].strings.references+"")&&R(s,t),u&2&&(f=ue(m[1].references),x(),n=ye(n,u,c,1,m,f,i,a.parentNode,xe,ps,a,ds),ee())},i(m){if(!o){for(let u=0;u<f.length;u+=1)C(n[u]);o=!0}},o(m){for(let u=0;u<n.length;u+=1)A(n[u]);o=!1},d(m){m&&(y(e),y(r),y(a));for(let u=0;u<n.length;u+=1)n[u].d(m)}}}function ps(l,e){let t,s,r;return s=new mr({props:{reference:e[4]}}),{key:l,first:null,c(){t=me(),U(s.$$.fragment),this.first=t},m(n,i){w(n,t,i),G(s,n,i),r=!0},p(n,i){e=n;const a={};i&2&&(a.reference=e[4]),s.$set(a)},i(n){r||(C(s.$$.fragment,n),r=!0)},o(n){A(s.$$.fragment,n),r=!1},d(n){n&&y(t),H(s,n)}}}function pr(l){let e,t,s,r=l[1].subject+"",n,i,a,o,f,c,m,u,_=l[1].fulltime+"",b,p,h,k,S,z,M,$,T,D,N=l[1].content+"",F,V,B,J,se,q,Y,re,oe;f=new fr({props:{store:l[0],message:l[1]}}),k=new tr({props:{store:l[0],message:l[1],canReplyAll:l[3]}}),z=new gr({props:{store:l[0],message:l[1]}});let Z=l[1].attachments.length>0&&_s(l);q=new ir({props:{store:l[0],message:l[1],canReplyAll:l[3]}});let Q=l[1].references.length>0&&gs(l);return{c(){e=v("div"),t=v("div"),s=v("h3"),n=j(r),i=L(),a=v("div"),o=v("div"),U(f.$$.fragment),c=L(),m=v("div"),u=v("div"),b=j(_),p=L(),h=v("div"),U(k.$$.fragment),S=L(),U(z.$$.fragment),M=L(),$=v("hr"),T=L(),D=v("div"),F=L(),Z&&Z.c(),V=L(),B=v("hr"),J=L(),se=v("div"),U(q.$$.fragment),Y=L(),Q&&Q.c(),re=me(),d(s,"class","h4 card-title mb-3 mb-md-2"),d(o,"class","d-flex flex-wrap mx-n2 mt-2"),ie(o,"min-width","0"),d(u,"class","my-2 text-truncate"),d(h,"class","d-flex flex-shrink-0 ml-3 mr-n2"),d(m,"class","d-flex justify-content-between flex-shrink-0 ml-auto"),d(a,"class","d-md-flex align-items-start mb-2"),d(D,"class","local-mail-message-content svelte-18ecame"),d(se,"class","mt-3 d-flex mr-n3 mb-n3 flex-column flex-sm-row justify-content-end"),d(t,"class","card-body p-3 px-xl-4"),d(e,"class","card")},m(K,X){w(K,e,X),g(e,t),g(t,s),g(s,n),g(t,i),g(t,a),g(a,o),G(f,o,null),g(a,c),g(a,m),g(m,u),g(u,b),g(m,p),g(m,h),G(k,h,null),g(t,S),G(z,t,null),g(t,M),g(t,$),g(t,T),g(t,D),D.innerHTML=N,g(t,F),Z&&Z.m(t,null),g(t,V),g(t,B),g(t,J),g(t,se),G(q,se,null),w(K,Y,X),Q&&Q.m(K,X),w(K,re,X),oe=!0},p(K,[X]){(!oe||X&2)&&r!==(r=K[1].subject+"")&&R(n,r);const de={};X&1&&(de.store=K[0]),X&2&&(de.message=K[1]),f.$set(de),(!oe||X&2)&&_!==(_=K[1].fulltime+"")&&R(b,_);const be={};X&1&&(be.store=K[0]),X&2&&(be.message=K[1]),X&8&&(be.canReplyAll=K[3]),k.$set(be);const E={};X&1&&(E.store=K[0]),X&2&&(E.message=K[1]),z.$set(E),(!oe||X&2)&&N!==(N=K[1].content+"")&&(D.innerHTML=N),K[1].attachments.length>0?Z?(Z.p(K,X),X&2&&C(Z,1)):(Z=_s(K),Z.c(),C(Z,1),Z.m(t,V)):Z&&(x(),A(Z,1,1,()=>{Z=null}),ee());const W={};X&1&&(W.store=K[0]),X&2&&(W.message=K[1]),X&8&&(W.canReplyAll=K[3]),q.$set(W),K[1].references.length>0?Q?(Q.p(K,X),X&2&&C(Q,1)):(Q=gs(K),Q.c(),C(Q,1),Q.m(re.parentNode,re)):Q&&(x(),A(Q,1,1,()=>{Q=null}),ee())},i(K){oe||(C(f.$$.fragment,K),C(k.$$.fragment,K),C(z.$$.fragment,K),C(Z),C(q.$$.fragment,K),C(Q),oe=!0)},o(K){A(f.$$.fragment,K),A(k.$$.fragment,K),A(z.$$.fragment,K),A(Z),A(q.$$.fragment,K),A(Q),oe=!1},d(K){K&&(y(e),y(Y),y(re)),H(f),H(k),H(z),Z&&Z.d(),H(q),Q&&Q.d(K)}}}function br(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,f=>t(2,r=f)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{message:o}=e;return l.$$set=f=>{"store"in f&&i(t(0,a=f.store)),"message"in f&&t(1,o=f.message)},l.$$.update=()=>{l.$$.dirty&6&&t(3,s=o.sender.id==r.userid?o.recipients.filter(f=>f.type=="cc").length>0:o.recipients.filter(f=>["to","cc"].includes(f.type)&&f.id!=r.userid).length>0)},[a,o,r,s]}class hr extends le{constructor(e){super(),ne(this,e,br,pr,te,{store:0,message:1})}}function bs(l,e,t){const s=l.slice();return s[7]=e[t],s}function hs(l){let e,t=l[7]+"",s,r;return{c(){e=v("option"),s=j(t),e.__value=r=l[7],ve(e,e.__value)},m(n,i){w(n,e,i),g(e,s)},p(n,i){i&8&&t!==(t=n[7]+"")&&R(s,t),i&8&&r!==(r=n[7])&&(e.__value=r,ve(e,e.__value))},d(n){n&&y(e)}}}function vr(l){let e,t,s,r=l[1].strings.messagesperpage+"",n,i,a,o,f,c,m=ue(l[3]),u=[];for(let _=0;_<m.length;_+=1)u[_]=hs(bs(l,m,_));return{c(){e=v("dov"),t=v("div"),s=v("label"),n=j(r),i=j(":"),a=L(),o=v("select");for(let _=0;_<u.length;_+=1)u[_].c();d(s,"for","local-mail-perpage-select"),d(o,"id","local-mail-perpage-select"),d(o,"class","custom-select"),l[2]===void 0&&Le(()=>l[4].call(o)),d(t,"class","form-group"),d(e,"class","form-inline justify-content-end mt-3")},m(_,b){w(_,e,b),g(e,t),g(t,s),g(s,n),g(s,i),g(t,a),g(t,o);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(o,null);it(o,l[2],!0),f||(c=[O(o,"change",l[4]),O(o,"change",l[5])],f=!0)},p(_,[b]){if(b&2&&r!==(r=_[1].strings.messagesperpage+"")&&R(n,r),b&8){m=ue(_[3]);let p;for(p=0;p<m.length;p+=1){const h=bs(_,m,p);u[p]?u[p].p(h,b):(u[p]=hs(h),u[p].c(),u[p].m(o,null))}for(;p<u.length;p+=1)u[p].d(1);u.length=m.length}b&12&&it(o,_[2])},i:I,o:I,d(_){_&&y(e),He(u,_),f=!1,ge(c)}}}function kr(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,u=>t(1,r=u)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();const o=[5,10,20,50,100];let f=r.preferences.perpage;function c(){f=Dl(this),t(2,f),t(3,s),t(1,r)}const m=()=>a.setPerPage(f);return l.$$set=u=>{"store"in u&&i(t(0,a=u.store))},l.$$.update=()=>{l.$$.dirty&2&&t(3,s=o.includes(r.preferences.perpage)?o:o.concat([r.preferences.perpage]).sort((u,_)=>u-_))},[a,r,f,s,c,m]}class wr extends le{constructor(e){super(),ne(this,e,kr,vr,te,{store:0})}}function yr(l){let e,t,s,r=l[9].strings.from+"",n,i,a,o,f,c,m,u=l[9].strings.to+"",_,b,p,h,k,S,z,M=l[9].strings.filterbydate+"",$,T,D,N,F,V,B,J,se,q,Y=l[9].strings.searchbyunread+"",re,oe,Z,Q,K,X,de=l[9].strings.searchbyattach+"",be,E,W,ce,Se,De,Ae;return{c(){e=v("div"),t=v("div"),s=v("label"),n=j(r),i=L(),a=v("div"),o=v("input"),f=L(),c=v("div"),m=v("label"),_=j(u),b=L(),p=v("div"),h=v("input"),k=L(),S=v("div"),z=v("label"),$=j(M),T=L(),D=v("div"),N=v("input"),F=L(),V=v("div"),B=v("div"),J=v("input"),se=L(),q=v("label"),re=j(Y),oe=L(),Z=v("div"),Q=v("input"),K=L(),X=v("label"),be=j(de),E=L(),W=v("input"),d(s,"for","local-mail-search-input-sendername"),d(s,"class","col-3 col-form-label"),d(o,"type","text"),d(o,"class","form-control"),d(o,"id","local-mail-search-input-sendername"),d(a,"class","col-9"),d(t,"class","form-group row"),d(m,"for","local-mail-search-input-recipientname"),d(m,"class","col-3 col-form-label"),d(h,"type","text"),d(h,"class","form-control"),d(h,"id","local-mail-search-input-recipientname"),d(p,"class","col-9"),d(c,"class","form-group row"),d(z,"for","local-mail-search-input-maxdate"),d(z,"class","col-3 col-form-label"),d(N,"type","date"),d(N,"class","form-control"),d(N,"id","local-mail-search-input-maxdate"),d(N,"max",l[10]),N.value=l[8],d(D,"class","col-9"),d(S,"class","form-group row"),d(J,"class","form-check-input"),d(J,"type","checkbox"),d(J,"id","local-mail-search-input-unread"),d(q,"class","form-check-label"),d(q,"for","local-mail-search-input-unread"),d(B,"class","form-check flex-grow-1"),d(Q,"class","form-check-input"),d(Q,"type","checkbox"),d(Q,"id","local-mail-search-input-withfilesonly"),d(X,"class","form-check-label"),d(X,"for","local-mail-search-input-withfilesonly"),d(Z,"class","form-check flex-grow-1"),d(W,"type","submit"),W.disabled=ce=!l[6],d(W,"class","btn btn-primary px-3 ml-auto"),W.value=Se=l[9].strings.search,d(V,"class","d-flex flex-wrap align-items-center"),ie(V,"column-gap","2rem"),ie(V,"row-gap","1rem"),d(e,"class","dropdown-menu dropdown-menu-left show p-3 w-100"),ie(e,"min-width","18rem")},m(Me,_e){w(Me,e,_e),g(e,t),g(t,s),g(s,n),g(t,i),g(t,a),g(a,o),ve(o,l[0]),l[15](o),g(e,f),g(e,c),g(c,m),g(m,_),g(c,b),g(c,p),g(p,h),ve(h,l[1]),g(e,k),g(e,S),g(S,z),g(z,$),g(S,T),g(S,D),g(D,N),g(e,F),g(e,V),g(V,B),g(B,J),J.checked=l[2],g(B,se),g(B,q),g(q,re),g(V,oe),g(V,Z),g(Z,Q),Q.checked=l[3],g(Z,K),g(Z,X),g(X,be),g(V,E),g(V,W),De||(Ae=[O(o,"input",l[14]),O(h,"input",l[16]),O(N,"input",l[11]),O(J,"change",l[17]),O(Q,"change",l[18]),O(W,"click",we(function(){he(l[5])&&l[5].apply(this,arguments)}))],De=!0)},p(Me,[_e]){l=Me,_e&512&&r!==(r=l[9].strings.from+"")&&R(n,r),_e&1&&o.value!==l[0]&&ve(o,l[0]),_e&512&&u!==(u=l[9].strings.to+"")&&R(_,u),_e&2&&h.value!==l[1]&&ve(h,l[1]),_e&512&&M!==(M=l[9].strings.filterbydate+"")&&R($,M),_e&256&&(N.value=l[8]),_e&4&&(J.checked=l[2]),_e&512&&Y!==(Y=l[9].strings.searchbyunread+"")&&R(re,Y),_e&8&&(Q.checked=l[3]),_e&512&&de!==(de=l[9].strings.searchbyattach+"")&&R(be,de),_e&64&&ce!==(ce=!l[6])&&(W.disabled=ce),_e&512&&Se!==(Se=l[9].strings.search)&&(W.value=Se)},i:I,o:I,d(Me){Me&&y(e),l[15](null),De=!1,ge(Ae)}}}function Mr(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,N=>t(9,r=N)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let{sendername:o=""}=e,{recipientname:f=""}=e,{unread:c=!1}=e,{withfilesonly:m=!1}=e,{maxtime:u=0}=e,{submit:_}=e,{submitEnabled:b}=e;function p(){h.focus()}let h,k=at(Math.floor(new Date().getTime()/1e3));const S=N=>{t(12,u=El(N.target.value))};function z(){o=this.value,t(0,o)}function M(N){pe[N?"unshift":"push"](()=>{h=N,t(7,h)})}function $(){f=this.value,t(1,f)}function T(){c=this.checked,t(2,c)}function D(){m=this.checked,t(3,m)}return l.$$set=N=>{"store"in N&&i(t(4,a=N.store)),"sendername"in N&&t(0,o=N.sendername),"recipientname"in N&&t(1,f=N.recipientname),"unread"in N&&t(2,c=N.unread),"withfilesonly"in N&&t(3,m=N.withfilesonly),"maxtime"in N&&t(12,u=N.maxtime),"submit"in N&&t(5,_=N.submit),"submitEnabled"in N&&t(6,b=N.submitEnabled)},l.$$.update=()=>{l.$$.dirty&4096&&t(8,s=at(u))},[o,f,c,m,a,_,b,h,s,r,k,S,u,p,z,M,$,T,D]}class $r extends le{constructor(e){super(),ne(this,e,Mr,yr,te,{store:4,sendername:0,recipientname:1,unread:2,withfilesonly:3,maxtime:12,submit:5,submitEnabled:6,focus:13})}get focus(){return this.$$.ctx[13]}}const{Boolean:Cr}=Je;function vs(l,e,t){const s=l.slice();return s[14]=e[t],s[16]=t,s}function ks(l){let e,t,s,r=ue(l[4]),n=[];for(let c=0;c<r.length;c+=1)n[c]=ws(vs(l,r,c));const i=c=>A(n[c],1,1,()=>{n[c]=null});function a(c,m){if(c[5])return Lr;if(!c[4].length)return Tr}let o=a(l),f=o&&o(l);return{c(){e=v("div");for(let c=0;c<n.length;c+=1)n[c].c();t=L(),f&&f.c(),d(e,"class","dropdown-menu dropdown-menu-left overflow-hidden show p-0 w-100"),ie(e,"min-width","18rem")},m(c,m){w(c,e,m);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(e,null);g(e,t),f&&f.m(e,null),s=!0},p(c,m){if(m&401){r=ue(c[4]);let u;for(u=0;u<r.length;u+=1){const _=vs(c,r,u);n[u]?(n[u].p(_,m),C(n[u],1)):(n[u]=ws(_),n[u].c(),C(n[u],1),n[u].m(e,t))}for(x(),u=r.length;u<n.length;u+=1)i(u);ee()}o===(o=a(c))&&f?f.p(c,m):(f&&f.d(1),f=o&&o(c),f&&(f.c(),f.m(e,null)))},i(c){if(!s){for(let m=0;m<r.length;m+=1)C(n[m]);s=!0}},o(c){n=n.filter(Cr);for(let m=0;m<n.length;m+=1)A(n[m]);s=!1},d(c){c&&y(e),He(n,c),f&&f.d()}}}function Sr(l){let e;return{c(){e=v("div"),d(e,"class","dropdown-divider my-0")},m(t,s){w(t,e,s)},d(t){t&&y(e)}}}function ws(l){let e,t,s,r,n,i,a,o,f=l[14].shorttime+"",c,m,u,_,b,p,h=l[16]>0&&Sr();return s=new lt({props:{store:l[0],message:l[14]}}),i=new st({props:{store:l[0],message:l[14]}}),{c(){h&&h.c(),e=L(),t=v("a"),U(s.$$.fragment),r=L(),n=v("div"),U(i.$$.fragment),a=L(),o=v("div"),c=j(f),d(o,"title",m=l[14].fulltime),d(o,"class","ml-auto"),d(n,"class","local-mail-incremental-search-muted d-flex svelte-sdeam0"),d(t,"class","dropdown-item local-mail-incremental-search-item"),d(t,"href",u=l[14].draft?Ke(l[14].id):Ce(l[7](l[14],l[16]))),P(t,"font-weight-bold",l[14].unread)},m(k,S){h&&h.m(k,S),w(k,e,S),w(k,t,S),G(s,t,null),g(t,r),g(t,n),G(i,n,null),g(n,a),g(n,o),g(o,c),_=!0,b||(p=O(t,"click",function(){he(l[8](l[14],l[16]))&&l[8](l[14],l[16]).apply(this,arguments)}),b=!0)},p(k,S){l=k;const z={};S&1&&(z.store=l[0]),S&16&&(z.message=l[14]),s.$set(z);const M={};S&1&&(M.store=l[0]),S&16&&(M.message=l[14]),i.$set(M),(!_||S&16)&&f!==(f=l[14].shorttime+"")&&R(c,f),(!_||S&16&&m!==(m=l[14].fulltime))&&d(o,"title",m),(!_||S&144&&u!==(u=l[14].draft?Ke(l[14].id):Ce(l[7](l[14],l[16]))))&&d(t,"href",u),(!_||S&16)&&P(t,"font-weight-bold",l[14].unread)},i(k){_||(C(s.$$.fragment,k),C(i.$$.fragment,k),_=!0)},o(k){A(s.$$.fragment,k),A(i.$$.fragment,k),_=!1},d(k){k&&(y(e),y(t)),h&&h.d(k),H(s),H(i),b=!1,p()}}}function Tr(l){let e,t=l[3].strings.nomessagesfound+"",s;return{c(){e=v("div"),s=j(t),d(e,"class","px-4 py-2 text-danger")},m(r,n){w(r,e,n),g(e,s)},p(r,n){n&8&&t!==(t=r[3].strings.nomessagesfound+"")&&R(s,t)},d(r){r&&y(e)}}}function Lr(l){let e,t,s,r=l[3].strings.searchallmessages+"",n,i,a,o;return{c(){e=v("div"),t=L(),s=v("a"),n=j(r),d(e,"class","dropdown-divider my-0"),d(s,"class","dropdown-item py-2"),d(s,"href",i=Ce(l[6]))},m(f,c){w(f,e,c),w(f,t,c),w(f,s,c),g(s,n),a||(o=O(s,"click",we(l[12])),a=!0)},p(f,c){c&8&&r!==(r=f[3].strings.searchallmessages+"")&&R(n,r),c&64&&i!==(i=Ce(f[6]))&&d(s,"href",i)},d(f){f&&(y(e),y(t),y(s)),a=!1,o()}}}function zr(l){let e,t,s=l[1]&&l[4]!=null&&ks(l);return{c(){s&&s.c(),e=me()},m(r,n){s&&s.m(r,n),w(r,e,n),t=!0},p(r,[n]){r[1]&&r[4]!=null?s?(s.p(r,n),n&18&&C(s,1)):(s=ks(r),s.c(),C(s,1),s.m(e.parentNode,e)):s&&(x(),A(s,1,1,()=>{s=null}),ee())},i(r){t||(C(s),t=!0)},o(r){A(s),t=!1},d(r){r&&y(e),s&&s.d(r)}}}const Ze=10,Dr=500;function Ar(l,e,t){let s,r,n,i=I,a=()=>(i(),i=ae(o,z=>t(3,n=z)),o);l.$$.on_destroy.push(()=>i());let{store:o}=e;a();let{enabled:f}=e,{content:c}=e,{loading:m=!1}=e,{handleClick:u}=e,_,b,p=!1;const h=async z=>{t(9,m=!0),window.clearTimeout(_),t(11,_=window.setTimeout(async()=>{const M=n.params,T={methodname:"search_messages",query:{courseid:M.courseid,labelid:M.tray=="label"?M.labelid:void 0,draft:M.tray=="drafts"?!0:M.tray=="sent"?!1:void 0,roles:M.tray=="inbox"?["to","cc","bcc"]:M.tray=="sent"?["from"]:void 0,starred:M.tray=="starred"?!0:void 0,deleted:M.tray=="trash",content:z.trim(),stopid:n.incrementalSearchStopId},limit:Ze+1};let D;try{D=await tl([T])}catch(N){o.setError(N),t(9,m=!1),t(4,b=void 0);return}t(9,m=!1),t(4,b=D[0]),t(5,p=b.length>Ze||!!n.incrementalSearchStopId),t(4,b=b.slice(0,Ze))},Dr))},k=(z,M)=>$=>{z.draft||($.preventDefault(),u(s(z,M)))};Xs(()=>{window.clearTimeout(_)});const S=()=>u(r);return l.$$set=z=>{"store"in z&&a(t(0,o=z.store)),"enabled"in z&&t(1,f=z.enabled),"content"in z&&t(10,c=z.content),"loading"in z&&t(9,m=z.loading),"handleClick"in z&&t(2,u=z.handleClick)},l.$$.update=()=>{l.$$.dirty&3074&&(f?h(c):(t(4,b=void 0),t(9,m=!1),window.clearTimeout(_))),l.$$.dirty&1032&&t(7,s=(z,M)=>({...n.params,messageid:z.id,offset:M,search:{content:c.trim()}})),l.$$.dirty&1032&&t(6,r={...n.params,messageid:void 0,offset:0,search:{content:c.trim()}})},[o,f,u,n,b,p,r,s,k,m,c,_,S]}class Nr extends le{constructor(e){super(),ne(this,e,Ar,zr,te,{store:0,enabled:1,content:10,loading:9,handleClick:2})}}function ys(l,e,t){const s=l.slice();return s[35]=e[t].label,s[36]=e[t].value,s[38]=t,s}function Br(l){let e,t,s,r=ue(l[15]),n=[];for(let i=0;i<r.length;i+=1)n[i]=$s(ys(l,r,i));return{c(){e=v("button");for(let i=0;i<n.length;i+=1)n[i].c();d(e,"type","button"),d(e,"class","alert-primary form-control text-left text-truncate"),ie(e,"padding-left","2.5rem"),ie(e,"padding-right","5rem")},m(i,a){w(i,e,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null);t||(s=O(e,"click",l[16]),t=!0)},p(i,a){if(a[0]&32768){r=ue(i[15]);let o;for(o=0;o<r.length;o+=1){const f=ys(i,r,o);n[o]?n[o].p(f,a):(n[o]=$s(f),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=r.length}},d(i){i&&y(e),He(n,i),t=!1,s()}}}function jr(l){let e,t,s,r,n;return{c(){e=v("input"),d(e,"type","text"),d(e,"class","form-control"),ie(e,"padding-left","2.5rem"),ie(e,"padding-right","5rem"),d(e,"placeholder",t=l[7].strings.search),d(e,"aria-label",s=l[7].strings.search),d(e,"autocomplete","off")},m(i,a){w(i,e,a),ve(e,l[1]),l[26](e),r||(n=[O(e,"input",l[25]),O(e,"keypress",l[21])],r=!0)},p(i,a){a[0]&128&&t!==(t=i[7].strings.search)&&d(e,"placeholder",t),a[0]&128&&s!==(s=i[7].strings.search)&&d(e,"aria-label",s),a[0]&2&&e.value!==i[1]&&ve(e,i[1])},d(i){i&&y(e),l[26](null),r=!1,ge(n)}}}function Ir(l){let e;return{c(){e=v("span"),e.textContent=", ",d(e,"class","dimmed_text")},m(t,s){w(t,e,s)},d(t){t&&y(e)}}}function Rr(l){let e,t=l[36]+"",s,r=l[35]&&Ms(l);return{c(){r&&r.c(),e=L(),s=j(t)},m(n,i){r&&r.m(n,i),w(n,e,i),w(n,s,i)},p(n,i){n[35]?r?r.p(n,i):(r=Ms(n),r.c(),r.m(e.parentNode,e)):r&&(r.d(1),r=null),i[0]&32768&&t!==(t=n[36]+"")&&R(s,t)},d(n){n&&(y(e),y(s)),r&&r.d(n)}}}function qr(l){let e,t=l[35]+"",s;return{c(){e=v("span"),s=j(t),d(e,"class","dimmed_text")},m(r,n){w(r,e,n),g(e,s)},p(r,n){n[0]&32768&&t!==(t=r[35]+"")&&R(s,t)},d(r){r&&y(e)}}}function Ms(l){let e,t=l[35]+"",s,r;return{c(){e=v("span"),s=j(t),r=j(":"),d(e,"class","dimmed_text")},m(n,i){w(n,e,i),g(e,s),g(e,r)},p(n,i){i[0]&32768&&t!==(t=n[35]+"")&&R(s,t)},d(n){n&&y(e)}}}function $s(l){let e,t,s=l[38]>0&&Ir();function r(a,o){return a[36]===!0?qr:Rr}let n=r(l),i=n(l);return{c(){s&&s.c(),e=L(),i.c(),t=me()},m(a,o){s&&s.m(a,o),w(a,e,o),i.m(a,o),w(a,t,o)},p(a,o){n===(n=r(a))&&i?i.p(a,o):(i.d(1),i=n(a),i&&(i.c(),i.m(t.parentNode,t)))},d(a){a&&(y(e),y(t)),s&&s.d(a),i.d(a)}}}function Cs(l){let e,t,s,r,n;return{c(){e=v("button"),t=v("i"),d(t,"class","fa fa-fw fa-times"),d(t,"aria-hidden","true"),d(e,"type","button"),d(e,"class","btn px-0"),d(e,"title",s=l[7].strings.cancel),ie(e,"width","2.5rem")},m(i,a){w(i,e,a),g(e,t),r||(n=O(e,"click",we(l[19])),r=!0)},p(i,a){a[0]&128&&s!==(s=i[7].strings.cancel)&&d(e,"title",s)},d(i){i&&y(e),r=!1,n()}}}function Ss(l){let e,t,s,r,n,i,a;function o(b){l[28](b)}function f(b){l[29](b)}function c(b){l[30](b)}function m(b){l[31](b)}function u(b){l[32](b)}let _={store:l[0],submit:l[20],submitEnabled:l[13]};return l[2]!==void 0&&(_.sendername=l[2]),l[3]!==void 0&&(_.recipientname=l[3]),l[4]!==void 0&&(_.unread=l[4]),l[5]!==void 0&&(_.withfilesonly=l[5]),l[6]!==void 0&&(_.maxtime=l[6]),e=new $r({props:_}),l[27](e),pe.push(()=>Be(e,"sendername",o)),pe.push(()=>Be(e,"recipientname",f)),pe.push(()=>Be(e,"unread",c)),pe.push(()=>Be(e,"withfilesonly",m)),pe.push(()=>Be(e,"maxtime",u)),{c(){U(e.$$.fragment)},m(b,p){G(e,b,p),a=!0},p(b,p){const h={};p[0]&1&&(h.store=b[0]),p[0]&8192&&(h.submitEnabled=b[13]),!t&&p[0]&4&&(t=!0,h.sendername=b[2],je(()=>t=!1)),!s&&p[0]&8&&(s=!0,h.recipientname=b[3],je(()=>s=!1)),!r&&p[0]&16&&(r=!0,h.unread=b[4],je(()=>r=!1)),!n&&p[0]&32&&(n=!0,h.withfilesonly=b[5],je(()=>n=!1)),!i&&p[0]&64&&(i=!0,h.maxtime=b[6],je(()=>i=!1)),e.$set(h)},i(b){a||(C(e.$$.fragment,b),a=!0)},o(b){A(e.$$.fragment,b),a=!1},d(b){l[27](null),H(e,b)}}}function Ts(l){let e,t,s;function r(i){l[33](i)}let n={store:l[0],enabled:l[8]&&!l[9]&&!!l[1].trim(),content:l[1],handleClick:l[22]};return l[12]!==void 0&&(n.loading=l[12]),e=new Nr({props:n}),pe.push(()=>Be(e,"loading",r)),{c(){U(e.$$.fragment)},m(i,a){G(e,i,a),s=!0},p(i,a){const o={};a[0]&1&&(o.store=i[0]),a[0]&770&&(o.enabled=i[8]&&!i[9]&&!!i[1].trim()),a[0]&2&&(o.content=i[1]),!t&&a[0]&4096&&(t=!0,o.loading=i[12],je(()=>t=!1)),e.$set(o)},i(i){s||(C(e.$$.fragment,i),s=!0)},o(i){A(e.$$.fragment,i),s=!1},d(i){H(e,i)}}}function Er(l){let e,t,s,r,n,i,a,o,f,c,m,u,_,b,p,h,k;function S(N,F){return N[8]?jr:Br}let z=S(l),M=z(l),$=(l[14]||l[13])&&Cs(l),T=l[9]&&Ss(l),D=l[7].settings.incrementalsearch&&Ts(l);return{c(){e=v("form"),t=v("div"),s=v("i"),n=L(),M.c(),i=L(),a=v("div"),$&&$.c(),o=L(),f=v("button"),c=v("i"),_=L(),T&&T.c(),b=L(),D&&D.c(),d(s,"class",r="fa fa-fw "+(l[12]?"fa-spinner fa-pulse":"fa-search")),d(s,"aria-hidden","true"),d(t,"class","position-absolute h-100 d-flex justify-content-center align-items-center px-0"),ie(t,"top","0"),ie(t,"left","0"),ie(t,"width","2.5rem"),d(c,"class",m="fa fa-fw "+(l[9]?"fa-caret-up":"fa-sliders")),d(c,"aria-hidden","true"),d(f,"type","button"),d(f,"aria-expanded",l[9]),d(f,"class","btn px-0"),ie(f,"width","2.5rem"),d(f,"title",u=l[7].strings.advsearch),d(a,"class","position-absolute h-100 d-flex align-items-center"),ie(a,"top","0"),ie(a,"right","0"),d(e,"class","local-mail-search-input position-relative svelte-5mr94p")},m(N,F){w(N,e,F),g(e,t),g(t,s),g(e,n),M.m(e,null),g(e,i),g(e,a),$&&$.m(a,null),g(a,o),g(a,f),g(f,c),g(e,_),T&&T.m(e,null),g(e,b),D&&D.m(e,null),p=!0,h||(k=[O(f,"click",we(l[18])),ke(ze.call(null,e,l[17]))],h=!0)},p(N,F){(!p||F[0]&4096&&r!==(r="fa fa-fw "+(N[12]?"fa-spinner fa-pulse":"fa-search")))&&d(s,"class",r),z===(z=S(N))&&M?M.p(N,F):(M.d(1),M=z(N),M&&(M.c(),M.m(e,i))),N[14]||N[13]?$?$.p(N,F):($=Cs(N),$.c(),$.m(a,o)):$&&($.d(1),$=null),(!p||F[0]&512&&m!==(m="fa fa-fw "+(N[9]?"fa-caret-up":"fa-sliders")))&&d(c,"class",m),(!p||F[0]&512)&&d(f,"aria-expanded",N[9]),(!p||F[0]&128&&u!==(u=N[7].strings.advsearch))&&d(f,"title",u),N[9]?T?(T.p(N,F),F[0]&512&&C(T,1)):(T=Ss(N),T.c(),C(T,1),T.m(e,b)):T&&(x(),A(T,1,1,()=>{T=null}),ee()),N[7].settings.incrementalsearch?D?(D.p(N,F),F[0]&128&&C(D,1)):(D=Ts(N),D.c(),C(D,1),D.m(e,null)):D&&(x(),A(D,1,1,()=>{D=null}),ee())},i(N){p||(C(T),C(D),p=!0)},o(N){A(T),A(D),p=!1},d(N){N&&y(e),M.d(),$&&$.d(),T&&T.d(),D&&D.d(),h=!1,ge(k)}}}function Pr(l,e,t){let s,r,n,i,a,o,f=I,c=()=>(f(),f=ae(m,E=>t(7,o=E)),m);l.$$.on_destroy.push(()=>f());let{store:m}=e;c();let u=!o.params.search,_=!1,b,p,h="",k="",S="",z=!1,M=!1,$=0,T=!1;const D=E=>{t(1,h=(E==null?void 0:E.content)||""),t(2,k=(E==null?void 0:E.sendername)||""),t(3,S=(E==null?void 0:E.recipientname)||""),t(4,z=(E==null?void 0:E.unread)||!1),t(5,M=(E==null?void 0:E.withfilesonly)||!1),t(6,$=(E==null?void 0:E.maxtime)||0)},N=async()=>{t(8,u=!0),r&&t(9,_=!0),await Fe(),b.focus()},F=async()=>{t(8,u=!n),t(9,_=!1),D(s)},V=async()=>{_?(t(9,_=!1),await Fe(),b.focus()):(t(9,_=!0),N(),await Fe(),p.focus())},B=async()=>{t(8,u=!0),t(9,_=!1),D(),await m.navigate({...o.params,offset:0,search:void 0}),await Fe(),b.focus()},J=async()=>{await m.navigate({...o.params,messageid:void 0,offset:void 0,search:_?{content:h.trim(),sendername:k.trim(),recipientname:S.trim(),unread:z,withfilesonly:M,maxtime:$}:{content:h.trim()}}),t(9,_=!1),t(8,u=!1)},se=E=>{E.key=="Enter"&&(E.preventDefault(),i?J():B())},q=async E=>{await m.navigate(E),t(9,_=!1),t(8,u=!1)};function Y(){h=this.value,t(1,h)}function re(E){pe[E?"unshift":"push"](()=>{b=E,t(10,b)})}function oe(E){pe[E?"unshift":"push"](()=>{p=E,t(11,p)})}function Z(E){k=E,t(2,k)}function Q(E){S=E,t(3,S)}function K(E){z=E,t(4,z)}function X(E){M=E,t(5,M)}function de(E){$=E,t(6,$)}function be(E){T=E,t(12,T)}return l.$$set=E=>{"store"in E&&c(t(0,m=E.store))},l.$$.update=()=>{l.$$.dirty[0]&128&&t(23,s=o.params.search),l.$$.dirty[0]&8388608&&D(s),l.$$.dirty[0]&8388608&&t(24,r=!!(s!=null&&s.sendername||s!=null&&s.recipientname||s!=null&&s.unread||s!=null&&s.withfilesonly||s!=null&&s.maxtime)),l.$$.dirty[0]&25165824&&t(14,n=(s==null?void 0:s.content)||r),l.$$.dirty[0]&126&&t(13,i=!!(h.trim()||k.trim()||S.trim()||z||M||$)),l.$$.dirty[0]&254&&t(15,a=[{label:"",value:h},{label:o.strings.from,value:k},{label:o.strings.to,value:S},{label:o.strings.filterbydate,value:$>0?new Date($*1e3).toLocaleDateString():""},{label:o.strings.searchbyunread,value:z},{label:o.strings.searchbyattach,value:M}].filter(({value:E})=>!!E))},[m,h,k,S,z,M,$,o,u,_,b,p,T,i,n,a,N,F,V,B,J,se,q,s,r,Y,re,oe,Z,Q,K,X,de,be]}class Fr extends le{constructor(e){super(),ne(this,e,Pr,Er,te,{store:0},null,[-1,-1])}}function Ls(l,e,t){const s=l.slice();return s[4]=e[t],s}function zs(l){let e,t=l[1].strings.undo+"",s,r,n;function i(){return l[2](l[4])}return{c(){e=v("button"),s=j(t),d(e,"class","local-mail-toast-undo btn font-weight-bold px-2 py-0 ml-3 svelte-kxpqnp")},m(a,o){w(a,e,o),g(e,s),r||(n=O(e,"click",i),r=!0)},p(a,o){l=a,o&2&&t!==(t=l[1].strings.undo+"")&&R(s,t)},d(a){a&&y(e),r=!1,n()}}}function Ds(l,e){let t,s,r,n=e[4].text+"",i,a,o,f,c,m,u,_,b,p,h=I,k,S,z,M=e[4].undo&&zs(e);function $(){return e[3](e[4])}return{key:l,first:null,c(){t=v("div"),s=v("div"),r=v("div"),i=j(n),a=L(),M&&M.c(),o=L(),f=v("button"),c=v("i"),u=L(),d(r,"class","px-1 mr-auto"),d(c,"class","fa fa-times"),d(f,"class","btn px-2 py-0 ml-2 text-white-50"),d(f,"title",m=e[1].strings.close),d(s,"class","toast-body d-flex align-items-center p-2"),d(t,"class","toast mt-2 mb-0"),d(t,"role","alert"),d(t,"aria-live","assertive"),d(t,"aria-atomic","true"),d(t,"data-autohide","false"),this.first=t},m(T,D){w(T,t,D),g(t,s),g(s,r),g(r,i),g(s,a),M&&M.m(s,null),g(s,o),g(s,f),g(f,c),g(t,u),k=!0,S||(z=O(f,"click",$),S=!0)},p(T,D){e=T,(!k||D&2)&&n!==(n=e[4].text+"")&&R(i,n),e[4].undo?M?M.p(e,D):(M=zs(e),M.c(),M.m(s,o)):M&&(M.d(1),M=null),(!k||D&2&&m!==(m=e[1].strings.close))&&d(f,"title",m)},r(){p=t.getBoundingClientRect()},f(){el(t),h(),tt(t,p)},a(){h(),h=xs(t,p,ul,{})},i(T){k||(Le(()=>{k&&(b&&b.end(1),_=et(t,We,{y:50,delay:200}),_.start())}),k=!0)},o(T){_&&_.invalidate(),b=Qs(t,We,{y:50,duration:400}),k=!1},d(T){T&&y(t),M&&M.d(),T&&b&&b.end(),S=!1,z()}}}function Ur(l){let e,t=[],s=new Map,r,n=ue(l[1].toasts);const i=a=>a[4];for(let a=0;a<n.length;a+=1){let o=Ls(l,n,a),f=i(o);s.set(f,t[a]=Ds(f,o))}return{c(){e=v("div");for(let a=0;a<t.length;a+=1)t[a].c();d(e,"aria-live","polite"),d(e,"aria-atomic","true"),d(e,"class","local-mail-toasts position-fixed d-flex flex-column-reverse p-3 svelte-kxpqnp")},m(a,o){w(a,e,o);for(let f=0;f<t.length;f+=1)t[f]&&t[f].m(e,null);r=!0},p(a,[o]){if(o&3){n=ue(a[1].toasts),x();for(let f=0;f<t.length;f+=1)t[f].r();t=ye(t,o,i,1,a,n,s,e,Js,Ds,null,Ls);for(let f=0;f<t.length;f+=1)t[f].a();ee()}},i(a){if(!r){for(let o=0;o<n.length;o+=1)C(t[o]);r=!0}},o(a){for(let o=0;o<t.length;o+=1)A(t[o]);r=!1},d(a){a&&y(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Gr(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,f=>t(1,s=f)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=f=>i.undo(f),o=f=>i.hideToast(f);return l.$$set=f=>{"store"in f&&n(t(0,i=f.store))},[i,s,a,o]}class Hr extends le{constructor(e){super(),ne(this,e,Gr,Ur,te,{store:0})}}function Or(l){let e,t,s,r,n;return{c(){e=v("button"),t=v("i"),d(t,"class","fa fa fa-fw fa-arrow-left"),d(e,"type","button"),d(e,"class","local-mail-back-button btn btn-secondary svelte-h5ths1"),d(e,"title",s=l[1].strings.messagelist)},m(i,a){w(i,e,a),g(e,t),r||(n=O(e,"click",l[2]),r=!0)},p(i,[a]){a&2&&s!==(s=i[1].strings.messagelist)&&d(e,"title",s)},i:I,o:I,d(i){i&&y(e),r=!1,n()}}}function Kr(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,o=>t(1,s=o)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;n();const a=()=>i.navigate({...s.params,messageid:void 0,offset:Math.floor((s.messageOffset||0)/s.preferences.perpage)*s.preferences.perpage});return l.$$set=o=>{"store"in o&&n(t(0,i=o.store))},[i,s,a]}class Vr extends le{constructor(e){super(),ne(this,e,Kr,Or,te,{store:0})}}function As(l){let e,t,s=l[1].strings.all+"",r,n,i,a=l[1].strings.none+"",o,f,c,m=l[1].strings.read+"",u,_,b,p=l[1].strings.unread+"",h,k,S,z=l[1].strings.starred+"",M,$,T,D=l[1].strings.unstarred+"",N,F,V;return{c(){e=v("div"),t=v("button"),r=j(s),n=L(),i=v("button"),o=j(a),f=L(),c=v("button"),u=j(m),_=L(),b=v("button"),h=j(p),k=L(),S=v("button"),M=j(z),$=L(),T=v("button"),N=j(D),d(t,"class","dropdown-item"),d(i,"class","dropdown-item"),d(c,"class","dropdown-item"),d(b,"class","dropdown-item"),d(S,"class","dropdown-item"),d(T,"class","dropdown-item"),d(e,"class","dropdown-menu show")},m(B,J){w(B,e,J),g(e,t),g(t,r),g(e,n),g(e,i),g(i,o),g(e,f),g(e,c),g(c,u),g(e,_),g(e,b),g(b,h),g(e,k),g(e,S),g(S,M),g(e,$),g(e,T),g(T,N),F||(V=[O(t,"click",l[7]),O(i,"click",l[8]),O(c,"click",l[9]),O(b,"click",l[10]),O(S,"click",l[11]),O(T,"click",l[12])],F=!0)},p(B,J){J&2&&s!==(s=B[1].strings.all+"")&&R(r,s),J&2&&a!==(a=B[1].strings.none+"")&&R(o,a),J&2&&m!==(m=B[1].strings.read+"")&&R(u,m),J&2&&p!==(p=B[1].strings.unread+"")&&R(h,p),J&2&&z!==(z=B[1].strings.starred+"")&&R(M,z),J&2&&D!==(D=B[1].strings.unstarred+"")&&R(N,D)},d(B){B&&y(e),F=!1,ge(V)}}}function Wr(l){let e,t,s,r,n,i,a,o,f=l[2]&&As(l);return{c(){e=v("div"),t=v("button"),s=v("i"),i=L(),f&&f.c(),d(s,"class",r="fa fa-fw "+l[3]),d(t,"class","btn btn-secondary dropdown-toggle"),d(t,"aria-expanded",l[2]),d(t,"title",n=l[1].strings.select),d(e,"class","btn-group"),d(e,"role","group")},m(c,m){w(c,e,m),g(e,t),g(t,s),g(e,i),f&&f.m(e,null),a||(o=[O(t,"click",l[5]),ke(ze.call(null,e,l[4]))],a=!0)},p(c,[m]){m&8&&r!==(r="fa fa-fw "+c[3])&&d(s,"class",r),m&4&&d(t,"aria-expanded",c[2]),m&2&&n!==(n=c[1].strings.select)&&d(t,"title",n),c[2]?f?f.p(c,m):(f=As(c),f.c(),f.m(e,null)):f&&(f.d(1),f=null)},i:I,o:I,d(c){c&&y(e),f&&f.d(),a=!1,ge(o)}}}function Xr(l,e,t){let s,r,n=I,i=()=>(n(),n=ae(a,S=>t(1,r=S)),a);l.$$.on_destroy.push(()=>n());let{store:a}=e;i();let o=!1;const f=()=>{t(2,o=!1)},c=()=>{t(2,o=!o)},m=S=>{f(),a.selectAll(S)},u=()=>m("all"),_=()=>m("none"),b=()=>m("read"),p=()=>m("unread"),h=()=>m("starred"),k=()=>m("unstarred");return l.$$set=S=>{"store"in S&&i(t(0,a=S.store))},l.$$.update=()=>{l.$$.dirty&2&&t(3,s=r.selectedMessages.size==0?"fa-square-o":r.selectedMessages.size<r.listMessages.length?"fa-minus-square-o":"fa-check-square-o")},[a,r,o,s,f,c,m,u,_,b,p,h,k]}class Yr extends le{constructor(e){super(),ne(this,e,Xr,Wr,te,{store:0})}}function Ns(l,e,t){const s=l.slice();return s[22]=e[t],s}function Jr(l){var a;let e,t=((a=l[6])==null?void 0:a[l[3]])+"",s,r,n,i;return{c(){e=v("button"),s=j(t),d(e,"class","local-mail-course-filter-input alert-primary form-control px-5 text-left")},m(o,f){var c;w(o,e,f),g(e,s),n||(i=[ke(r=Ge.call(null,e,((c=l[6])==null?void 0:c[l[3]])||"")),O(e,"click",l[12])],n=!0)},p(o,f){var c,m;f&72&&t!==(t=((c=o[6])==null?void 0:c[o[3]])+"")&&R(s,t),r&&he(r.update)&&f&72&&r.update.call(null,((m=o[6])==null?void 0:m[o[3]])||"")},d(o){o&&y(e),n=!1,ge(i)}}}function Qr(l){let e,t,s,r,n;return{c(){e=v("input"),d(e,"type","text"),d(e,"class","local-mail-course-filter-input form-control px-5 text-truncate"),d(e,"placeholder",t=l[4].strings.filterbycourse),d(e,"aria-label",s=l[4].strings.filterbycourse)},m(i,a){w(i,e,a),ve(e,l[1]),l[18](e),r||(n=[O(e,"input",l[17]),O(e,"focus",l[10]),O(e,"keyup",l[15])],r=!0)},p(i,a){a&16&&t!==(t=i[4].strings.filterbycourse)&&d(e,"placeholder",t),a&16&&s!==(s=i[4].strings.filterbycourse)&&d(e,"aria-label",s),a&2&&e.value!==i[1]&&ve(e,i[1])},d(i){i&&y(e),l[18](null),r=!1,ge(n)}}}function Zr(l){var a;let e,t=((a=l[6])==null?void 0:a[l[3]])+"",s,r,n,i;return{c(){e=v("div"),s=j(t),d(e,"class","local-mail-course-filter-input alert-secondary form-control pl-5 pr-2 text-left")},m(o,f){var c;w(o,e,f),g(e,s),n||(i=ke(r=Ge.call(null,e,((c=l[6])==null?void 0:c[l[3]])||"")),n=!0)},p(o,f){var c,m;f&72&&t!==(t=((c=o[6])==null?void 0:c[o[3]])+"")&&R(s,t),r&&he(r.update)&&f&72&&r.update.call(null,((m=o[6])==null?void 0:m[o[3]])||"")},d(o){o&&y(e),n=!1,i()}}}function Bs(l){let e,t,s,r,n,i=l[4].strings.togglefilterresults+"",a,o,f,c;return{c(){e=v("button"),t=v("i"),r=L(),n=v("span"),a=j(i),o=j("n"),d(t,"class",s="fa fa-fw "+l[8]+" svelte-vjiai9"),d(t,"aria-hidden","true"),d(n,"class","sr-only"),d(e,"aria-expanded",l[2]),d(e,"class","btn position-absolute h-100 d-flex align-items-center px-2"),ie(e,"top","0"),ie(e,"right","0")},m(m,u){w(m,e,u),g(e,t),g(e,r),g(e,n),g(n,a),g(n,o),f||(c=O(e,"click",l[12]),f=!0)},p(m,u){u&256&&s!==(s="fa fa-fw "+m[8]+" svelte-vjiai9")&&d(t,"class",s),u&16&&i!==(i=m[4].strings.togglefilterresults+"")&&R(a,i),u&4&&d(e,"aria-expanded",m[2])},d(m){m&&y(e),f=!1,c()}}}function js(l){let e,t,s=l[4].strings.allcourses+"",r,n,i,a,o=[],f=new Map,c,m,u=ue(l[9]);const _=p=>p[22].id;for(let p=0;p<u.length;p+=1){let h=Ns(l,u,p),k=_(h);f.set(k,o[p]=Rs(k,h))}let b=null;return u.length||(b=Is(l)),{c(){e=v("div"),t=v("button"),r=j(s),n=L(),i=v("div"),a=L();for(let p=0;p<o.length;p+=1)o[p].c();b&&b.c(),d(t,"type","button"),d(t,"class","dropdown-item text-truncate svelte-vjiai9"),d(i,"class","dropdown-divider"),d(e,"class","dropdown-menu dropdown-menu-right dropdown-menu-md-left show svelte-vjiai9")},m(p,h){w(p,e,h),g(e,t),g(t,r),g(e,n),g(e,i),g(e,a);for(let k=0;k<o.length;k+=1)o[k]&&o[k].m(e,null);b&&b.m(e,null),c||(m=O(t,"click",l[19]),c=!0)},p(p,h){h&16&&s!==(s=p[4].strings.allcourses+"")&&R(r,s),h&17040&&(u=ue(p[9]),o=ye(o,h,_,1,p,u,f,e,Ye,Rs,null,Ns),!u.length&&b?b.p(p,h):u.length?b&&(b.d(1),b=null):(b=Is(p),b.c(),b.m(e,null)))},d(p){p&&y(e);for(let h=0;h<o.length;h+=1)o[h].d();b&&b.d(),c=!1,m()}}}function Is(l){let e,t=l[4].strings.emptycoursefilterresults+"",s,r;return{c(){e=v("div"),s=j(t),r=L(),d(e,"class","px-4 text-danger")},m(n,i){w(n,e,i),g(e,s),g(e,r)},p(n,i){i&16&&t!==(t=n[4].strings.emptycoursefilterresults+"")&&R(s,t)},d(n){n&&y(e)}}}function Rs(l,e){let t,s,r=e[7](e[22])+"",n,i,a;function o(){return e[20](e[22])}return{key:l,first:null,c(){t=v("button"),s=new Al(!1),n=L(),s.a=n,d(t,"type","button"),d(t,"class","dropdown-item text-truncate svelte-vjiai9"),this.first=t},m(f,c){w(f,t,c),s.m(r,t),g(t,n),i||(a=O(t,"click",o),i=!0)},p(f,c){e=f,c&640&&r!==(r=e[7](e[22])+"")&&s.p(r)},d(f){f&&y(t),i=!1,a()}}}function xr(l){let e,t,s,r,n,i,a;function o(_,b){return _[4].params.tray=="course"?Zr:_[2]||!_[6]?Qr:Jr}let f=o(l),c=f(l),m=l[4].params.tray!="course"&&Bs(l),u=l[2]&&js(l);return{c(){e=v("div"),t=v("div"),t.innerHTML='<i class="fa fa-fw fa-filter" aria-hidden="true"></i>',s=L(),c.c(),r=L(),m&&m.c(),n=L(),u&&u.c(),d(t,"class","position-absolute h-100 d-flex align-items-center px-2 flex-shrink-1"),ie(t,"top","0"),ie(t,"left","0"),d(e,"class","local-mail-course-filter position-relative d-flex ml-auto mr-0 ml-md-0 mr-md-auto svelte-vjiai9")},m(_,b){w(_,e,b),g(e,t),g(e,s),c.m(e,null),g(e,r),m&&m.m(e,null),g(e,n),u&&u.m(e,null),i||(a=ke(ze.call(null,e,l[11])),i=!0)},p(_,[b]){f===(f=o(_))&&c?c.p(_,b):(c.d(1),c=f(_),c&&(c.c(),c.m(e,r))),_[4].params.tray!="course"?m?m.p(_,b):(m=Bs(_),m.c(),m.m(e,n)):m&&(m.d(1),m=null),_[2]?u?u.p(_,b):(u=js(_),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},i:I,o:I,d(_){_&&y(e),c.d(),m&&m.d(),u&&u.d(),i=!1,a()}}}function ei(l,e,t){let s,r,n,i,a,o=I,f=()=>(o(),o=ae(c,B=>t(4,a=B)),c);l.$$.on_destroy.push(()=>o());let{store:c}=e;f();let m,u="",_=!1,b,p;const h=B=>B.replace(/[.*+?^${}()|[\]\\]/gu,"\\$&"),k=async()=>{t(2,_=!0),t(1,u=""),await Fe(),m.focus()},S=()=>{t(2,_=!1),t(1,u="")},z=async()=>{_?S():k()},M=async()=>{await c.selectCourse(),t(2,_=!1),t(1,u="")},$=async B=>{await c.selectCourse(B.id),t(2,_=!1),t(1,u="")},T=B=>{B.key=="Escape"&&(t(2,_=!1),t(1,u=""),m.blur())};function D(){u=this.value,t(1,u)}function N(B){pe[B?"unshift":"push"](()=>{m=B,t(5,m)})}const F=()=>M(),V=B=>$(B);return l.$$set=B=>{"store"in B&&f(t(0,c=B.store))},l.$$.update=()=>{l.$$.dirty&16&&t(3,p=a.settings.filterbycourse=="shortname"?"shortname":"fullname"),l.$$.dirty&16&&t(6,b=a.courses.find(B=>B.id==a.params.courseid)),l.$$.dirty&2&&t(16,s=new RegExp(h(u.trim()).replaceAll(/\s+/gu,"\\s+"),"giu")),l.$$.dirty&65560&&t(9,r=a.courses.filter(B=>B[p].match(s))),l.$$.dirty&6&&t(8,n=_?u?"fa-times":"fa-caret-up":"fa-caret-down"),l.$$.dirty&65544&&t(7,i=B=>B[p].replaceAll(s,J=>J.trim()?"<mark>"+J+"</mark>":J))},[c,u,_,p,a,m,b,i,n,r,k,S,z,M,$,T,s,D,N,F,V]}class ti extends le{constructor(e){super(),ne(this,e,ei,xr,te,{store:0})}}function si(l){let e,t;return e=new Yr({props:{store:l[0]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function li(l){let e,t;return e=new Vr({props:{store:l[0]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function qs(l){let e,t,s,r,n,i;const a=[ri,ni],o=[];function f(c,m){return c[1].params.tray=="trash"?0:1}return t=f(l),s=o[t]=a[t](l),n=new al({props:{store:l[0]}}),{c(){e=v("div"),s.c(),r=L(),U(n.$$.fragment),d(e,"class","btn-group"),d(e,"role","group")},m(c,m){w(c,e,m),o[t].m(e,null),g(e,r),G(n,e,null),i=!0},p(c,m){let u=t;t=f(c),t===u?o[t].p(c,m):(x(),A(o[u],1,1,()=>{o[u]=null}),ee(),s=o[t],s?s.p(c,m):(s=o[t]=a[t](c),s.c()),C(s,1),s.m(e,r));const _={};m&1&&(_.store=c[0]),n.$set(_)},i(c){i||(C(s),C(n.$$.fragment,c),i=!0)},o(c){A(s),A(n.$$.fragment,c),i=!1},d(c){c&&y(e),o[t].d(),H(n)}}}function ni(l){let e,t,s,r;return e=new il({props:{store:l[0]}}),s=new ll({props:{store:l[0]}}),{c(){U(e.$$.fragment),t=L(),U(s.$$.fragment)},m(n,i){G(e,n,i),w(n,t,i),G(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(C(e.$$.fragment,n),C(s.$$.fragment,n),r=!0)},o(n){A(e.$$.fragment,n),A(s.$$.fragment,n),r=!1},d(n){n&&y(t),H(e,n),H(s,n)}}}function ri(l){let e,t,s,r;return e=new fl({props:{store:l[0]}}),s=new nl({props:{store:l[0]}}),{c(){U(e.$$.fragment),t=L(),U(s.$$.fragment)},m(n,i){G(e,n,i),w(n,t,i),G(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(C(e.$$.fragment,n),C(s.$$.fragment,n),r=!0)},o(n){A(e.$$.fragment,n),A(s.$$.fragment,n),r=!1},d(n){n&&y(t),H(e,n),H(s,n)}}}function Es(l){let e,t;return e=new ti({props:{store:l[0]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Ps(l){let e,t;return e=new ol({props:{store:l[0]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function ii(l){let e,t,s,r,n,i=["shortname","fullname"].includes(l[1].settings.filterbycourse),a,o;const f=[li,si],c=[];function m(p,h){return p[1].message?0:1}t=m(l),s=c[t]=f[t](l);let u=l[1].viewSize>=fe.MD&&qs(l),_=i&&Es(l),b=l[1].viewSize>=fe.MD&&Ps(l);return{c(){e=v("div"),s.c(),r=L(),u&&u.c(),n=L(),_&&_.c(),a=L(),b&&b.c(),d(e,"role","toolbar"),d(e,"class","local-mail-toolbar d-flex w-100 svelte-kqp7rd")},m(p,h){w(p,e,h),c[t].m(e,null),g(e,r),u&&u.m(e,null),g(e,n),_&&_.m(e,null),g(e,a),b&&b.m(e,null),o=!0},p(p,[h]){let k=t;t=m(p),t===k?c[t].p(p,h):(x(),A(c[k],1,1,()=>{c[k]=null}),ee(),s=c[t],s?s.p(p,h):(s=c[t]=f[t](p),s.c()),C(s,1),s.m(e,r)),p[1].viewSize>=fe.MD?u?(u.p(p,h),h&2&&C(u,1)):(u=qs(p),u.c(),C(u,1),u.m(e,n)):u&&(x(),A(u,1,1,()=>{u=null}),ee()),h&2&&(i=["shortname","fullname"].includes(p[1].settings.filterbycourse)),i?_?(_.p(p,h),h&2&&C(_,1)):(_=Es(p),_.c(),C(_,1),_.m(e,a)):_&&(x(),A(_,1,1,()=>{_=null}),ee()),p[1].viewSize>=fe.MD?b?(b.p(p,h),h&2&&C(b,1)):(b=Ps(p),b.c(),C(b,1),b.m(e,null)):b&&(x(),A(b,1,1,()=>{b=null}),ee())},i(p){o||(C(s),C(u),C(_),C(b),o=!0)},o(p){A(s),A(u),A(_),A(b),o=!1},d(p){p&&y(e),c[t].d(),u&&u.d(),_&&_.d(),b&&b.d()}}}function ai(l,e,t){let s,r=I,n=()=>(r(),r=ae(i,a=>t(1,s=a)),i);l.$$.on_destroy.push(()=>r());let{store:i}=e;return n(),l.$$set=a=>{"store"in a&&n(t(0,i=a.store))},[i,s]}class oi extends le{constructor(e){super(),ne(this,e,ai,ii,te,{store:0})}}const{window:Fs}=Je;function Us(l){let e,t,s;return{c(){e=v("i"),t=L(),s=j(l[1]),d(e,"class","fa fa-angle-right mx-1"),d(e,"aria-hidden","true")},m(r,n){w(r,e,n),w(r,t,n),w(r,s,n)},p(r,n){n&2&&R(s,r[1])},d(r){r&&(y(e),y(t),y(s))}}}function Gs(l){let e,t,s;return t=new Zs({props:{strings:l[2].strings,courseid:l[2].params.courseid}}),{c(){e=v("div"),U(t.$$.fragment),d(e,"class","flex-shrink-1 text-truncate d-flex")},m(r,n){w(r,e,n),G(t,e,null),s=!0},p(r,n){const i={};n&4&&(i.strings=r[2].strings),n&4&&(i.courseid=r[2].params.courseid),t.$set(i)},i(r){s||(C(t.$$.fragment,r),s=!0)},o(r){A(t.$$.fragment,r),s=!1},d(r){r&&y(e),H(t)}}}function Hs(l){let e,t,s;return t=new Zs({props:{strings:l[2].strings,courseid:l[2].params.courseid}}),{c(){e=v("div"),U(t.$$.fragment),d(e,"class","local-mail-view-side-column svelte-1catyt9")},m(r,n){w(r,e,n),G(t,e,null),s=!0},p(r,n){const i={};n&4&&(i.strings=r[2].strings),n&4&&(i.courseid=r[2].params.courseid),t.$set(i)},i(r){s||(C(t.$$.fragment,r),s=!0)},o(r){A(t.$$.fragment,r),s=!1},d(r){r&&y(e),H(t)}}}function Os(l){let e,t,s;return t=new Bl({props:{settings:l[2].settings,strings:l[2].strings,unread:l[2].unread,drafts:l[2].drafts,courses:l[2].courses,labels:l[2].labels,params:l[2].params,onClick:l[7]}}),{c(){e=v("div"),U(t.$$.fragment),d(e,"class","local-mail-view-side-column svelte-1catyt9")},m(r,n){w(r,e,n),G(t,e,null),s=!0},p(r,n){const i={};n&4&&(i.settings=r[2].settings),n&4&&(i.strings=r[2].strings),n&4&&(i.unread=r[2].unread),n&4&&(i.drafts=r[2].drafts),n&4&&(i.courses=r[2].courses),n&4&&(i.labels=r[2].labels),n&4&&(i.params=r[2].params),n&1&&(i.onClick=r[7]),t.$set(i)},i(r){s||(C(t.$$.fragment,r),s=!0)},o(r){A(t.$$.fragment,r),s=!1},d(r){r&&y(e),H(t)}}}function fi(l){let e,t,s,r;return e=new Zn({props:{store:l[0]}}),s=new wr({props:{store:l[0]}}),{c(){U(e.$$.fragment),t=L(),U(s.$$.fragment)},m(n,i){G(e,n,i),w(n,t,i),G(s,n,i),r=!0},p(n,i){const a={};i&1&&(a.store=n[0]),e.$set(a);const o={};i&1&&(o.store=n[0]),s.$set(o)},i(n){r||(C(e.$$.fragment,n),C(s.$$.fragment,n),r=!0)},o(n){A(e.$$.fragment,n),A(s.$$.fragment,n),r=!1},d(n){n&&y(t),H(e,n),H(s,n)}}}function ui(l){let e,t;return e=new hr({props:{store:l[0],message:l[2].message}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),r&4&&(n.message=s[2].message),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function Ks(l){let e,t;return e=new Sn({props:{store:l[0]}}),{c(){U(e.$$.fragment)},m(s,r){G(e,s,r),t=!0},p(s,r){const n={};r&1&&(n.store=s[0]),e.$set(n)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){H(e,s)}}}function ci(l){let e,t,s,r,n,i=l[2].strings.pluginname+"",a,o,f,c,m,u,_,b,p,h,k,S,z,M,$,T,D,N,F,V,B,J,se,q,Y,re;document.title=e=l[4]+" - "+l[2].strings.pluginname;let oe=l[2].viewSize<fe.LG&&Us(l);u=new Fr({props:{store:l[0]}});let Z=l[2].viewSize<fe.LG&&Gs(l),Q=l[2].viewSize>=fe.LG&&Hs(l);S=new oi({props:{store:l[0]}});let K=l[2].viewSize>=fe.LG&&Os(l);const X=[ui,fi],de=[];function be(W,ce){return W[2].message?0:1}D=be(l),N=de[D]=X[D](l);let E=l[2].viewSize<fe.MD&&Ks(l);return B=new Hr({props:{store:l[0]}}),se=new Vl({props:{store:l[0]}}),{c(){t=L(),s=v("div"),r=v("div"),n=v("h1"),a=j(i),o=L(),oe&&oe.c(),f=L(),c=v("div"),m=v("div"),U(u.$$.fragment),_=L(),Z&&Z.c(),b=L(),p=v("div"),Q&&Q.c(),h=L(),k=v("div"),U(S.$$.fragment),z=L(),M=v("div"),K&&K.c(),$=L(),T=v("div"),N.c(),F=L(),E&&E.c(),V=L(),U(B.$$.fragment),J=L(),U(se.$$.fragment),d(n,"class","h2 local-mail-view-side-column text-truncate mb-4 svelte-1catyt9"),d(m,"class","local-mail-view-search flex-shrink-1 svelte-1catyt9"),d(c,"class","local-mail-view-main-column d-flex mb-4 svelte-1catyt9"),d(r,"class","row align-items-center"),d(k,"class","local-mail-view-main-column d-flex svelte-1catyt9"),d(p,"class","row mb-3"),d(T,"class","local-mail-view-main-column svelte-1catyt9"),d(M,"class","row mb-3"),d(s,"class","local-mail-view container-fluid py-4 svelte-1catyt9"),P(s,"local-mail-loading",l[2].loading)},m(W,ce){w(W,t,ce),w(W,s,ce),g(s,r),g(r,n),g(n,a),g(n,o),oe&&oe.m(n,null),g(r,f),g(r,c),g(c,m),G(u,m,null),g(c,_),Z&&Z.m(c,null),g(s,b),g(s,p),Q&&Q.m(p,null),g(p,h),g(p,k),G(S,k,null),g(s,z),g(s,M),K&&K.m(M,null),g(M,$),g(M,T),de[D].m(T,null),g(s,F),E&&E.m(s,null),g(s,V),G(B,s,null),g(s,J),G(se,s,null),l[8](s),q=!0,Y||(re=[O(Fs,"resize",l[5]),O(Fs,"popstate",l[6])],Y=!0)},p(W,[ce]){(!q||ce&20)&&e!==(e=W[4]+" - "+W[2].strings.pluginname)&&(document.title=e),(!q||ce&4)&&i!==(i=W[2].strings.pluginname+"")&&R(a,i),W[2].viewSize<fe.LG?oe?oe.p(W,ce):(oe=Us(W),oe.c(),oe.m(n,null)):oe&&(oe.d(1),oe=null);const Se={};ce&1&&(Se.store=W[0]),u.$set(Se),W[2].viewSize<fe.LG?Z?(Z.p(W,ce),ce&4&&C(Z,1)):(Z=Gs(W),Z.c(),C(Z,1),Z.m(c,null)):Z&&(x(),A(Z,1,1,()=>{Z=null}),ee()),W[2].viewSize>=fe.LG?Q?(Q.p(W,ce),ce&4&&C(Q,1)):(Q=Hs(W),Q.c(),C(Q,1),Q.m(p,h)):Q&&(x(),A(Q,1,1,()=>{Q=null}),ee());const De={};ce&1&&(De.store=W[0]),S.$set(De),W[2].viewSize>=fe.LG?K?(K.p(W,ce),ce&4&&C(K,1)):(K=Os(W),K.c(),C(K,1),K.m(M,$)):K&&(x(),A(K,1,1,()=>{K=null}),ee());let Ae=D;D=be(W),D===Ae?de[D].p(W,ce):(x(),A(de[Ae],1,1,()=>{de[Ae]=null}),ee(),N=de[D],N?N.p(W,ce):(N=de[D]=X[D](W),N.c()),C(N,1),N.m(T,null)),W[2].viewSize<fe.MD?E?(E.p(W,ce),ce&4&&C(E,1)):(E=Ks(W),E.c(),C(E,1),E.m(s,V)):E&&(x(),A(E,1,1,()=>{E=null}),ee());const Me={};ce&1&&(Me.store=W[0]),B.$set(Me);const _e={};ce&1&&(_e.store=W[0]),se.$set(_e),(!q||ce&4)&&P(s,"local-mail-loading",W[2].loading)},i(W){q||(C(u.$$.fragment,W),C(Z),C(Q),C(S.$$.fragment,W),C(K),C(N),C(E),C(B.$$.fragment,W),C(se.$$.fragment,W),q=!0)},o(W){A(u.$$.fragment,W),A(Z),A(Q),A(S.$$.fragment,W),A(K),A(N),A(E),A(B.$$.fragment,W),A(se.$$.fragment,W),q=!1},d(W){W&&(y(t),y(s)),oe&&oe.d(),H(u),Z&&Z.d(),Q&&Q.d(),H(S),K&&K.d(),de[D].d(),E&&E.d(),H(B),H(se),l[8](null),Y=!1,ge(re)}}}function mi(l,e,t){let s,r,n,i=I,a=()=>(i(),i=ae(o,p=>t(2,n=p)),o);l.$$.on_destroy.push(()=>i());let{store:o}=e;a();let f,c=0;Xe(()=>{o.setViewportSize(window.innerWidth)}),Nl(()=>{c!=n.navigationId&&(c=n.navigationId,f.scrollIntoView())});const m=()=>o.setViewportSize(window.innerWidth),u=()=>o.navigate(Ws()),_=p=>o.navigate(p);function b(p){pe[p?"unshift":"push"](()=>{f=p,t(3,f)})}return l.$$set=p=>{"store"in p&&a(t(0,o=p.store))},l.$$.update=()=>{var p,h;l.$$.dirty&4&&t(1,s=n.params.tray=="inbox"?n.strings.inbox:n.params.tray=="starred"?n.strings.starredmail:n.params.tray=="sent"?n.strings.sentmail:n.params.tray=="drafts"?n.strings.drafts:n.params.tray=="trash"?n.strings.trash:n.params.tray=="label"?((p=n.labels.find(k=>k.id==n.params.labelid))==null?void 0:p.name)||"":n.params.tray=="course"&&((h=n.courses.find(k=>k.id==n.params.courseid))==null?void 0:h.fullname)||""),l.$$.dirty&6&&t(4,r=n.message?n.message.subject:s)},[o,s,n,f,r,m,u,_,b]}class di extends le{constructor(e){super(),ne(this,e,mi,ci,te,{store:0})}}async function _i(){const l=document.getElementById("local-mail-view"),e=document.getElementById("local-mail-navbar"),t=window.local_mail_view_data;if(!t)return;const s=await Pl({userid:t.userid,settings:t.settings,preferences:t.preferences,strings:t.strings});if(l&&new di({target:l,props:{store:s}}),e){e.innerHTML="";const r=new jl({target:e,props:{settings:s.get().settings,strings:s.get().strings,unread:s.get().unread,drafts:s.get().drafts,courses:s.get().courses,labels:s.get().labels,onClick:n=>s.navigate(n)}});s.subscribe(n=>{r.$set({settings:n.settings,strings:n.strings,unread:n.unread,drafts:n.drafts,courses:n.courses,labels:n.labels,params:n.params,onClick:i=>s.navigate(i)})})}}_i();
