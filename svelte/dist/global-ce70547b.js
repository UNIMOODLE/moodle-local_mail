function D(){}const Ce=e=>e;function He(e){return e()}function ze(){return Object.create(null)}function V(e){e.forEach(He)}function H(e){return typeof e=="function"}function Nt(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let fe;function Rt(e,t){return fe||(fe=document.createElement("a")),fe.href=t,e===fe.href}function re(e,t){return e!=e?t==t:e!==t}function xe(e){return Object.keys(e).length===0}function et(e,...t){if(e==null)return D;const n=e.subscribe(...t);return n.unsubscribe?()=>n.unsubscribe():n}function Dt(e){let t;return et(e,n=>t=n)(),t}function tt(e){return e&&H(e.destroy)?e.destroy:D}function Lt(e){const t=typeof e=="string"&&e.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);return t?[parseFloat(t[1]),t[2]||"px"]:[e,"px"]}const Je=typeof window<"u";let Ee=Je?()=>window.performance.now():()=>Date.now(),Me=Je?e=>requestAnimationFrame(e):D;const $=new Set;function Ke(e){$.forEach(t=>{t.c(e)||($.delete(t),t.f())}),$.size!==0&&Me(Ke)}function Se(e){let t;return $.size===0&&Me(Ke),{promise:new Promise(n=>{$.add(t={c:e,f:n})}),abort(){$.delete(t)}}}const Ot=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function S(e,t){e.appendChild(t)}function Qe(e){if(!e)return document;const t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function nt(e){const t=R("style");return it(Qe(e),t),t.sheet}function it(e,t){return S(e.head||e,t),t.sheet}function F(e,t,n){e.insertBefore(t,n||null)}function j(e){e.parentNode&&e.parentNode.removeChild(e)}function Wt(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function R(e){return document.createElement(e)}function te(e){return document.createTextNode(e)}function W(){return te(" ")}function ye(){return te("")}function se(e,t,n,s){return e.addEventListener(t,n,s),()=>e.removeEventListener(t,n,s)}function jt(e){return function(t){return t.preventDefault(),e.call(this,t)}}function Bt(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function h(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function st(e){return Array.from(e.childNodes)}function pe(e,t){t=""+t,e.data!==t&&(e.data=t)}function It(e,t){e.value=t??""}function qt(e,t,n,s){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,s?"important":"")}function Ft(e,t,n){for(let s=0;s<e.options.length;s+=1){const i=e.options[s];if(i.__value===t){i.selected=!0;return}}(!n||t!==void 0)&&(e.selectedIndex=-1)}function Vt(e){const t=e.querySelector(":checked");return t&&t.__value}let ue;function lt(){if(ue===void 0){ue=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ue=!0}}return ue}function Tt(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const s=R("iframe");s.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),s.setAttribute("aria-hidden","true"),s.tabIndex=-1;const i=lt();let l;return i?(s.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",l=se(window,"message",r=>{r.source===s.contentWindow&&t()})):(s.src="about:blank",s.onload=()=>{l=se(s.contentWindow,"resize",t),t()}),S(e,s),()=>{(i||l&&s.contentWindow)&&l(),j(s)}}function T(e,t,n){e.classList[n?"add":"remove"](t)}function rt(e,t,{bubbles:n=!1,cancelable:s=!1}={}){const i=document.createEvent("CustomEvent");return i.initCustomEvent(e,n,s,t),i}const me=new Map;let de=0;function at(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}function ot(e,t){const n={stylesheet:nt(t),rules:{}};return me.set(e,n),n}function Pe(e,t,n,s,i,l,r,a=0){const f=16.666/s;let c=`{
`;for(let b=0;b<=1;b+=f){const E=t+(n-t)*l(b);c+=b*100+`%{${r(E,1-E)}}
`}const _=c+`100% {${r(n,1-n)}}
}`,u=`__svelte_${at(_)}_${a}`,o=Qe(e),{stylesheet:p,rules:g}=me.get(o)||ot(o,e);g[u]||(g[u]=!0,p.insertRule(`@keyframes ${u} ${_}`,p.cssRules.length));const w=e.style.animation||"";return e.style.animation=`${w?`${w}, `:""}${u} ${s}ms linear ${i}ms 1 both`,de+=1,u}function _e(e,t){const n=(e.style.animation||"").split(", "),s=n.filter(t?l=>l.indexOf(t)<0:l=>l.indexOf("__svelte")===-1),i=n.length-s.length;i&&(e.style.animation=s.join(", "),de-=i,de||ft())}function ft(){Me(()=>{de||(me.forEach(e=>{const{ownerNode:t}=e.stylesheet;t&&j(t)}),me.clear())})}function Gt(e,t,n,s){if(!t)return D;const i=e.getBoundingClientRect();if(t.left===i.left&&t.right===i.right&&t.top===i.top&&t.bottom===i.bottom)return D;const{delay:l=0,duration:r=300,easing:a=Ce,start:f=Ee()+l,end:c=f+r,tick:_=D,css:u}=n(e,{from:t,to:i},s);let o=!0,p=!1,g;function w(){u&&(g=Pe(e,0,1,r,l,a,u)),l||(p=!0)}function b(){u&&_e(e,g),o=!1}return Se(E=>{if(!p&&E>=f&&(p=!0),p&&E>=c&&(_(1,0),b()),!o)return!1;if(p){const k=E-f,C=0+1*a(k/r);_(C,1-C)}return!0}),w(),_(0,1),b}function Ht(e){const t=getComputedStyle(e);if(t.position!=="absolute"&&t.position!=="fixed"){const{width:n,height:s}=t,i=e.getBoundingClientRect();e.style.position="absolute",e.style.width=n,e.style.height=s,ut(e,i)}}function ut(e,t){const n=e.getBoundingClientRect();if(t.left!==n.left||t.top!==n.top){const s=getComputedStyle(e),i=s.transform==="none"?"":s.transform;e.style.transform=`${i} translate(${t.left-n.left}px, ${t.top-n.top}px)`}}let le;function ie(e){le=e}function Xe(){if(!le)throw new Error("Function called outside component initialization");return le}function Jt(e){Xe().$$.on_mount.push(e)}function Kt(e){Xe().$$.after_update.push(e)}const Z=[],Ae=[];let x=[];const Ne=[],ct=Promise.resolve();let ve=!1;function mt(){ve||(ve=!0,ct.then(Ye))}function ee(e){x.push(e)}const we=new Set;let Y=0;function Ye(){if(Y!==0)return;const e=le;do{try{for(;Y<Z.length;){const t=Z[Y];Y++,ie(t),dt(t.$$)}}catch(t){throw Z.length=0,Y=0,t}for(ie(null),Z.length=0,Y=0;Ae.length;)Ae.pop()();for(let t=0;t<x.length;t+=1){const n=x[t];we.has(n)||(we.add(n),n())}x.length=0}while(Z.length);for(;Ne.length;)Ne.pop()();ve=!1,we.clear(),ie(e)}function dt(e){if(e.fragment!==null){e.update(),V(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(ee)}}function _t(e){const t=[],n=[];x.forEach(s=>e.indexOf(s)===-1?t.push(s):n.push(s)),n.forEach(s=>s()),x=t}let ne;function Ze(){return ne||(ne=Promise.resolve(),ne.then(()=>{ne=null})),ne}function ge(e,t,n){e.dispatchEvent(rt(`${t?"intro":"outro"}${n}`))}const ce=new Set;let G;function J(){G={r:0,c:[],p:G}}function K(){G.r||V(G.c),G=G.p}function M(e,t){e&&e.i&&(ce.delete(e),e.i(t))}function z(e,t,n,s){if(e&&e.o){if(ce.has(e))return;ce.add(e),G.c.push(()=>{ce.delete(e),s&&(n&&e.d(1),s())}),e.o(t)}else s&&s()}const $e={duration:0};function Qt(e,t,n){const s={direction:"in"};let i=t(e,n,s),l=!1,r,a,f=0;function c(){r&&_e(e,r)}function _(){const{delay:o=0,duration:p=300,easing:g=Ce,tick:w=D,css:b}=i||$e;b&&(r=Pe(e,0,1,p,o,g,b,f++)),w(0,1);const E=Ee()+o,k=E+p;a&&a.abort(),l=!0,ee(()=>ge(e,!0,"start")),a=Se(C=>{if(l){if(C>=k)return w(1,0),ge(e,!0,"end"),c(),l=!1;if(C>=E){const P=g((C-E)/p);w(P,1-P)}}return l})}let u=!1;return{start(){u||(u=!0,_e(e),H(i)?(i=i(s),Ze().then(_)):_())},invalidate(){u=!1},end(){l&&(c(),l=!1)}}}function Xt(e,t,n){const s={direction:"out"};let i=t(e,n,s),l=!0,r;const a=G;a.r+=1;function f(){const{delay:c=0,duration:_=300,easing:u=Ce,tick:o=D,css:p}=i||$e;p&&(r=Pe(e,1,0,_,c,u,p));const g=Ee()+c,w=g+_;ee(()=>ge(e,!1,"start")),Se(b=>{if(l){if(b>=w)return o(0,1),ge(e,!1,"end"),--a.r||V(a.c),!1;if(b>=g){const E=u((b-g)/_);o(1-E,E)}}return l})}return H(i)?Ze().then(()=>{i=i(s),f()}):f(),{end(c){c&&i.tick&&i.tick(1,0),l&&(r&&_e(e,r),l=!1)}}}function Yt(e,t){e.d(1),t.delete(e.key)}function ke(e,t){z(e,1,1,()=>{t.delete(e.key)})}function Zt(e,t){e.f(),ke(e,t)}function Re(e,t,n,s,i,l,r,a,f,c,_,u){let o=e.length,p=l.length,g=o;const w={};for(;g--;)w[e[g].key]=g;const b=[],E=new Map,k=new Map,C=[];for(g=p;g--;){const v=u(i,l,g),N=n(v);let L=r.get(N);L?s&&C.push(()=>L.p(v,t)):(L=c(N,v),L.c()),E.set(N,b[g]=L),N in w&&k.set(N,Math.abs(g-w[N]))}const P=new Set,y=new Set;function U(v){M(v,1),v.m(a,_),r.set(v.key,v),_=v.first,p--}for(;o&&p;){const v=b[p-1],N=e[o-1],L=v.key,O=N.key;v===N?(_=v.first,o--,p--):E.has(O)?!r.has(L)||P.has(L)?U(v):y.has(O)?o--:k.get(L)>k.get(O)?(y.add(L),U(v)):(P.add(O),o--):(f(N,r),o--)}for(;o--;){const v=e[o];E.has(v.key)||f(v,r)}for(;p;)U(b[p-1]);return V(C),b}function q(e){e&&e.c()}function B(e,t,n,s){const{fragment:i,after_update:l}=e.$$;i&&i.m(t,n),s||ee(()=>{const r=e.$$.on_mount.map(He).filter(H);e.$$.on_destroy?e.$$.on_destroy.push(...r):V(r),e.$$.on_mount=[]}),l.forEach(ee)}function I(e,t){const n=e.$$;n.fragment!==null&&(_t(n.after_update),V(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function gt(e,t){e.$$.dirty[0]===-1&&(Z.push(e),mt(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ae(e,t,n,s,i,l,r,a=[-1]){const f=le;ie(e);const c=e.$$={fragment:null,ctx:[],props:l,update:D,not_equal:i,bound:ze(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(f?f.$$.context:[])),callbacks:ze(),dirty:a,skip_bound:!1,root:t.target||f.$$.root};r&&r(c.root);let _=!1;if(c.ctx=n?n(e,t.props||{},(u,o,...p)=>{const g=p.length?p[0]:o;return c.ctx&&i(c.ctx[u],c.ctx[u]=g)&&(!c.skip_bound&&c.bound[u]&&c.bound[u](g),_&&gt(e,u)),o}):[],c.update(),_=!0,V(c.before_update),c.fragment=s?s(c.ctx):!1,t.target){if(t.hydrate){const u=st(t.target);c.fragment&&c.fragment.l(u),u.forEach(j)}else c.fragment&&c.fragment.c();t.intro&&M(e.$$.fragment),B(e,t.target,t.anchor,t.customElement),Ye()}ie(f)}class oe{$destroy(){I(this,1),this.$destroy=D}$on(t,n){if(!H(n))return D;const s=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return s.push(n),()=>{const i=s.indexOf(n);i!==-1&&s.splice(i,1)}}$set(t){this.$$set&&!xe(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function ht(e,t){function n(){e.offsetWidth<e.scrollWidth?e.setAttribute("title",t):e.removeAttribute("title")}return e.style.overflow="hidden",e.style.textOverflow="ellipsis",e.style.whiteSpace="nowrap",e.addEventListener("mouseenter",n),{destroy(){e.removeEventListener("mouseenter",n,!0)}}}function $t(e){return Q()+"compose.php?m="+e}function De(e){let t=Q()+"create.php?sesskey="+be();return e&&(t+="&c="+e),t}function xt(e){return Q()+"view.php?forward=1&sesskey="+be()+"&m="+e}function pt(){return Q()+"preferences.php"}function en(e){return Q()+"view.php?reply=1&sesskey="+be()+"&m="+e}function tn(e){return Q()+"view.php?replyall=1&sesskey="+be()+"&m="+e}function he(e){let t=Q()+"view.php?t="+e.type;return e.courseid&&(t+="&c="+e.courseid),e.labelid&&(t+="&l="+e.labelid),e.messageid&&(t+="&m="+e.messageid),t}function nn(){const e=new URL(window.location.href);return{type:e.searchParams.get("t")||"inbox",courseid:parseInt(e.searchParams.get("c")||"")||void 0,labelid:parseInt(e.searchParams.get("l")||"")||void 0,messageid:parseInt(e.searchParams.get("m")||"")||void 0}}function sn(e,t){const n=new URL(he(e));n.search!=window.location.search&&(t?window.history.replaceState(void 0,"",n.toString()):window.history.pushState(void 0,"",n.toString()))}function Q(){return window.M.cfg.wwwroot+"/local/mail/"}function be(){return window.M.cfg.sesskey}function Le(e){let t,n;return{c(){t=R("span"),n=te(e[3]),h(t,"class","local-mail-menu-item-count badge")},m(s,i){F(s,t,i),S(t,n)},p(s,i){i&8&&pe(n,s[3])},d(s){s&&j(t)}}}function bt(e){let t,n,s,i,l,r,a,f,c,_,u,o,p,g=e[3]>0&&Le(e);return{c(){t=R("a"),n=R("i"),l=W(),r=R("span"),a=te(e[1]),c=W(),g&&g.c(),h(n,"class",s="fa "+e[0]+" fa-fw"),h(n,"aria-hidden","true"),h(n,"style",i=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-bg, var(--local-mail-color-gray-bg));`:""),h(r,"class","flex-fill px-2"),h(t,"class","local-mail-menu-item list-group-item list-group-item-action d-flex align-items-center px-3 py-2"),h(t,"aria-current",e[5]),h(t,"aria-disabled",e[4]),h(t,"role","tab"),h(t,"href",_=he(e[2])),h(t,"style",u=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-fg, var(--local-mail-color-gray-fg));`:""),T(t,"list-group-item-primary",e[5]),T(t,"disabled",e[4])},m(w,b){F(w,t,b),S(t,n),S(t,l),S(t,r),S(r,a),S(t,c),g&&g.m(t,null),o||(p=[tt(f=ht.call(null,r,e[1])),se(t,"click",function(){H(e[7])&&e[7].apply(this,arguments)})],o=!0)},p(w,[b]){e=w,b&1&&s!==(s="fa "+e[0]+" fa-fw")&&h(n,"class",s),b&96&&i!==(i=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-bg, var(--local-mail-color-gray-bg));`:"")&&h(n,"style",i),b&2&&pe(a,e[1]),f&&H(f.update)&&b&2&&f.update.call(null,e[1]),e[3]>0?g?g.p(e,b):(g=Le(e),g.c(),g.m(t,null)):g&&(g.d(1),g=null),b&32&&h(t,"aria-current",e[5]),b&16&&h(t,"aria-disabled",e[4]),b&4&&_!==(_=he(e[2]))&&h(t,"href",_),b&96&&u!==(u=e[6]!=null&&!e[5]?`color: var(--local-mail-color-${e[6]}-fg, var(--local-mail-color-gray-fg));`:"")&&h(t,"style",u),b&32&&T(t,"list-group-item-primary",e[5]),b&16&&T(t,"disabled",e[4])},i:D,o:D,d(w){w&&j(t),g&&g.d(),o=!1,V(p)}}}function wt(e,t,n){let s,{icon:i}=t,{text:l}=t,{params:r}=t,{count:a=0}=t,{disabled:f=!1}=t,{active:c=!1}=t,{color:_=void 0}=t,{onClick:u=void 0}=t;return e.$$set=o=>{"icon"in o&&n(0,i=o.icon),"text"in o&&n(1,l=o.text),"params"in o&&n(2,r=o.params),"count"in o&&n(3,a=o.count),"disabled"in o&&n(4,f=o.disabled),"active"in o&&n(5,c=o.active),"color"in o&&n(6,_=o.color),"onClick"in o&&n(8,u=o.onClick)},e.$$.update=()=>{e.$$.dirty&260&&n(7,s=o=>{u&&(o.preventDefault(),u(r))})},[i,l,r,a,f,c,_,s,u]}class X extends oe{constructor(t){super(),ae(this,t,wt,bt,re,{icon:0,text:1,params:2,count:3,disabled:4,active:5,color:6,onClick:8})}}function Oe(e,t,n){const s=e.slice();return s[8]=t[n],s}function We(e,t,n){const s=e.slice();return s[11]=t[n],s}function je(e){var s;let t,n;return t=new X({props:{icon:"fa-star",text:e[1].starredmail,params:{type:"starred"},active:((s=e[3])==null?void 0:s.type)=="starred",onClick:e[4]}}),{c(){q(t.$$.fragment)},m(i,l){B(t,i,l),n=!0},p(i,l){var a;const r={};l&2&&(r.text=i[1].starredmail),l&8&&(r.active=((a=i[3])==null?void 0:a.type)=="starred"),l&16&&(r.onClick=i[4]),t.$set(r)},i(i){n||(M(t.$$.fragment,i),n=!0)},o(i){z(t.$$.fragment,i),n=!1},d(i){I(t,i)}}}function Be(e){var s;let t,n;return t=new X({props:{icon:"fa-paper-plane",text:e[1].sentmail,params:{type:"sent"},active:((s=e[3])==null?void 0:s.type)=="sent",onClick:e[4]}}),{c(){q(t.$$.fragment)},m(i,l){B(t,i,l),n=!0},p(i,l){var a;const r={};l&2&&(r.text=i[1].sentmail),l&8&&(r.active=((a=i[3])==null?void 0:a.type)=="sent"),l&16&&(r.onClick=i[4]),t.$set(r)},i(i){n||(M(t.$$.fragment,i),n=!0)},o(i){z(t.$$.fragment,i),n=!1},d(i){I(t,i)}}}function Ie(e){var s;let t,n;return t=new X({props:{icon:"fa-file",text:e[1].drafts,count:e[2].drafts,params:{type:"drafts"},active:((s=e[3])==null?void 0:s.type)=="drafts",onClick:e[4]}}),{c(){q(t.$$.fragment)},m(i,l){B(t,i,l),n=!0},p(i,l){var a;const r={};l&2&&(r.text=i[1].drafts),l&4&&(r.count=i[2].drafts),l&8&&(r.active=((a=i[3])==null?void 0:a.type)=="drafts"),l&16&&(r.onClick=i[4]),t.$set(r)},i(i){n||(M(t.$$.fragment,i),n=!0)},o(i){z(t.$$.fragment,i),n=!1},d(i){I(t,i)}}}function qe(e){var s;let t,n;return t=new X({props:{icon:"fa-trash",text:e[1].trash,params:{type:"trash"},active:((s=e[3])==null?void 0:s.type)=="trash",onClick:e[4]}}),{c(){q(t.$$.fragment)},m(i,l){B(t,i,l),n=!0},p(i,l){var a;const r={};l&2&&(r.text=i[1].trash),l&8&&(r.active=((a=i[3])==null?void 0:a.type)=="trash"),l&16&&(r.onClick=i[4]),t.$set(r)},i(i){n||(M(t.$$.fragment,i),n=!0)},o(i){z(t.$$.fragment,i),n=!1},d(i){I(t,i)}}}function Fe(e,t){var l,r;let n,s,i;return s=new X({props:{icon:"fa-tag",text:t[11].name,count:t[11].unread,color:t[11].color,params:{type:"label",labelid:t[11].id},active:((l=t[3])==null?void 0:l.type)=="label"&&((r=t[3])==null?void 0:r.labelid)==t[11].id,onClick:t[4]}}),{key:e,first:null,c(){n=ye(),q(s.$$.fragment),this.first=n},m(a,f){F(a,n,f),B(s,a,f),i=!0},p(a,f){var _,u;t=a;const c={};f&4&&(c.text=t[11].name),f&4&&(c.count=t[11].unread),f&4&&(c.color=t[11].color),f&4&&(c.params={type:"label",labelid:t[11].id}),f&12&&(c.active=((_=t[3])==null?void 0:_.type)=="label"&&((u=t[3])==null?void 0:u.labelid)==t[11].id),f&16&&(c.onClick=t[4]),s.$set(c)},i(a){i||(M(s.$$.fragment,a),i=!0)},o(a){z(s.$$.fragment,a),i=!1},d(a){a&&j(n),I(s,a)}}}function Ve(e){var s,i;let t,n;return t=new X({props:{icon:"fa-university",text:e[0].coursetraysname=="fullname"?e[8].fullname:e[8].shortname,count:e[8].unread,params:{type:"course",courseid:e[8].id},active:((s=e[3])==null?void 0:s.type)=="course"&&((i=e[3])==null?void 0:i.courseid)==e[8].id,onClick:e[4]}}),{c(){q(t.$$.fragment)},m(l,r){B(t,l,r),n=!0},p(l,r){var f,c;const a={};r&5&&(a.text=l[0].coursetraysname=="fullname"?l[8].fullname:l[8].shortname),r&4&&(a.count=l[8].unread),r&4&&(a.params={type:"course",courseid:l[8].id}),r&12&&(a.active=((f=l[3])==null?void 0:f.type)=="course"&&((c=l[3])==null?void 0:c.courseid)==l[8].id),r&16&&(a.onClick=l[4]),t.$set(a)},i(l){n||(M(t.$$.fragment,l),n=!0)},o(l){z(t.$$.fragment,l),n=!1},d(l){I(t,l)}}}function Te(e,t){let n,s=t[6](t[8]),i,l,r=s&&Ve(t);return{key:e,first:null,c(){n=ye(),r&&r.c(),i=ye(),this.first=n},m(a,f){F(a,n,f),r&&r.m(a,f),F(a,i,f),l=!0},p(a,f){t=a,f&68&&(s=t[6](t[8])),s?r?(r.p(t,f),f&68&&M(r,1)):(r=Ve(t),r.c(),M(r,1),r.m(i.parentNode,i)):r&&(J(),z(r,1,1,()=>{r=null}),K())},i(a){l||(M(r),l=!0)},o(a){z(r),l=!1},d(a){a&&j(n),r&&r.d(a),a&&j(i)}}}function yt(e){var O;let t,n,s,i=e[7]("starred"),l,r=e[7]("sent"),a,f=e[7]("drafts"),c,_=e[7]("trash"),u,o=[],p=new Map,g,w=[],b=new Map,E;n=new X({props:{icon:"fa-inbox",text:e[1].inbox,count:e[2].unread,params:{type:"inbox"},active:((O=e[3])==null?void 0:O.type)=="inbox",onClick:e[4]}});let k=i&&je(e),C=r&&Be(e),P=f&&Ie(e),y=_&&qe(e),U=e[2].labels;const v=d=>d[11].id;for(let d=0;d<U.length;d+=1){let m=We(e,U,d),A=v(m);p.set(A,o[d]=Fe(A,m))}let N=e[2].courses;const L=d=>d[8].id;for(let d=0;d<N.length;d+=1){let m=Oe(e,N,d),A=L(m);b.set(A,w[d]=Te(A,m))}return{c(){t=R("div"),q(n.$$.fragment),s=W(),k&&k.c(),l=W(),C&&C.c(),a=W(),P&&P.c(),c=W(),y&&y.c(),u=W();for(let d=0;d<o.length;d+=1)o[d].c();g=W();for(let d=0;d<w.length;d+=1)w[d].c();h(t,"class","list-group"),T(t,"list-group-flush",e[5])},m(d,m){F(d,t,m),B(n,t,null),S(t,s),k&&k.m(t,null),S(t,l),C&&C.m(t,null),S(t,a),P&&P.m(t,null),S(t,c),y&&y.m(t,null),S(t,u);for(let A=0;A<o.length;A+=1)o[A]&&o[A].m(t,null);S(t,g);for(let A=0;A<w.length;A+=1)w[A]&&w[A].m(t,null);E=!0},p(d,[m]){var Ue;const A={};m&2&&(A.text=d[1].inbox),m&4&&(A.count=d[2].unread),m&8&&(A.active=((Ue=d[3])==null?void 0:Ue.type)=="inbox"),m&16&&(A.onClick=d[4]),n.$set(A),m&128&&(i=d[7]("starred")),i?k?(k.p(d,m),m&128&&M(k,1)):(k=je(d),k.c(),M(k,1),k.m(t,l)):k&&(J(),z(k,1,1,()=>{k=null}),K()),m&128&&(r=d[7]("sent")),r?C?(C.p(d,m),m&128&&M(C,1)):(C=Be(d),C.c(),M(C,1),C.m(t,a)):C&&(J(),z(C,1,1,()=>{C=null}),K()),m&128&&(f=d[7]("drafts")),f?P?(P.p(d,m),m&128&&M(P,1)):(P=Ie(d),P.c(),M(P,1),P.m(t,c)):P&&(J(),z(P,1,1,()=>{P=null}),K()),m&128&&(_=d[7]("trash")),_?y?(y.p(d,m),m&128&&M(y,1)):(y=qe(d),y.c(),M(y,1),y.m(t,u)):y&&(J(),z(y,1,1,()=>{y=null}),K()),m&28&&(U=d[2].labels,J(),o=Re(o,m,v,1,d,U,p,t,ke,Fe,g,We),K()),m&93&&(N=d[2].courses,J(),w=Re(w,m,L,1,d,N,b,t,ke,Te,null,Oe),K()),(!E||m&32)&&T(t,"list-group-flush",d[5])},i(d){if(!E){M(n.$$.fragment,d),M(k),M(C),M(P),M(y);for(let m=0;m<U.length;m+=1)M(o[m]);for(let m=0;m<N.length;m+=1)M(w[m]);E=!0}},o(d){z(n.$$.fragment,d),z(k),z(C),z(P),z(y);for(let m=0;m<o.length;m+=1)z(o[m]);for(let m=0;m<w.length;m+=1)z(w[m]);E=!1},d(d){d&&j(t),I(n),k&&k.d(),C&&C.d(),P&&P.d(),y&&y.d();for(let m=0;m<o.length;m+=1)o[m].d();for(let m=0;m<w.length;m+=1)w[m].d()}}}function vt(e,t,n){let s,i,{settings:l}=t,{strings:r}=t,{menu:a}=t,{params:f=void 0}=t,{onClick:c=void 0}=t,{flush:_=!1}=t;return e.$$set=u=>{"settings"in u&&n(0,l=u.settings),"strings"in u&&n(1,r=u.strings),"menu"in u&&n(2,a=u.menu),"params"in u&&n(3,f=u.params),"onClick"in u&&n(4,c=u.onClick),"flush"in u&&n(5,_=u.flush)},e.$$.update=()=>{e.$$.dirty&9&&n(7,s=u=>l.globaltrays.includes(u)||(f==null?void 0:f.type)==u),e.$$.dirty&9&&n(6,i=u=>l.coursetrays=="all"||l.coursetrays=="unread"&&u.unread>0||(f==null?void 0:f.type)=="course"&&(f==null?void 0:f.courseid)==u.id)},[l,r,a,f,c,_,i,s]}class kt extends oe{constructor(t){super(),ae(this,t,vt,yt,re,{settings:0,strings:1,menu:2,params:3,onClick:4,flush:5})}}function Ct(e){let t,n,s,i=e[0].compose+"",l,r;return{c(){t=R("a"),n=R("i"),s=W(),l=te(i),h(n,"class","icon fa fa-fw fa-edit mr-1"),h(t,"class","btn btn-primary text-truncate px-3"),h(t,"role","button"),h(t,"href",r=De(e[1]))},m(a,f){F(a,t,f),S(t,n),S(t,s),S(t,l)},p(a,[f]){f&1&&i!==(i=a[0].compose+"")&&pe(l,i),f&2&&r!==(r=De(a[1]))&&h(t,"href",r)},i:D,o:D,d(a){a&&j(t)}}}function Et(e,t,n){let{strings:s}=t,{courseid:i=void 0}=t;return e.$$set=l=>{"strings"in l&&n(0,s=l.strings),"courseid"in l&&n(1,i=l.courseid)},[s,i]}class Mt extends oe{constructor(t){super(),ae(this,t,Et,Ct,re,{strings:0,courseid:1})}}function St(e){let t,n,s;return{c(){t=R("a"),n=R("i"),h(n,"class","fa fa-cog"),h(n,"aria-hidden",!0),h(t,"class","btn btn-secondary text-truncate"),h(t,"role","button"),h(t,"href",pt()),h(t,"title",s=e[0].preferences)},m(i,l){F(i,t,l),S(t,n)},p(i,[l]){l&1&&s!==(s=i[0].preferences)&&h(t,"title",s)},i:D,o:D,d(i){i&&j(t)}}}function Pt(e,t,n){let{strings:s}=t;return e.$$set=i=>{"strings"in i&&n(0,s=i.strings)},[s]}class Ut extends oe{constructor(t){super(),ae(this,t,Pt,St,re,{strings:0})}}function Ge(e){let t,n=e[2].unread+"",s;return{c(){t=R("div"),s=te(n),h(t,"class","local-mail-navbar-count count-container svelte-k2oznn")},m(i,l){F(i,t,l),S(t,s)},p(i,l){l&4&&n!==(n=i[2].unread+"")&&pe(s,n)},d(i){i&&j(t)}}}function zt(e){let t,n,s,i,l,r,a,f,c,_,u,o,p,g,w,b,E,k,C,P;ee(e[8]);let y=e[2].unread>0&&Ge(e);return u=new Mt({props:{strings:e[1]}}),p=new Ut({props:{strings:e[1]}}),E=new kt({props:{settings:e[0],strings:e[1],menu:e[2],params:e[3],onClick:e[4],flush:!0}}),{c(){t=R("div"),n=R("a"),s=R("i"),l=W(),y&&y.c(),f=W(),c=R("div"),_=R("div"),q(u.$$.fragment),o=W(),q(p.$$.fragment),g=W(),w=R("hr"),b=W(),q(E.$$.fragment),h(s,"class","fa fa-fw fa-envelope-o"),h(s,"aria-label",i=e[1].plugginname),h(n,"data-toggle",r=e[5]?"dropdown":void 0),h(n,"aria-expanded","false"),h(n,"aria-label",a=e[1].togglemailmenu),h(n,"class","btn h-100 position-relative d-flex align-items-center px-2 py-0"),h(n,"href",he({type:"inbox"})),h(_,"class","d-flex justify-content-between pl-3 pr-2 py-2"),h(w,"class","m-0"),h(c,"class","local-mail-navbar-dropdown dropdown-menu dropdown-menu-right p-0 svelte-k2oznn"),h(t,"class","local-mail-navbar dropdown h-100 svelte-k2oznn"),T(t,"position-static",e[6]<768)},m(U,v){F(U,t,v),S(t,n),S(n,s),S(n,l),y&&y.m(n,null),S(t,f),S(t,c),S(c,_),B(u,_,null),S(_,o),B(p,_,null),S(c,g),S(c,w),S(c,b),B(E,c,null),k=!0,C||(P=[se(window,"resize",e[8]),se(n,"click",function(){H(e[7])&&e[7].apply(this,arguments)})],C=!0)},p(U,[v]){e=U,(!k||v&2&&i!==(i=e[1].plugginname))&&h(s,"aria-label",i),e[2].unread>0?y?y.p(e,v):(y=Ge(e),y.c(),y.m(n,null)):y&&(y.d(1),y=null),(!k||v&32&&r!==(r=e[5]?"dropdown":void 0))&&h(n,"data-toggle",r),(!k||v&2&&a!==(a=e[1].togglemailmenu))&&h(n,"aria-label",a);const N={};v&2&&(N.strings=e[1]),u.$set(N);const L={};v&2&&(L.strings=e[1]),p.$set(L);const O={};v&1&&(O.settings=e[0]),v&2&&(O.strings=e[1]),v&4&&(O.menu=e[2]),v&8&&(O.params=e[3]),v&16&&(O.onClick=e[4]),E.$set(O),(!k||v&64)&&T(t,"position-static",e[6]<768)},i(U){k||(M(u.$$.fragment,U),M(p.$$.fragment,U),M(E.$$.fragment,U),k=!0)},o(U){z(u.$$.fragment,U),z(p.$$.fragment,U),z(E.$$.fragment,U),k=!1},d(U){U&&j(t),y&&y.d(),I(u),I(p),I(E),C=!1,V(P)}}}function At(e,t,n){let s,i,{settings:l}=t,{strings:r}=t,{menu:a}=t,{params:f=void 0}=t,{onClick:c=void 0}=t,_;function u(){n(6,_=window.innerWidth)}return e.$$set=o=>{"settings"in o&&n(0,l=o.settings),"strings"in o&&n(1,r=o.strings),"menu"in o&&n(2,a=o.menu),"params"in o&&n(3,f=o.params),"onClick"in o&&n(4,c=o.onClick)},e.$$.update=()=>{e.$$.dirty&5&&n(5,s=l.globaltrays.length>0||a.labels.length>0),e.$$.dirty&48&&n(7,i=o=>{s?o.preventDefault():c&&(o.preventDefault(),c({type:"inbox"}))})},[l,r,a,f,c,s,_,i,u]}class ln extends oe{constructor(t){super(),ae(this,t,At,zt,re,{settings:0,strings:1,menu:2,params:3,onClick:4})}}export{en as $,jt as A,Re as B,Yt as C,V as D,Ae as E,Ot as F,Bt as G,J as H,K as I,ye as J,ee as K,qt as L,Tt as M,Jt as N,Lt as O,Ce as P,ht as Q,ke as R,oe as S,Qt as T,he as U,Zt as V,$t as W,Ht as X,ut as Y,Gt as Z,Xt as _,sn as a,tn as a0,xt as a1,Wt as a2,Rt as a3,Ft as a4,Vt as a5,Kt as a6,Mt as a7,kt as a8,ln as a9,nn as b,re as c,W as d,R as e,h as f,Dt as g,F as h,ae as i,S as j,tt as k,pe as l,H as m,D as n,j as o,et as p,T as q,se as r,Nt as s,te as t,q as u,B as v,M as w,z as x,I as y,It as z};
